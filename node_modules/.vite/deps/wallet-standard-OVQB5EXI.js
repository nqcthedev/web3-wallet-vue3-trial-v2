import {
  SolConstantsUtil
} from "./chunk-L4KX35A2.js";
import {
  PublicKey,
  Transaction,
  VersionedTransaction
} from "./chunk-F7EPBY3M.js";
import {
  esm_default
} from "./chunk-VXPZBJVA.js";
import "./chunk-4Z2ZRXRP.js";
import "./chunk-H5SMHTBZ.js";
import {
  RouterController
} from "./chunk-J5D4ZCFA.js";
import {
  ParseUtil
} from "./chunk-E52V435I.js";
import "./chunk-TM3FN7TW.js";
import "./chunk-ZMNNWV57.js";
import "./chunk-PK3FUKRV.js";
import "./chunk-DOW7LSSZ.js";
import "./chunk-4X65JDLI.js";
import "./chunk-UU24B44V.js";
import "./chunk-Z6GLK4M2.js";
import "./chunk-KR3SNR3Q.js";
import "./chunk-XIJ6CS2S.js";
import "./chunk-HXNQWV53.js";
import "./chunk-DI52DQAC.js";

// node_modules/@wallet-standard/wallet/lib/esm/register.js
var __classPrivateFieldGet = function(receiver, state, kind, f) {
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var __classPrivateFieldSet = function(receiver, state, value, kind, f) {
  if (kind === "m") throw new TypeError("Private method is not writable");
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var _RegisterWalletEvent_detail;
function registerWallet(wallet) {
  const callback = ({ register }) => register(wallet);
  try {
    window.dispatchEvent(new RegisterWalletEvent(callback));
  } catch (error) {
    console.error("wallet-standard:register-wallet event could not be dispatched\n", error);
  }
  try {
    window.addEventListener("wallet-standard:app-ready", ({ detail: api }) => callback(api));
  } catch (error) {
    console.error("wallet-standard:app-ready event listener could not be added\n", error);
  }
}
var RegisterWalletEvent = class extends Event {
  get detail() {
    return __classPrivateFieldGet(this, _RegisterWalletEvent_detail, "f");
  }
  get type() {
    return "wallet-standard:register-wallet";
  }
  constructor(callback) {
    super("wallet-standard:register-wallet", {
      bubbles: false,
      cancelable: false,
      composed: false
    });
    _RegisterWalletEvent_detail.set(this, void 0);
    __classPrivateFieldSet(this, _RegisterWalletEvent_detail, callback, "f");
  }
  /** @deprecated */
  preventDefault() {
    throw new Error("preventDefault cannot be called");
  }
  /** @deprecated */
  stopImmediatePropagation() {
    throw new Error("stopImmediatePropagation cannot be called");
  }
  /** @deprecated */
  stopPropagation() {
    throw new Error("stopPropagation cannot be called");
  }
};
_RegisterWalletEvent_detail = /* @__PURE__ */ new WeakMap();

// node_modules/@wallet-standard/wallet/lib/esm/util.js
var _ReadonlyWalletAccount_address;
var _ReadonlyWalletAccount_publicKey;
var _ReadonlyWalletAccount_chains;
var _ReadonlyWalletAccount_features;
var _ReadonlyWalletAccount_label;
var _ReadonlyWalletAccount_icon;
_ReadonlyWalletAccount_address = /* @__PURE__ */ new WeakMap(), _ReadonlyWalletAccount_publicKey = /* @__PURE__ */ new WeakMap(), _ReadonlyWalletAccount_chains = /* @__PURE__ */ new WeakMap(), _ReadonlyWalletAccount_features = /* @__PURE__ */ new WeakMap(), _ReadonlyWalletAccount_label = /* @__PURE__ */ new WeakMap(), _ReadonlyWalletAccount_icon = /* @__PURE__ */ new WeakMap();

// node_modules/@reown/appkit-utils/dist/esm/src/WCNamespaceUtil.js
var DEFAULT_METHODS = {
  ton: ["ton_sendMessage", "ton_signData"],
  solana: [
    "solana_signMessage",
    "solana_signTransaction",
    "solana_requestAccounts",
    "solana_getAccounts",
    "solana_signAllTransactions",
    "solana_signAndSendTransaction"
  ],
  eip155: [
    "eth_accounts",
    "eth_requestAccounts",
    "eth_sendRawTransaction",
    "eth_sign",
    "eth_signTransaction",
    "eth_signTypedData",
    "eth_signTypedData_v3",
    "eth_signTypedData_v4",
    "eth_sendTransaction",
    "personal_sign",
    "wallet_switchEthereumChain",
    "wallet_addEthereumChain",
    "wallet_getPermissions",
    "wallet_requestPermissions",
    "wallet_registerOnboarding",
    "wallet_watchAsset",
    "wallet_scanQRCode",
    // EIP-5792
    "wallet_getCallsStatus",
    "wallet_showCallsStatus",
    "wallet_sendCalls",
    "wallet_getCapabilities",
    // EIP-7715
    "wallet_grantPermissions",
    "wallet_revokePermissions",
    //EIP-7811
    "wallet_getAssets"
  ],
  bip122: ["sendTransfer", "signMessage", "signPsbt", "getAccountAddresses"]
};
var solanaChainIds = {
  mainnet: "5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",
  deprecatedMainnet: "4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",
  devnet: "EtWTRABZaYq6iMfeYKouRu166VU2xqa1",
  deprecatedDevnet: "8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"
};
function getMethodsByChainNamespace(chainNamespace) {
  return DEFAULT_METHODS[chainNamespace] || [];
}
function createDefaultNamespace(chainNamespace) {
  return {
    methods: getMethodsByChainNamespace(chainNamespace),
    events: ["accountsChanged", "chainChanged"],
    chains: [],
    rpcMap: {}
  };
}
function createNamespaces(caipNetworks) {
  return caipNetworks.reduce((acc, chain) => {
    const { id, chainNamespace, rpcUrls } = chain;
    const rpcUrl = rpcUrls.default.http[0];
    if (!acc[chainNamespace]) {
      acc[chainNamespace] = createDefaultNamespace(chainNamespace);
    }
    const caipNetworkId = `${chainNamespace}:${id}`;
    const namespace = acc[chainNamespace];
    namespace?.chains.push(caipNetworkId);
    switch (caipNetworkId) {
      case solanaChainIds.mainnet:
        namespace.chains.push(solanaChainIds.deprecatedMainnet);
        break;
      case solanaChainIds.devnet:
        namespace.chains.push(solanaChainIds.deprecatedDevnet);
        break;
      default:
    }
    if (namespace?.rpcMap && rpcUrl) {
      namespace.rpcMap[id] = rpcUrl;
    }
    return acc;
  }, {});
}

// node_modules/@reown/appkit-utils/dist/esm/src/wallet-standard/constants.js
var SOLANA_CHAINS = [
  "solana:mainnet",
  "solana:devnet",
  "solana:testnet",
  "solana:localnet"
];

// node_modules/@reown/appkit-utils/dist/esm/src/wallet-standard/WalletConnectAccount.js
var __classPrivateFieldGet2 = function(receiver, state, kind, f) {
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var __classPrivateFieldSet2 = function(receiver, state, value, kind, f) {
  if (kind === "m") throw new TypeError("Private method is not writable");
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var _WalletConnectAccount_address;
var _WalletConnectAccount_publicKey;
var _WalletConnectAccount_chains;
var _WalletConnectAccount_features;
var _WalletConnectAccount_label;
var _WalletConnectAccount_icon;
var WalletConnectAccount = class {
  get address() {
    return __classPrivateFieldGet2(this, _WalletConnectAccount_address, "f");
  }
  get publicKey() {
    return __classPrivateFieldGet2(this, _WalletConnectAccount_publicKey, "f").slice();
  }
  get chains() {
    return __classPrivateFieldGet2(this, _WalletConnectAccount_chains, "f").slice();
  }
  get features() {
    return __classPrivateFieldGet2(this, _WalletConnectAccount_features, "f").slice();
  }
  get label() {
    return __classPrivateFieldGet2(this, _WalletConnectAccount_label, "f");
  }
  get icon() {
    return __classPrivateFieldGet2(this, _WalletConnectAccount_icon, "f");
  }
  constructor({ address, publicKey, label, icon }) {
    _WalletConnectAccount_address.set(this, void 0);
    _WalletConnectAccount_publicKey.set(this, void 0);
    _WalletConnectAccount_chains.set(this, void 0);
    _WalletConnectAccount_features.set(this, void 0);
    _WalletConnectAccount_label.set(this, void 0);
    _WalletConnectAccount_icon.set(this, void 0);
    __classPrivateFieldSet2(this, _WalletConnectAccount_address, address, "f");
    __classPrivateFieldSet2(this, _WalletConnectAccount_publicKey, publicKey, "f");
    __classPrivateFieldSet2(this, _WalletConnectAccount_chains, SOLANA_CHAINS, "f");
    __classPrivateFieldSet2(this, _WalletConnectAccount_features, [
      "solana:signAndSendTransaction",
      "solana:signTransaction",
      "solana:signMessage"
    ], "f");
    __classPrivateFieldSet2(this, _WalletConnectAccount_label, label, "f");
    __classPrivateFieldSet2(this, _WalletConnectAccount_icon, icon, "f");
  }
};
_WalletConnectAccount_address = /* @__PURE__ */ new WeakMap(), _WalletConnectAccount_publicKey = /* @__PURE__ */ new WeakMap(), _WalletConnectAccount_chains = /* @__PURE__ */ new WeakMap(), _WalletConnectAccount_features = /* @__PURE__ */ new WeakMap(), _WalletConnectAccount_label = /* @__PURE__ */ new WeakMap(), _WalletConnectAccount_icon = /* @__PURE__ */ new WeakMap();

// node_modules/@reown/appkit-utils/dist/esm/src/wallet-standard/utils.js
function isSolanaChain(chain) {
  return SOLANA_CHAINS.includes(chain);
}
function isVersionedTransaction(transaction) {
  return "version" in transaction;
}

// node_modules/@reown/appkit-utils/dist/esm/src/wallet-standard/SolanaWalletConnectStandardWallet.js
var __classPrivateFieldGet3 = function(receiver, state, kind, f) {
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var __classPrivateFieldSet3 = function(receiver, state, value, kind, f) {
  if (kind === "m") throw new TypeError("Private method is not writable");
  if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var _SolanaWalletConnectStandardWallet_instances;
var _SolanaWalletConnectStandardWallet_listeners;
var _SolanaWalletConnectStandardWallet_version;
var _SolanaWalletConnectStandardWallet_provider;
var _SolanaWalletConnectStandardWallet_name;
var _SolanaWalletConnectStandardWallet_icon;
var _SolanaWalletConnectStandardWallet_account;
var _SolanaWalletConnectStandardWallet_on;
var _SolanaWalletConnectStandardWallet_emit;
var _SolanaWalletConnectStandardWallet_off;
var _SolanaWalletConnectStandardWallet_connected;
var _SolanaWalletConnectStandardWallet_disconnected;
var _SolanaWalletConnectStandardWallet_reconnected;
var _SolanaWalletConnectStandardWallet_connect;
var _SolanaWalletConnectStandardWallet_disconnect;
var _SolanaWalletConnectStandardWallet_signAndSendTransaction;
var _SolanaWalletConnectStandardWallet_signTransaction;
var _SolanaWalletConnectStandardWallet_signMessage;
function caipNetworkToStandardChain(caipNetworkId) {
  const map = {
    "solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp": "solana:mainnet",
    "solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ": "solana:mainnet",
    "solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z": "solana:testnet",
    "solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K": "solana:devnet",
    "solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1": "solana:devnet"
  };
  return map[caipNetworkId];
}
var SolanaWalletConnectStandardWallet = class _SolanaWalletConnectStandardWallet {
  static register(provider) {
    const instance = new _SolanaWalletConnectStandardWallet(provider);
    registerWallet(instance);
  }
  get version() {
    return __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_version, "f");
  }
  get name() {
    return __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_name, "f");
  }
  get icon() {
    return __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_icon, "f");
  }
  get chains() {
    return SOLANA_CHAINS.slice();
  }
  /* eslint-disable @typescript-eslint/no-redundant-type-constituents */
  get features() {
    return {
      "standard:connect": {
        version: "1.0.0",
        connect: __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_connect, "f")
      },
      "standard:disconnect": {
        version: "1.0.0",
        disconnect: __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_disconnect, "f")
      },
      "standard:events": {
        version: "1.0.0",
        on: __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_on, "f")
      },
      "solana:signAndSendTransaction": {
        version: "1.0.0",
        supportedTransactionVersions: ["legacy", 0],
        signAndSendTransaction: __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_signAndSendTransaction, "f")
      },
      "solana:signTransaction": {
        version: "1.0.0",
        supportedTransactionVersions: ["legacy", 0],
        signTransaction: __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_signTransaction, "f")
      },
      "solana:signMessage": {
        version: "1.0.0",
        signMessage: __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_signMessage, "f")
      }
    };
  }
  get accounts() {
    const solanaNamespace = __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_provider, "f").session?.namespaces?.["solana"];
    const standardChains = solanaNamespace?.chains?.map((chain) => caipNetworkToStandardChain(chain));
    return solanaNamespace?.accounts.map((account) => {
      const { address } = ParseUtil.parseCaipAddress(account);
      const publicKey = new PublicKey(esm_default.decode(address));
      return {
        address,
        publicKey: publicKey.toBytes(),
        chains: standardChains,
        features: [
          "solana:signAndSendTransaction",
          "solana:signTransaction",
          "solana:signMessage"
        ]
      };
    }) || [];
  }
  constructor(provider) {
    _SolanaWalletConnectStandardWallet_instances.add(this);
    _SolanaWalletConnectStandardWallet_listeners.set(this, {});
    _SolanaWalletConnectStandardWallet_version.set(this, "1.0.0");
    _SolanaWalletConnectStandardWallet_provider.set(this, void 0);
    _SolanaWalletConnectStandardWallet_name.set(this, "WalletConnect");
    _SolanaWalletConnectStandardWallet_icon.set(this, "data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+");
    _SolanaWalletConnectStandardWallet_account.set(this, null);
    _SolanaWalletConnectStandardWallet_on.set(this, (event, listener) => {
      if (!__classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_listeners, "f")[event]) {
        __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_listeners, "f")[event] = [];
      }
      __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_listeners, "f")[event].push(listener);
      return () => __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_instances, "m", _SolanaWalletConnectStandardWallet_off).call(this, event, listener);
    });
    _SolanaWalletConnectStandardWallet_connected.set(this, () => {
      const account = this.accounts[0];
      const publicKey = account?.publicKey;
      if (publicKey) {
        __classPrivateFieldSet3(this, _SolanaWalletConnectStandardWallet_account, new WalletConnectAccount(account), "f");
        __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_instances, "m", _SolanaWalletConnectStandardWallet_emit).call(this, "change", { accounts: this.accounts });
      }
    });
    _SolanaWalletConnectStandardWallet_disconnected.set(this, () => {
      if (__classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f")) {
        __classPrivateFieldSet3(this, _SolanaWalletConnectStandardWallet_account, null, "f");
        __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_instances, "m", _SolanaWalletConnectStandardWallet_emit).call(this, "change", { accounts: this.accounts });
      }
    });
    _SolanaWalletConnectStandardWallet_reconnected.set(this, () => {
      if (__classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_provider, "f").session?.namespaces?.["solana"]?.accounts.length) {
        __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_connected, "f").call(this);
      } else {
        __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_disconnected, "f").call(this);
      }
    });
    _SolanaWalletConnectStandardWallet_connect.set(this, async () => {
      if (!__classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f")) {
        RouterController.push("ConnectingWalletConnect");
        await __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_provider, "f").connect({
          namespaces: createNamespaces([SolConstantsUtil.DEFAULT_CHAIN])
        });
      }
      __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_connected, "f").call(this);
      return { accounts: this.accounts };
    });
    _SolanaWalletConnectStandardWallet_disconnect.set(this, async () => {
      await __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_provider, "f").disconnect();
    });
    _SolanaWalletConnectStandardWallet_signAndSendTransaction.set(this, async (...inputs) => {
      if (!__classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f")) {
        throw new Error("not connected");
      }
      const outputs = [];
      if (inputs.length === 1) {
        const { transaction, account, chain, options } = inputs[0] || {};
        const { minContextSlot, preflightCommitment, skipPreflight, maxRetries } = options || {};
        if (account?.address !== __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f")?.address) {
          throw new Error("invalid account");
        }
        if (!isSolanaChain(chain || ":")) {
          throw new Error("invalid chain");
        }
        if (!transaction) {
          throw new Error("invalid transaction");
        }
        const signature = await __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_provider, "f").request({
          method: "solana_signAndSendTransaction",
          params: {
            transaction,
            pubkey: __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f").address,
            sendOptions: {
              preflightCommitment,
              minContextSlot,
              maxRetries,
              skipPreflight
            }
          }
        });
        outputs.push({ signature: esm_default.decode(signature.signature) });
      } else if (inputs.length > 1) {
        const results = await Promise.all(inputs.map((input) => __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_signAndSendTransaction, "f").call(this, input)));
        for (const result of results) {
          outputs.push(...result);
        }
      }
      return outputs;
    });
    _SolanaWalletConnectStandardWallet_signTransaction.set(this, async (...inputs) => {
      if (!__classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f")) {
        throw new Error("not connected");
      }
      const outputs = [];
      if (inputs.length === 1) {
        const { transaction, account, chain } = inputs[0] || {};
        if (account?.address !== __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f").address) {
          throw new Error("invalid account");
        }
        if (chain && !isSolanaChain(chain)) {
          throw new Error("invalid chain");
        }
        if (!transaction) {
          throw new Error("invalid transaction");
        }
        const tx = Transaction.from(transaction);
        let result = void 0;
        const signedTransaction = await __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_provider, "f").request({
          method: "solana_signTransaction",
          params: {
            transaction,
            pubkey: __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f").address
          }
        });
        if ("signature" in signedTransaction) {
          const decoded = esm_default.decode(signedTransaction.signature);
          tx.addSignature(new PublicKey(__classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f").publicKey), Buffer.from(decoded));
          result = tx;
        } else {
          const decodedTransaction = Buffer.from(signedTransaction.transaction, "base64");
          if (isVersionedTransaction(tx)) {
            result = VersionedTransaction.deserialize(new Uint8Array(decodedTransaction));
          }
          result = Transaction.from(decodedTransaction);
        }
        if (!result) {
          throw new Error("invalid transaction");
        }
        const serializedTransaction = isVersionedTransaction(result) ? result.serialize() : new Uint8Array(result.serialize({
          requireAllSignatures: false,
          verifySignatures: false
        }));
        outputs.push({ signedTransaction: serializedTransaction });
      } else if (inputs.length > 1) {
        let chain = void 0;
        for (const input of inputs) {
          if (input.account?.address !== __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f").address) {
            throw new Error("invalid account");
          }
          if (input.chain) {
            if (!isSolanaChain(input.chain)) {
              throw new Error("invalid chain");
            }
            if (chain && input.chain !== chain) {
              throw new Error("conflicting chain");
            }
            chain = input.chain;
          }
        }
        const transactions = inputs.map(({ transaction }) => VersionedTransaction.deserialize(transaction));
        const result = await __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_provider, "f").request({
          method: "solana_signAllTransactions",
          params: {
            transactions
          }
        });
        const signedTransactions = result.transactions.map((serializedTransaction, index) => {
          const transaction = transactions[index];
          if (!transaction) {
            throw new Error("Invalid transactions response");
          }
          const decodedTransaction = Buffer.from(serializedTransaction, "base64");
          if (isVersionedTransaction(transaction)) {
            return VersionedTransaction.deserialize(new Uint8Array(decodedTransaction));
          }
          return Transaction.from(decodedTransaction);
        });
        outputs.push(...signedTransactions.map((signedTransaction) => {
          const serializedTransaction = isVersionedTransaction(signedTransaction) ? signedTransaction.serialize() : new Uint8Array(signedTransaction.serialize({
            requireAllSignatures: false,
            verifySignatures: false
          }));
          return { signedTransaction: serializedTransaction };
        }));
      }
      return outputs;
    });
    _SolanaWalletConnectStandardWallet_signMessage.set(this, async (...inputs) => {
      if (!__classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f")) {
        throw new Error("not connected");
      }
      const outputs = [];
      if (inputs.length === 1) {
        const { message, account } = inputs[0] || {};
        if (account?.address !== __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f").address) {
          throw new Error("invalid account");
        }
        if (!message) {
          throw new Error("invalid message");
        }
        const signature = await __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_provider, "f").request({
          method: "solana_signMessage",
          params: {
            message,
            pubkey: __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_account, "f").address
          }
        });
        outputs.push({ signedMessage: message, signature: esm_default.decode(signature.signature) });
      } else if (inputs.length > 1) {
        const results = await Promise.all(inputs.map((input) => __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_signMessage, "f").call(this, input)));
        for (const result of results) {
          outputs.push(...result);
        }
      }
      return outputs;
    });
    __classPrivateFieldSet3(this, _SolanaWalletConnectStandardWallet_provider, provider, "f");
    this.setProvider(provider);
    registerWallet(this);
  }
  setProvider(provider) {
    __classPrivateFieldSet3(this, _SolanaWalletConnectStandardWallet_provider, provider, "f");
    __classPrivateFieldSet3(this, _SolanaWalletConnectStandardWallet_name, "WalletConnect", "f");
    provider.on("connect", () => __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_connected, "f").call(this));
    provider.on("disconnect", () => __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_disconnected, "f").call(this));
    provider.on("accountsChanged", () => __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_reconnected, "f").call(this));
    provider.on("chainChanged", () => __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_reconnected, "f").call(this));
    __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_connected, "f").call(this);
  }
};
_SolanaWalletConnectStandardWallet_listeners = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_version = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_provider = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_name = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_icon = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_account = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_on = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_connected = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_disconnected = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_reconnected = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_connect = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_disconnect = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_signAndSendTransaction = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_signTransaction = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_signMessage = /* @__PURE__ */ new WeakMap(), _SolanaWalletConnectStandardWallet_instances = /* @__PURE__ */ new WeakSet(), _SolanaWalletConnectStandardWallet_emit = function _SolanaWalletConnectStandardWallet_emit2(event, ...args) {
  __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_listeners, "f")[event]?.forEach((listener) => listener.apply(null, args));
}, _SolanaWalletConnectStandardWallet_off = function _SolanaWalletConnectStandardWallet_off2(event, listener) {
  __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_listeners, "f")[event] = __classPrivateFieldGet3(this, _SolanaWalletConnectStandardWallet_listeners, "f")[event]?.filter((existingListener) => listener !== existingListener);
};
export {
  SolanaWalletConnectStandardWallet
};
//# sourceMappingURL=wallet-standard-OVQB5EXI.js.map
