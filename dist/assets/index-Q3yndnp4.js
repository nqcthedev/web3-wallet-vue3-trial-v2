const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ccip-BEqbkKeW.js","assets/localBatchGatewayRequest-GLQ2SwyR.js","assets/index-DEpYdeP1.js","assets/parseSignature-CkW2ZflW.js","assets/secp256k1-ChALTouP.js","assets/hashTypedData-HHVemiME.js","assets/embedded-wallet-DJUUY3fv.js","assets/index-C6AqDY-S.js","assets/index-Ba2gYSve.js","assets/if-defined-BWGgymvJ.js","assets/ref-CSlrzSGJ.js","assets/index-BXeHDtGU.js","assets/HelpersUtil-BStc44Rw.js","assets/ConstantsUtil-COJBkkkj.js","assets/index-BpW-mTsa.js","assets/index-BcS1EVcV.js","assets/index-DsZ_SCo1.js","assets/index-1f38tcAI.js","assets/index-vBHNnhdl.js","assets/NavigationUtil-DmfK5sOV.js","assets/email-Dt0aT1Eu.js","assets/index-n3JVJLoP.js","assets/index-BUww3Ryf.js","assets/socials-OZEIDFSs.js","assets/index-C1w27gGt.js","assets/index-D6uaeQFL.js","assets/index-BYYYmJ-a.js","assets/index-Cd9VJfmj.js","assets/swaps-CLNxzuWf.js","assets/index-C_no_Qh7.js","assets/SwapController-DTcd4L0O.js","assets/index-fNk2Sk-N.js","assets/MathUtil-BGCe3rZ3.js","assets/send-DkkSrWsl.js","assets/index-BTNt-OeL.js","assets/index-CAQVkPzE.js","assets/index-B1ERNAMp.js","assets/index-DPROCpnL.js","assets/receive-KCI3LA5R.js","assets/onramp-CoBkscPl.js","assets/index-BRPAH9TJ.js","assets/index-DcN669lE.js","assets/index-rEI79q2z.js","assets/pay-with-exchange-DlPSyTvy.js","assets/ExchangeController-C8JW6vOe.js","assets/transactions-Dyi52T6C.js","assets/index-jiHBB-gr.js","assets/index-k6beBoOo.js","assets/index-CL2rfxO1.js","assets/index-D21ZL4Bj.js","assets/data-capture-Cpptzb6x.js","assets/features-DATbkWmk.js","assets/index-CJ8nv7yA.js","assets/index-WNFfo4Er.js","assets/w3m-modal-mcIlkXMg.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function mv(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Vt={},vl=[],ro=()=>{},O5=()=>!1,am=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),yv=t=>t.startsWith("onUpdate:"),gr=Object.assign,wv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Xk=Object.prototype.hasOwnProperty,Bt=(t,e)=>Xk.call(t,e),ut=Array.isArray,Cl=t=>cm(t)==="[object Map]",P5=t=>cm(t)==="[object Set]",dt=t=>typeof t=="function",Wn=t=>typeof t=="string",la=t=>typeof t=="symbol",sn=t=>t!==null&&typeof t=="object",k5=t=>(sn(t)||dt(t))&&dt(t.then)&&dt(t.catch),B5=Object.prototype.toString,cm=t=>B5.call(t),Qk=t=>cm(t).slice(8,-1),D5=t=>cm(t)==="[object Object]",um=t=>Wn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,cf=mv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lm=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},e4=/-\w/g,uc=lm(t=>t.replace(e4,e=>e.slice(1).toUpperCase())),t4=/\B([A-Z])/g,Tu=lm(t=>t.replace(t4,"-$1").toLowerCase()),U5=lm(t=>t.charAt(0).toUpperCase()+t.slice(1)),Fy=lm(t=>t?`on${U5(t)}`:""),rc=(t,e)=>!Object.is(t,e),jy=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},M5=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},n4=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let L_;const dm=()=>L_||(L_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bv(t){if(ut(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Wn(r)?o4(r):bv(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Wn(t)||sn(t))return t}const r4=/;(?![^(]*\))/g,s4=/:([^]+)/,i4=/\/\*[^]*?\*\//g;function o4(t){const e={};return t.replace(i4,"").split(r4).forEach(n=>{if(n){const r=n.split(s4);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function qh(t){let e="";if(Wn(t))e=t;else if(ut(t))for(let n=0;n<t.length;n++){const r=qh(t[n]);r&&(e+=r+" ")}else if(sn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const a4="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",c4=mv(a4);function $5(t){return!!t||t===""}const L5=t=>!!(t&&t.__v_isRef===!0),Fc=t=>Wn(t)?t:t==null?"":ut(t)||sn(t)&&(t.toString===B5||!dt(t.toString))?L5(t)?Fc(t.value):JSON.stringify(t,F5,2):String(t),F5=(t,e)=>L5(e)?F5(t,e.value):Cl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[qy(r,i)+" =>"]=s,n),{})}:P5(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>qy(n))}:la(e)?qy(e):sn(e)&&!ut(e)&&!D5(e)?String(e):e,qy=(t,e="")=>{var n;return la(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Or;class j5{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Or,!e&&Or&&(this.index=(Or.scopes||(Or.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Or;try{return Or=this,e()}finally{Or=n}}}on(){++this._on===1&&(this.prevScope=Or,Or=this)}off(){this._on>0&&--this._on===0&&(Or=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function q5(t){return new j5(t)}function z5(){return Or}function u4(t,e=!1){Or&&Or.cleanups.push(t)}let Wt;const zy=new WeakSet;class H5{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Or&&Or.active&&Or.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zy.has(this)&&(zy.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||V5(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,F_(this),K5(this);const e=Wt,n=Ai;Wt=this,Ai=!0;try{return this.fn()}finally{G5(this),Wt=e,Ai=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Cv(e);this.deps=this.depsTail=void 0,F_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zy.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){c1(this)&&this.run()}get dirty(){return c1(this)}}let W5=0,uf,lf;function V5(t,e=!1){if(t.flags|=8,e){t.next=lf,lf=t;return}t.next=uf,uf=t}function Ev(){W5++}function vv(){if(--W5>0)return;if(lf){let e=lf;for(lf=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;uf;){let e=uf;for(uf=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function K5(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function G5(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Cv(r),l4(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function c1(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Y5(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Y5(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Pf)||(t.globalVersion=Pf,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!c1(t))))return;t.flags|=2;const e=t.dep,n=Wt,r=Ai;Wt=t,Ai=!0;try{K5(t);const s=t.fn(t._value);(e.version===0||rc(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Wt=n,Ai=r,G5(t),t.flags&=-3}}function Cv(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Cv(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function l4(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Ai=!0;const Z5=[];function na(){Z5.push(Ai),Ai=!1}function ra(){const t=Z5.pop();Ai=t===void 0?!0:t}function F_(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Wt;Wt=void 0;try{e()}finally{Wt=n}}}let Pf=0;class d4{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class _v{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Wt||!Ai||Wt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Wt)n=this.activeLink=new d4(Wt,this),Wt.deps?(n.prevDep=Wt.depsTail,Wt.depsTail.nextDep=n,Wt.depsTail=n):Wt.deps=Wt.depsTail=n,J5(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Wt.depsTail,n.nextDep=void 0,Wt.depsTail.nextDep=n,Wt.depsTail=n,Wt.deps===n&&(Wt.deps=r)}return n}trigger(e){this.version++,Pf++,this.notify(e)}notify(e){Ev();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{vv()}}}function J5(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)J5(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const V0=new WeakMap,au=Symbol(""),u1=Symbol(""),kf=Symbol("");function Br(t,e,n){if(Ai&&Wt){let r=V0.get(t);r||V0.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new _v),s.map=r,s.key=n),s.track()}}function zo(t,e,n,r,s,i){const o=V0.get(t);if(!o){Pf++;return}const a=c=>{c&&c.trigger()};if(Ev(),e==="clear")o.forEach(a);else{const c=ut(t),u=c&&um(n);if(c&&n==="length"){const l=Number(r);o.forEach((d,f)=>{(f==="length"||f===kf||!la(f)&&f>=l)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(kf)),e){case"add":c?u&&a(o.get("length")):(a(o.get(au)),Cl(t)&&a(o.get(u1)));break;case"delete":c||(a(o.get(au)),Cl(t)&&a(o.get(u1)));break;case"set":Cl(t)&&a(o.get(au));break}}vv()}function f4(t,e){const n=V0.get(t);return n&&n.get(e)}function zu(t){const e=Rt(t);return e===t?e:(Br(e,"iterate",kf),Js(t)?e:e.map(sa))}function Av(t){return Br(t=Rt(t),"iterate",kf),t}function Ma(t,e){return lc(t)?Bf(sc(t)?sa(e):e):sa(e)}const h4={__proto__:null,[Symbol.iterator](){return Hy(this,Symbol.iterator,t=>Ma(this,t))},concat(...t){return zu(this).concat(...t.map(e=>ut(e)?zu(e):e))},entries(){return Hy(this,"entries",t=>(t[1]=Ma(this,t[1]),t))},every(t,e){return wo(this,"every",t,e,void 0,arguments)},filter(t,e){return wo(this,"filter",t,e,n=>n.map(r=>Ma(this,r)),arguments)},find(t,e){return wo(this,"find",t,e,n=>Ma(this,n),arguments)},findIndex(t,e){return wo(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return wo(this,"findLast",t,e,n=>Ma(this,n),arguments)},findLastIndex(t,e){return wo(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return wo(this,"forEach",t,e,void 0,arguments)},includes(...t){return Wy(this,"includes",t)},indexOf(...t){return Wy(this,"indexOf",t)},join(t){return zu(this).join(t)},lastIndexOf(...t){return Wy(this,"lastIndexOf",t)},map(t,e){return wo(this,"map",t,e,void 0,arguments)},pop(){return Ed(this,"pop")},push(...t){return Ed(this,"push",t)},reduce(t,...e){return j_(this,"reduce",t,e)},reduceRight(t,...e){return j_(this,"reduceRight",t,e)},shift(){return Ed(this,"shift")},some(t,e){return wo(this,"some",t,e,void 0,arguments)},splice(...t){return Ed(this,"splice",t)},toReversed(){return zu(this).toReversed()},toSorted(t){return zu(this).toSorted(t)},toSpliced(...t){return zu(this).toSpliced(...t)},unshift(...t){return Ed(this,"unshift",t)},values(){return Hy(this,"values",t=>Ma(this,t))}};function Hy(t,e,n){const r=Av(t),s=r[e]();return r!==t&&!Js(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const p4=Array.prototype;function wo(t,e,n,r,s,i){const o=Av(t),a=o!==t&&!Js(t),c=o[e];if(c!==p4[e]){const d=c.apply(t,i);return a?sa(d):d}let u=n;o!==t&&(a?u=function(d,f){return n.call(this,Ma(t,d),f,t)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,t)}));const l=c.call(o,u,r);return a&&s?s(l):l}function j_(t,e,n,r){const s=Av(t);let i=n;return s!==t&&(Js(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,Ma(t,a),c,t)}),s[e](i,...r)}function Wy(t,e,n){const r=Rt(t);Br(r,"iterate",kf);const s=r[e](...n);return(s===-1||s===!1)&&hm(n[0])?(n[0]=Rt(n[0]),r[e](...n)):s}function Ed(t,e,n=[]){na(),Ev();const r=Rt(t)[e].apply(t,n);return vv(),ra(),r}const g4=mv("__proto__,__v_isRef,__isVue"),X5=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(la));function m4(t){la(t)||(t=String(t));const e=Rt(this);return Br(e,"has",t),e.hasOwnProperty(t)}class Q5{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?x4:rN:i?nN:tN).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ut(e);if(!s){let c;if(o&&(c=h4[n]))return c;if(n==="hasOwnProperty")return m4}const a=Reflect.get(e,n,Qt(e)?e:r);if((la(n)?X5.has(n):g4(n))||(s||Br(e,"get",n),i))return a;if(Qt(a)){const c=o&&um(n)?a:a.value;return s&&sn(c)?d1(c):c}return sn(a)?s?d1(a):fm(a):a}}class eN extends Q5{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=ut(e)&&um(n);if(!this._isShallow){const u=lc(i);if(!Js(r)&&!lc(r)&&(i=Rt(i),r=Rt(r)),!o&&Qt(i)&&!Qt(r))return u||(i.value=r),!0}const a=o?Number(n)<e.length:Bt(e,n),c=Reflect.set(e,n,r,Qt(e)?e:s);return e===Rt(s)&&(a?rc(r,i)&&zo(e,"set",n,r):zo(e,"add",n,r)),c}deleteProperty(e,n){const r=Bt(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&zo(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!la(n)||!X5.has(n))&&Br(e,"has",n),r}ownKeys(e){return Br(e,"iterate",ut(e)?"length":au),Reflect.ownKeys(e)}}class y4 extends Q5{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const w4=new eN,b4=new y4,E4=new eN(!0);const l1=t=>t,Sp=t=>Reflect.getPrototypeOf(t);function v4(t,e,n){return function(...r){const s=this.__v_raw,i=Rt(s),o=Cl(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),l=n?l1:e?Bf:sa;return!e&&Br(i,"iterate",c?u1:au),gr(Object.create(u),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[l(d[0]),l(d[1])]:l(d),done:f}}})}}function xp(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function C4(t,e){const n={get(s){const i=this.__v_raw,o=Rt(i),a=Rt(s);t||(rc(s,a)&&Br(o,"get",s),Br(o,"get",a));const{has:c}=Sp(o),u=e?l1:t?Bf:sa;if(c.call(o,s))return u(i.get(s));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Br(Rt(s),"iterate",au),s.size},has(s){const i=this.__v_raw,o=Rt(i),a=Rt(s);return t||(rc(s,a)&&Br(o,"has",s),Br(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Rt(a),u=e?l1:t?Bf:sa;return!t&&Br(c,"iterate",au),a.forEach((l,d)=>s.call(i,u(l),u(d),o))}};return gr(n,t?{add:xp("add"),set:xp("set"),delete:xp("delete"),clear:xp("clear")}:{add(s){!e&&!Js(s)&&!lc(s)&&(s=Rt(s));const i=Rt(this);return Sp(i).has.call(i,s)||(i.add(s),zo(i,"add",s,s)),this},set(s,i){!e&&!Js(i)&&!lc(i)&&(i=Rt(i));const o=Rt(this),{has:a,get:c}=Sp(o);let u=a.call(o,s);u||(s=Rt(s),u=a.call(o,s));const l=c.call(o,s);return o.set(s,i),u?rc(i,l)&&zo(o,"set",s,i):zo(o,"add",s,i),this},delete(s){const i=Rt(this),{has:o,get:a}=Sp(i);let c=o.call(i,s);c||(s=Rt(s),c=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return c&&zo(i,"delete",s,void 0),u},clear(){const s=Rt(this),i=s.size!==0,o=s.clear();return i&&zo(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=v4(s,t,e)}),n}function Sv(t,e){const n=C4(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Bt(n,s)&&s in r?n:r,s,i)}const _4={get:Sv(!1,!1)},A4={get:Sv(!1,!0)},S4={get:Sv(!0,!1)};const tN=new WeakMap,nN=new WeakMap,rN=new WeakMap,x4=new WeakMap;function I4(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function N4(t){return t.__v_skip||!Object.isExtensible(t)?0:I4(Qk(t))}function fm(t){return lc(t)?t:xv(t,!1,w4,_4,tN)}function T4(t){return xv(t,!1,E4,A4,nN)}function d1(t){return xv(t,!0,b4,S4,rN)}function xv(t,e,n,r,s){if(!sn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=N4(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function sc(t){return lc(t)?sc(t.__v_raw):!!(t&&t.__v_isReactive)}function lc(t){return!!(t&&t.__v_isReadonly)}function Js(t){return!!(t&&t.__v_isShallow)}function hm(t){return t?!!t.__v_raw:!1}function Rt(t){const e=t&&t.__v_raw;return e?Rt(e):t}function Iv(t){return!Bt(t,"__v_skip")&&Object.isExtensible(t)&&M5(t,"__v_skip",!0),t}const sa=t=>sn(t)?fm(t):t,Bf=t=>sn(t)?d1(t):t;function Qt(t){return t?t.__v_isRef===!0:!1}function Nv(t){return R4(t,!1)}function R4(t,e){return Qt(t)?t:new O4(t,e)}class O4{constructor(e,n){this.dep=new _v,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Rt(e),this._value=n?e:sa(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Js(e)||lc(e);e=r?e:Rt(e),rc(e,n)&&(this._rawValue=e,this._value=r?e:sa(e),this.dep.trigger())}}function Ws(t){return Qt(t)?t.value:t}const P4={get:(t,e,n)=>e==="__v_raw"?t:Ws(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Qt(s)&&!Qt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function sN(t){return sc(t)?t:new Proxy(t,P4)}function k4(t){const e=ut(t)?new Array(t.length):{};for(const n in t)e[n]=D4(t,n);return e}class B4{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=Rt(e);let s=!0,i=e;if(!ut(e)||!um(String(n)))do s=!hm(i)||Js(i);while(s&&(i=i.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=Ws(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&Qt(this._raw[this._key])){const n=this._object[this._key];if(Qt(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return f4(this._raw,this._key)}}function D4(t,e,n){return new B4(t,e,n)}class U4{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new _v(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pf-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Wt!==this)return V5(this,!0),!0}get value(){const e=this.dep.track();return Y5(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function M4(t,e,n=!1){let r,s;return dt(t)?r=t:(r=t.get,s=t.set),new U4(r,s,n)}const Ip={},K0=new WeakMap;let jc;function $4(t,e=!1,n=jc){if(n){let r=K0.get(n);r||K0.set(n,r=[]),r.push(t)}}function L4(t,e,n=Vt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,u=T=>s?T:Js(T)||s===!1||s===0?Ha(T,1):Ha(T);let l,d,f,h,m=!1,y=!1;if(Qt(t)?(d=()=>t.value,m=Js(t)):sc(t)?(d=()=>u(t),m=!0):ut(t)?(y=!0,m=t.some(T=>sc(T)||Js(T)),d=()=>t.map(T=>{if(Qt(T))return T.value;if(sc(T))return u(T);if(dt(T))return c?c(T,2):T()})):dt(t)?e?d=c?()=>c(t,2):t:d=()=>{if(f){na();try{f()}finally{ra()}}const T=jc;jc=l;try{return c?c(t,3,[h]):t(h)}finally{jc=T}}:d=ro,e&&s){const T=d,N=s===!0?1/0:s;d=()=>Ha(T(),N)}const E=z5(),S=()=>{l.stop(),E&&E.active&&wv(E.effects,l)};if(i&&e){const T=e;e=(...N)=>{T(...N),S()}}let R=y?new Array(t.length).fill(Ip):Ip;const C=T=>{if(!(!(l.flags&1)||!l.dirty&&!T))if(e){const N=l.run();if(s||m||(y?N.some((U,q)=>rc(U,R[q])):rc(N,R))){f&&f();const U=jc;jc=l;try{const q=[N,R===Ip?void 0:y&&R[0]===Ip?[]:R,h];R=N,c?c(e,3,q):e(...q)}finally{jc=U}}}else l.run()};return a&&a(C),l=new H5(d),l.scheduler=o?()=>o(C,!1):C,h=T=>$4(T,!1,l),f=l.onStop=()=>{const T=K0.get(l);if(T){if(c)c(T,4);else for(const N of T)N();K0.delete(l)}},e?r?C(!0):R=l.run():o?o(C.bind(null,!0),!0):l.run(),S.pause=l.pause.bind(l),S.resume=l.resume.bind(l),S.stop=S,S}function Ha(t,e=1/0,n){if(e<=0||!sn(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Qt(t))Ha(t.value,e,n);else if(ut(t))for(let r=0;r<t.length;r++)Ha(t[r],e,n);else if(P5(t)||Cl(t))t.forEach(r=>{Ha(r,e,n)});else if(D5(t)){for(const r in t)Ha(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Ha(t[r],e,n)}return t}function zh(t,e,n,r){try{return r?t(...r):t()}catch(s){pm(s,e,n)}}function co(t,e,n,r){if(dt(t)){const s=zh(t,e,n,r);return s&&k5(s)&&s.catch(i=>{pm(i,e,n)}),s}if(ut(t)){const s=[];for(let i=0;i<t.length;i++)s.push(co(t[i],e,n,r));return s}}function pm(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Vt;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const l=a.ec;if(l){for(let d=0;d<l.length;d++)if(l[d](t,c,u)===!1)return}a=a.parent}if(i){na(),zh(i,null,10,[t,c,u]),ra();return}}F4(t,n,s,r,o)}function F4(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const zr=[];let Hi=-1;const _l=[];let $a=null,cl=0;const iN=Promise.resolve();let G0=null;function Tv(t){const e=G0||iN;return t?e.then(this?t.bind(this):t):e}function j4(t){let e=Hi+1,n=zr.length;for(;e<n;){const r=e+n>>>1,s=zr[r],i=Df(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Rv(t){if(!(t.flags&1)){const e=Df(t),n=zr[zr.length-1];!n||!(t.flags&2)&&e>=Df(n)?zr.push(t):zr.splice(j4(e),0,t),t.flags|=1,oN()}}function oN(){G0||(G0=iN.then(cN))}function q4(t){ut(t)?_l.push(...t):$a&&t.id===-1?$a.splice(cl+1,0,t):t.flags&1||(_l.push(t),t.flags|=1),oN()}function q_(t,e,n=Hi+1){for(;n<zr.length;n++){const r=zr[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;zr.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function aN(t){if(_l.length){const e=[...new Set(_l)].sort((n,r)=>Df(n)-Df(r));if(_l.length=0,$a){$a.push(...e);return}for($a=e,cl=0;cl<$a.length;cl++){const n=$a[cl];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}$a=null,cl=0}}const Df=t=>t.id==null?t.flags&2?-1:1/0:t.id;function cN(t){try{for(Hi=0;Hi<zr.length;Hi++){const e=zr[Hi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),zh(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Hi<zr.length;Hi++){const e=zr[Hi];e&&(e.flags&=-2)}Hi=-1,zr.length=0,aN(),G0=null,(zr.length||_l.length)&&cN()}}let hs=null,uN=null;function Y0(t){const e=hs;return hs=t,uN=t&&t.type.__scopeId||null,e}function Ki(t,e=hs,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&X_(-1);const i=Y0(e);let o;try{o=t(...s)}finally{Y0(i),r._d&&X_(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ic(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(na(),co(c,n,8,[t.el,a,t,e]),ra())}}function z4(t,e){if(Vr){let n=Vr.provides;const r=Vr.parent&&Vr.parent.provides;r===n&&(n=Vr.provides=Object.create(r)),n[t]=e}}function df(t,e,n=!1){const r=DN();if(r||cu){let s=cu?cu._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&dt(e)?e.call(r&&r.proxy):e}}function H4(){return!!(DN()||cu)}const W4=Symbol.for("v-scx"),V4=()=>df(W4);function ff(t,e,n){return lN(t,e,n)}function lN(t,e,n=Vt){const{immediate:r,deep:s,flush:i,once:o}=n,a=gr({},n),c=e&&r||!e&&i!=="post";let u;if($f){if(i==="sync"){const h=V4();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=ro,h.resume=ro,h.pause=ro,h}}const l=Vr;a.call=(h,m,y)=>co(h,l,m,y);let d=!1;i==="post"?a.scheduler=h=>{xs(h,l&&l.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,m)=>{m?h():Rv(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,l&&(h.id=l.uid,h.i=l))};const f=L4(t,e,a);return $f&&(u?u.push(f):c&&f()),f}function K4(t,e,n){const r=this.proxy,s=Wn(t)?t.includes(".")?dN(r,t):()=>r[t]:t.bind(r,r);let i;dt(e)?i=e:(i=e.handler,n=e);const o=Hh(this),a=lN(s,i.bind(r),n);return o(),a}function dN(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const G4=Symbol("_vte"),Y4=t=>t.__isTeleport,Z4=Symbol("_leaveCb");function Ov(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ov(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gm(t,e){return dt(t)?gr({name:t.name},e,{setup:t}):t}function fN(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Z0=new WeakMap;function hf(t,e,n,r,s=!1){if(ut(t)){t.forEach((m,y)=>hf(m,e&&(ut(e)?e[y]:e),n,r,s));return}if(Al(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&hf(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Uv(r.component):r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,l=a.refs===Vt?a.refs={}:a.refs,d=a.setupState,f=Rt(d),h=d===Vt?O5:m=>Bt(f,m);if(u!=null&&u!==c){if(z_(e),Wn(u))l[u]=null,h(u)&&(d[u]=null);else if(Qt(u)){u.value=null;const m=e;m.k&&(l[m.k]=null)}}if(dt(c))zh(c,a,12,[o,l]);else{const m=Wn(c),y=Qt(c);if(m||y){const E=()=>{if(t.f){const S=m?h(c)?d[c]:l[c]:c.value;if(s)ut(S)&&wv(S,i);else if(ut(S))S.includes(i)||S.push(i);else if(m)l[c]=[i],h(c)&&(d[c]=l[c]);else{const R=[i];c.value=R,t.k&&(l[t.k]=R)}}else m?(l[c]=o,h(c)&&(d[c]=o)):y&&(c.value=o,t.k&&(l[t.k]=o))};if(o){const S=()=>{E(),Z0.delete(t)};S.id=-1,Z0.set(t,S),xs(S,n)}else z_(t),E()}}}function z_(t){const e=Z0.get(t);e&&(e.flags|=8,Z0.delete(t))}dm().requestIdleCallback;dm().cancelIdleCallback;const Al=t=>!!t.type.__asyncLoader,hN=t=>t.type.__isKeepAlive;function J4(t,e){pN(t,"a",e)}function X4(t,e){pN(t,"da",e)}function pN(t,e,n=Vr){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(mm(e,r,n),n){let s=n.parent;for(;s&&s.parent;)hN(s.parent.vnode)&&Q4(r,e,n,s),s=s.parent}}function Q4(t,e,n,r){const s=mm(e,t,r,!0);gN(()=>{wv(r[e],s)},n)}function mm(t,e,n=Vr,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{na();const a=Hh(n),c=co(e,n,t,o);return a(),ra(),c});return r?s.unshift(i):s.push(i),i}}const da=t=>(e,n=Vr)=>{(!$f||t==="sp")&&mm(t,(...r)=>e(...r),n)},eB=da("bm"),tB=da("m"),nB=da("bu"),rB=da("u"),sB=da("bum"),gN=da("um"),iB=da("sp"),oB=da("rtg"),aB=da("rtc");function cB(t,e=Vr){mm("ec",t,e)}const uB=Symbol.for("v-ndc");function J0(t,e,n={},r,s){if(hs.ce||hs.parent&&Al(hs.parent)&&hs.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),kr(),Mf(Hr,null,[rr("slot",n,r)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),kr();const o=i&&mN(i(n)),a=n.key||o&&o.key,c=Mf(Hr,{key:(a&&!la(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function mN(t){return t.some(e=>Bv(e)?!(e.type===ia||e.type===Hr&&!mN(e.children)):!0)?t:null}const f1=t=>t?UN(t)?Uv(t):f1(t.parent):null,pf=gr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>f1(t.parent),$root:t=>f1(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>wN(t),$forceUpdate:t=>t.f||(t.f=()=>{Rv(t.update)}),$nextTick:t=>t.n||(t.n=Tv.bind(t.proxy)),$watch:t=>K4.bind(t)}),Vy=(t,e)=>t!==Vt&&!t.__isScriptSetup&&Bt(t,e),lB={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Vy(r,e))return o[e]=1,r[e];if(s!==Vt&&Bt(s,e))return o[e]=2,s[e];if(Bt(i,e))return o[e]=3,i[e];if(n!==Vt&&Bt(n,e))return o[e]=4,n[e];h1&&(o[e]=0)}}const u=pf[e];let l,d;if(u)return e==="$attrs"&&Br(t.attrs,"get",""),u(t);if((l=a.__cssModules)&&(l=l[e]))return l;if(n!==Vt&&Bt(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Bt(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Vy(s,e)?(s[e]=n,!0):r!==Vt&&Bt(r,e)?(r[e]=n,!0):Bt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},a){let c;return!!(n[a]||t!==Vt&&a[0]!=="$"&&Bt(t,a)||Vy(e,a)||Bt(i,a)||Bt(r,a)||Bt(pf,a)||Bt(s.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Bt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function H_(t){return ut(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let h1=!0;function dB(t){const e=wN(t),n=t.proxy,r=t.ctx;h1=!1,e.beforeCreate&&W_(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:l,beforeMount:d,mounted:f,beforeUpdate:h,updated:m,activated:y,deactivated:E,beforeDestroy:S,beforeUnmount:R,destroyed:C,unmounted:T,render:N,renderTracked:U,renderTriggered:q,errorCaptured:H,serverPrefetch:P,expose:$,inheritAttrs:W,components:z,directives:_,filters:p}=e;if(u&&fB(u,r,null),o)for(const x in o){const O=o[x];dt(O)&&(r[x]=O.bind(n))}if(s){const x=s.call(n,n);sn(x)&&(t.data=fm(x))}if(h1=!0,i)for(const x in i){const O=i[x],k=dt(O)?O.bind(n,n):dt(O.get)?O.get.bind(n,n):ro,M=!dt(O)&&dt(O.set)?O.set.bind(n):ro,B=Sl({get:k,set:M});Object.defineProperty(r,x,{enumerable:!0,configurable:!0,get:()=>B.value,set:w=>B.value=w})}if(a)for(const x in a)yN(a[x],r,n,x);if(c){const x=dt(c)?c.call(n):c;Reflect.ownKeys(x).forEach(O=>{z4(O,x[O])})}l&&W_(l,t,"c");function b(x,O){ut(O)?O.forEach(k=>x(k.bind(n))):O&&x(O.bind(n))}if(b(eB,d),b(tB,f),b(nB,h),b(rB,m),b(J4,y),b(X4,E),b(cB,H),b(aB,U),b(oB,q),b(sB,R),b(gN,T),b(iB,P),ut($))if($.length){const x=t.exposed||(t.exposed={});$.forEach(O=>{Object.defineProperty(x,O,{get:()=>n[O],set:k=>n[O]=k,enumerable:!0})})}else t.exposed||(t.exposed={});N&&t.render===ro&&(t.render=N),W!=null&&(t.inheritAttrs=W),z&&(t.components=z),_&&(t.directives=_),P&&fN(t)}function fB(t,e,n=ro){ut(t)&&(t=p1(t));for(const r in t){const s=t[r];let i;sn(s)?"default"in s?i=df(s.from||r,s.default,!0):i=df(s.from||r):i=df(s),Qt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function W_(t,e,n){co(ut(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function yN(t,e,n,r){let s=r.includes(".")?dN(n,r):()=>n[r];if(Wn(t)){const i=e[t];dt(i)&&ff(s,i)}else if(dt(t))ff(s,t.bind(n));else if(sn(t))if(ut(t))t.forEach(i=>yN(i,e,n,r));else{const i=dt(t.handler)?t.handler.bind(n):e[t.handler];dt(i)&&ff(s,i,t)}}function wN(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>X0(c,u,o,!0)),X0(c,e,o)),sn(e)&&i.set(e,c),c}function X0(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&X0(t,i,n,!0),s&&s.forEach(o=>X0(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=hB[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const hB={data:V_,props:K_,emits:K_,methods:Qd,computed:Qd,beforeCreate:Fr,created:Fr,beforeMount:Fr,mounted:Fr,beforeUpdate:Fr,updated:Fr,beforeDestroy:Fr,beforeUnmount:Fr,destroyed:Fr,unmounted:Fr,activated:Fr,deactivated:Fr,errorCaptured:Fr,serverPrefetch:Fr,components:Qd,directives:Qd,watch:gB,provide:V_,inject:pB};function V_(t,e){return e?t?function(){return gr(dt(t)?t.call(this,this):t,dt(e)?e.call(this,this):e)}:e:t}function pB(t,e){return Qd(p1(t),p1(e))}function p1(t){if(ut(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Fr(t,e){return t?[...new Set([].concat(t,e))]:e}function Qd(t,e){return t?gr(Object.create(null),t,e):e}function K_(t,e){return t?ut(t)&&ut(e)?[...new Set([...t,...e])]:gr(Object.create(null),H_(t),H_(e??{})):e}function gB(t,e){if(!t)return e;if(!e)return t;const n=gr(Object.create(null),t);for(const r in e)n[r]=Fr(t[r],e[r]);return n}function bN(){return{app:null,config:{isNativeTag:O5,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mB=0;function yB(t,e){return function(r,s=null){dt(r)||(r=gr({},r)),s!=null&&!sn(s)&&(s=null);const i=bN(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:mB++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:GB,get config(){return i.config},set config(l){},use(l,...d){return o.has(l)||(l&&dt(l.install)?(o.add(l),l.install(u,...d)):dt(l)&&(o.add(l),l(u,...d))),u},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),u},component(l,d){return d?(i.components[l]=d,u):i.components[l]},directive(l,d){return d?(i.directives[l]=d,u):i.directives[l]},mount(l,d,f){if(!c){const h=u._ceVNode||rr(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(h,l,f),c=!0,u._container=l,l.__vue_app__=u,Uv(h.component)}},onUnmount(l){a.push(l)},unmount(){c&&(co(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(l,d){return i.provides[l]=d,u},runWithContext(l){const d=cu;cu=u;try{return l()}finally{cu=d}}};return u}}let cu=null;const wB=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${uc(e)}Modifiers`]||t[`${Tu(e)}Modifiers`];function bB(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Vt;let s=n;const i=e.startsWith("update:"),o=i&&wB(r,e.slice(7));o&&(o.trim&&(s=n.map(l=>Wn(l)?l.trim():l)),o.number&&(s=n.map(n4)));let a,c=r[a=Fy(e)]||r[a=Fy(uc(e))];!c&&i&&(c=r[a=Fy(Tu(e))]),c&&co(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,co(u,t,6,s)}}const EB=new WeakMap;function EN(t,e,n=!1){const r=n?EB:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!dt(t)){const c=u=>{const l=EN(u,e,!0);l&&(a=!0,gr(o,l))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(sn(t)&&r.set(t,null),null):(ut(i)?i.forEach(c=>o[c]=null):gr(o,i),sn(t)&&r.set(t,o),o)}function ym(t,e){return!t||!am(e)?!1:(e=e.slice(2).replace(/Once$/,""),Bt(t,e[0].toLowerCase()+e.slice(1))||Bt(t,Tu(e))||Bt(t,e))}function G_(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:l,props:d,data:f,setupState:h,ctx:m,inheritAttrs:y}=t,E=Y0(t);let S,R;try{if(n.shapeFlag&4){const T=s||r,N=T;S=Gi(u.call(N,T,l,d,h,f,m)),R=a}else{const T=e;S=Gi(T.length>1?T(d,{attrs:a,slots:o,emit:c}):T(d,null)),R=e.props?a:vB(a)}}catch(T){gf.length=0,pm(T,t,1),S=rr(ia)}let C=S;if(R&&y!==!1){const T=Object.keys(R),{shapeFlag:N}=C;T.length&&N&7&&(i&&T.some(yv)&&(R=CB(R,i)),C=Ll(C,R,!1,!0))}return n.dirs&&(C=Ll(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&Ov(C,n.transition),S=C,Y0(E),S}const vB=t=>{let e;for(const n in t)(n==="class"||n==="style"||am(n))&&((e||(e={}))[n]=t[n]);return e},CB=(t,e)=>{const n={};for(const r in t)(!yv(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function _B(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Y_(r,o,u):!!o;if(c&8){const l=e.dynamicProps;for(let d=0;d<l.length;d++){const f=l[d];if(o[f]!==r[f]&&!ym(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Y_(r,o,u):!0:!!o;return!1}function Y_(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ym(n,i))return!0}return!1}function AB({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const vN={},CN=()=>Object.create(vN),_N=t=>Object.getPrototypeOf(t)===vN;function SB(t,e,n,r=!1){const s={},i=CN();t.propsDefaults=Object.create(null),AN(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:T4(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function xB(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Rt(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let d=0;d<l.length;d++){let f=l[d];if(ym(t.emitsOptions,f))continue;const h=e[f];if(c)if(Bt(i,f))h!==i[f]&&(i[f]=h,u=!0);else{const m=uc(f);s[m]=g1(c,a,m,h,t,!1)}else h!==i[f]&&(i[f]=h,u=!0)}}}else{AN(t,e,s,i)&&(u=!0);let l;for(const d in a)(!e||!Bt(e,d)&&((l=Tu(d))===d||!Bt(e,l)))&&(c?n&&(n[d]!==void 0||n[l]!==void 0)&&(s[d]=g1(c,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Bt(e,d))&&(delete i[d],u=!0)}u&&zo(t.attrs,"set","")}function AN(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(cf(c))continue;const u=e[c];let l;s&&Bt(s,l=uc(c))?!i||!i.includes(l)?n[l]=u:(a||(a={}))[l]=u:ym(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Rt(n),u=a||Vt;for(let l=0;l<i.length;l++){const d=i[l];n[d]=g1(s,c,d,u[d],t,!Bt(u,d))}}return o}function g1(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Bt(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&dt(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const l=Hh(s);r=u[n]=c.call(null,e),l()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Tu(n))&&(r=!0))}return r}const IB=new WeakMap;function SN(t,e,n=!1){const r=n?IB:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!dt(t)){const l=d=>{c=!0;const[f,h]=SN(d,e,!0);gr(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!i&&!c)return sn(t)&&r.set(t,vl),vl;if(ut(i))for(let l=0;l<i.length;l++){const d=uc(i[l]);Z_(d)&&(o[d]=Vt)}else if(i)for(const l in i){const d=uc(l);if(Z_(d)){const f=i[l],h=o[d]=ut(f)||dt(f)?{type:f}:gr({},f),m=h.type;let y=!1,E=!0;if(ut(m))for(let S=0;S<m.length;++S){const R=m[S],C=dt(R)&&R.name;if(C==="Boolean"){y=!0;break}else C==="String"&&(E=!1)}else y=dt(m)&&m.name==="Boolean";h[0]=y,h[1]=E,(y||Bt(h,"default"))&&a.push(d)}}const u=[o,a];return sn(t)&&r.set(t,u),u}function Z_(t){return t[0]!=="$"&&!cf(t)}const Pv=t=>t==="_"||t==="_ctx"||t==="$stable",kv=t=>ut(t)?t.map(Gi):[Gi(t)],NB=(t,e,n)=>{if(e._n)return e;const r=Ki((...s)=>kv(e(...s)),n);return r._c=!1,r},xN=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Pv(s))continue;const i=t[s];if(dt(i))e[s]=NB(s,i,r);else if(i!=null){const o=kv(i);e[s]=()=>o}}},IN=(t,e)=>{const n=kv(e);t.slots.default=()=>n},NN=(t,e,n)=>{for(const r in e)(n||!Pv(r))&&(t[r]=e[r])},TB=(t,e,n)=>{const r=t.slots=CN();if(t.vnode.shapeFlag&32){const s=e._;s?(NN(r,e,n),n&&M5(r,"_",s,!0)):xN(e,r)}else e&&IN(t,e)},RB=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Vt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:NN(s,e,n):(i=!e.$stable,xN(e,s)),o=e}else e&&(IN(t,e),o={default:1});if(i)for(const a in s)!Pv(a)&&o[a]==null&&delete s[a]},xs=DB;function OB(t){return PB(t)}function PB(t,e){const n=dm();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:l,parentNode:d,nextSibling:f,setScopeId:h=ro,insertStaticContent:m}=t,y=(G,J,ne,ce=null,he=null,le=null,be=void 0,Ce=null,pe=!!J.dynamicChildren)=>{if(G===J)return;G&&!vd(G,J)&&(ce=ee(G),w(G,he,le,!0),G=null),J.patchFlag===-2&&(pe=!1,J.dynamicChildren=null);const{type:ue,ref:je,shapeFlag:Ee}=J;switch(ue){case wm:E(G,J,ne,ce);break;case ia:S(G,J,ne,ce);break;case Gy:G==null&&R(J,ne,ce,be);break;case Hr:z(G,J,ne,ce,he,le,be,Ce,pe);break;default:Ee&1?N(G,J,ne,ce,he,le,be,Ce,pe):Ee&6?_(G,J,ne,ce,he,le,be,Ce,pe):(Ee&64||Ee&128)&&ue.process(G,J,ne,ce,he,le,be,Ce,pe,Oe)}je!=null&&he?hf(je,G&&G.ref,le,J||G,!J):je==null&&G&&G.ref!=null&&hf(G.ref,null,le,G,!0)},E=(G,J,ne,ce)=>{if(G==null)r(J.el=a(J.children),ne,ce);else{const he=J.el=G.el;J.children!==G.children&&u(he,J.children)}},S=(G,J,ne,ce)=>{G==null?r(J.el=c(J.children||""),ne,ce):J.el=G.el},R=(G,J,ne,ce)=>{[G.el,G.anchor]=m(G.children,J,ne,ce,G.el,G.anchor)},C=({el:G,anchor:J},ne,ce)=>{let he;for(;G&&G!==J;)he=f(G),r(G,ne,ce),G=he;r(J,ne,ce)},T=({el:G,anchor:J})=>{let ne;for(;G&&G!==J;)ne=f(G),s(G),G=ne;s(J)},N=(G,J,ne,ce,he,le,be,Ce,pe)=>{if(J.type==="svg"?be="svg":J.type==="math"&&(be="mathml"),G==null)U(J,ne,ce,he,le,be,Ce,pe);else{const ue=G.el&&G.el._isVueCE?G.el:null;try{ue&&ue._beginPatch(),P(G,J,he,le,be,Ce,pe)}finally{ue&&ue._endPatch()}}},U=(G,J,ne,ce,he,le,be,Ce)=>{let pe,ue;const{props:je,shapeFlag:Ee,transition:Ne,dirs:Ve}=G;if(pe=G.el=o(G.type,le,je&&je.is,je),Ee&8?l(pe,G.children):Ee&16&&H(G.children,pe,null,ce,he,Ky(G,le),be,Ce),Ve&&Ic(G,null,ce,"created"),q(pe,G,G.scopeId,be,ce),je){for(const L in je)L!=="value"&&!cf(L)&&i(pe,L,null,je[L],le,ce);"value"in je&&i(pe,"value",null,je.value,le),(ue=je.onVnodeBeforeMount)&&Pi(ue,ce,G)}Ve&&Ic(G,null,ce,"beforeMount");const Ke=kB(he,Ne);Ke&&Ne.beforeEnter(pe),r(pe,J,ne),((ue=je&&je.onVnodeMounted)||Ke||Ve)&&xs(()=>{ue&&Pi(ue,ce,G),Ke&&Ne.enter(pe),Ve&&Ic(G,null,ce,"mounted")},he)},q=(G,J,ne,ce,he)=>{if(ne&&h(G,ne),ce)for(let le=0;le<ce.length;le++)h(G,ce[le]);if(he){let le=he.subTree;if(J===le||PN(le.type)&&(le.ssContent===J||le.ssFallback===J)){const be=he.vnode;q(G,be,be.scopeId,be.slotScopeIds,he.parent)}}},H=(G,J,ne,ce,he,le,be,Ce,pe=0)=>{for(let ue=pe;ue<G.length;ue++){const je=G[ue]=Ce?La(G[ue]):Gi(G[ue]);y(null,je,J,ne,ce,he,le,be,Ce)}},P=(G,J,ne,ce,he,le,be)=>{const Ce=J.el=G.el;let{patchFlag:pe,dynamicChildren:ue,dirs:je}=J;pe|=G.patchFlag&16;const Ee=G.props||Vt,Ne=J.props||Vt;let Ve;if(ne&&Nc(ne,!1),(Ve=Ne.onVnodeBeforeUpdate)&&Pi(Ve,ne,J,G),je&&Ic(J,G,ne,"beforeUpdate"),ne&&Nc(ne,!0),(Ee.innerHTML&&Ne.innerHTML==null||Ee.textContent&&Ne.textContent==null)&&l(Ce,""),ue?$(G.dynamicChildren,ue,Ce,ne,ce,Ky(J,he),le):be||O(G,J,Ce,null,ne,ce,Ky(J,he),le,!1),pe>0){if(pe&16)W(Ce,Ee,Ne,ne,he);else if(pe&2&&Ee.class!==Ne.class&&i(Ce,"class",null,Ne.class,he),pe&4&&i(Ce,"style",Ee.style,Ne.style,he),pe&8){const Ke=J.dynamicProps;for(let L=0;L<Ke.length;L++){const A=Ke[L],I=Ee[A],K=Ne[A];(K!==I||A==="value")&&i(Ce,A,I,K,he,ne)}}pe&1&&G.children!==J.children&&l(Ce,J.children)}else!be&&ue==null&&W(Ce,Ee,Ne,ne,he);((Ve=Ne.onVnodeUpdated)||je)&&xs(()=>{Ve&&Pi(Ve,ne,J,G),je&&Ic(J,G,ne,"updated")},ce)},$=(G,J,ne,ce,he,le,be)=>{for(let Ce=0;Ce<J.length;Ce++){const pe=G[Ce],ue=J[Ce],je=pe.el&&(pe.type===Hr||!vd(pe,ue)||pe.shapeFlag&198)?d(pe.el):ne;y(pe,ue,je,null,ce,he,le,be,!0)}},W=(G,J,ne,ce,he)=>{if(J!==ne){if(J!==Vt)for(const le in J)!cf(le)&&!(le in ne)&&i(G,le,J[le],null,he,ce);for(const le in ne){if(cf(le))continue;const be=ne[le],Ce=J[le];be!==Ce&&le!=="value"&&i(G,le,Ce,be,he,ce)}"value"in ne&&i(G,"value",J.value,ne.value,he)}},z=(G,J,ne,ce,he,le,be,Ce,pe)=>{const ue=J.el=G?G.el:a(""),je=J.anchor=G?G.anchor:a("");let{patchFlag:Ee,dynamicChildren:Ne,slotScopeIds:Ve}=J;Ve&&(Ce=Ce?Ce.concat(Ve):Ve),G==null?(r(ue,ne,ce),r(je,ne,ce),H(J.children||[],ne,je,he,le,be,Ce,pe)):Ee>0&&Ee&64&&Ne&&G.dynamicChildren&&G.dynamicChildren.length===Ne.length?($(G.dynamicChildren,Ne,ne,he,le,be,Ce),(J.key!=null||he&&J===he.subTree)&&TN(G,J,!0)):O(G,J,ne,je,he,le,be,Ce,pe)},_=(G,J,ne,ce,he,le,be,Ce,pe)=>{J.slotScopeIds=Ce,G==null?J.shapeFlag&512?he.ctx.activate(J,ne,ce,be,pe):p(J,ne,ce,he,le,be,pe):g(G,J,pe)},p=(G,J,ne,ce,he,le,be)=>{const Ce=G.component=qB(G,ce,he);if(hN(G)&&(Ce.ctx.renderer=Oe),zB(Ce,!1,be),Ce.asyncDep){if(he&&he.registerDep(Ce,b,be),!G.el){const pe=Ce.subTree=rr(ia);S(null,pe,J,ne),G.placeholder=pe.el}}else b(Ce,G,J,ne,he,le,be)},g=(G,J,ne)=>{const ce=J.component=G.component;if(_B(G,J,ne))if(ce.asyncDep&&!ce.asyncResolved){x(ce,J,ne);return}else ce.next=J,ce.update();else J.el=G.el,ce.vnode=J},b=(G,J,ne,ce,he,le,be)=>{const Ce=()=>{if(G.isMounted){let{next:Ee,bu:Ne,u:Ve,parent:Ke,vnode:L}=G;{const te=RN(G);if(te){Ee&&(Ee.el=L.el,x(G,Ee,be)),te.asyncDep.then(()=>{G.isUnmounted||Ce()});return}}let A=Ee,I;Nc(G,!1),Ee?(Ee.el=L.el,x(G,Ee,be)):Ee=L,Ne&&jy(Ne),(I=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&Pi(I,Ke,Ee,L),Nc(G,!0);const K=G_(G),Q=G.subTree;G.subTree=K,y(Q,K,d(Q.el),ee(Q),G,he,le),Ee.el=K.el,A===null&&AB(G,K.el),Ve&&xs(Ve,he),(I=Ee.props&&Ee.props.onVnodeUpdated)&&xs(()=>Pi(I,Ke,Ee,L),he)}else{let Ee;const{el:Ne,props:Ve}=J,{bm:Ke,m:L,parent:A,root:I,type:K}=G,Q=Al(J);Nc(G,!1),Ke&&jy(Ke),!Q&&(Ee=Ve&&Ve.onVnodeBeforeMount)&&Pi(Ee,A,J),Nc(G,!0);{I.ce&&I.ce._def.shadowRoot!==!1&&I.ce._injectChildStyle(K);const te=G.subTree=G_(G);y(null,te,ne,ce,G,he,le),J.el=te.el}if(L&&xs(L,he),!Q&&(Ee=Ve&&Ve.onVnodeMounted)){const te=J;xs(()=>Pi(Ee,A,te),he)}(J.shapeFlag&256||A&&Al(A.vnode)&&A.vnode.shapeFlag&256)&&G.a&&xs(G.a,he),G.isMounted=!0,J=ne=ce=null}};G.scope.on();const pe=G.effect=new H5(Ce);G.scope.off();const ue=G.update=pe.run.bind(pe),je=G.job=pe.runIfDirty.bind(pe);je.i=G,je.id=G.uid,pe.scheduler=()=>Rv(je),Nc(G,!0),ue()},x=(G,J,ne)=>{J.component=G;const ce=G.vnode.props;G.vnode=J,G.next=null,xB(G,J.props,ce,ne),RB(G,J.children,ne),na(),q_(G),ra()},O=(G,J,ne,ce,he,le,be,Ce,pe=!1)=>{const ue=G&&G.children,je=G?G.shapeFlag:0,Ee=J.children,{patchFlag:Ne,shapeFlag:Ve}=J;if(Ne>0){if(Ne&128){M(ue,Ee,ne,ce,he,le,be,Ce,pe);return}else if(Ne&256){k(ue,Ee,ne,ce,he,le,be,Ce,pe);return}}Ve&8?(je&16&&Z(ue,he,le),Ee!==ue&&l(ne,Ee)):je&16?Ve&16?M(ue,Ee,ne,ce,he,le,be,Ce,pe):Z(ue,he,le,!0):(je&8&&l(ne,""),Ve&16&&H(Ee,ne,ce,he,le,be,Ce,pe))},k=(G,J,ne,ce,he,le,be,Ce,pe)=>{G=G||vl,J=J||vl;const ue=G.length,je=J.length,Ee=Math.min(ue,je);let Ne;for(Ne=0;Ne<Ee;Ne++){const Ve=J[Ne]=pe?La(J[Ne]):Gi(J[Ne]);y(G[Ne],Ve,ne,null,he,le,be,Ce,pe)}ue>je?Z(G,he,le,!0,!1,Ee):H(J,ne,ce,he,le,be,Ce,pe,Ee)},M=(G,J,ne,ce,he,le,be,Ce,pe)=>{let ue=0;const je=J.length;let Ee=G.length-1,Ne=je-1;for(;ue<=Ee&&ue<=Ne;){const Ve=G[ue],Ke=J[ue]=pe?La(J[ue]):Gi(J[ue]);if(vd(Ve,Ke))y(Ve,Ke,ne,null,he,le,be,Ce,pe);else break;ue++}for(;ue<=Ee&&ue<=Ne;){const Ve=G[Ee],Ke=J[Ne]=pe?La(J[Ne]):Gi(J[Ne]);if(vd(Ve,Ke))y(Ve,Ke,ne,null,he,le,be,Ce,pe);else break;Ee--,Ne--}if(ue>Ee){if(ue<=Ne){const Ve=Ne+1,Ke=Ve<je?J[Ve].el:ce;for(;ue<=Ne;)y(null,J[ue]=pe?La(J[ue]):Gi(J[ue]),ne,Ke,he,le,be,Ce,pe),ue++}}else if(ue>Ne)for(;ue<=Ee;)w(G[ue],he,le,!0),ue++;else{const Ve=ue,Ke=ue,L=new Map;for(ue=Ke;ue<=Ne;ue++){const Ze=J[ue]=pe?La(J[ue]):Gi(J[ue]);Ze.key!=null&&L.set(Ze.key,ue)}let A,I=0;const K=Ne-Ke+1;let Q=!1,te=0;const ie=new Array(K);for(ue=0;ue<K;ue++)ie[ue]=0;for(ue=Ve;ue<=Ee;ue++){const Ze=G[ue];if(I>=K){w(Ze,he,le,!0);continue}let Je;if(Ze.key!=null)Je=L.get(Ze.key);else for(A=Ke;A<=Ne;A++)if(ie[A-Ke]===0&&vd(Ze,J[A])){Je=A;break}Je===void 0?w(Ze,he,le,!0):(ie[Je-Ke]=ue+1,Je>=te?te=Je:Q=!0,y(Ze,J[Je],ne,null,he,le,be,Ce,pe),I++)}const ct=Q?BB(ie):vl;for(A=ct.length-1,ue=K-1;ue>=0;ue--){const Ze=Ke+ue,Je=J[Ze],$t=J[Ze+1],nt=Ze+1<je?$t.el||ON($t):ce;ie[ue]===0?y(null,Je,ne,nt,he,le,be,Ce,pe):Q&&(A<0||ue!==ct[A]?B(Je,ne,nt,2):A--)}}},B=(G,J,ne,ce,he=null)=>{const{el:le,type:be,transition:Ce,children:pe,shapeFlag:ue}=G;if(ue&6){B(G.component.subTree,J,ne,ce);return}if(ue&128){G.suspense.move(J,ne,ce);return}if(ue&64){be.move(G,J,ne,Oe);return}if(be===Hr){r(le,J,ne);for(let Ee=0;Ee<pe.length;Ee++)B(pe[Ee],J,ne,ce);r(G.anchor,J,ne);return}if(be===Gy){C(G,J,ne);return}if(ce!==2&&ue&1&&Ce)if(ce===0)Ce.beforeEnter(le),r(le,J,ne),xs(()=>Ce.enter(le),he);else{const{leave:Ee,delayLeave:Ne,afterLeave:Ve}=Ce,Ke=()=>{G.ctx.isUnmounted?s(le):r(le,J,ne)},L=()=>{le._isLeaving&&le[Z4](!0),Ee(le,()=>{Ke(),Ve&&Ve()})};Ne?Ne(le,Ke,L):L()}else r(le,J,ne)},w=(G,J,ne,ce=!1,he=!1)=>{const{type:le,props:be,ref:Ce,children:pe,dynamicChildren:ue,shapeFlag:je,patchFlag:Ee,dirs:Ne,cacheIndex:Ve}=G;if(Ee===-2&&(he=!1),Ce!=null&&(na(),hf(Ce,null,ne,G,!0),ra()),Ve!=null&&(J.renderCache[Ve]=void 0),je&256){J.ctx.deactivate(G);return}const Ke=je&1&&Ne,L=!Al(G);let A;if(L&&(A=be&&be.onVnodeBeforeUnmount)&&Pi(A,J,G),je&6)F(G.component,ne,ce);else{if(je&128){G.suspense.unmount(ne,ce);return}Ke&&Ic(G,null,J,"beforeUnmount"),je&64?G.type.remove(G,J,ne,Oe,ce):ue&&!ue.hasOnce&&(le!==Hr||Ee>0&&Ee&64)?Z(ue,J,ne,!1,!0):(le===Hr&&Ee&384||!he&&je&16)&&Z(pe,J,ne),ce&&v(G)}(L&&(A=be&&be.onVnodeUnmounted)||Ke)&&xs(()=>{A&&Pi(A,J,G),Ke&&Ic(G,null,J,"unmounted")},ne)},v=G=>{const{type:J,el:ne,anchor:ce,transition:he}=G;if(J===Hr){D(ne,ce);return}if(J===Gy){T(G);return}const le=()=>{s(ne),he&&!he.persisted&&he.afterLeave&&he.afterLeave()};if(G.shapeFlag&1&&he&&!he.persisted){const{leave:be,delayLeave:Ce}=he,pe=()=>be(ne,le);Ce?Ce(G.el,le,pe):pe()}else le()},D=(G,J)=>{let ne;for(;G!==J;)ne=f(G),s(G),G=ne;s(J)},F=(G,J,ne)=>{const{bum:ce,scope:he,job:le,subTree:be,um:Ce,m:pe,a:ue}=G;J_(pe),J_(ue),ce&&jy(ce),he.stop(),le&&(le.flags|=8,w(be,G,J,ne)),Ce&&xs(Ce,J),xs(()=>{G.isUnmounted=!0},J)},Z=(G,J,ne,ce=!1,he=!1,le=0)=>{for(let be=le;be<G.length;be++)w(G[be],J,ne,ce,he)},ee=G=>{if(G.shapeFlag&6)return ee(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const J=f(G.anchor||G.el),ne=J&&J[G4];return ne?f(ne):J};let de=!1;const ae=(G,J,ne)=>{let ce;G==null?J._vnode&&(w(J._vnode,null,null,!0),ce=J._vnode.component):y(J._vnode||null,G,J,null,null,null,ne),J._vnode=G,de||(de=!0,q_(ce),aN(),de=!1)},Oe={p:y,um:w,m:B,r:v,mt:p,mc:H,pc:O,pbc:$,n:ee,o:t};return{render:ae,hydrate:void 0,createApp:yB(ae)}}function Ky({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Nc({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function kB(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function TN(t,e,n=!1){const r=t.children,s=e.children;if(ut(r)&&ut(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=La(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&TN(o,a)),a.type===wm&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=i+(t.type===Hr?1:0)),a.type===ia&&!a.el&&(a.el=o.el)}}function BB(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function RN(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:RN(e)}function J_(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function ON(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?ON(e.subTree):null}const PN=t=>t.__isSuspense;function DB(t,e){e&&e.pendingBranch?ut(t)?e.effects.push(...t):e.effects.push(t):q4(t)}const Hr=Symbol.for("v-fgt"),wm=Symbol.for("v-txt"),ia=Symbol.for("v-cmt"),Gy=Symbol.for("v-stc"),gf=[];let Bs=null;function kr(t=!1){gf.push(Bs=t?null:[])}function UB(){gf.pop(),Bs=gf[gf.length-1]||null}let Uf=1;function X_(t,e=!1){Uf+=t,t<0&&Bs&&e&&(Bs.hasOnce=!0)}function kN(t){return t.dynamicChildren=Uf>0?Bs||vl:null,UB(),Uf>0&&Bs&&Bs.push(t),t}function mi(t,e,n,r,s,i){return kN(wt(t,e,n,r,s,i,!0))}function Mf(t,e,n,r,s){return kN(rr(t,e,n,r,s,!0))}function Bv(t){return t?t.__v_isVNode===!0:!1}function vd(t,e){return t.type===e.type&&t.key===e.key}const BN=({key:t})=>t??null,x0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Wn(t)||Qt(t)||dt(t)?{i:hs,r:t,k:e,f:!!n}:t:null);function wt(t,e=null,n=null,r=0,s=null,i=t===Hr?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&BN(e),ref:e&&x0(e),scopeId:uN,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:hs};return a?(Dv(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Wn(n)?8:16),Uf>0&&!o&&Bs&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Bs.push(c),c}const rr=MB;function MB(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===uB)&&(t=ia),Bv(t)){const a=Ll(t,e,!0);return n&&Dv(a,n),Uf>0&&!i&&Bs&&(a.shapeFlag&6?Bs[Bs.indexOf(t)]=a:Bs.push(a)),a.patchFlag=-2,a}if(KB(t)&&(t=t.__vccOpts),e){e=$B(e);let{class:a,style:c}=e;a&&!Wn(a)&&(e.class=qh(a)),sn(c)&&(hm(c)&&!ut(c)&&(c=gr({},c)),e.style=bv(c))}const o=Wn(t)?1:PN(t)?128:Y4(t)?64:sn(t)?4:dt(t)?2:0;return wt(t,e,n,r,s,o,i,!0)}function $B(t){return t?hm(t)||_N(t)?gr({},t):t:null}function Ll(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,u=e?LB(s||{},e):s,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&BN(u),ref:e&&e.ref?n&&i?ut(i)?i.concat(x0(e)):[i,x0(e)]:x0(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Hr?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ll(t.ssContent),ssFallback:t.ssFallback&&Ll(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Ov(l,c.clone(l)),l}function qi(t=" ",e=0){return rr(wm,null,t,e)}function ef(t="",e=!1){return e?(kr(),Mf(ia,null,t)):rr(ia,null,t)}function Gi(t){return t==null||typeof t=="boolean"?rr(ia):ut(t)?rr(Hr,null,t.slice()):Bv(t)?La(t):rr(wm,null,String(t))}function La(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ll(t)}function Dv(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ut(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Dv(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!_N(e)?e._ctx=hs:s===3&&hs&&(hs.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else dt(e)?(e={default:e,_ctx:hs},n=32):(e=String(e),r&64?(n=16,e=[qi(e)]):n=8);t.children=e,t.shapeFlag|=n}function LB(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=qh([e.class,r.class]));else if(s==="style")e.style=bv([e.style,r.style]);else if(am(s)){const i=e[s],o=r[s];o&&i!==o&&!(ut(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Pi(t,e,n,r=null){co(t,e,7,[n,r])}const FB=bN();let jB=0;function qB(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||FB,i={uid:jB++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new j5(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:SN(r,s),emitsOptions:EN(r,s),emit:null,emitted:null,propsDefaults:Vt,inheritAttrs:r.inheritAttrs,ctx:Vt,data:Vt,props:Vt,attrs:Vt,slots:Vt,refs:Vt,setupState:Vt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=bB.bind(null,i),t.ce&&t.ce(i),i}let Vr=null;const DN=()=>Vr||hs;let Q0,m1;{const t=dm(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Q0=e("__VUE_INSTANCE_SETTERS__",n=>Vr=n),m1=e("__VUE_SSR_SETTERS__",n=>$f=n)}const Hh=t=>{const e=Vr;return Q0(t),t.scope.on(),()=>{t.scope.off(),Q0(e)}},Q_=()=>{Vr&&Vr.scope.off(),Q0(null)};function UN(t){return t.vnode.shapeFlag&4}let $f=!1;function zB(t,e=!1,n=!1){e&&m1(e);const{props:r,children:s}=t.vnode,i=UN(t);SB(t,r,i,e),TB(t,s,n||e);const o=i?HB(t,e):void 0;return e&&m1(!1),o}function HB(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,lB);const{setup:r}=n;if(r){na();const s=t.setupContext=r.length>1?VB(t):null,i=Hh(t),o=zh(r,t,0,[t.props,s]),a=k5(o);if(ra(),i(),(a||t.sp)&&!Al(t)&&fN(t),a){if(o.then(Q_,Q_),e)return o.then(c=>{eA(t,c)}).catch(c=>{pm(c,t,0)});t.asyncDep=o}else eA(t,o)}else MN(t)}function eA(t,e,n){dt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:sn(e)&&(t.setupState=sN(e)),MN(t)}function MN(t,e,n){const r=t.type;t.render||(t.render=r.render||ro);{const s=Hh(t);na();try{dB(t)}finally{ra(),s()}}}const WB={get(t,e){return Br(t,"get",""),t[e]}};function VB(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,WB),slots:t.slots,emit:t.emit,expose:e}}function Uv(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(sN(Iv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in pf)return pf[n](t)},has(e,n){return n in e||n in pf}})):t.proxy}function KB(t){return dt(t)&&"__vccOpts"in t}const Sl=(t,e)=>M4(t,e,$f),GB="3.5.27";let y1;const tA=typeof window<"u"&&window.trustedTypes;if(tA)try{y1=tA.createPolicy("vue",{createHTML:t=>t})}catch{}const $N=y1?t=>y1.createHTML(t):t=>t,YB="http://www.w3.org/2000/svg",ZB="http://www.w3.org/1998/Math/MathML",Uo=typeof document<"u"?document:null,nA=Uo&&Uo.createElement("template"),JB={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Uo.createElementNS(YB,t):e==="mathml"?Uo.createElementNS(ZB,t):n?Uo.createElement(t,{is:n}):Uo.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Uo.createTextNode(t),createComment:t=>Uo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Uo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{nA.innerHTML=$N(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=nA.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},XB=Symbol("_vtc");function QB(t,e,n){const r=t[XB];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const rA=Symbol("_vod"),eD=Symbol("_vsh"),tD=Symbol(""),nD=/(?:^|;)\s*display\s*:/;function rD(t,e,n){const r=t.style,s=Wn(n);let i=!1;if(n&&!s){if(e)if(Wn(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&I0(r,a,"")}else for(const o in e)n[o]==null&&I0(r,o,"");for(const o in n)o==="display"&&(i=!0),I0(r,o,n[o])}else if(s){if(e!==n){const o=r[tD];o&&(n+=";"+o),r.cssText=n,i=nD.test(n)}}else e&&t.removeAttribute("style");rA in t&&(t[rA]=i?r.display:"",t[eD]&&(r.display="none"))}const sA=/\s*!important$/;function I0(t,e,n){if(ut(n))n.forEach(r=>I0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=sD(t,e);sA.test(n)?t.setProperty(Tu(r),n.replace(sA,""),"important"):t[r]=n}}const iA=["Webkit","Moz","ms"],Yy={};function sD(t,e){const n=Yy[e];if(n)return n;let r=uc(e);if(r!=="filter"&&r in t)return Yy[e]=r;r=U5(r);for(let s=0;s<iA.length;s++){const i=iA[s]+r;if(i in t)return Yy[e]=i}return e}const oA="http://www.w3.org/1999/xlink";function aA(t,e,n,r,s,i=c4(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(oA,e.slice(6,e.length)):t.setAttributeNS(oA,e,n):n==null||i&&!$5(n)?t.removeAttribute(e):t.setAttribute(e,i?"":la(n)?String(n):n)}function cA(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?$N(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=$5(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function iD(t,e,n,r){t.addEventListener(e,n,r)}function oD(t,e,n,r){t.removeEventListener(e,n,r)}const uA=Symbol("_vei");function aD(t,e,n,r,s=null){const i=t[uA]||(t[uA]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=cD(e);if(r){const u=i[e]=dD(r,s);iD(t,a,u,c)}else o&&(oD(t,a,o,c),i[e]=void 0)}}const lA=/(?:Once|Passive|Capture)$/;function cD(t){let e;if(lA.test(t)){e={};let r;for(;r=t.match(lA);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Tu(t.slice(2)),e]}let Zy=0;const uD=Promise.resolve(),lD=()=>Zy||(uD.then(()=>Zy=0),Zy=Date.now());function dD(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;co(fD(r,n.value),e,5,[r])};return n.value=t,n.attached=lD(),n}function fD(t,e){if(ut(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const dA=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,hD=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?QB(t,r,o):e==="style"?rD(t,n,r):am(e)?yv(e)||aD(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):pD(t,e,r,o))?(cA(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&aA(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Wn(r))?cA(t,uc(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),aA(t,e,r,o))};function pD(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&dA(e)&&dt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return dA(e)&&Wn(n)?!1:e in t}const gD=gr({patchProp:hD},JB);let fA;function mD(){return fA||(fA=OB(gD))}const yD=((...t)=>{const e=mD().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=bD(r);if(!s)return;const i=e._component;!dt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,wD(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function wD(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function bD(t){return Wn(t)?document.querySelector(t):t}let LN;const bm=t=>LN=t,FN=Symbol();function w1(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var mf;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(mf||(mf={}));function ED(){const t=q5(!0),e=t.run(()=>Nv({}));let n=[],r=[];const s=Iv({install(i){bm(s),s._a=i,i.provide(FN,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const jN=()=>{};function hA(t,e,n,r=jN){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&z5()&&u4(s),s}function Hu(t,...e){t.forEach(n=>{n(...e)})}const vD=t=>t(),pA=Symbol(),Jy=Symbol();function b1(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];w1(s)&&w1(r)&&t.hasOwnProperty(n)&&!Qt(r)&&!sc(r)?t[n]=b1(s,r):t[n]=r}return t}const CD=Symbol();function _D(t){return!w1(t)||!Object.prototype.hasOwnProperty.call(t,CD)}const{assign:Ua}=Object;function AD(t){return!!(Qt(t)&&t.effect)}function SD(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let c;function u(){a||(n.state.value[t]=s?s():{});const l=k4(n.state.value[t]);return Ua(l,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=Iv(Sl(()=>{bm(n);const h=n._s.get(t);return o[f].call(h,h)})),d),{}))}return c=qN(t,u,e,n,r,!0),c}function qN(t,e,n={},r,s,i){let o;const a=Ua({actions:{}},n),c={deep:!0};let u,l,d=new Set,f=new Set,h;const m=r.state.value[t];!i&&!m&&(r.state.value[t]={});let y;function E(H){let P;u=l=!1,typeof H=="function"?(H(r.state.value[t]),P={type:mf.patchFunction,storeId:t,events:h}):(b1(r.state.value[t],H),P={type:mf.patchObject,payload:H,storeId:t,events:h});const $=y=Symbol();Tv().then(()=>{y===$&&(u=!0)}),l=!0,Hu(d,P,r.state.value[t])}const S=i?function(){const{state:P}=n,$=P?P():{};this.$patch(W=>{Ua(W,$)})}:jN;function R(){o.stop(),d.clear(),f.clear(),r._s.delete(t)}const C=(H,P="")=>{if(pA in H)return H[Jy]=P,H;const $=function(){bm(r);const W=Array.from(arguments),z=new Set,_=new Set;function p(x){z.add(x)}function g(x){_.add(x)}Hu(f,{args:W,name:$[Jy],store:N,after:p,onError:g});let b;try{b=H.apply(this&&this.$id===t?this:N,W)}catch(x){throw Hu(_,x),x}return b instanceof Promise?b.then(x=>(Hu(z,x),x)).catch(x=>(Hu(_,x),Promise.reject(x))):(Hu(z,b),b)};return $[pA]=!0,$[Jy]=P,$},T={_p:r,$id:t,$onAction:hA.bind(null,f),$patch:E,$reset:S,$subscribe(H,P={}){const $=hA(d,H,P.detached,()=>W()),W=o.run(()=>ff(()=>r.state.value[t],z=>{(P.flush==="sync"?l:u)&&H({storeId:t,type:mf.direct,events:h},z)},Ua({},c,P)));return $},$dispose:R},N=fm(T);r._s.set(t,N);const q=(r._a&&r._a.runWithContext||vD)(()=>r._e.run(()=>(o=q5()).run(()=>e({action:C}))));for(const H in q){const P=q[H];if(Qt(P)&&!AD(P)||sc(P))i||(m&&_D(P)&&(Qt(P)?P.value=m[H]:b1(P,m[H])),r.state.value[t][H]=P);else if(typeof P=="function"){const $=C(P,H);q[H]=$,a.actions[H]=P}}return Ua(N,q),Ua(Rt(N),q),Object.defineProperty(N,"$state",{get:()=>r.state.value[t],set:H=>{E(P=>{Ua(P,H)})}}),r._p.forEach(H=>{Ua(N,o.run(()=>H({store:N,app:r._a,pinia:r,options:a})))}),m&&i&&n.hydrate&&n.hydrate(N.$state,m),u=!0,l=!0,N}function xD(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,a){const c=H4();return o=o||(c?df(FN,null):null),o&&bm(o),o=LN,o._s.has(t)||(s?qN(t,e,r,o):SD(t,r,o)),o._s.get(t)}return i.$id=t,i}var Em=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ID={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ND=class{#e=ID;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},E1=new ND;function TD(t){setTimeout(t,0)}var Wh=typeof window>"u"||"Deno"in globalThis;function pi(){}function RD(t,e){return typeof t=="function"?t(e):t}function OD(t){return typeof t=="number"&&t>=0&&t!==1/0}function PD(t,e){return Math.max(t+(e||0)-Date.now(),0)}function v1(t,e){return typeof t=="function"?t(e):t}function kD(t,e){return typeof t=="function"?t(e):t}function gA(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Mv(o,e.options))return!1}else if(!Ff(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function mA(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Lf(e.options.mutationKey)!==Lf(i))return!1}else if(!Ff(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Mv(t,e){return(e?.queryKeyHashFn||Lf)(t)}function Lf(t){return JSON.stringify(t,(e,n)=>C1(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ff(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ff(t[n],e[n])):!1}var BD=Object.prototype.hasOwnProperty;function zN(t,e,n=0){if(t===e)return t;if(n>500)return e;const r=yA(t)&&yA(e);if(!r&&!(C1(t)&&C1(e)))return e;const i=(r?t:Object.keys(t)).length,o=r?e:Object.keys(e),a=o.length,c=r?new Array(a):{};let u=0;for(let l=0;l<a;l++){const d=r?l:o[l],f=t[d],h=e[d];if(f===h){c[d]=f,(r?l<i:BD.call(t,d))&&u++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){c[d]=h;continue}const m=zN(f,h,n+1);c[d]=m,m===f&&u++}return i===a&&u===i?t:c}function yA(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function C1(t){if(!wA(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!wA(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function wA(t){return Object.prototype.toString.call(t)==="[object Object]"}function DD(t){return new Promise(e=>{E1.setTimeout(e,t)})}function UD(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?zN(t,e):e}function MD(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function $D(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var $v=Symbol();function HN(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===$v?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function LD(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??=e(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var FD=class extends Em{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Wh&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},WN=new FD;function jD(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var qD=TD;function zD(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=qD;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Wr=zD(),HD=class extends Em{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Wh&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},eg=new HD;function WD(t){return Math.min(1e3*2**t,3e4)}function VN(t){return(t??"online")==="online"?eg.isOnline():!0}var _1=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function KN(t){let e=!1,n=0,r;const s=jD(),i=()=>s.status!=="pending",o=y=>{if(!i()){const E=new _1(y);f(E),t.onCancel?.(E)}},a=()=>{e=!0},c=()=>{e=!1},u=()=>WN.isFocused()&&(t.networkMode==="always"||eg.isOnline())&&t.canRun(),l=()=>VN(t.networkMode)&&t.canRun(),d=y=>{i()||(r?.(),s.resolve(y))},f=y=>{i()||(r?.(),s.reject(y))},h=()=>new Promise(y=>{r=E=>{(i()||u())&&y(E)},t.onPause?.()}).then(()=>{r=void 0,i()||t.onContinue?.()}),m=()=>{if(i())return;let y;const E=n===0?t.initialPromise:void 0;try{y=E??t.fn()}catch(S){y=Promise.reject(S)}Promise.resolve(y).then(d).catch(S=>{if(i())return;const R=t.retry??(Wh?0:3),C=t.retryDelay??WD,T=typeof C=="function"?C(n,S):C,N=R===!0||typeof R=="number"&&n<R||typeof R=="function"&&R(n,S);if(e||!N){f(S);return}n++,t.onFail?.(n,S),DD(T).then(()=>u()?void 0:h()).then(()=>{e?f(S):m()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r?.(),s),cancelRetry:a,continueRetry:c,canStart:l,start:()=>(l()?m():h().then(m),s)}}var GN=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),OD(this.gcTime)&&(this.#e=E1.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Wh?1/0:300*1e3))}clearGcTimeout(){this.#e&&(E1.clearTimeout(this.#e),this.#e=void 0)}},VD=class extends GN{#e;#t;#n;#s;#r;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#s=t.client,this.#n=this.#s.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=EA(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=EA(this.options);e.data!==void 0&&(this.setState(bA(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=UD(this.state.data,t,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(pi).catch(pi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>kD(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$v||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>v1(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!PD(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const a=this.observers.find(c=>c.options.queryFn);a&&this.setOptions(a.options)}const n=new AbortController,r=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},s=()=>{const a=HN(this.options,e),u=(()=>{const l={client:this.#s,queryKey:this.queryKey,meta:this.meta};return r(l),l})();return this.#a=!1,this.options.persister?this.options.persister(a,u,this):a(u)},o=(()=>{const a={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:s};return r(a),a})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=KN({initialPromise:e?.initialPromise,fn:o.fetchFn,onCancel:a=>{a instanceof _1&&a.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(a,c)=>{this.#i({type:"failed",failureCount:a,error:c})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const a=await this.#r.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#n.config.onSuccess?.(a,this),this.#n.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof _1){if(a.silent)return this.#r.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#i({type:"error",error:a}),this.#n.config.onError?.(a,this),this.#n.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...KD(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...bA(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Wr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function KD(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function bA(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function EA(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function vA(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let l=!1;const d=m=>{LD(m,()=>e.signal,()=>l=!0)},f=HN(e.options,e.fetchOptions),h=async(m,y,E)=>{if(l)return Promise.reject();if(y==null&&m.pages.length)return Promise.resolve(m);const R=(()=>{const U={client:e.client,queryKey:e.queryKey,pageParam:y,direction:E?"backward":"forward",meta:e.options.meta};return d(U),U})(),C=await f(R),{maxPages:T}=e.options,N=E?$D:MD;return{pages:N(m.pages,C,T),pageParams:N(m.pageParams,y,T)}};if(s&&i.length){const m=s==="backward",y=m?GD:CA,E={pages:i,pageParams:o},S=y(r,E);a=await h(E,S,m)}else{const m=t??i.length;do{const y=c===0?o[0]??r.initialPageParam:CA(r,a);if(c>0&&y==null)break;a=await h(a,y),c++}while(c<m)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=u}}}function CA(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function GD(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var YD=class extends GN{#e;#t;#n;#s;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||ZD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=KN({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#r({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#s.canStart();try{if(r)e();else{this.#r({type:"pending",variables:t,isPaused:s}),await this.#n.config.onMutate?.(t,this,n);const o=await this.options.onMutate?.(t,n);o!==this.state.context&&this.#r({type:"pending",context:o,variables:t,isPaused:s})}const i=await this.#s.start();return await this.#n.config.onSuccess?.(i,t,this.state.context,this,n),await this.options.onSuccess?.(i,t,this.state.context,n),await this.#n.config.onSettled?.(i,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(i,null,t,this.state.context,n),this.#r({type:"success",data:i}),i}catch(i){try{await this.#n.config.onError?.(i,t,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,t,this.state.context,n)}catch(o){Promise.reject(o)}try{await this.#n.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,t,this.state.context,n)}catch(o){Promise.reject(o)}throw this.#r({type:"error",error:i}),i}finally{this.#n.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Wr.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function ZD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var YN=class extends Em{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,n,r){const s=new YD({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){this.#e.add(e);const n=Np(e);if(typeof n=="string"){const r=this.#t.get(n);r?r.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=Np(e);if(typeof n=="string"){const r=this.#t.get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Np(e);if(typeof n=="string"){const s=this.#t.get(n)?.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){const n=Np(e);return typeof n=="string"?this.#t.get(n)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Wr.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(r=>mA(n,r))}findAll(e={}){return this.getAll().filter(n=>mA(e,n))}notify(e){Wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Wr.batch(()=>Promise.all(e.map(n=>n.continue().catch(pi))))}};function Np(t){return t.options.scope?.id}var ZN=class extends Em{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,r){const s=n.queryKey,i=n.queryHash??Mv(s,n);let o=this.get(i);return o||(o=new VD({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Wr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>gA(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>gA(e,r)):n}notify(e){Wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Wr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Wr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},JD=class{#e;#t;#n;#s;#r;#o;#a;#i;constructor(e={}){this.#e=e.queryCache||new ZN,this.#t=e.mutationCache||new YN,this.#n=e.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=WN.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=eg.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),r=this.#e.build(this,n),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(v1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(s))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:r})=>{const s=r.data;return[n,s]})}setQueryData(e,n,r){const s=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(s.queryHash)?.state.data,a=RD(n,o);if(a!==void 0)return this.#e.build(this,s).setData(a,{...r,manual:!0})}setQueriesData(e,n,r){return Wr.batch(()=>this.#e.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,n,r)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;Wr.batch(()=>{n.findAll(e).forEach(r=>{n.remove(r)})})}resetQueries(e,n){const r=this.#e;return Wr.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const r={revert:!0,...n},s=Wr.batch(()=>this.#e.findAll(e).map(i=>i.cancel(r)));return Promise.all(s).then(pi).catch(pi)}invalidateQueries(e,n={}){return Wr.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const r={...n,cancelRefetch:n.cancelRefetch??!0},s=Wr.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(pi)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(pi)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const r=this.#e.build(this,n);return r.isStaleByTime(v1(n.staleTime,r))?r.fetch(n):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(pi).catch(pi)}fetchInfiniteQuery(e){return e.behavior=vA(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(pi).catch(pi)}ensureInfiniteQueryData(e){return e.behavior=vA(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return eg.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#s.set(Lf(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#s.values()],r={};return n.forEach(s=>{Ff(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,n){this.#r.set(Lf(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#r.values()],r={};return n.forEach(s=>{Ff(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=Mv(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===$v&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},XD="VUE_QUERY_CLIENT";function QD(t){const e=t?`:${t}`:"";return`${XD}${e}`}function A1(t,e,n="",r=0){if(e){const s=e(t,n,r);if(s===void 0&&Qt(t)||s!==void 0)return s}if(Array.isArray(t))return t.map((s,i)=>A1(s,e,String(i),r+1));if(typeof t=="object"&&tU(t)){const s=Object.entries(t).map(([i,o])=>[i,A1(o,e,i,r+1)]);return Object.fromEntries(s)}return t}function eU(t,e){return A1(t,e)}function vt(t,e=!1){return eU(t,(n,r,s)=>{if(s===1&&r==="queryKey")return vt(n,!0);if(e&&nU(n))return vt(n(),e);if(Qt(n))return vt(Ws(n),e)})}function tU(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function nU(t){return typeof t=="function"}var rU=class extends ZN{find(t){return super.find(vt(t))}findAll(t={}){return super.findAll(vt(t))}},sU=class extends YN{find(t){return super.find(vt(t))}findAll(t={}){return super.findAll(vt(t))}},JN=class extends JD{constructor(t={}){const e={defaultOptions:t.defaultOptions,queryCache:t.queryCache||new rU,mutationCache:t.mutationCache||new sU};super(e),this.isRestoring=Nv(!1)}isFetching(t={}){return super.isFetching(vt(t))}isMutating(t={}){return super.isMutating(vt(t))}getQueryData(t){return super.getQueryData(vt(t))}ensureQueryData(t){return super.ensureQueryData(vt(t))}getQueriesData(t){return super.getQueriesData(vt(t))}setQueryData(t,e,n={}){return super.setQueryData(vt(t),e,vt(n))}setQueriesData(t,e,n={}){return super.setQueriesData(vt(t),e,vt(n))}getQueryState(t){return super.getQueryState(vt(t))}removeQueries(t={}){return super.removeQueries(vt(t))}resetQueries(t={},e={}){return super.resetQueries(vt(t),vt(e))}cancelQueries(t={},e={}){return super.cancelQueries(vt(t),vt(e))}invalidateQueries(t={},e={}){const n=vt(t),r=vt(e);if(super.invalidateQueries({...n,refetchType:"none"},r),n.refetchType==="none")return Promise.resolve();const s={...n,type:n.refetchType??n.type??"active"};return Tv().then(()=>super.refetchQueries(s,r))}refetchQueries(t={},e={}){return super.refetchQueries(vt(t),vt(e))}fetchQuery(t){return super.fetchQuery(vt(t))}prefetchQuery(t){return super.prefetchQuery(vt(t))}fetchInfiniteQuery(t){return super.fetchInfiniteQuery(vt(t))}prefetchInfiniteQuery(t){return super.prefetchInfiniteQuery(vt(t))}setDefaultOptions(t){super.setDefaultOptions(vt(t))}setQueryDefaults(t,e){super.setQueryDefaults(vt(t),vt(e))}getQueryDefaults(t){return super.getQueryDefaults(vt(t))}setMutationDefaults(t,e){super.setMutationDefaults(vt(t),vt(e))}getMutationDefaults(t){return super.getMutationDefaults(vt(t))}},iU={install:(t,e={})=>{const n=QD(e.queryClientKey);let r;if("queryClient"in e&&e.queryClient)r=e.queryClient;else{const o="queryClientConfig"in e?e.queryClientConfig:void 0;r=new JN(o)}Wh||r.mount();let s=()=>{};if(e.clientPersister){r.isRestoring&&(r.isRestoring.value=!0);const[o,a]=e.clientPersister(r);s=o,a.then(()=>{r.isRestoring&&(r.isRestoring.value=!1),e.clientPersisterOnSuccess?.(r)})}const i=()=>{r.unmount(),s()};if(t.onUnmount)t.onUnmount(i);else{const o=t.unmount;t.unmount=function(){i(),o()}}t.provide(n,r)}};const _A=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Qge=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],XN=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],eme=[...XN,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],tme=[...XN,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],nme=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],rme=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],sme=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],ime=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Tp=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}];function dc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new bU(t.type);return`${t.name}(${vm(t.inputs,{includeName:e})})`}function vm(t,{includeName:e=!1}={}){return t?t.map(n=>oU(n,{includeName:e})).join(e?", ":","):""}function oU(t,{includeName:e}){return t.type.startsWith("tuple")?`(${vm(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function fc(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Ln(t){return fc(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const QN="2.44.4";let Xy={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${QN}`},we=class S1 extends Error{constructor(e,n={}){const r=n.cause instanceof S1?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof S1&&n.cause.docsPath||n.docsPath,i=Xy.getDocsUrl?.({...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Xy.version?[`Version: ${Xy.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=QN}walk(e){return eT(this,e)}};function eT(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?eT(t.cause,e):e?null:t}class aU extends we{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class AA extends we{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class tT extends we{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${vm(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class Lv extends we{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class cU extends we{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class uU extends we{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ln(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class lU extends we{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class ome extends we{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class ame extends we{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class nT extends we{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class dU extends we{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class fU extends we{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class cme extends we{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class tg extends we{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class hU extends we{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class ume extends we{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class pU extends we{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${dc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${dc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class lme extends we{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class SA extends we{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${vm(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class gU extends we{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${dc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class mU extends we{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class yU extends we{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class wU extends we{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class bU extends we{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class dme extends we{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}let bs=class extends we{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},rT=class extends we{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},sT=class extends we{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class xA extends we{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function ud(t,{dir:e,size:n=32}={}){return typeof t=="string"?ic(t,{dir:e,size:n}):EU(t,{dir:e,size:n})}function ic(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new sT({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function EU(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new sT({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let Fv=class extends we{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},vU=class extends we{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class CU extends we{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let _U=class extends we{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Si(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function ri(t,{size:e}){if(Ln(t)>e)throw new _U({givenSize:Ln(t),maxSize:e})}function wi(t,e={}){const{signed:n}=e;e.size&&ri(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function wme(t,e={}){let n=t;if(e.size&&(ri(n,{size:e.size}),n=Si(n)),Si(n)==="0x00")return!1;if(Si(n)==="0x01")return!0;throw new CU(n)}function hc(t,e={}){const n=wi(t,e),r=Number(n);if(!Number.isSafeInteger(r))throw new Fv({max:`${Number.MAX_SAFE_INTEGER}`,min:`${Number.MIN_SAFE_INTEGER}`,signed:e.signed,size:e.size,value:`${n}n`});return r}function AU(t,e={}){let n=uo(t);return e.size&&(ri(n,{size:e.size}),n=Si(n,{dir:"right"})),new TextDecoder().decode(n)}const SU=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xs(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ue(t,e):typeof t=="string"?Cm(t,e):typeof t=="boolean"?iT(t,e):Zr(t,e)}function iT(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ri(n,{size:e.size}),ud(n,{size:e.size})):n}function Zr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=SU[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ri(r,{size:e.size}),ud(r,{dir:"right",size:e.size})):r}function Ue(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Fv({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ud(a,{size:r}):a}const xU=new TextEncoder;function Cm(t,e={}){const n=xU.encode(t);return Zr(n,e)}const IU=new TextEncoder;function _m(t,e={}){return typeof t=="number"||typeof t=="bigint"?TU(t,e):typeof t=="boolean"?NU(t,e):fc(t)?uo(t,e):oT(t,e)}function NU(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ri(n,{size:e.size}),ud(n,{size:e.size})):n}const bo={zero:48,nine:57,A:65,F:70,a:97,f:102};function IA(t){if(t>=bo.zero&&t<=bo.nine)return t-bo.zero;if(t>=bo.A&&t<=bo.F)return t-(bo.A-10);if(t>=bo.a&&t<=bo.f)return t-(bo.a-10)}function uo(t,e={}){let n=t;e.size&&(ri(n,{size:e.size}),n=ud(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=IA(r.charCodeAt(a++)),u=IA(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new we(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+u}return i}function TU(t,e){const n=Ue(t,e);return uo(n)}function oT(t,e={}){const n=IU.encode(t);return typeof e.size=="number"?(ri(n,{size:e.size}),ud(n,{dir:"right",size:e.size})):n}const Rp=BigInt(2**32-1),NA=BigInt(32);function RU(t,e=!1){return e?{h:Number(t&Rp),l:Number(t>>NA&Rp)}:{h:Number(t>>NA&Rp)|0,l:Number(t&Rp)|0}}function OU(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=RU(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const PU=(t,e,n)=>t<<n|e>>>32-n,kU=(t,e,n)=>e<<n|t>>>32-n,BU=(t,e,n)=>e<<n-32|t>>>64-n,DU=(t,e,n)=>t<<n-32|e>>>64-n,Wu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function UU(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ng(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Fl(t,...e){if(!UU(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function bme(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ng(t.outputLen),ng(t.blockLen)}function rg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aT(t,e){Fl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function MU(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function jf(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Qy(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ki(t,e){return t<<32-e|t>>>e}const $U=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function LU(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function FU(t){for(let e=0;e<t.length;e++)t[e]=LU(t[e]);return t}const TA=$U?t=>t:FU;function jU(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function jv(t){return typeof t=="string"&&(t=jU(t)),Fl(t),t}function Eme(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Fl(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let cT=class{};function uT(t){const e=r=>t().update(jv(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Cme(t=32){if(Wu&&typeof Wu.getRandomValues=="function")return Wu.getRandomValues(new Uint8Array(t));if(Wu&&typeof Wu.randomBytes=="function")return Uint8Array.from(Wu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const qU=BigInt(0),Cd=BigInt(1),zU=BigInt(2),HU=BigInt(7),WU=BigInt(256),VU=BigInt(113),lT=[],dT=[],fT=[];for(let t=0,e=Cd,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],lT.push(2*(5*r+n)),dT.push((t+1)*(t+2)/2%64);let s=qU;for(let i=0;i<7;i++)e=(e<<Cd^(e>>HU)*VU)%WU,e&zU&&(s^=Cd<<(Cd<<BigInt(i))-Cd);fT.push(s)}const hT=OU(fT,!0),KU=hT[0],GU=hT[1],RA=(t,e,n)=>n>32?BU(t,e,n):PU(t,e,n),OA=(t,e,n)=>n>32?DU(t,e,n):kU(t,e,n);function YU(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=RA(u,l,1)^n[a],f=OA(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=dT[o],c=RA(s,i,a),u=OA(s,i,a),l=lT[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=KU[r],t[1]^=GU[r]}jf(n)}let ZU=class pT extends cT{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,ng(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=MU(this.state)}clone(){return this._cloneInto()}keccak(){TA(this.state32),YU(this.state32,this.rounds),TA(this.state32),this.posOut=0,this.pos=0}update(e){rg(this),e=jv(e),Fl(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){rg(this,!1),Fl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ng(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aT(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,jf(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new pT(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const JU=(t,e,n)=>uT(()=>new ZU(e,t,n)),XU=JU(1,136,256/8);function Vh(t,e){const n=e||"hex",r=XU(fc(t,{strict:!1})?_m(t):t);return n==="bytes"?r:Xs(r)}let Kh=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const QU=/^0x[a-fA-F0-9]{40}$/,ew=new Kh(8192);function mr(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(ew.has(r))return ew.get(r);const s=QU.test(t)?t.toLowerCase()===t?!0:n?Gh(t)===t:!0:!1;return ew.set(r,s),s}const tw=new Kh(8192);function Gh(t,e){if(tw.has(`${t}.${e}`))return tw.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Vh(oT(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return tw.set(`${t}.${e}`,i),i}function Gc(t,e){if(!mr(t,{strict:!1}))throw new bs({address:t});return Gh(t,e)}class PA extends we{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class gT extends we{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class eM extends we{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const tM={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new eM({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new gT({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new PA({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new PA({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function qv(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(tM);return n.bytes=t,n.dataView=new DataView(t.buffer??t,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function qf(t,e,n,{strict:r}={}){return fc(t,{strict:!1})?nM(t,e,n,{strict:r}):wT(t,e,n,{strict:r})}function mT(t,e){if(typeof e=="number"&&e>0&&e>Ln(t)-1)throw new rT({offset:e,position:"start",size:Ln(t)})}function yT(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ln(t)!==n-e)throw new rT({offset:n,position:"end",size:Ln(t)})}function wT(t,e,n,{strict:r}={}){mT(t,e);const s=t.slice(e,n);return r&&yT(s,e,n),s}function nM(t,e,n,{strict:r}={}){mT(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&yT(s,e,n),s}function rM(t,e={}){typeof e.size<"u"&&ri(t,{size:e.size});const n=Zr(t,e);return wi(n,e)}function sM(t,e={}){let n=t;if(typeof e.size<"u"&&(ri(n,{size:e.size}),n=Si(n)),n.length>1||n[0]>1)throw new vU(n);return!!n[0]}function Zo(t,e={}){typeof e.size<"u"&&ri(t,{size:e.size});const n=Zr(t,e);return hc(n,e)}function iM(t,e={}){let n=t;return typeof e.size<"u"&&(ri(n,{size:e.size}),n=Si(n,{dir:"right"})),new TextDecoder().decode(n)}function jl(t){return typeof t[0]=="string"?fa(t):oM(t)}function oM(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function fa(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}const Ame=/^(.*)\[([0-9]*)\]$/,Sme=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,aM=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function bT(t,e){if(t.length!==e.length)throw new lU({expectedLength:t.length,givenLength:e.length});const n=cM({params:t,values:e}),r=Hv(n);return r.length===0?"0x":r}function cM({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(zv({param:t[r],value:e[r]}));return n}function zv({param:t,value:e}){const n=Wv(t.type);if(n){const[r,s]=n;return lM(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return gM(e,{param:t});if(t.type==="address")return uM(e);if(t.type==="bool")return fM(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=aM.exec(t.type)??[];return hM(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return dM(e,{param:t});if(t.type==="string")return pM(e);throw new mU(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Hv(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ln(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ue(e+s,{size:32})),r.push(a),s+=Ln(a)):n.push(a)}return jl([...n,...r])}function uM(t){if(!mr(t))throw new bs({address:t});return{dynamic:!1,encoded:ic(t.toLowerCase())}}function lM(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new wU(t);if(!r&&t.length!==e)throw new cU({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=zv({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=Hv(i);if(r){const a=Ue(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?jl([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:jl(i.map(({encoded:o})=>o))}}function dM(t,{param:e}){const[,n]=e.type.split("bytes"),r=Ln(t);if(!n){let s=t;return r%32!==0&&(s=ic(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:jl([ic(Ue(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new uU({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:ic(t,{dir:"right"})}}function fM(t){if(typeof t!="boolean")throw new we(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:ic(iT(t))}}function hM(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new Fv({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ue(t,{size:32,signed:e})}}function pM(t){const e=Cm(t),n=Math.ceil(Ln(e)/32),r=[];for(let s=0;s<n;s++)r.push(ic(qf(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:jl([ic(Ue(Ln(e),{size:32})),...r])}}function gM(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=zv({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Hv(r):jl(r.map(({encoded:s})=>s))}}function Wv(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Am(t,e){const n=typeof e=="string"?uo(e):e,r=qv(n);if(Ln(n)===0&&t.length>0)throw new Lv;if(Ln(e)&&Ln(e)<32)throw new tT({data:typeof e=="string"?e:Zr(e),params:t,size:Ln(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,u]=xl(r,a,{staticPosition:0});s+=u,i.push(c)}return i}function xl(t,e,{staticPosition:n}){const r=Wv(e.type);if(r){const[s,i]=r;return yM(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return vM(t,e,{staticPosition:n});if(e.type==="address")return mM(t);if(e.type==="bool")return wM(t);if(e.type.startsWith("bytes"))return bM(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return EM(t,e);if(e.type==="string")return CM(t,{staticPosition:n});throw new yU(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const kA=32,x1=32;function mM(t){const e=t.readBytes(32);return[Gh(Zr(wT(e,-20))),32]}function yM(t,e,{length:n,staticPosition:r}){if(!n){const o=Zo(t.readBytes(x1)),a=r+o,c=a+kA;t.setPosition(a);const u=Zo(t.readBytes(kA)),l=zf(e);let d=0;const f=[];for(let h=0;h<u;++h){t.setPosition(c+(l?h*32:d));const[m,y]=xl(t,e,{staticPosition:c});d+=y,f.push(m)}return t.setPosition(r+32),[f,32]}if(zf(e)){const o=Zo(t.readBytes(x1)),a=r+o,c=[];for(let u=0;u<n;++u){t.setPosition(a+u*32);const[l]=xl(t,e,{staticPosition:a});c.push(l)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=xl(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function wM(t){return[sM(t.readBytes(32),{size:32}),32]}function bM(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Zo(t.readBytes(32));t.setPosition(n+o);const a=Zo(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Zr(c),32]}return[Zr(t.readBytes(Number.parseInt(s,10),32)),32]}function EM(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?rM(s,{signed:n}):Zo(s,{signed:n}),32]}function vM(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(zf(e)){const o=Zo(t.readBytes(x1)),a=n+o;for(let c=0;c<e.components.length;++c){const u=e.components[c];t.setPosition(a+i);const[l,d]=xl(t,u,{staticPosition:a});i+=d,s[r?c:u?.name]=l}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,u]=xl(t,a,{staticPosition:n});s[r?o:a?.name]=c,i+=u}return[s,i]}function CM(t,{staticPosition:e}){const n=Zo(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Zo(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=iM(Si(i));return t.setPosition(e+32),[o,32]}function zf(t){const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(zf);const n=Wv(t.type);return!!(n&&zf({...t,type:n[1]}))}const _M=t=>Vh(_m(t));function AM(t){return _M(t)}const SM="1.2.3";let si=class I1 extends Error{constructor(e,n={}){const r=n.cause instanceof I1?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof I1&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${SM}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function ha(t,e){return t.exec(e)?.groups}const ET=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,vT=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,CT=/^\(.+?\).*?$/,BA=/^tuple(?<array>(\[(\d*)\])*)$/;function N1(t){let e=t.type;if(BA.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=N1(i),s<n-1&&(e+=", ")}const r=ha(BA,t.type);return e+=`)${r?.array||""}`,N1({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function _d(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=N1(s),r!==n-1&&(e+=", ")}return e}function xM(t){return t.type==="function"?`function ${t.name}(${_d(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs?.length?` returns (${_d(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${_d(t.inputs)})`:t.type==="error"?`error ${t.name}(${_d(t.inputs)})`:t.type==="constructor"?`constructor(${_d(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const _T=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function IM(t){return _T.test(t)}function NM(t){return ha(_T,t)}const AT=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function TM(t){return AT.test(t)}function RM(t){return ha(AT,t)}const ST=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function OM(t){return ST.test(t)}function PM(t){return ha(ST,t)}const xT=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function IT(t){return xT.test(t)}function kM(t){return ha(xT,t)}const NT=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function BM(t){return NT.test(t)}function DM(t){return ha(NT,t)}const TT=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function UM(t){return TT.test(t)}function MM(t){return ha(TT,t)}const $M=/^receive\(\) external payable$/;function LM(t){return $M.test(t)}const FM=new Set(["indexed"]),T1=new Set(["calldata","memory","storage"]);class jM extends si{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class qM extends si{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class zM extends si{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class HM extends si{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class WM extends si{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class VM extends si{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class KM extends si{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ld extends si{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class GM extends si{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class YM extends si{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class ZM extends si{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class JM extends si{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function XM(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:`${t}${r}`}const nw=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function QM(t,e={}){if(OM(t))return e$(t,e);if(TM(t))return t$(t,e);if(IM(t))return n$(t,e);if(BM(t))return r$(t,e);if(UM(t))return s$(t);if(LM(t))return{type:"receive",stateMutability:"payable"};throw new GM({signature:t})}function e$(t,e={}){const n=PM(t);if(!n)throw new ld({signature:t,type:"function"});const r=bi(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(pu(r[a],{modifiers:T1,structs:e,type:"function"}));const o=[];if(n.returns){const a=bi(n.returns),c=a.length;for(let u=0;u<c;u++)o.push(pu(a[u],{modifiers:T1,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function t$(t,e={}){const n=RM(t);if(!n)throw new ld({signature:t,type:"event"});const r=bi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(pu(r[o],{modifiers:FM,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function n$(t,e={}){const n=NM(t);if(!n)throw new ld({signature:t,type:"error"});const r=bi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(pu(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function r$(t,e={}){const n=DM(t);if(!n)throw new ld({signature:t,type:"constructor"});const r=bi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(pu(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function s$(t){const e=MM(t);if(!e)throw new ld({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const i$=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,o$=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,a$=/^u?int$/;function pu(t,e){const n=XM(t,e?.type,e?.structs);if(nw.has(n))return nw.get(n);const r=CT.test(t),s=ha(r?o$:i$,t);if(!s)throw new zM({param:t});if(s.name&&u$(s.name))throw new HM({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=e?.structs??{};let c,u={};if(r){c="tuple";const d=bi(s.type),f=[],h=d.length;for(let m=0;m<h;m++)f.push(pu(d[m],{structs:a}));u={components:f}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(a$.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,e?.type!=="struct"&&!RT(c))throw new qM({type:c});if(s.modifier){if(!e?.modifiers?.has?.(s.modifier))throw new WM({param:t,type:e?.type,modifier:s.modifier});if(T1.has(s.modifier)&&!l$(c,!!s.array))throw new VM({param:t,type:e?.type,modifier:s.modifier})}const l={type:`${c}${s.array??""}`,...i,...o,...u};return nw.set(n,l),l}function bi(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?bi(a,[...e,n.trim()]):bi(a,e,`${n}${o}`,r);case"(":return bi(a,e,`${n}${o}`,r+1);case")":return bi(a,e,`${n}${o}`,r-1);default:return bi(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new JM({current:n,depth:r});return e.push(n.trim()),e}function RT(t){return t==="address"||t==="bool"||t==="function"||t==="string"||ET.test(t)||vT.test(t)}const c$=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function u$(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||ET.test(t)||vT.test(t)||c$.test(t)}function l$(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function d$(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!IT(a))continue;const c=kM(a);if(!c)throw new ld({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],d=u.length;for(let f=0;f<d;f++){const m=u[f].trim();if(!m)continue;const y=pu(m,{type:"struct"});l.push(y)}if(!l.length)throw new YM({signature:a});e[c.name]=l}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=OT(c,e)}return r}const f$=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function OT(t=[],e={},n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(CT.test(o.type))r.push(o);else{const c=ha(f$,o.type);if(!c?.type)throw new KM({abiParameter:o});const{array:u,type:l}=c;if(l in e){if(n.has(l))throw new ZM({type:l});r.push({...o,type:`tuple${u??""}`,components:OT(e[l],e,new Set([...n,l]))})}else if(RT(l))r.push(o);else throw new jM({type:l})}}return r}function PT(t){const e=d$(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];IT(i)||n.push(QM(i,e))}return n}function h$(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new we("Unable to normalize signature.");return s}const p$=t=>{const e=typeof t=="string"?t:xM(t);return h$(e)};function kT(t){return AM(p$(t))}const Vv=kT,Kv=t=>qf(kT(t),0,4);function Gv(t){const{abi:e,args:n=[],name:r}=t,s=fc(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?Kv(a)===r:a.type==="event"?Vv(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,l)=>{const d="inputs"in a&&a.inputs[l];return d?R1(u,d):!1})){if(o&&"inputs"in o&&o.inputs){const u=BT(a.inputs,o.inputs,n);if(u)throw new pU({abiItem:a,type:u[0]},{abiItem:o,type:u[1]})}o=a}}return o||i[0]}function R1(t,e){const n=typeof t,r=e.type;switch(r){case"address":return mr(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>n==="object"&&R1(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>R1(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function BT(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return BT(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?mr(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?mr(n[r],{strict:!1}):!1)return o}}const rw="/docs/contract/decodeFunctionResult";function g$(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Gv({abi:e,args:n,name:r});if(!a)throw new tg(r,{docsPath:rw});i=a}if(i.type!=="function")throw new tg(void 0,{docsPath:rw});if(!i.outputs)throw new hU(i.name,{docsPath:rw});const o=Am(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const DA="/docs/contract/encodeFunctionData";function m$(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Gv({abi:e,args:n,name:r});if(!i)throw new tg(r,{docsPath:DA});s=i}if(s.type!=="function")throw new tg(void 0,{docsPath:DA});return{abi:[s],functionName:Kv(dc(s))}}function DT(t){const{args:e}=t,{abi:n,functionName:r}=t.abi.length===1&&t.functionName?.startsWith("0x")?t:m$(t),s=n[0],i=r,o="inputs"in s&&s.inputs?bT(s.inputs,e??[]):void 0;return fa([i,o??"0x"])}class O1 extends we{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class y$ extends we{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class w$ extends we{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class UT extends we{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Sm extends we{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function b$({blockNumber:t,chain:e,contract:n}){const r=e?.contracts?.[n];if(!r)throw new O1({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new O1({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function ti(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const E$={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},v$={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},C$={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function _$(t){const{abi:e,data:n}=t,r=qf(n,0,4);if(r==="0x")throw new Lv;const i=[...e||[],v$,C$].find(o=>o.type==="error"&&r===Kv(dc(o)));if(!i)throw new nT(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Am(i.inputs,qf(n,4)):void 0,errorName:i.name}}const Qs=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function MT({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Qs(e[i]):e[i]}`).join(", ")})`}const A$={gwei:9,wei:18},S$={ether:-9,wei:9};function Yh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Yv(t,e="wei"){return Yh(t,A$[e])}function ys(t,e="wei"){return Yh(t,S$[e])}class x$ extends we{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class I$ extends we{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function UA(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function N$(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=UA(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=UA(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Zh(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class T$ extends we{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class R$ extends we{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Zh(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class O$ extends we{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class P$ extends we{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){const h=Zh({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:d,value:typeof f<"u"&&`${Yv(f)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ys(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ys(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ys(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",h].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class $T extends we{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class LT extends we{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class xme extends we{constructor({receipt:e}){super(`Transaction with hash "${e.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=e}}class k$ extends we{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const B$=t=>t,Zv=t=>t;class D$ extends we{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f,stateOverride:h}){const m=n?ti(n):void 0;let y=Zh({from:m?.address,to:d,value:typeof f<"u"&&`${Yv(f)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ys(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ys(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ys(u)} gwei`,nonce:l});h&&(y+=`
${N$(h)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",y].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class U$ extends we{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Gv({abi:n,args:r,name:o}),u=c?MT({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?dc(c,{includeName:!0}):void 0,d=Zh({address:s&&B$(s),function:l,args:u&&u!=="()"&&`${[...Array(o?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class M$ extends we{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=_$({abi:e,data:n});const{abiItem:l,errorName:d,args:f}=o;if(d==="Error")c=f[0];else if(d==="Panic"){const[h]=f;c=E$[h]}else{const h=l?dc(l,{includeName:!0}):void 0,m=l&&f?MT({abiItem:l,args:f,includeFunctionName:!1,includeName:!1}):void 0;a=[h?`Error: ${h}`:"",m&&m!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${m}`:""]}}catch(l){i=l}else s&&(c=s);let u;i instanceof nT&&(u=i.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=u}}class $$ extends we{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class L$ extends we{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class FT extends we{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function Kt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}class yf extends we{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${Zv(o)}`,e&&`Request body: ${Qs(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class Jv extends we{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Zv(r)}`,`Request body: ${Qs(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data,this.url=r}}class MA extends we{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Zv(n)}`,`Request body: ${Qs(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=n}}const F$=-1;class Es extends we{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof Jv?e.code:n??F$}}let Ms=class extends Es{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}};class Hf extends Es{constructor(e){super(e,{code:Hf.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Hf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Wf extends Es{constructor(e){super(e,{code:Wf.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Wf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Vf extends Es{constructor(e,{method:n}={}){super(e,{code:Vf.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Vf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Kf extends Es{constructor(e){super(e,{code:Kf.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Kf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class gu extends Es{constructor(e){super(e,{code:gu.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(gu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ql extends Es{constructor(e){super(e,{code:ql.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ql,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Gf extends Es{constructor(e){super(e,{code:Gf.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Gf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class oc extends Es{constructor(e){super(e,{code:oc.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(oc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class zl extends Es{constructor(e){super(e,{code:zl.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(zl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Yc extends Es{constructor(e,{method:n}={}){super(e,{code:Yc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Yc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Hl extends Es{constructor(e){super(e,{code:Hl.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Hl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Yf extends Es{constructor(e){super(e,{code:Yf.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Yf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});let zn=class jT extends Ms{constructor(e){super(e,{code:jT.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Zf extends Ms{constructor(e){super(e,{code:Zf.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Zf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Jf extends Ms{constructor(e,{method:n}={}){super(e,{code:Jf.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Jf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Xf extends Ms{constructor(e){super(e,{code:Xf.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Xf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Qf extends Ms{constructor(e){super(e,{code:Qf.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Qf,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class lo extends Ms{constructor(e){super(e,{code:lo.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(lo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class eh extends Ms{constructor(e){super(e,{code:eh.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(eh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class th extends Ms{constructor(e){super(e,{code:th.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(th,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class nh extends Ms{constructor(e){super(e,{code:nh.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(nh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class rh extends Ms{constructor(e){super(e,{code:rh.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(rh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class sh extends Ms{constructor(e){super(e,{code:sh.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(sh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class ih extends Ms{constructor(e){super(e,{code:ih.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(ih,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class oh extends Ms{constructor(e){super(e,{code:oh.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(oh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class j$ extends Es{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const q$=3;function z$(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof FT?t:t instanceof we?t.walk(m=>"data"in m)||t.walk():{},{code:c,data:u,details:l,message:d,shortMessage:f}=a,h=t instanceof Lv?new $$({functionName:i}):[q$,gu.code].includes(c)&&(u||l||d||f)||c===ql.code&&l==="execution reverted"&&u?new M$({abi:e,data:typeof u=="object"?u.data:u,functionName:i,message:a instanceof Jv?l:f??d}):t;return new U$(h,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const H$="modulepreload",W$=function(t){return"/"+t},$A={},kn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=c(n.map(u=>{if(u=W$(u),u in $A)return;$A[u]=!0;const l=u.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":H$,l||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),l)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},V$="0.1.1";function K$(){return V$}let Jr=class Oo extends Error{static setStaticOptions(e){Oo.prototype.docsOrigin=e.docsOrigin,Oo.prototype.showVersion=e.showVersion,Oo.prototype.version=e.version}constructor(e,n={}){const r=(()=>{if(n.cause instanceof Oo){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof Oo&&n.cause.docsPath||n.docsPath,i=n.docsOrigin??Oo.prototype.docsOrigin,o=`${i}${s??""}`,a=!!(n.version??Oo.prototype.showVersion),c=n.version??Oo.prototype.version,u=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s||a?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0,a?`Version: ${c}`:void 0]:[]].filter(l=>typeof l=="string").join(`
`);super(u,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsOrigin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.cause=n.cause,this.details=r,this.docs=o,this.docsOrigin=i,this.docsPath=s,this.shortMessage=e,this.showVersion=a,this.version=c}walk(e){return qT(this,e)}};Object.defineProperty(Jr,"defaultStaticOptions",{enumerable:!0,configurable:!0,writable:!0,value:{docsOrigin:"https://oxlib.sh",showVersion:!1,version:`ox@${K$()}`}});Jr.setStaticOptions(Jr.defaultStaticOptions);function qT(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?qT(t.cause,e):e?null:t}function dd(t,e){if(FA(t)>e)throw new a9({givenSize:FA(t),maxSize:e})}const Eo={zero:48,nine:57,A:65,F:70,a:97,f:102};function LA(t){if(t>=Eo.zero&&t<=Eo.nine)return t-Eo.zero;if(t>=Eo.A&&t<=Eo.F)return t-(Eo.A-10);if(t>=Eo.a&&t<=Eo.f)return t-(Eo.a-10)}function G$(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new c9({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function zT(t,e={}){const{dir:n="left"}=e;let r=t,s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function xm(t,e){if(Vl(t)>e)throw new p9({givenSize:Vl(t),maxSize:e})}function Y$(t,e){if(typeof e=="number"&&e>0&&e>Vl(t)-1)throw new JT({offset:e,position:"start",size:Vl(t)})}function Z$(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Vl(t)!==n-e)throw new JT({offset:n,position:"end",size:Vl(t)})}function HT(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new g9({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function J$(t,e={}){const{dir:n="left"}=e;let r=t.replace("0x",""),s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r==="0"?"0x":n==="right"&&r.length%2===1?`0x${r}0`:`0x${r}`}const X$="#__bigint";function WT(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+X$:s,n)}const Q$=new TextDecoder,e9=new TextEncoder;function t9(t){if(!(t instanceof Uint8Array)){if(!t)throw new Op(t);if(typeof t!="object")throw new Op(t);if(!("BYTES_PER_ELEMENT"in t))throw new Op(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new Op(t)}}function Nme(...t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function Tme(t){return t instanceof Uint8Array?t:typeof t=="string"?VT(t):n9(t)}function n9(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function VT(t,e={}){const{size:n}=e;let r=t;n&&(xm(t,n),r=YT(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=LA(s.charCodeAt(c++)),l=LA(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new Jr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u<<4|l}return o}function Rme(t,e={}){const{size:n}=e,r=e9.encode(t);return typeof n=="number"?(dd(r,n),r9(r,n)):r}function r9(t,e){return G$(t,{dir:"right",size:e})}function s9(t){return crypto.getRandomValues(new Uint8Array(t))}function FA(t){return t.length}function Ome(t,e,n,r={}){const{strict:s}=r;return t.slice(e,n)}function Pme(t,e={}){const{size:n}=e;typeof n<"u"&&dd(t,n);const r=Wl(t,e);return ZT(r,e)}function kme(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(dd(r,n),r=i9(r)),r.length>1||r[0]>1)throw new o9(r);return!!r[0]}function Bme(t,e={}){const{size:n}=e;typeof n<"u"&&dd(t,n);const r=Wl(t,e);return f9(r,e)}function Dme(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(dd(r,n),r=KT(r)),Q$.decode(r)}function i9(t){return zT(t,{dir:"left"})}function KT(t){return zT(t,{dir:"right"})}function Ume(t){try{return t9(t),!0}catch{return!1}}class o9 extends Jr{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let Op=class extends Jr{constructor(e){super(`Value \`${typeof e=="object"?WT(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}},a9=class extends Jr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},c9=class extends Jr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const u9=new TextEncoder,l9=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function d9(t,e={}){const{strict:n=!1}=e;if(!t)throw new jA(t);if(typeof t!="string")throw new jA(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new qA(t);if(!t.startsWith("0x"))throw new qA(t)}function Fme(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function jme(t){return t instanceof Uint8Array?Wl(t):Array.isArray(t)?Wl(new Uint8Array(t)):t}function qme(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(xm(n,e.size),GT(n,e.size)):n}function Wl(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=l9[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(xm(r,e.size),YT(r,e.size)):r}function Lo(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new h9({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${t}${u}`})}const c=`0x${(n&&s<0?BigInt.asUintN(r*8,BigInt(s)):s).toString(16)}`;return r?GT(c,r):c}function zme(t,e={}){return Wl(u9.encode(t),e)}function GT(t,e){return HT(t,{dir:"left",size:e})}function YT(t,e){return HT(t,{dir:"right",size:e})}function Hme(t){return Wl(s9(t))}function Wme(t,e,n,r={}){const{strict:s}=r;Y$(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Z$(i,e,n),i}function Vl(t){return Math.ceil((t.length-2)/2)}function Vme(t){return J$(t,{dir:"left"})}function ZT(t,e={}){const{signed:n}=e;e.size&&xm(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function f9(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:ZT(t,e))}function Kme(t,e={}){const{size:n}=e;let r=VT(t);return n&&(dd(r,n),r=KT(r)),new TextDecoder().decode(r)}function Gme(t,e={}){const{strict:n=!1}=e;try{return d9(t,{strict:n}),!0}catch{return!1}}let h9=class extends Jr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},jA=class extends Jr{constructor(e){super(`Value \`${typeof e=="object"?WT(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},qA=class extends Jr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}};class Xme extends Jr{constructor(e){super(`Hex value \`"${e}"\` is an odd length (${e.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}}let p9=class extends Jr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},JT=class extends Jr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},g9=class extends Jr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function m9(t){return{address:t.address,amount:Lo(t.amount),index:Lo(t.index),validatorIndex:Lo(t.validatorIndex)}}function y9(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Lo(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Lo(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Lo(t.gasLimit)},...typeof t.number=="bigint"&&{number:Lo(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Lo(t.prevRandao)},...typeof t.time=="bigint"&&{time:Lo(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(m9)}}}const w9="0x82ad56cb",b9="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",E9="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",nye="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",v9="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033",sw="/docs/contract/encodeDeployData";function XT(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new aU({docsPath:sw});if(!("inputs"in s))throw new AA({docsPath:sw});if(!s.inputs||s.inputs.length===0)throw new AA({docsPath:sw});const i=bT(s.inputs,n);return fa([r,i])}class Zc extends we{constructor({cause:e,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Zc,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Zc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});class mu extends we{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ys(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(mu,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class P1 extends we{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ys(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(P1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class k1 extends we{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(k1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class B1 extends we{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(B1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class D1 extends we{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(D1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class U1 extends we{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(U1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class M1 extends we{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(M1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class $1 extends we{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty($1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class L1 extends we{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(L1,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class ah extends we{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ys(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ys(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(ah,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Im extends we{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Xv(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof we?t.walk(s=>s?.code===Zc.code):t;return r instanceof we?new Zc({cause:t,message:r.details}):Zc.nodeMessage.test(n)?new Zc({cause:t,message:t.details}):mu.nodeMessage.test(n)?new mu({cause:t,maxFeePerGas:e?.maxFeePerGas}):P1.nodeMessage.test(n)?new P1({cause:t,maxFeePerGas:e?.maxFeePerGas}):k1.nodeMessage.test(n)?new k1({cause:t,nonce:e?.nonce}):B1.nodeMessage.test(n)?new B1({cause:t,nonce:e?.nonce}):D1.nodeMessage.test(n)?new D1({cause:t,nonce:e?.nonce}):U1.nodeMessage.test(n)?new U1({cause:t}):M1.nodeMessage.test(n)?new M1({cause:t,gas:e?.gas}):$1.nodeMessage.test(n)?new $1({cause:t,gas:e?.gas}):L1.nodeMessage.test(n)?new L1({cause:t}):ah.nodeMessage.test(n)?new ah({cause:t,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new Im({cause:t})}function C9(t,{docsPath:e,...n}){const r=(()=>{const s=Xv(t,n);return s instanceof Im?t:s})();return new D$(r,{docsPath:e,...n})}function Nm(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}function Tm(t,e){return({exclude:n,format:r})=>({exclude:n,format:(s,i)=>{const o=e(s,i);if(n)for(const a of n)delete o[a];return{...o,...r(s,i)}},type:t})}const _9={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Jh(t,e){const n={};return typeof t.authorizationList<"u"&&(n.authorizationList=A9(t.authorizationList)),typeof t.accessList<"u"&&(n.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(n.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?n.blobs=t.blobs.map(r=>Zr(r)):n.blobs=t.blobs),typeof t.data<"u"&&(n.data=t.data),t.account&&(n.from=t.account.address),typeof t.from<"u"&&(n.from=t.from),typeof t.gas<"u"&&(n.gas=Ue(t.gas)),typeof t.gasPrice<"u"&&(n.gasPrice=Ue(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=Ue(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(n.maxFeePerGas=Ue(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=Ue(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(n.nonce=Ue(t.nonce)),typeof t.to<"u"&&(n.to=t.to),typeof t.type<"u"&&(n.type=_9[t.type]),typeof t.value<"u"&&(n.value=Ue(t.value)),n}const rye=Tm("transactionRequest",Jh);function A9(t){return t.map(e=>({address:e.address,r:e.r?Ue(BigInt(e.r)):e.r,s:e.s?Ue(BigInt(e.s)):e.s,chainId:Ue(e.chainId),nonce:Ue(e.nonce),...typeof e.yParity<"u"?{yParity:Ue(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ue(e.v)}:{}}))}function QT(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const iw=new Map;function e3({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const l=c();o();const d=l.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let h=0;h<l.length;h++){const{resolve:m}=l[h];m?.([f[h],f])}}).catch(f=>{for(let h=0;h<l.length;h++){const{reject:m}=l[h];m?.(f)}})},o=()=>iw.delete(e),a=()=>c().map(({args:l})=>l),c=()=>iw.get(e)||[],u=l=>iw.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:d,resolve:f,reject:h}=QT();return n?.([...a(),l])&&i(),c().length>0?(u({args:l,resolve:f,reject:h}),d):(u({args:l,resolve:f,reject:h}),setTimeout(i,r),d)}}}function zA(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new xA({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new xA({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function S9(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ue(e)),n!==void 0&&(o.nonce=Ue(n)),r!==void 0&&(o.state=zA(r)),s!==void 0){if(o.state)throw new I$;o.stateDiff=zA(s)}return o}function t3(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!mr(n,{strict:!1}))throw new bs({address:n});if(e[n])throw new x$({address:n});e[n]=S9(r)}return e}const sye=2n**16n-1n,Rm=2n**256n-1n;function Xh(t){const{account:e,maxFeePerGas:n,maxPriorityFeePerGas:r,to:s}=t,i=e?ti(e):void 0;if(i&&!mr(i.address))throw new bs({address:i.address});if(s&&!mr(s))throw new bs({address:s});if(n&&n>Rm)throw new mu({maxFeePerGas:n});if(r&&n&&r>n)throw new ah({maxFeePerGas:n,maxPriorityFeePerGas:r})}async function x9(t,e){const{account:n=t.account,authorizationList:r,batch:s=!!t.batch?.multicall,blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:l,data:d,factory:f,factoryData:h,gas:m,gasPrice:y,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:R,nonce:C,to:T,value:N,stateOverride:U,...q}=e,H=n?ti(n):void 0;if(l&&(f||h))throw new we("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&T)throw new we("Cannot provide both `code` & `to` as parameters.");const P=l&&d,$=f&&h&&T&&d,W=P||$,z=P?n3({code:l,data:d}):$?T9({data:d,factory:f,factoryData:h,to:T}):d;try{Xh(e);const p=(typeof i=="bigint"?Ue(i):void 0)||o,g=u?y9(u):void 0,b=t3(U),x=t.chain?.formatters?.transactionRequest?.format,k=(x||Jh)({...Nm(q,{format:x}),accessList:a,account:H,authorizationList:r,blobs:c,data:z,gas:m,gasPrice:y,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:R,nonce:C,to:W?void 0:T,value:N},"call");if(s&&I9({request:k})&&!b&&!g)try{return await N9(t,{...k,blockNumber:i,blockTag:o})}catch(w){if(!(w instanceof UT)&&!(w instanceof O1))throw w}const M=(()=>{const w=[k,p];return b&&g?[...w,b,g]:b?[...w,b]:g?[...w,{},g]:w})(),B=await t.request({method:"eth_call",params:M});return B==="0x"?{data:void 0}:{data:B}}catch(_){const p=R9(_),{offchainLookup:g,offchainLookupSignature:b}=await kn(async()=>{const{offchainLookup:x,offchainLookupSignature:O}=await import("./ccip-BEqbkKeW.js");return{offchainLookup:x,offchainLookupSignature:O}},__vite__mapDeps([0,1]));if(t.ccipRead!==!1&&p?.slice(0,10)===b&&T)return{data:await g(t,{data:p,to:T})};throw W&&p?.slice(0,10)==="0x101bb98d"?new L$({factory:f}):C9(_,{...e,account:H,chain:t.chain})}}function I9({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(w9)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function N9(t,e){const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof t.batch?.multicall=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",data:a,to:c}=e,u=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(t.chain)return b$({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new UT})(),d=(typeof i=="bigint"?Ue(i):void 0)||o,{schedule:f}=e3({id:`${t.uid}.${d}`,wait:s,shouldSplitBatch(y){return y.reduce((S,{data:R})=>S+(R.length-2),0)>n*2},fn:async y=>{const E=y.map(C=>({allowFailure:!0,callData:C.data,target:C.to})),S=DT({abi:_A,args:[E],functionName:"aggregate3"}),R=await t.request({method:"eth_call",params:[{...u===null?{data:n3({code:v9,data:S})}:{to:u,data:S}},d]});return g$({abi:_A,args:[E],functionName:"aggregate3",data:R||"0x"})}}),[{returnData:h,success:m}]=await f({data:a,to:c});if(!m)throw new FT({data:h});return h==="0x"?{data:void 0}:{data:h}}function n3(t){const{code:e,data:n}=t;return XT({abi:PT(["constructor(bytes, bytes)"]),bytecode:b9,args:[e,n]})}function T9(t){const{data:e,factory:n,factoryData:r,to:s}=t;return XT({abi:PT(["constructor(address, bytes, address, bytes)"]),bytecode:E9,args:[s,e,n,r]})}function R9(t){if(!(t instanceof we))return;const e=t.walk();return typeof e?.data=="object"?e.data?.data:e.data}function O9(t,{method:e}){const n={};return t.transport.type==="fallback"&&t.transport.onResponse?.(({method:r,response:s,status:i,transport:o})=>{i==="success"&&e===r&&(n[s]=o.request)}),(r=>n[r]||t.request)}async function P9(t){const e=O9(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}function k9(t){const e=Vh(`0x${t.substring(4)}`).substring(26);return Gh(`0x${e}`)}async function B9({hash:t,signature:e}){const n=fc(t)?t:Xs(t),{secp256k1:r}=await kn(async()=>{const{secp256k1:o}=await import("./secp256k1-ChALTouP.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:d,yParity:f}=e,h=Number(f??d),m=HA(h);return new r.Signature(wi(u),wi(l)).addRecoveryBit(m)}const o=fc(e)?e:Xs(e);if(Ln(o)!==65)throw new Error("invalid signature length");const a=hc(`0x${o.slice(130)}`),c=HA(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function HA(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function D9({hash:t,signature:e}){return k9(await B9({hash:t,signature:e}))}function pc(t,e="hex"){const n=r3(t),r=qv(new Uint8Array(n.length));return n.encode(r),e==="hex"?Zr(r.bytes):r.bytes}function r3(t){return Array.isArray(t)?U9(t.map(e=>r3(e))):M9(t)}function U9(t){const e=t.reduce((s,i)=>s+i.length,0),n=s3(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function M9(t){const e=typeof t=="string"?uo(t):t,n=s3(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function s3(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new we("Length is too large.")}function $9(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Vh(fa(["0x05",pc([e?Ue(e):"0x",s,n?Ue(n):"0x"])]));return r==="bytes"?uo(i):i}async function i3(t){const{authorization:e,signature:n}=t;return D9({hash:$9(e),signature:n??e})}class L9 extends we{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:f}){const h=Zh({from:n?.address,to:d,value:typeof f<"u"&&`${Yv(f)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ys(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ys(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ys(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",h].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function F9(t,{docsPath:e,...n}){const r=(()=>{const s=Xv(t,n);return s instanceof Im?t:s})();return new L9(r,{docsPath:e,...n})}class o3 extends we{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Qv extends we{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class j9 extends we{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ys(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class a3 extends we{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const c3={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Qh(t,e){const n={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?hc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?hc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?c3[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(n.authorizationList=z9(t.authorizationList)),n.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}const q9=Tm("transaction",Qh);function z9(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function u3(t,e){const n=(t.transactions??[]).map(r=>typeof r=="string"?r:Qh(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:n,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const H9=Tm("block",u3);async function Kl(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){const i=s??!1,o=n!==void 0?Ue(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new a3({blockHash:e,blockNumber:n});return(t.chain?.formatters?.block?.format||u3)(a,"getBlock")}async function l3(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function iye(t,e){return d3(t,e)}async function d3(t,e){const{block:n,chain:r=t.chain,request:s}=e||{};try{const i=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof i=="function"){const a=n||await Kt(t,Kl,"getBlock")({}),c=await i({block:a,client:t,request:s});if(c===null)throw new Error;return c}if(typeof i<"u")return i;const o=await t.request({method:"eth_maxPriorityFeePerGas"});return wi(o)}catch{const[i,o]=await Promise.all([n?Promise.resolve(n):Kt(t,Kl,"getBlock")({}),Kt(t,l3,"getGasPrice")({})]);if(typeof i.baseFeePerGas!="bigint")throw new Qv;const a=o-i.baseFeePerGas;return a<0n?0n:a}}async function oye(t,e){return F1(t,e)}async function F1(t,e){const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(o<1)throw new o3;const c=10**(o.toString().split(".")[1]?.length??0),u=f=>f*BigInt(Math.ceil(o*c))/BigInt(c),l=n||await Kt(t,Kl,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const f=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:u,request:s,type:i});if(f!==null)return f}if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new Qv;const f=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await d3(t,{block:l,chain:r,request:s}),h=u(l.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??h+f,maxPriorityFeePerGas:f}}return{gasPrice:s?.gasPrice??u(await Kt(t,l3,"getGasPrice")({}))}}async function W9(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ue(r):n]},{dedupe:!!r});return hc(s)}function eC(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>uo(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Zr(i))}function tC(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>uo(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>uo(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Zr(o))}function V9(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function K9(t,e,n){return t&e^~t&n}function G9(t,e,n){return t&e^t&n^e&n}let Y9=class extends cT{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Qy(this.buffer)}update(e){rg(this),e=jv(e),Fl(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Qy(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){rg(this),aT(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,jf(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;V9(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Qy(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const pa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Z9=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ga=new Uint32Array(64);let J9=class extends Y9{constructor(e=32){super(64,e,8,!1),this.A=pa[0]|0,this.B=pa[1]|0,this.C=pa[2]|0,this.D=pa[3]|0,this.E=pa[4]|0,this.F=pa[5]|0,this.G=pa[6]|0,this.H=pa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ga[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=ga[d-15],h=ga[d-2],m=ki(f,7)^ki(f,18)^f>>>3,y=ki(h,17)^ki(h,19)^h>>>10;ga[d]=y+ga[d-7]+m+ga[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=ki(a,6)^ki(a,11)^ki(a,25),h=l+f+K9(a,c,u)+Z9[d]+ga[d]|0,y=(ki(r,2)^ki(r,13)^ki(r,22))+G9(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+y|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){jf(ga)}destroy(){this.set(0,0,0,0,0,0,0,0),jf(this.buffer)}};const X9=uT(()=>new J9),Q9=X9;function eL(t,e){const n=e||"hex",r=Q9(fc(t,{strict:!1})?_m(t):t);return n==="bytes"?r:Xs(r)}function tL(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=eL(e,"bytes");return s.set([n],0),r==="bytes"?s:Zr(s)}function f3(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(tL({commitment:i,to:r,version:n}));return s}const WA=6,h3=32,nC=4096,p3=h3*nC,VA=p3*WA-1-1*nC*WA,g3=1;class nL extends we{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class m3 extends we{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class rL extends we{constructor({hash:e,size:n}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class sL extends we{constructor({hash:e,version:n}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${g3}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function iL(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?uo(t.data):t.data,r=Ln(n);if(!r)throw new m3;if(r>VA)throw new nL({maxSize:VA,size:r});const s=[];let i=!0,o=0;for(;i;){const a=qv(new Uint8Array(p3));let c=0;for(;c<nC;){const u=n.slice(o,o+(h3-1));if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>Zr(a.bytes))}function y3(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??iL({data:e,to:r}),i=t.commitments??eC({blobs:s,kzg:n,to:r}),o=t.proofs??tC({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function w3(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new R$({transaction:t})}function b3(t,{docsPath:e,...n}){const r=(()=>{const s=Xv(t,n);return s instanceof Im?t:s})();return new P$(r,{docsPath:e,...n})}async function rC(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return hc(e)}async function oL(t,e){const{account:n=t.account,accessList:r,authorizationList:s,chain:i=t.chain,blobVersionedHashes:o,blobs:a,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:m,nonceManager:y,to:E,type:S,value:R,...C}=e,T=await(async()=>{if(!n||!y||typeof m<"u")return m;const H=ti(n),P=i?i.id:await Kt(t,rC,"getChainId")({});return await y.consume({address:H.address,chainId:P,client:t})})();Xh(e);const N=i?.formatters?.transactionRequest?.format,q=(N||Jh)({...Nm(C,{format:N}),account:n?ti(n):void 0,accessList:r,authorizationList:s,blobs:a,blobVersionedHashes:o,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:T,to:E,type:S,value:R},"fillTransaction");try{const H=await t.request({method:"eth_fillTransaction",params:[q]}),$=(i?.formatters?.transaction?.format||Qh)(H.tx);delete $.blockHash,delete $.blockNumber,delete $.r,delete $.s,delete $.transactionIndex,delete $.v,delete $.yParity,$.data=$.input,$.gas&&($.gas=e.gas??$.gas),$.gasPrice&&($.gasPrice=e.gasPrice??$.gasPrice),$.maxFeePerBlobGas&&($.maxFeePerBlobGas=e.maxFeePerBlobGas??$.maxFeePerBlobGas),$.maxFeePerGas&&($.maxFeePerGas=e.maxFeePerGas??$.maxFeePerGas),$.maxPriorityFeePerGas&&($.maxPriorityFeePerGas=e.maxPriorityFeePerGas??$.maxPriorityFeePerGas),$.nonce&&($.nonce=e.nonce??$.nonce);const W=await(async()=>{if(typeof i?.fees?.baseFeeMultiplier=="function"){const g=await Kt(t,Kl,"getBlock")({});return i.fees.baseFeeMultiplier({block:g,client:t,request:e})}return i?.fees?.baseFeeMultiplier??1.2})();if(W<1)throw new o3;const _=10**(W.toString().split(".")[1]?.length??0),p=g=>g*BigInt(Math.ceil(W*_))/BigInt(_);return $.maxFeePerGas&&!e.maxFeePerGas&&($.maxFeePerGas=p($.maxFeePerGas)),$.gasPrice&&!e.gasPrice&&($.gasPrice=p($.gasPrice)),{raw:H.raw,transaction:{from:q.from,...$}}}catch(H){throw b3(H,{...e,chain:t.chain})}}const E3=["blobVersionedHashes","chainId","fees","gas","nonce","type"],KA=new Map,ow=new Kh(128);async function sC(t,e){let n=e;n.account??=t.account,n.parameters??=E3;const{account:r,chain:s=t.chain,nonceManager:i,parameters:o}=n,a=(()=>{if(typeof s?.prepareTransactionRequest=="function")return{fn:s.prepareTransactionRequest,runAt:["beforeFillTransaction"]};if(Array.isArray(s?.prepareTransactionRequest))return{fn:s.prepareTransactionRequest[0],runAt:s.prepareTransactionRequest[1].runAt}})();let c;async function u(){return c||(typeof n.chainId<"u"?n.chainId:s?s.id:(c=await Kt(t,rC,"getChainId")({}),c))}const l=r&&ti(r);let d=n.nonce;if(o.includes("nonce")&&typeof d>"u"&&l&&i){const T=await u();d=await i.consume({address:l.address,chainId:T,client:t})}a?.fn&&a.runAt?.includes("beforeFillTransaction")&&(n=await a.fn({...n,chain:s},{phase:"beforeFillTransaction"}),d??=n.nonce);const h=((o.includes("blobVersionedHashes")||o.includes("sidecars"))&&n.kzg&&n.blobs||ow.get(t.uid)===!1||!["fees","gas"].some(N=>o.includes(N))?!1:!!(o.includes("chainId")&&typeof n.chainId!="number"||o.includes("nonce")&&typeof d!="number"||o.includes("fees")&&typeof n.gasPrice!="bigint"&&(typeof n.maxFeePerGas!="bigint"||typeof n.maxPriorityFeePerGas!="bigint")||o.includes("gas")&&typeof n.gas!="bigint"))?await Kt(t,oL,"fillTransaction")({...n,nonce:d}).then(T=>{const{chainId:N,from:U,gas:q,gasPrice:H,nonce:P,maxFeePerBlobGas:$,maxFeePerGas:W,maxPriorityFeePerGas:z,type:_,...p}=T.transaction;return ow.set(t.uid,!0),{...n,...U?{from:U}:{},..._?{type:_}:{},...typeof N<"u"?{chainId:N}:{},...typeof q<"u"?{gas:q}:{},...typeof H<"u"?{gasPrice:H}:{},...typeof P<"u"?{nonce:P}:{},...typeof $<"u"?{maxFeePerBlobGas:$}:{},...typeof W<"u"?{maxFeePerGas:W}:{},...typeof z<"u"?{maxPriorityFeePerGas:z}:{},..."nonceKey"in p&&typeof p.nonceKey<"u"?{nonceKey:p.nonceKey}:{}}}).catch(T=>{const N=T;return N.name!=="TransactionExecutionError"||N.walk?.(q=>{const H=q;return H.name==="MethodNotFoundRpcError"||H.name==="MethodNotSupportedRpcError"})&&ow.set(t.uid,!1),n}):n;d??=h.nonce,n={...h,...l?{from:l?.address}:{},...d?{nonce:d}:{}};const{blobs:m,gas:y,kzg:E,type:S}=n;a?.fn&&a.runAt?.includes("beforeFillParameters")&&(n=await a.fn({...n,chain:s},{phase:"beforeFillParameters"}));let R;async function C(){return R||(R=await Kt(t,Kl,"getBlock")({blockTag:"latest"}),R)}if(o.includes("nonce")&&typeof d>"u"&&l&&!i&&(n.nonce=await Kt(t,W9,"getTransactionCount")({address:l.address,blockTag:"pending"})),(o.includes("blobVersionedHashes")||o.includes("sidecars"))&&m&&E){const T=eC({blobs:m,kzg:E});if(o.includes("blobVersionedHashes")){const N=f3({commitments:T,to:"hex"});n.blobVersionedHashes=N}if(o.includes("sidecars")){const N=tC({blobs:m,commitments:T,kzg:E}),U=y3({blobs:m,commitments:T,proofs:N,to:"hex"});n.sidecars=U}}if(o.includes("chainId")&&(n.chainId=await u()),(o.includes("fees")||o.includes("type"))&&typeof S>"u")try{n.type=w3(n)}catch{let T=KA.get(t.uid);typeof T>"u"&&(T=typeof(await C())?.baseFeePerGas=="bigint",KA.set(t.uid,T)),n.type=T?"eip1559":"legacy"}if(o.includes("fees"))if(n.type!=="legacy"&&n.type!=="eip2930"){if(typeof n.maxFeePerGas>"u"||typeof n.maxPriorityFeePerGas>"u"){const T=await C(),{maxFeePerGas:N,maxPriorityFeePerGas:U}=await F1(t,{block:T,chain:s,request:n});if(typeof n.maxPriorityFeePerGas>"u"&&n.maxFeePerGas&&n.maxFeePerGas<U)throw new j9({maxPriorityFeePerGas:U});n.maxPriorityFeePerGas=U,n.maxFeePerGas=N}}else{if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")throw new Qv;if(typeof n.gasPrice>"u"){const T=await C(),{gasPrice:N}=await F1(t,{block:T,chain:s,request:n,type:"legacy"});n.gasPrice=N}}return o.includes("gas")&&typeof y>"u"&&(n.gas=await Kt(t,v3,"estimateGas")({...n,account:l,prepare:l?.type==="local"?[]:["blobVersionedHashes"]})),a?.fn&&a.runAt?.includes("afterFillParameters")&&(n=await a.fn({...n,chain:s},{phase:"afterFillParameters"})),Xh(n),delete n.parameters,n}async function v3(t,e){const{account:n=t.account,prepare:r=!0}=e,s=n?ti(n):void 0,i=(()=>{if(Array.isArray(r))return r;if(s?.type!=="local")return["blobVersionedHashes"]})();try{const o=await(async()=>{if(e.to)return e.to;if(e.authorizationList&&e.authorizationList.length>0)return await i3({authorization:e.authorizationList[0]}).catch(()=>{throw new we("`to` is required. Could not infer from `authorizationList`")})})(),{accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,blockNumber:d,blockTag:f,data:h,gas:m,gasPrice:y,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:R,nonce:C,value:T,stateOverride:N,...U}=r?await sC(t,{...e,parameters:i,to:o}):e;if(m&&e.gas!==m)return m;const H=(typeof d=="bigint"?Ue(d):void 0)||f,P=t3(N);Xh(e);const $=t.chain?.formatters?.transactionRequest?.format,z=($||Jh)({...Nm(U,{format:$}),account:s,accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,data:h,gasPrice:y,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:R,nonce:C,to:o,value:T},"estimateGas");return BigInt(await t.request({method:"eth_estimateGas",params:P?[z,H??t.experimental_blockTag??"latest",P]:H?[z,H]:[z]}))}catch(o){throw F9(o,{...e,account:s,chain:t.chain})}}async function aL(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?Ue(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}const cL=new Map,uL=new Map;function lL(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,cL),r=e(t,uL);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function dL(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=lL(e),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const fL=t=>`blockNumber.${t}`;async function hL(t,{cacheTime:e=t.cacheTime}={}){const n=await dL(()=>t.request({method:"eth_blockNumber"}),{cacheKey:fL(t.uid),cacheTime:e});return BigInt(n)}function pL(t,e){if(!mr(t,{strict:!1}))throw new bs({address:t});if(!mr(e,{strict:!1}))throw new bs({address:e});return t.toLowerCase()===e.toLowerCase()}const GA="/docs/contract/decodeEventLog";function YA(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new dU({docsPath:GA});const c=e.find(S=>S.type==="event"&&o===Vv(dc(S)));if(!(c&&"name"in c)||c.type!=="event")throw new fU(o,{docsPath:GA});const{name:u,inputs:l}=c,d=l?.some(S=>!("name"in S&&S.name)),f=d?[]:{},h=l.map((S,R)=>[S,R]).filter(([S])=>"indexed"in S&&S.indexed),m=[];for(let S=0;S<h.length;S++){const[R,C]=h[S],T=a[S];if(!T){if(i)throw new gU({abiItem:c,param:R});m.push([R,C]);continue}f[d?C:R.name||C]=gL({param:R,value:T})}const y=l.filter(S=>!("indexed"in S&&S.indexed)),E=i?y:[...m.map(([S])=>S),...y];if(E.length>0){if(n&&n!=="0x")try{const S=Am(E,n);if(S){let R=0;if(!i)for(const[C,T]of m)f[d?T:C.name||T]=S[R++];if(d)for(let C=0;C<l.length;C++)f[C]===void 0&&R<S.length&&(f[C]=S[R++]);else for(let C=0;C<y.length;C++)f[y[C].name]=S[R++]}}catch(S){if(i)throw S instanceof tT||S instanceof gT?new SA({abiItem:c,data:n,params:E,size:Ln(n)}):S}else if(i)throw new SA({abiItem:c,data:"0x",params:E,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function gL({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Am([t],e)||[])[0]}function mL(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{const a=e.filter(l=>l.type==="event"&&o.topics[0]===Vv(l));if(a.length===0)return null;let c,u;for(const l of a)try{c=YA({...o,abi:[l],strict:!0}),u=l;break}catch{}if(!c&&!s){u=a[0];try{c=YA({...o,abi:[u],strict:!1})}catch{const l=u.inputs?.some(d=>!("name"in d&&d.name));return{...o,args:l?[]:{},eventName:u.name}}}return!c||!u||i&&!i.includes(c.eventName)||!yL({args:c.args,inputs:u.inputs,matchArgs:n})?null:{...c,...o}}).filter(Boolean)}function yL(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?pL(o,a):i.type==="string"||i.type==="bytes"?Vh(_m(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(u=>u.name===i);return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,e[i])):!1}):!1}function C3(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,blockTimestamp:t.blockTimestamp?BigInt(t.blockTimestamp):t.blockTimestamp===null?null:void 0,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function wL(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>C3(i));return!("abi"in e)||!e.abi?s:mL({abi:e.abi,logs:s,strict:n})}function bL(t){const{authorizationList:e}=t;if(e)for(const n of e){const{chainId:r}=n,s=n.address;if(!mr(s))throw new bs({address:s});if(r<0)throw new Sm({chainId:r})}iC(t)}function EL(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new m3;for(const n of e){const r=Ln(n),s=hc(qf(n,0,1));if(r!==32)throw new rL({hash:n,size:r});if(s!==g3)throw new sL({hash:n,version:s})}}iC(t)}function iC(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=t;if(e<=0)throw new Sm({chainId:e});if(s&&!mr(s))throw new bs({address:s});if(r&&r>Rm)throw new mu({maxFeePerGas:r});if(n&&r&&n>r)throw new ah({maxFeePerGas:r,maxPriorityFeePerGas:n})}function vL(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(e<=0)throw new Sm({chainId:e});if(i&&!mr(i))throw new bs({address:i});if(n||s)throw new we("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Rm)throw new mu({maxFeePerGas:r})}function CL(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(i&&!mr(i))throw new bs({address:i});if(typeof e<"u"&&e<=0)throw new Sm({chainId:e});if(n||s)throw new we("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Rm)throw new mu({maxFeePerGas:r})}function Om(t){if(!t||t.length===0)return[];const e=[];for(let n=0;n<t.length;n++){const{address:r,storageKeys:s}=t[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new O$({storageKey:s[i]});if(!mr(r,{strict:!1}))throw new bs({address:r});e.push([r,s])}return e}function _L(t,e){const n=w3(t);return n==="eip1559"?xL(t,e):n==="eip2930"?IL(t,e):n==="eip4844"?SL(t,e):n==="eip7702"?AL(t,e):NL(t,e)}function AL(t,e){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:d}=t;bL(t);const f=Om(l),h=TL(n);return fa(["0x04",pc([Ue(r),i?Ue(i):"0x",u?Ue(u):"0x",c?Ue(c):"0x",s?Ue(s):"0x",o??"0x",a?Ue(a):"0x",d??"0x",f,h,...ep(t,e)])])}function SL(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:d}=t;EL(t);let f=t.blobVersionedHashes,h=t.sidecars;if(t.blobs&&(typeof f>"u"||typeof h>"u")){const C=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(U=>Zr(U)),T=t.kzg,N=eC({blobs:C,kzg:T});if(typeof f>"u"&&(f=f3({commitments:N})),typeof h>"u"){const U=tC({blobs:C,commitments:N,kzg:T});h=y3({blobs:C,commitments:N,proofs:U})}}const m=Om(l),y=[Ue(n),s?Ue(s):"0x",u?Ue(u):"0x",c?Ue(c):"0x",r?Ue(r):"0x",i??"0x",o?Ue(o):"0x",d??"0x",m,a?Ue(a):"0x",f??[],...ep(t,e)],E=[],S=[],R=[];if(h)for(let C=0;C<h.length;C++){const{blob:T,commitment:N,proof:U}=h[C];E.push(T),S.push(N),R.push(U)}return fa(["0x03",pc(h?[y,E,S,R]:y)])}function xL(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:l}=t;iC(t);const d=Om(u),f=[Ue(n),s?Ue(s):"0x",c?Ue(c):"0x",a?Ue(a):"0x",r?Ue(r):"0x",i??"0x",o?Ue(o):"0x",l??"0x",d,...ep(t,e)];return fa(["0x02",pc(f)])}function IL(t,e){const{chainId:n,gas:r,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:u}=t;vL(t);const l=Om(c),d=[Ue(n),i?Ue(i):"0x",u?Ue(u):"0x",r?Ue(r):"0x",o??"0x",a?Ue(a):"0x",s??"0x",l,...ep(t,e)];return fa(["0x01",pc(d)])}function NL(t,e){const{chainId:n=0,gas:r,data:s,nonce:i,to:o,value:a,gasPrice:c}=t;CL(t);let u=[i?Ue(i):"0x",c?Ue(c):"0x",r?Ue(r):"0x",o??"0x",a?Ue(a):"0x",s??"0x"];if(e){const l=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+e.v-27n);const h=27n+(e.v===27n?0n:1n);if(e.v!==h)throw new T$({v:e.v});return h})(),d=Si(e.r),f=Si(e.s);u=[...u,Ue(l),d==="0x00"?"0x":d,f==="0x00"?"0x":f]}else n>0&&(u=[...u,Ue(n),"0x","0x"]);return pc(u)}function ep(t,e){const n=e??t,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=Si(n.r),o=Si(n.s);return[typeof s=="number"?s?Ue(1):"0x":r===0n?"0x":r===1n?Ue(1):r===27n?"0x":Ue(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function TL(t){if(!t||t.length===0)return[];const e=[];for(const n of t){const{chainId:r,nonce:s,...i}=n,o=n.address;e.push([r?Xs(r):"0x",o,s?Xs(s):"0x",...ep({},i)])}return e}const Pp=new Kh(8192);function RL(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Pp.get(n))return Pp.get(n);const r=t().finally(()=>Pp.delete(n));return Pp.set(n,r),r}async function sg(t){return new Promise(e=>setTimeout(e,t))}function ig(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await sg(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});i(u)}};o()})}function OL(t,e={}){return async(n,r={})=>{const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:u}=n;if(i?.exclude?.includes(u))throw new Yc(new Error("method not supported"),{method:u});if(i?.include&&!i.include.includes(u))throw new Yc(new Error("method not supported"),{method:u});const l=s?Cm(`${c}.${Qs(n)}`):void 0;return RL(()=>ig(async()=>{try{return await t(n)}catch(d){const f=d;switch(f.code){case Hf.code:throw new Hf(f);case Wf.code:throw new Wf(f);case Vf.code:throw new Vf(f,{method:n.method});case Kf.code:throw new Kf(f);case gu.code:throw new gu(f);case ql.code:throw new ql(f);case Gf.code:throw new Gf(f);case oc.code:throw new oc(f);case zl.code:throw new zl(f);case Yc.code:throw new Yc(f,{method:n.method});case Hl.code:throw new Hl(f);case Yf.code:throw new Yf(f);case zn.code:throw new zn(f);case Zf.code:throw new Zf(f);case Jf.code:throw new Jf(f);case Xf.code:throw new Xf(f);case Qf.code:throw new Qf(f);case lo.code:throw new lo(f);case eh.code:throw new eh(f);case th.code:throw new th(f);case nh.code:throw new nh(f);case rh.code:throw new rh(f);case sh.code:throw new sh(f);case ih.code:throw new ih(f);case oh.code:throw new oh(f);case 5e3:throw new zn(f);default:throw d instanceof we?d:new j$(f)}}},{delay:({count:d,error:f})=>{if(f&&f instanceof yf){const h=f?.headers?.get("Retry-After");if(h?.match(/\d/))return Number.parseInt(h,10)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>PL(d)}),{enabled:s,id:l})}}function PL(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Hl.code||t.code===gu.code:t instanceof yf&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function kL({chain:t,currentChainId:e}){if(!t)throw new w$;if(e!==t.id)throw new y$({chain:t,currentChainId:e})}function Mr(t){const e={formatters:void 0,fees:void 0,serializers:void 0,...t};function n(r){return s=>{const i=typeof s=="function"?s(r):s,o={...r,...i};return Object.assign(o,{extend:n(o)})}}return Object.assign(e,{extend:n(e)})}function uye(){return{}}const BL={"0x0":"reverted","0x1":"success"};function _3(t,e){const n={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>C3(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?hc(t.transactionIndex):null,status:t.status?BL[t.status]:null,type:t.type?c3[t.type]||t.type:null};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),n}const DL=Tm("transactionReceipt",_3);function A3(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function UL(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const ZA=UL();function ML(t,e={}){const{url:n,headers:r}=$L(t);return{async request(s){const{body:i,fetchFn:o=e.fetchFn??fetch,onRequest:a=e.onRequest,onResponse:c=e.onResponse,timeout:u=e.timeout??1e4}=s,l={...e.fetchOptions??{},...s.fetchOptions??{}},{headers:d,method:f,signal:h}=l;try{const m=await A3(async({signal:E})=>{const S={...l,body:Array.isArray(i)?Qs(i.map(N=>({jsonrpc:"2.0",id:N.id??ZA.take(),...N}))):Qs({jsonrpc:"2.0",id:i.id??ZA.take(),...i}),headers:{...r,"Content-Type":"application/json",...d},method:f||"POST",signal:h||(u>0?E:null)},R=new Request(n,S),C=await a?.(R,S)??{...S,url:n};return await o(C.url??n,C)},{errorInstance:new MA({body:i,url:n}),timeout:u,signal:!0});c&&await c(m);let y;if(m.headers.get("Content-Type")?.startsWith("application/json"))y=await m.json();else{y=await m.text();try{y=JSON.parse(y||"{}")}catch(E){if(m.ok)throw E;y={error:y}}}if(!m.ok)throw new yf({body:i,details:Qs(y.error)||m.statusText,headers:m.headers,status:m.status,url:n});return y}catch(m){throw m instanceof yf||m instanceof MA?m:new yf({body:i,cause:m,url:n})}}}}function $L(t){try{const e=new URL(t),n=(()=>{if(e.username){const r=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`;return e.username="",e.password="",{url:e.toString(),headers:{Authorization:`Basic ${btoa(r)}`}}}})();return{url:e.toString(),...n}}catch{return{url:t}}}class LL extends we{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function FL(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new LL({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}async function S3(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i,sender:o,nonce:a}){const c=r||"latest",u=n!==void 0?Ue(n):void 0;let l=null;if(s?l=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?l=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ue(i)]},{dedupe:!0}):typeof i=="number"?l=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||c,Ue(i)]},{dedupe:!!u}):o&&typeof a=="number"&&(l=await t.request({method:"eth_getTransactionBySenderAndNonce",params:[o,Ue(a)]},{dedupe:!0})),!l)throw new $T({blockHash:e,blockNumber:n,blockTag:c,hash:s,index:i});return(t.chain?.formatters?.transaction?.format||Qh)(l,"getTransaction")}async function aw(t,{hash:e}){const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new LT({hash:e});return(t.chain?.formatters?.transactionReceipt?.format||_3)(n,"getTransactionReceipt")}async function jL(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}const cw=new Map,JA=new Map;let qL=0;function og(t,e,n){const r=++qL,s=()=>cw.get(t)||[],i=()=>{const l=s();cw.set(t,l.filter(d=>d.id!==r))},o=()=>{const l=s();if(!l.some(f=>f.id===r))return;const d=JA.get(t);if(l.length===1&&d){const f=d();f instanceof Promise&&f.catch(()=>{})}i()},a=s();if(cw.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const l in e)c[l]=((...d)=>{const f=s();if(f.length!==0)for(const h of f)h.fns[l]?.(...d)});const u=n(c);return typeof u=="function"&&JA.set(t,u),o}function x3(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await n?.(a)??r;await sg(c);const u=async()=>{s&&(await t({unpoll:i}),await sg(r),u())};u()})(),i}function zL(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Qs(["watchBlockNumber",t.uid,e,n,o]);return og(d,{onBlockNumber:r,onError:s},f=>x3(async()=>{try{const h=await Kt(t,hL,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(h===c)return;if(h-c>1&&n)for(let m=c+1n;m<h;m++)f.onBlockNumber(m,c),c=m}(c===void 0||h>c)&&(f.onBlockNumber(h,c),c=h)}catch(h){f.onError?.(h)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Qs(["watchBlockNumber",t.uid,e,n]);return og(d,{onBlockNumber:r,onError:s},f=>{let h=!0,m=()=>h=!1;return(async()=>{try{const y=(()=>{if(t.transport.type==="fallback"){const S=t.transport.transports.find(R=>R.config.type==="webSocket"||R.config.type==="ipc");return S?S.value:t.transport}return t.transport})(),{unsubscribe:E}=await y.subscribe({params:["newHeads"],onData(S){if(!h)return;const R=wi(S.result?.number);f.onBlockNumber(R,c),c=R},onError(S){f.onError?.(S)}});m=E,h||m()}catch(y){s?.(y)}})(),()=>m()})})()}async function HL(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:N})=>~~(1<<N)*200,timeout:c=18e4}=e,u=Qs(["waitForTransactionReceipt",t.uid,s]),l=e.pollingInterval?e.pollingInterval:t.chain?.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval;let d,f,h,m=!1,y,E;const{promise:S,resolve:R,reject:C}=QT(),T=c?setTimeout(()=>{E?.(),y?.(),C(new k$({hash:s}))},c):void 0;return y=og(u,{onReplaced:i,resolve:R,reject:C},async N=>{if(h=await Kt(t,aw,"getTransactionReceipt")({hash:s}).catch(()=>{}),h&&r<=1){clearTimeout(T),N.resolve(h),y?.();return}E=Kt(t,zL,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:l,async onBlockNumber(U){const q=P=>{clearTimeout(T),E?.(),P(),y?.()};let H=U;if(!m)try{if(h){if(r>1&&(!h.blockNumber||H-h.blockNumber+1n<r))return;q(()=>N.resolve(h));return}if(n&&!d&&(m=!0,await ig(async()=>{d=await Kt(t,S3,"getTransaction")({hash:s}),d.blockNumber&&(H=d.blockNumber)},{delay:a,retryCount:o}),m=!1),h=await Kt(t,aw,"getTransactionReceipt")({hash:s}),r>1&&(!h.blockNumber||H-h.blockNumber+1n<r))return;q(()=>N.resolve(h))}catch(P){if(P instanceof $T||P instanceof LT){if(!d){m=!1;return}try{f=d,m=!0;const $=await ig(()=>Kt(t,Kl,"getBlock")({blockNumber:H,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:_})=>_ instanceof a3});m=!1;const W=$.transactions.find(({from:_,nonce:p})=>_===f.from&&p===f.nonce);if(!W||(h=await Kt(t,aw,"getTransactionReceipt")({hash:W.hash}),r>1&&(!h.blockNumber||H-h.blockNumber+1n<r)))return;let z="replaced";W.to===f.to&&W.value===f.value&&W.input===f.input?z="repriced":W.from===W.to&&W.value===0n&&(z="cancelled"),q(()=>{N.onReplaced?.({reason:z,replacedTransaction:f,transaction:W,transactionReceipt:h}),N.resolve(h)})}catch($){q(()=>N.reject($))}}else q(()=>N.reject(P))}}})}),S}function WL(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const u=Qs(["watchPendingTransactions",t.uid,e,i]);return og(u,{onTransactions:r,onError:n},l=>{let d;const f=x3(async()=>{try{if(!d)try{d=await Kt(t,P9,"createPendingTransactionFilter")({});return}catch(m){throw f(),m}const h=await Kt(t,wL,"getFilterChanges")({filter:d});if(h.length===0)return;if(e)l.onTransactions(h);else for(const m of h)l.onTransactions([m])}catch(h){l.onError?.(h)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Kt(t,jL,"uninstallFilter")({filter:d}),f()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;const h=f.result;r([h])},onError(f){n?.(f)}});l=d,u||l()}catch(d){n?.(d)}})(),()=>l()})()}class oC extends we{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class uw extends we{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}async function VL(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const lw=new Kh(128);async function I3(t,e){const{account:n=t.account,assertChainId:r=!0,chain:s=t.chain,accessList:i,authorizationList:o,blobs:a,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:m,type:y,value:E,...S}=e;if(typeof n>"u")throw new oC({docsPath:"/docs/actions/wallet/sendTransaction"});const R=n?ti(n):null;try{Xh(e);const C=await(async()=>{if(e.to)return e.to;if(e.to!==null&&o&&o.length>0)return await i3({authorization:o[0]}).catch(()=>{throw new we("`to` is required. Could not infer from `authorizationList`.")})})();if(R?.type==="json-rpc"||R===null){let T;s!==null&&(T=await Kt(t,rC,"getChainId")({}),r&&kL({currentChainId:T,chain:s}));const N=t.chain?.formatters?.transactionRequest?.format,q=(N||Jh)({...Nm(S,{format:N}),accessList:i,account:R,authorizationList:o,blobs:a,chainId:T,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:m,to:C,type:y,value:E},"sendTransaction"),H=lw.get(t.uid),P=H?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:P,params:[q]},{retryCount:0})}catch($){if(H===!1)throw $;const W=$;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[q]},{retryCount:0}).then(z=>(lw.set(t.uid,!0),z)).catch(z=>{const _=z;throw _.name==="MethodNotFoundRpcError"||_.name==="MethodNotSupportedRpcError"?(lw.set(t.uid,!1),W):_});throw W}}if(R?.type==="local"){const T=await Kt(t,sC,"prepareTransactionRequest")({account:R,accessList:i,authorizationList:o,blobs:a,chain:s,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:h,nonce:m,nonceManager:R.nonceManager,parameters:[...E3,"sidecars"],type:y,value:E,...S,to:C}),N=s?.serializers?.transaction,U=await R.signTransaction(T,{serializer:N});return await Kt(t,VL,"sendRawTransaction")({serializedTransaction:U})}throw R?.type==="smart"?new uw({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new uw({docsPath:"/docs/actions/wallet/sendTransaction",type:R?.type})}catch(C){throw C instanceof uw?C:b3(C,{...e,account:R,chain:e.chain||void 0})}}async function KL(t,{account:e=t.account,message:n}){if(!e)throw new oC({docsPath:"/docs/actions/wallet/signMessage"});const r=ti(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Cm(n):n.raw instanceof Uint8Array?Xs(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function ag(t,e){return ag.internal(t,I3,"sendTransaction",e)}(function(t){async function e(n,r,s,i){const{abi:o,account:a=n.account,address:c,args:u,dataSuffix:l,functionName:d,...f}=i;if(typeof a>"u")throw new oC({docsPath:"/docs/contract/writeContract"});const h=a?ti(a):null,m=DT({abi:o,args:u,functionName:d});try{return await Kt(n,r,s)({data:`${m}${l?l.replace("0x",""):""}`,to:c,account:h,...f})}catch(y){throw z$(y,{abi:o,address:c,args:u,docsPath:"/docs/contract/writeContract",functionName:d,sender:h?.address})}}t.internal=e})(ag||(ag={}));function so(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const N0="3.2.2",GL=()=>`@wagmi/core@${N0}`;var N3=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},cg,T3;let _c=class j1 extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return GL()}constructor(e,n={}){super(),cg.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof j1?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof j1&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return N3(this,cg,"m",T3).call(this,this,e)}};cg=new WeakSet,T3=function t(e,n){return n?.(e)?e:e.cause?N3(this,cg,"m",t).call(this,e.cause,n):e};class ch extends _c{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class YL extends _c{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class ZL extends _c{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class JL extends _c{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class XL extends _c{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class QL extends _c{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function dw(t,e){let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new YL;try{t.setState(o=>({...o,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:r,...s}=e,i=await n.connect(s);return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await t.storage?.setItem("recentConnectorId",n.id),t.setState(o=>({...o,connections:new Map(o.connections).set(n.uid,{accounts:s.withCapabilities?i.accounts.map(a=>typeof a=="object"?a.address:a):i.accounts,chainId:i.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:s.withCapabilities?i.accounts.map(o=>typeof o=="object"?o:{address:o,capabilities:{}}):i.accounts,chainId:i.chainId}}catch(r){throw t.setState(s=>({...s,status:s.current?"connected":"disconnected"})),r}}const q1=256;let kp=q1,Bp;function R3(t=11){if(!Bp||kp+t>q1*2){Bp="",kp=0;for(let e=0;e<q1;e++)Bp+=(256+Math.random()*256|0).toString(16).substring(1)}return Bp.substring(kp,kp+++t)}function O3(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),c=n?.blockTime??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),l=t.pollingInterval??u,d=t.cacheTime??l,f=t.account?ti(t.account):void 0,{config:h,request:m,value:y}=t.transport({account:f,chain:n,pollingInterval:l}),E={...h,...y},S={account:f,batch:e,cacheTime:d,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:m,transport:E,type:o,uid:R3(),...a?{experimental_blockTag:a}:{}};function R(C){return T=>{const N=T(C);for(const q in S)delete N[q];const U={...C,...N};return Object.assign(U,{extend:R(U)})}}return Object.assign(S,{extend:R(S)})}function aC({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=R3();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:OL(r,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function eF(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>aC({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function XA(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=tF,retryCount:o,retryDelay:a}=e;return(({chain:c,pollingInterval:u=4e3,timeout:l,...d})=>{let f=t,h=()=>{};const m=aC({key:n,name:r,async request({method:y,params:E}){let S;const R=async(C=0)=>{const T=f[C]({...d,chain:c,retryCount:0,timeout:l});try{const N=await T.request({method:y,params:E});return h({method:y,params:E,response:N,transport:T,status:"success"}),N}catch(N){if(h({error:N,method:y,params:E,transport:T,status:"error"}),i(N)||C===f.length-1||(S??=f.slice(C+1).some(U=>{const{include:q,exclude:H}=U({chain:c}).config.methods||{};return q?q.includes(y):H?!H.includes(y):!0}),!S))throw N;return R(C+1)}};return R()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:y=>h=y,transports:f.map(y=>y({chain:c,retryCount:0}))});if(s){const y=typeof s=="object"?s:{};nF({chain:c,interval:y.interval??u,onTransports:E=>f=E,ping:y.ping,sampleCount:y.sampleCount,timeout:y.timeout,transports:f,weights:y.weights})}return m})}function tF(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===zl.code||t.code===zn.code||Zc.nodeMessage.test(t.message)||t.code===5e3))}function nF({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],d=async()=>{const f=await Promise.all(o.map(async y=>{const E=y({chain:t,retryCount:0,timeout:i}),S=Date.now();let R,C;try{await(r?r({transport:E}):E.request({method:"net_listening"})),C=1}catch{C=0}finally{R=Date.now()}return{latency:R-S,success:C}}));l.push(f),l.length>s&&l.shift();const h=Math.max(...l.map(y=>Math.max(...y.map(({latency:E})=>E)))),m=o.map((y,E)=>{const S=l.map(U=>U[E].latency),C=1-S.reduce((U,q)=>U+q,0)/S.length/h,T=l.map(U=>U[E].success),N=T.reduce((U,q)=>U+q,0)/T.length;return N===0?[0,E]:[u*C+c*N,E]}).sort((y,E)=>E[0]-y[0]);n(m.map(([,y])=>o[y])),await sg(e),d()};d()}class rF extends we{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function tf(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:l,raw:d}=e;return({chain:f,retryCount:h,timeout:m})=>{const{batchSize:y=1e3,wait:E=0}=typeof n=="object"?n:{},S=e.retryCount??h,R=m??e.timeout??1e4,C=t||f?.rpcUrls.default.http[0];if(!C)throw new rF;const T=ML(C,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:u,timeout:R});return aC({key:i,methods:o,name:a,async request({method:N,params:U}){const q={method:N,params:U},{schedule:H}=e3({id:C,wait:E,shouldSplitBatch(z){return z.length>y},fn:z=>T.request({body:z}),sort:(z,_)=>z.id-_.id}),P=async z=>n?H(z):[await T.request({body:z})],[{error:$,result:W}]=await P(q);if(d)return{error:$,result:W};if($)throw new Jv({body:q,error:$,url:C});return W},retryCount:S,retryDelay:l,timeout:R,type:"http"},{fetchOptions:s,url:C})}}async function Pm(t,e={}){const{assertChainId:n=!0}=e;let r;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new QL({connector:l});const[d,f]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);r={accounts:d,chainId:f,connector:l}}else r=t.state.connections.get(t.state.current);if(!r)throw new ZL;const s=e.chainId??r.chainId,i=await r.connector.getChainId();if(n&&i!==s)throw new XL({connectionChainId:s,connectorChainId:i});const o=r.connector;if(o.getClient)return o.getClient({chainId:s});const a=ti(e.account??r.accounts[0]);if(a&&(a.address=Gc(a.address)),e.account&&!r.accounts.some(l=>l.toLowerCase()===a.address.toLowerCase()))throw new JL({address:a.address,connector:o});const c=t.chains.find(l=>l.id===s),u=await r.connector.getProvider({chainId:s});return O3({account:a,chain:c,name:"Connector Client",transport:l=>eF(u)({...l,retryCount:0})})}async function QA(t,e={}){let n;if(e.connector)n=e.connector;else{const{connections:s,current:i}=t.state;n=s.get(i)?.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(s=>{if(r.size===0)return{...s,connections:new Map,current:null,status:"disconnected"};const i=r.values().next().value;return{...s,connections:new Map(r),current:i.connector.uid}});{const s=t.state.current;if(!s)return;const i=t.state.connections.get(s)?.connector;if(!i)return;await t.storage?.setItem("recentConnectorId",i.id)}}async function sF(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await Pm(t,{account:e.account,assertChainId:!1,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return so(o,v3,"estimateGas")({...s,account:i})}async function iF(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i}=e,o=t.getClient({chainId:i}),c=await so(o,aL,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),u=t.chains.find(l=>l.id===i)??o.chain;return{decimals:u.nativeCurrency.decimals,symbol:u.nativeCurrency.symbol,value:c}}function oF(t){return t.state.chainId}function uh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!uh(t[r],e[r]))return!1;return!0}if(typeof t.valueOf=="function"&&t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!uh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Il(t){const e=t.state.current,n=t.state.connections.get(e),r=n?.accounts,s=r?.[0],i=t.chains.find(a=>a.id===n?.chainId),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n?.chainId,connector:n?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n?.chainId,connector:n?.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n?.chainId,connector:n?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}let Dp=[];function Po(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||uh(Dp,e)?Dp:(Dp=e,e)}async function aF(t,e){const{account:n,chainId:r,...s}=e,i=n??Il(t).address,o=t.getClient({chainId:r});return so(o,sC,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let fw=!1;async function T0(t,e={}){if(fw)return[];fw=!0,t.setState(u=>({...u,status:u.current?"reconnecting":"connecting"}));const n=[];if(e.connectors?.length)for(const u of e.connectors){let l;typeof u=="function"?l=t._internal.connectors.setup(u):l=u,n.push(l)}else n.push(...t.connectors);let r;try{r=await t.storage?.getItem("recentConnectorId")}catch{}const s={};for(const[,u]of t.state.connections)s[u.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((u,l)=>(s[u.id]??10)-(s[l.id]??10)):n;let o=!1;const a=[],c=[];for(const u of i){const l=await u.getProvider().catch(()=>{});if(!l||c.some(h=>h===l)||!await u.isAuthorized())continue;const f=await u.connect({isReconnecting:!0}).catch(()=>null);f&&(u.emitter.off("connect",t._internal.events.connect),u.emitter.on("change",t._internal.events.change),u.emitter.on("disconnect",t._internal.events.disconnect),t.setState(h=>{const m=new Map(o?h.connections:new Map).set(u.uid,{accounts:f.accounts,chainId:f.chainId,connector:u});return{...h,current:o?h.current:u.uid,connections:m}}),a.push({accounts:f.accounts,chainId:f.chainId,connector:u}),c.push(l),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(u=>({...u,status:"connected"})):t.setState(u=>({...u,connections:new Map,current:null,status:"disconnected"}))),fw=!1,a}async function cF(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&n?.type==="local"?o=t.getClient({chainId:r}):o=await Pm(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:s}),await so(o,I3,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function uF(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await Pm(t,{account:n,connector:r}),so(i,KL,"signMessage")({...s,...n?{account:n}:{}})}class Fa extends _c{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class lF extends _c{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function e2(t,e){const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(e.connector?.uid??t.state.current);if(s){const o=s.connector;if(!o.switchChain)throw new lF({connector:o});return await o.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(o=>o.id===r);if(!i)throw new ch;return t.setState(o=>({...o,chainId:r})),i}async function dF(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await so(i,HL,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const c=so(i,S3,"getTransaction"),{from:u,...l}=await c({hash:a.transactionHash}),f=await so(i,x9,"call")({...l,account:u,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=f?.data?AU(`0x${f.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}function fF(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function P3(t,e){const{onChange:n}=e;return t.subscribe(()=>Il(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return uh(o,c)&&i?.id===a?.id&&i?.uid===a?.uid}})}function hF(t,e){const{onChange:n}=e;return t.subscribe(()=>Po(t),n,{equalityFn:uh})}function pF(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function gF(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const u=t.getClient({chainId:c});return s=so(u,WL,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o?.(),a?.()}}async function mF(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&n?.type==="local"?o=t.getClient({chainId:r}):o=await Pm(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:s}),await so(o,ag,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function lye(t){return t}km.type="injected";function km(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const u=c();if(u)return u}return typeof c=="object"?c:typeof c=="string"?{...yF[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(u){return u?.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},type:km.type,async setup(){const u=await this.getProvider();u?.on&&t.target&&(o||(o=this.onConnect.bind(this),u.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)))},async connect({chainId:u,isReconnecting:l,withCapabilities:d}={}){const f=await this.getProvider();if(!f)throw new Fa;let h=[];if(l)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(await f.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(y=>Gc(y)),h.length>0&&(h=await this.getAccounts())}catch(m){const y=m;if(y.code===zn.code)throw new zn(y);if(y.code===oc.code)throw y}try{!h?.length&&!l&&(h=(await f.request({method:"eth_requestAccounts"})).map(E=>Gc(E))),o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a));let m=await this.getChainId();return u&&m!==u&&(m=(await this.switchChain({chainId:u}).catch(E=>{if(E.code===zn.code)throw E;return{id:m}}))?.id??m),e&&await c.storage?.removeItem(`${this.id}.disconnected`),t.target||await c.storage?.setItem("injected.connected",!0),{accounts:d?h.map(y=>({address:y,capabilities:{}})):h,chainId:m}}catch(m){const y=m;throw y.code===zn.code?new zn(y):y.code===oc.code?new oc(y):y}},async disconnect(){const u=await this.getProvider();if(!u)throw new Fa;i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o));try{await A3(()=>u.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await c.storage?.setItem(`${this.id}.disconnected`,!0),t.target||await c.storage?.removeItem("injected.connected")},async getAccounts(){const u=await this.getProvider();if(!u)throw new Fa;return(await u.request({method:"eth_accounts"})).map(d=>Gc(d))},async getChainId(){const u=await this.getProvider();if(!u)throw new Fa;const l=await u.request({method:"eth_chainId"});return Number(l)},async getProvider(){if(typeof window>"u")return;let u;const l=r();return typeof l.provider=="function"?u=l.provider(window):typeof l.provider=="string"?u=R0(window,l.provider):u=l.provider,u&&!u.removeListener&&("off"in u&&typeof u.off=="function"?u.removeListener=u.off:u.removeListener=()=>{}),u},async isAuthorized(){try{if(e&&await c.storage?.getItem(`${this.id}.disconnected`)||!t.target&&!await c.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const f=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",f),!!await this.getProvider()),h=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(f()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(f()),h))]))return!0}throw new Fa}return!!(await ig(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:l}){const d=await this.getProvider();if(!d)throw new Fa;const f=c.chains.find(m=>m.id===l);if(!f)throw new lo(new ch);const h=new Promise(m=>{const y=(E=>{"chainId"in E&&E.chainId===l&&(c.emitter.off("change",y),m())});c.emitter.on("change",y)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(l)}]}).then(async()=>{await this.getChainId()===l&&c.emitter.emit("change",{chainId:l})}),h]),f}catch(m){const y=m;if(y.code===4902||y?.data?.originalError?.code===4902)try{const{default:E,...S}=f.blockExplorers??{};let R;u?.blockExplorerUrls?R=u.blockExplorerUrls:E&&(R=[E.url,...Object.values(S).map(N=>N.url)]);let C;u?.rpcUrls?.length?C=u.rpcUrls:C=[f.rpcUrls.default?.http[0]??""];const T={blockExplorerUrls:R,chainId:Ue(l),chainName:u?.chainName??f.name,iconUrls:u?.iconUrls,nativeCurrency:u?.nativeCurrency??f.nativeCurrency,rpcUrls:C};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===l)c.emitter.emit("change",{chainId:l});else throw new zn(new Error("User rejected switch after adding network."))}),h]),f}catch(E){throw new zn(E)}throw y.code===zn.code?new zn(y):new lo(y)}},async onAccountsChanged(u){if(u.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const l=(await this.getChainId()).toString();this.onConnect({chainId:l}),e&&await c.storage?.removeItem(`${this.id}.disconnected`)}else c.emitter.emit("change",{accounts:u.map(l=>Gc(l))})},onChainChanged(u){const l=Number(u);c.emitter.emit("change",{chainId:l})},async onConnect(u){const l=await this.getAccounts();if(l.length===0)return;const d=Number(u.chainId);c.emitter.emit("connect",{accounts:l,chainId:d});const f=await this.getProvider();f&&(o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a)))},async onDisconnect(u){const l=await this.getProvider();u&&u.code===1013&&l&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),l&&(i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o))))}})}const yF={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t?.coinbaseWalletExtension?t.coinbaseWalletExtension:R0(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return R0(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){return t?.phantom?.ethereum?t.phantom?.ethereum:R0(t,"isPhantom")}}};function R0(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r?.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function wF(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function bF(){const t=new Set;let e=[];const n=()=>wF(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r?.()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r?.(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const EF=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let u=o;if(a){const l=c?.equalityFn||Object.is;let d=o(r.getState());u=f=>{const h=o(f);if(!l(d,h)){const m=d;a(d=h,m)}},c?.fireImmediately&&a(d,d)}return s(u)},t(e,n,r)},vF=EF;function CF(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const z1=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return z1(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return z1(r)(n)}}}},_F=(t,e)=>(n,r,s)=>{let i={storage:CF(()=>localStorage),partialize:y=>y,version:0,merge:(y,E)=>({...E,...y}),...e},o=!1;const a=new Set,c=new Set;let u=i.storage;if(!u)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,s);const l=()=>{const y=i.partialize({...r()});return u.setItem(i.name,{state:y,version:i.version})},d=s.setState;s.setState=(y,E)=>{d(y,E),l()};const f=t((...y)=>{n(...y),l()},r,s);s.getInitialState=()=>f;let h;const m=()=>{var y,E;if(!u)return;o=!1,a.forEach(R=>{var C;return R((C=r())!=null?C:f)});const S=((E=i.onRehydrateStorage)==null?void 0:E.call(i,(y=r())!=null?y:f))||void 0;return z1(u.getItem.bind(u))(i.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==i.version){if(i.migrate)return[!0,i.migrate(R.state,R.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var C;const[T,N]=R;if(h=i.merge(N,(C=r())!=null?C:f),n(h,!0),T)return l()}).then(()=>{S?.(h,void 0),h=r(),o=!0,c.forEach(R=>R(h))}).catch(R=>{S?.(void 0,R)})};return s.persist={setOptions:y=>{i={...i,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:y=>(a.add(y),()=>{a.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},i.skipHydration||m(),h||f},AF=_F,t2=t=>{let e;const n=new Set,r=(u,l)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const f=e;e=l??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,s,a);return a},hw=t=>t?t2(t):t2;var Yi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bm(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var pw={exports:{}},n2;function SF(){return n2||(n2=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,d,f){if(typeof l!="function")throw new TypeError("The listener must be a function");var h=new s(l,d||c,f),m=n?n+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,d;if(this._eventsCount===0)return u;for(d in l=this._events)e.call(l,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=n?n+u:u,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,m=new Array(h);f<h;f++)m[f]=d[f].fn;return m},a.prototype.listenerCount=function(u){var l=n?n+u:u,d=this._events[l];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,l,d,f,h,m){var y=n?n+u:u;if(!this._events[y])return!1;var E=this._events[y],S=arguments.length,R,C;if(E.fn){switch(E.once&&this.removeListener(u,E.fn,void 0,!0),S){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,l),!0;case 3:return E.fn.call(E.context,l,d),!0;case 4:return E.fn.call(E.context,l,d,f),!0;case 5:return E.fn.call(E.context,l,d,f,h),!0;case 6:return E.fn.call(E.context,l,d,f,h,m),!0}for(C=1,R=new Array(S-1);C<S;C++)R[C-1]=arguments[C];E.fn.apply(E.context,R)}else{var T=E.length,N;for(C=0;C<T;C++)switch(E[C].once&&this.removeListener(u,E[C].fn,void 0,!0),S){case 1:E[C].fn.call(E[C].context);break;case 2:E[C].fn.call(E[C].context,l);break;case 3:E[C].fn.call(E[C].context,l,d);break;case 4:E[C].fn.call(E[C].context,l,d,f);break;default:if(!R)for(N=1,R=new Array(S-1);N<S;N++)R[N-1]=arguments[N];E[C].fn.apply(E[C].context,R)}}return!0},a.prototype.on=function(u,l,d){return i(this,u,l,d,!1)},a.prototype.once=function(u,l,d){return i(this,u,l,d,!0)},a.prototype.removeListener=function(u,l,d,f){var h=n?n+u:u;if(!this._events[h])return this;if(!l)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===l&&(!f||m.once)&&(!d||m.context===d)&&o(this,h);else{for(var y=0,E=[],S=m.length;y<S;y++)(m[y].fn!==l||f&&!m[y].once||d&&m[y].context!==d)&&E.push(m[y]);E.length?this._events[h]=E.length===1?E[0]:E:o(this,h)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=n?n+u:u,this._events[l]&&o(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(pw)),pw.exports}var xF=SF();const cC=fd(xF);class IF{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new cC})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function NF(t){return new IF(t)}function TF(t,e){return JSON.parse(t,(n,r)=>{let s=r;return s?.__type==="bigint"&&(s=BigInt(s.value)),s?.__type==="Map"&&(s=new Map(s.value)),e?.(n,s)??s})}function r2(t,e){return t.slice(0,e).join(".")||"."}function s2(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function RF(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const u=s2(s,this);u===0?s[s.length]=this:(s.splice(u),i.splice(u)),i[i.length]=a;const l=s2(s,c);if(l!==0)return r?e.call(this,a,c,r2(i,l)):`[ref=${r2(i,l)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function OF(t,e,n,r){return JSON.stringify(t,RF((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),e?.(s,o)??o},r),n??void 0)}function PF(t){const{deserialize:e=TF,key:n="wagmi",serialize:r=OF,storage:s=k3}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),u=await i(c);return u?e(u)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const k3={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function kF(){const t=typeof window<"u"&&window.localStorage?window.localStorage:k3;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const H1=256;let Up=H1,Mp;function BF(t=11){if(!Mp||Up+t>H1*2){Mp="",Up=0;for(let e=0;e<H1;e++)Mp+=(256+Math.random()*256|0).toString(16).substring(1)}return Mp.substring(Up,Up+++t)}function DF(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=PF({storage:kF()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?bF():void 0,a=hw(()=>i.chains),c=hw(()=>{const N=[],U=new Set;for(const q of i.connectors??[]){const H=u(q);if(N.push(H),!s&&H.rdns){const P=typeof H.rdns=="string"?[H.rdns]:H.rdns;for(const $ of P)U.add($)}}if(!s&&o){const q=o.getProviders();for(const H of q)U.has(H.info.rdns)||N.push(u(l(H)))}return N});function u(N){const U=NF(BF()),q={...N({emitter:U,chains:a.getState(),storage:n,transports:i.transports}),emitter:U,uid:U.uid};return U.on("connect",C),q.setup?.(),q}function l(N){const{info:U}=N,q=N.provider;return km({target:{...U,id:U.rdns,provider:q}})}const d=new Map;function f(N={}){const U=N.chainId??E.getState().chainId,q=a.getState().find(P=>P.id===U);if(N.chainId&&!q)throw new ch;{const P=d.get(E.getState().chainId);if(P&&!q)return P;if(!q)throw new ch}{const P=d.get(U);if(P)return P}let H;if(i.client)H=i.client({chain:q});else{const P=q.id,$=a.getState().map(_=>_.id),W={},z=Object.entries(i);for(const[_,p]of z)if(!(_==="chains"||_==="client"||_==="connectors"||_==="transports"))if(typeof p=="object")if(P in p)W[_]=p[P];else{if($.some(b=>b in p))continue;W[_]=p}else W[_]=p;H=O3({...W,chain:q,batch:W.batch??{multicall:!0},transport:_=>i.transports[P]({..._,connectors:c})})}return d.set(U,H),H}function h(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let m;const y="0.0.0-canary-";N0.startsWith(y)?m=Number.parseInt(N0.replace(y,""),10):m=Number.parseInt(N0.split(".")[0]??"0",10);const E=hw(vF(n?AF(h,{migrate(N,U){if(U===m)return N;const q=h(),H=S(N,q.chainId);return{...q,chainId:H}},name:"store",partialize(N){return{connections:{__type:"Map",value:Array.from(N.connections.entries()).map(([U,q])=>{const{id:H,name:P,type:$,uid:W}=q.connector;return[U,{...q,connector:{id:H,name:P,type:$,uid:W}}]})},chainId:N.chainId,current:N.current}},merge(N,U){typeof N=="object"&&N&&"status"in N&&delete N.status;const q=S(N,U.chainId);return{...U,...N,chainId:q}},skipHydration:s,storage:n,version:m}):h));E.setState(h());function S(N,U){return N&&typeof N=="object"&&"chainId"in N&&typeof N.chainId=="number"&&a.getState().some(q=>q.id===N.chainId)?N.chainId:U}r&&E.subscribe(({connections:N,current:U})=>U?N.get(U)?.chainId:void 0,N=>{if(a.getState().some(q=>q.id===N))return E.setState(q=>({...q,chainId:N??q.chainId}))}),o?.subscribe(N=>{const U=new Set,q=new Set;for(const P of c.getState())if(U.add(P.id),P.rdns){const $=typeof P.rdns=="string"?[P.rdns]:P.rdns;for(const W of $)q.add(W)}const H=[];for(const P of N){if(q.has(P.info.rdns))continue;const $=u(l(P));U.has($.id)||H.push($)}n&&!E.persist.hasHydrated()||c.setState(P=>[...P,...H],!0)});function R(N){E.setState(U=>{const q=U.connections.get(N.uid);return q?{...U,connections:new Map(U.connections).set(N.uid,{accounts:N.accounts??q.accounts,chainId:N.chainId??q.chainId,connector:q.connector})}:U})}function C(N){E.getState().status==="connecting"||E.getState().status==="reconnecting"||E.setState(U=>{const q=c.getState().find(H=>H.uid===N.uid);return q?(q.emitter.listenerCount("connect")&&q.emitter.off("connect",R),q.emitter.listenerCount("change")||q.emitter.on("change",R),q.emitter.listenerCount("disconnect")||q.emitter.on("disconnect",T),{...U,connections:new Map(U.connections).set(N.uid,{accounts:N.accounts,chainId:N.chainId,connector:q}),current:N.uid,status:"connected"}):U})}function T(N){E.setState(U=>{const q=U.connections.get(N.uid);if(q){const P=q.connector;P.emitter.listenerCount("change")&&q.connector.emitter.off("change",R),P.emitter.listenerCount("disconnect")&&q.connector.emitter.off("disconnect",T),P.emitter.listenerCount("connect")||q.connector.emitter.on("connect",C)}if(U.connections.delete(N.uid),U.connections.size===0)return{...U,connections:new Map,current:null,status:"disconnected"};const H=U.connections.values().next().value;return{...U,connections:new Map(U.connections),current:H.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:f,get state(){return E.getState()},setState(N){let U;typeof N=="function"?U=N(E.getState()):U=N;const q=h();typeof U!="object"&&(U=q),Object.keys(q).some(P=>!(P in U))&&(U=q),E.setState(U,!0)},subscribe(N,U,q){return E.subscribe(N,U,q?{...q,fireImmediately:q.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const N=E.getState(),U=N.connections;let q=N.current;for(const[,H]of U){const P=H.connector;P.isAuthorized&&await P.isAuthorized()||(U.delete(P.uid),q===P.uid&&(q=null))}E.setState(H=>({...H,connections:U,current:q}))},store:E,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(N){const U=typeof N=="function"?N(a.getState()):N;if(U.length!==0)return a.setState(U,!0)},subscribe(N){return a.subscribe(N)}},connectors:{providerDetailToConnector:l,setup:u,setState(N){return c.setState(typeof N=="function"?N(c.getState()):N,!0)},subscribe(N){return c.subscribe(N)}},events:{change:R,connect:C,disconnect:T}}}}function UF(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{const i=new Set;for(const c of s??[])if(c.rdns){const u=Array.isArray(c.rdns)?c.rdns:[c.rdns];for(const l of u)i.add(l)}const o=[],a=t._internal.mipd?.getProviders()??[];for(const c of a){if(i.has(c.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(c),l=t._internal.connectors.setup(u);o.push(l)}return[...s,...o]})),r?T0(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}const MF=Symbol(),$F={install(t,e){const{config:n,reconnectOnMount:r=!0}=e;t.provide(MF,n);const{onMount:s}=UF(n,{...e,reconnectOnMount:r});s()}},B3=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},LF={},FF={class:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900"},jF={class:"mx-auto max-w-7xl px-4 py-8"};function qF(t,e){return kr(),mi("div",FF,[e[0]||(e[0]=wt("header",{class:"sticky top-0 z-50 border-b border-slate-700/50 bg-slate-900/80 backdrop-blur-lg"},[wt("div",{class:"mx-auto max-w-7xl px-4 py-4"},[wt("h1",{class:"text-xl font-bold text-white"},"Web3 Wallet Trial")])],-1)),wt("main",jF,[J0(t.$slots,"default")])])}const zF=B3(LF,[["render",qF]]),HF={},WF={class:"rounded-2xl border border-slate-700/50 bg-slate-800/50 p-6 shadow-xl backdrop-blur-sm"},VF={key:0,class:"mb-4 border-b border-slate-700/50 pb-4"};function KF(t,e){return kr(),mi("div",WF,[t.$slots.header?(kr(),mi("div",VF,[J0(t.$slots,"header")])):ef("",!0),J0(t.$slots,"default")])}const W1=B3(HF,[["render",KF]]),GF=["disabled"],$p=gm({__name:"Button",props:{variant:{default:"primary"},size:{default:"md"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(t){const e=t,n=Sl(()=>{const r="inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed",s={sm:"px-3 py-1.5 text-sm min-h-[2rem]",md:"px-4 py-2.5 text-base min-h-[2.75rem]"},i={primary:"bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-500 hover:to-blue-600 focus:ring-blue-500 shadow-lg shadow-blue-500/25",ghost:"bg-slate-800/50 text-slate-200 border border-slate-700/50 hover:bg-slate-700/50 hover:border-slate-600 focus:ring-slate-500",danger:"bg-gradient-to-r from-red-600 to-red-700 text-white hover:from-red-500 hover:to-red-600 focus:ring-red-500 shadow-lg shadow-red-500/25"};return`${r} ${s[e.size]} ${i[e.variant]}`});return(r,s)=>(kr(),mi("button",{class:qh(n.value),disabled:t.disabled,onClick:s[0]||(s[0]=i=>r.$emit("click",i))},[J0(r.$slots,"default")],10,GF))}}),YF=Symbol(),i2=Object.getPrototypeOf,V1=new WeakMap,ZF=t=>t&&(V1.has(t)?V1.get(t):i2(t)===Object.prototype||i2(t)===Array.prototype),JF=t=>ZF(t)&&t[YF]||null,o2=(t,e=!0)=>{V1.set(t,e)},ug={},uC=t=>typeof t=="object"&&t!==null,XF=t=>uC(t)&&!tp.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),D3=(t,e)=>{const n=K1.get(t);if(n?.[0]===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return o2(r,!0),K1.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(tp.has(i))o2(i,!1);else if(gc.has(i)){const[c,u]=gc.get(i);a.value=D3(c,u())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},QF=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),u=Reflect.get(s,i,a);if(c&&(a2(u,o)||lh.has(o)&&a2(u,lh.get(o))))return!0;n(i),uC(o)&&(o=JF(o)||o);const l=!gc.has(o)&&t7(o)?qt(o):o;return e(i,l),Reflect.set(s,i,l,a),r(["set",[i],o,u]),!0}}),gc=new WeakMap,tp=new WeakSet,K1=new WeakMap,O0=[1],lh=new WeakMap;let a2=Object.is,e7=(t,e)=>new Proxy(t,e),t7=XF,n7=D3,r7=QF;function qt(t={}){if(!uC(t))throw new Error("object required");const e=lh.get(t);if(e)return e;let n=O0[0];const r=new Set,s=(E,S=++O0[0])=>{n!==S&&(i=n=S,r.forEach(R=>R(E,S)))};let i=n;const o=(E=O0[0])=>(i!==E&&(i=E,c.forEach(([S])=>{const R=S[1](E);R>n&&(n=R)})),n),a=E=>(S,R)=>{const C=[...S];C[1]=[E,...C[1]],s(C,R)},c=new Map,u=(E,S)=>{const R=!tp.has(S)&&gc.get(S);if(R){if((ug?"production":void 0)!=="production"&&c.has(E))throw new Error("prop listener already exists");if(r.size){const C=R[2](a(E));c.set(E,[R,C])}else c.set(E,[R])}},l=E=>{var S;const R=c.get(E);R&&(c.delete(E),(S=R[1])==null||S.call(R))},d=E=>(r.add(E),r.size===1&&c.forEach(([R,C],T)=>{if((ug?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const N=R[2](a(T));c.set(T,[R,N])}),()=>{r.delete(E),r.size===0&&c.forEach(([R,C],T)=>{C&&(C(),c.set(T,[R]))})});let f=!0;const h=r7(()=>f,u,l,s),m=e7(t,h);lh.set(t,m);const y=[t,o,d];return gc.set(m,y),Reflect.ownKeys(t).forEach(E=>{const S=Object.getOwnPropertyDescriptor(t,E);"value"in S&&S.writable&&(m[E]=t[E])}),f=!1,m}function ir(t,e,n){const r=gc.get(t);(ug?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function dh(t){const e=gc.get(t);(ug?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return n7(n,r())}function Gl(t){return tp.add(t),t}function s7(){return{proxyStateMap:gc,refSet:tp,snapCache:K1,versionHolder:O0,proxyCache:lh}}function Vn(t,e,n,r){let s=t[e];return ir(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:i7,snapCache:o7}=s7(),Lp=t=>i7.has(t);function a7(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const u=o7.get(a),l=u?.[1];if(l&&!s.has(l)){const d=new Map(r);s.set(l,d)}},o=u=>s.get(u)||r,a={data:e,index:n,epoch:0,get size(){return Lp(this)||i(),o(this).size},get(u){const d=o(this).get(u);if(d===void 0){this.epoch;return}return this.data[d]},has(u){const l=o(this);return this.epoch,l.has(u)},set(u,l){if(!Lp(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(u);return d===void 0?(r.set(u,this.index),this.data[this.index++]=l):this.data[d]=l,this.epoch++,this},delete(u){if(!Lp(this))throw new Error("Cannot perform mutations on a snapshot");const l=r.get(u);return l===void 0?!1:(delete this.data[l],r.delete(u),this.epoch++,!0)},clear(){if(!Lp(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(u){this.epoch,o(this).forEach((d,f)=>{u(this.data[d],f,this)})},*entries(){this.epoch;const u=o(this);for(const[l,d]of u)yield[l,this.data[d]]},*keys(){this.epoch;const u=o(this);for(const l of u.keys())yield l},*values(){this.epoch;const u=o(this);for(const l of u.values())yield this.data[l]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=qt(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}const U3={isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()}};var c2={};const X={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",BASE_ACCOUNT:"baseAccount",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122",TON:"ton"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks",ton:"TON"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",TON:"ton"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},NATIVE_IMAGE_IDS_BY_NAMESPACE:{eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"3e8119e5-2a6f-4818-c50c-1937011d5900",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},TOKEN_SYMBOLS_BY_ADDRESS:{"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48":"USDC","0x833589fcd6edb6e08f4c7c32d4f71b54bda02913":"USDC","0x0b2c639c533813f4aa9d7837caf62653d097ff85":"USDC","0xaf88d065e77c8cc2239327c5edb3a432268e5831":"USDC","0x3c499c542cef5e3811e1192ce70d8cc03d5c3359":"USDC","0x2791bca1f2de4661ed88a30c99a7a9449aa84174":"USDC",EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:"USDC","0xdac17f958d2ee523a2206206994597c13d831ec7":"USDT","0x94b008aa00579c1307b0ef2c499ad98a8ce58e58":"USDT","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9":"USDT","0xc2132d05d31c914a87c6611c10748aeb04b58e8f":"USDT",Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB:"USDT"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof c2<"u"?c2.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}},HEADLESS_NOT_ENABLED:{DEFAULT:{displayMessage:"",debugMessage:"Headless support is not enabled. Please enable it with the features.headless option in the AppKit configuration and make sure your current plan supports it."}}},IS_DEVELOPMENT:typeof process<"u"&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"],METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH"},fh={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(n=>n.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const n=t.find(s=>s.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return X.CHAIN_NAME_MAP?.[r]||void 0}},M3=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var c7=20,u7=1,yu=1e6,u2=1e6,l7=-7,d7=21,f7=!1,np="[big.js] ",Ru=np+"Invalid ",Dm=Ru+"decimal places",h7=Ru+"rounding mode",$3=np+"Division by zero",Mt={},io=void 0,p7=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function L3(){function t(e){var n=this;if(!(n instanceof t))return e===io?L3():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Ru+"value");e=e===0&&1/e<0?"-0":String(e)}g7(n,e)}n.constructor=t}return t.prototype=Mt,t.DP=c7,t.RM=u7,t.NE=l7,t.PE=d7,t.strict=f7,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function g7(t,e){var n,r,s;if(!p7.test(e))throw Error(Ru+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Ou(t,e,n,r){var s=t.c;if(n===io&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(h7);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==io))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==io||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Pu(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Mt.abs=function(){var t=new this.constructor(this);return t.s=1,t};Mt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Mt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>yu)throw Error(Dm);if(!s[0])throw Error($3);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,d,f=s.slice(),h=a=s.length,m=r.length,y=r.slice(0,a),E=y.length,S=t,R=S.c=[],C=0,T=o+(S.e=e.e-t.e)+1;for(S.s=i,i=T<0?0:T,f.unshift(0);E++<a;)y.push(0);do{for(u=0;u<10;u++){if(a!=(E=y.length))l=a>E?1:-1;else for(d=-1,l=0;++d<a;)if(s[d]!=y[d]){l=s[d]>y[d]?1:-1;break}if(l<0){for(c=E==a?s:f;E;){if(y[--E]<c[E]){for(d=E;d&&!y[--d];)y[d]=9;--y[d],y[E]+=10}y[E]-=c[E]}for(;!y[0];)y.shift()}else break}R[C++]=l?u:++u,y[0]&&l?y[E]=r[h]||0:y=[r[h]]}while((h++<m||y[0]!==io)&&i--);return!R[0]&&C!=1&&(R.shift(),S.e--,T--),C>T&&Ou(S,T,n.RM,y[0]!==io),S};Mt.eq=function(t){return this.cmp(t)===0};Mt.gt=function(t){return this.cmp(t)>0};Mt.gte=function(t){return this.cmp(t)>-1};Mt.lt=function(t){return this.cmp(t)<0};Mt.lte=function(t){return this.cmp(t)<1};Mt.minus=Mt.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,d=t.c,f=t.e;if(!u[0]||!d[0])return d[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-f){for((s=a<0)?(a=-a,r=u):(f=l,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=u.length<d.length)?u:d).length,a=c=0;c<n;c++)if(u[c]!=d[c]){s=u[c]<d[c];break}if(s&&(r=u,u=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;n>a;){if(u[--n]<d[n]){for(e=n;e&&!u[--e];)u[e]=9;--u[e],u[n]+=10}u[n]-=d[n]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t};Mt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error($3);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Mt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Mt.plus=Mt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=u):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-u.length<0&&(r=u,u=a,a=r),e=u.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+u[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Mt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-u2||t>u2)throw Error(Ru+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Mt.prec=function(t,e){if(t!==~~t||t<1||t>yu)throw Error(Ru+"precision");return Ou(new this.constructor(this),t,e)};Mt.round=function(t,e){if(t===io)t=0;else if(t!==~~t||t<-yu||t>yu)throw Error(Dm);return Ou(new this.constructor(this),t+this.e+1,e)};Mt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(np+"No square root");i=Math.sqrt(+Pu(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Ou(t,(s.DP-=4)+t.e+1,s.RM)};Mt.times=Mt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Mt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==io){if(t!==~~t||t<0||t>yu)throw Error(Dm);for(n=Ou(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Pu(n,!0,!!r)};Mt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==io){if(t!==~~t||t<0||t>yu)throw Error(Dm);for(n=Ou(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Pu(n,!1,!!r)};Mt[Symbol.for("nodejs.util.inspect.custom")]=Mt.toJSON=Mt.toString=function(){var t=this,e=t.constructor;return Pu(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Mt.toNumber=function(){var t=+Pu(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(np+"Imprecise conversion");return t};Mt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==io){if(t!==~~t||t<1||t>yu)throw Error(Ru+"precision");for(n=Ou(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Pu(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Mt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(np+"valueOf disallowed");return Pu(t,t.e<=e.NE||t.e>=e.PE,!0)};var Bi=L3();const F3={bigNumber(t,e={safe:!1}){try{return t?new Bi(t):new Bi(0)}catch(n){if(e.safe)return new Bi(0);throw n}},formatNumber(t,e){const{decimals:n,round:r=8,safe:s=!0}=e;return F3.bigNumber(t,{safe:s}).div(new Bi(10).pow(n)).round(r)},multiply(t,e){if(t===void 0||e===void 0)return new Bi(0);const n=new Bi(t),r=new Bi(e);return n.times(r)},toFixed(t,e=2){return t===void 0||t===""?new Bi(0).toFixed(e):new Bi(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new Bi(e).toNumber()}},m7=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],y7=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],w7=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],b7={getERC20Abi:t=>X.USDT_CONTRACT_ADDRESSES.includes(t)?w7:m7,getSwapAbi:()=>y7},Bn={ConnectorExplorerIds:{[X.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.BASE_ACCOUNT]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[X.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[X.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[X.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[X.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[X.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[X.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[X.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[X.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[X.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[X.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[X.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[X.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[X.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[X.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[X.BINANCE_CONNECTOR_NAME]:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"},ConnectorImageIds:{[X.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.BASE_ACCOUNT]:"bba2c8be-7fd1-463e-42b1-796ecb0ad200",[X.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[X.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[X.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[X.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[X.CONNECTOR_ID.INJECTED]:"Browser Wallet",[X.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[X.CONNECTOR_ID.COINBASE]:"Coinbase",[X.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[X.CONNECTOR_ID.BASE_ACCOUNT]:"Base Account",[X.CONNECTOR_ID.LEDGER]:"Ledger",[X.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[X.CONNECTOR_ID.INJECTED]:"INJECTED",[X.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[X.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[X.CONNECTOR_ID.AUTH]:"AUTH"}},$n={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ei={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError"},isRpcProviderError(t){try{if(typeof t=="object"&&t!==null){const e=t,n=typeof e.message=="string",r=typeof e.code=="number";return n&&r}return!1}catch{return!1}},isUserRejectedMessage(t){return t.toLowerCase().includes("user rejected")||t.toLowerCase().includes("user cancelled")||t.toLowerCase().includes("user canceled")},isUserRejectedRequestError(t){if(Ei.isRpcProviderError(t)){const e=t.code===Ei.RPC_ERROR_CODE.USER_REJECTED_REQUEST,n=t.code===Ei.RPC_ERROR_CODE.USER_REJECTED_METHODS;return e||n||Ei.isUserRejectedMessage(t.message)}return t instanceof Error?Ei.isUserRejectedMessage(t.message):!1}};class E7 extends Error{constructor(e,n){super(n.message,{cause:e}),this.name=Ei.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=n.code}}class Xa extends E7{constructor(e){super(e,{code:Ei.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=Ei.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}}const We={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version",TON_WALLETS_CACHE:"@appkit/ton_wallets_cache"};function gw(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const He={setItem(t,e){nf()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(nf())return localStorage.getItem(t)||void 0},removeItem(t){nf()&&localStorage.removeItem(t)},clear(){nf()&&localStorage.clear()}};function nf(){return typeof window<"u"&&typeof localStorage<"u"}function hh(t,e){const n=t?.["--apkt-accent"]??t?.["--w3m-accent"];return e==="light"?{"--w3m-accent":n||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":n||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}var l2={};const mw=(typeof process<"u"&&typeof l2<"u"?l2.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",j3=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],v7="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",yt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:mw,SECURE_SITE_DASHBOARD:`${mw}/dashboard`,SECURE_SITE_FAVICON:`${mw}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USD0"]},BALANCE_SUPPORTED_CHAINS:[X.CHAIN.EVM,X.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[X.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[X.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[X.CHAIN.EVM,X.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[X.CHAIN.EVM,X.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[X.CHAIN.EVM,X.CHAIN.TON],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x",ton:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[X.CHAIN.EVM,X.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1,headless:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1,headless:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1,headless:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa",ton:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0},MANDATORY_WALLET_IDS_ON_MOBILE:[Bn.ConnectorExplorerIds[X.CONNECTOR_ID.COINBASE],Bn.ConnectorExplorerIds[X.CONNECTOR_ID.COINBASE_SDK],Bn.ConnectorExplorerIds[X.CONNECTOR_ID.BASE_ACCOUNT],Bn.ConnectorExplorerIds[X.SOLFLARE_CONNECTOR_NAME],Bn.ConnectorExplorerIds[X.PHANTOM_CONNECTOR_NAME],Bn.ConnectorExplorerIds[X.BINANCE_CONNECTOR_NAME]],DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},fe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5,tonWallets:864e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=fe.getActiveNamespace(),e=fe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{He.setItem(We.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=He.getItem(We.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{He.removeItem(We.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{He.setItem(We.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{He.setItem(We.ACTIVE_CAIP_NETWORK_ID,t),fe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return He.getItem(We.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{He.removeItem(We.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=gw(t);He.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=fe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),He.setItem(We.RECENT_WALLETS,JSON.stringify(e)),He.setItem(We.RECENT_WALLET,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=He.getItem(We.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{const t=He.getItem(We.RECENT_WALLET);return t?JSON.parse(t):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{He.removeItem(We.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(t,e){try{const n=gw(t);He.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return He.getItem(We.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=gw(t);return He.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{He.setItem(We.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return He.getItem(We.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{He.removeItem(We.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return He.getItem(We.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return He.getItem(We.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{He.setItem(We.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return He.getItem(We.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=He.getItem(We.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));He.setItem(We.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=fe.getConnectedNamespaces();e.includes(t)||(e.push(t),fe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=fe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),fe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return He.getItem(We.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{He.setItem(We.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{He.removeItem(We.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=He.getItem(We.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=fe.getBalanceCache();He.setItem(We.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=fe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;fe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=fe.getBalanceCache();e[t.caipAddress]=t,He.setItem(We.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=He.getItem(We.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=fe.getBalanceCache();He.setItem(We.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=fe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),fe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=fe.getNativeBalanceCache();e[t.caipAddress]=t,He.setItem(We.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=He.getItem(We.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=fe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;fe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=fe.getEnsCache();e[t.address]=t,He.setItem(We.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=fe.getEnsCache();He.setItem(We.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=He.getItem(We.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=fe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;fe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=fe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},He.setItem(We.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=fe.getIdentityCache();He.setItem(We.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},getTonWalletsCache(){try{const t=He.getItem(We.TON_WALLETS_CACHE),e=t?JSON.parse(t):void 0;if(e&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.tonWallets))return e;fe.removeTonWalletsCache()}catch{console.info("Unable to get ton wallets cache")}},updateTonWalletsCache(t){try{const e=fe.getTonWalletsCache()||{timestamp:0,wallets:[]};e.timestamp=new Date().getTime(),e.wallets=t,He.setItem(We.TON_WALLETS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ton wallets cache",t)}},removeTonWalletsCache(){try{He.removeItem(We.TON_WALLETS_CACHE)}catch{console.info("Unable to remove ton wallets cache")}},clearAddressCache(){try{He.removeItem(We.PORTFOLIO_CACHE),He.removeItem(We.NATIVE_BALANCE_CACHE),He.removeItem(We.ENS_CACHE),He.removeItem(We.IDENTITY_CACHE),He.removeItem(We.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{He.setItem(We.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=He.getItem(We.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=fe.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===X.CONNECTOR_ID.AUTH;if(a&&!c){const u=new Set(a.accounts.map(d=>d.address.toLowerCase())),l=o.accounts.filter(d=>!u.has(d.address.toLowerCase()));a.accounts.push(...l)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};He.setItem(We.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=He.getItem(We.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=fe.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),He.setItem(We.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=He.getItem(We.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=fe.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),He.setItem(We.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=fe.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),He.setItem(We.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(fe.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=He.getItem(We.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const r=fe.getTransactionsCache()[t]?.[e];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.transactionsHistory))return r.transactions;fe.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:r}){try{const s=fe.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:n,transactions:r}},He.setItem(We.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:r})}},removeTransactionsCache({address:t,chainId:e}){try{const n=fe.getTransactionsCache(),r=n?.[t]||{},{[e]:s,...i}=r;He.setItem(We.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=He.getItem(We.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=fe.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;fe.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=fe.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},He.setItem(We.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=fe.getTokenPriceCache();He.setItem(We.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}},getLatestAppKitVersion(){try{const t=this.getLatestAppKitVersionCache(),e=t?.version;return e&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.latestAppKitVersion)?e:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{const t=He.getItem(We.LATEST_APPKIT_VERSION);return t?JSON.parse(t):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(t){try{const e=fe.getLatestAppKitVersionCache();e.timestamp=t.timestamp,e.version=t.version,He.setItem(We.LATEST_APPKIT_VERSION,JSON.stringify(e))}catch{console.info("Unable to update latest AppKit version on local storage",t)}}},xe={getWindow(){if(!(typeof window>"u"))return window},isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return xe.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=yt.TEN_SEC_MS:!0},isAllowedRetry(t,e=yt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(xe.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const n=new URL(t),r=new URL(e);return n.hostname===r.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+yt.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(xe.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!xe.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?fe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,xe.wait(2e3)])},parseBalance(t,e){let n="0.000";if(typeof t=="string"){const c=Number(t);if(!isNaN(c)){const u=(Math.floor(c*1e3)/1e3).toFixed(3);u&&(n=u)}}const[r,s]=n.split("."),i=r||"0",o=s||"000";return{formattedText:`${i}.${o}${e?` ${e}`:""}`,value:i,decimals:o,symbol:e}},getApiUrl(){return X.W3M_API_URL},getBlockchainApiUrl(){return X.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return X.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);case"bip122":{const n=/^[1][a-km-zA-HJ-NP-Z1-9]{25,34}$/u.test(t),r=/^[3][a-km-zA-HJ-NP-Z1-9]{25,34}$/u.test(t),s=/^bc1[a-z0-9]{39,87}$/u.test(t),i=/^bc1p[a-z0-9]{58}$/u.test(t);return n||r||s||i}default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?yt.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in X.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),u=t.substring(s),l=c+n;return a+l+u},isNumber(t){return typeof t!="number"&&typeof t!="string"?!1:!isNaN(Number(t))}};var yw={},Ad={},d2;function C7(){if(d2)return Ad;d2=1,Ad.byteLength=a,Ad.toByteArray=u,Ad.fromByteArray=f;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)t[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(h){var m=h.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");y===-1&&(y=m);var E=y===m?0:4-y%4;return[y,E]}function a(h){var m=o(h),y=m[0],E=m[1];return(y+E)*3/4-E}function c(h,m,y){return(m+y)*3/4-y}function u(h){var m,y=o(h),E=y[0],S=y[1],R=new n(c(h,E,S)),C=0,T=S>0?E-4:E,N;for(N=0;N<T;N+=4)m=e[h.charCodeAt(N)]<<18|e[h.charCodeAt(N+1)]<<12|e[h.charCodeAt(N+2)]<<6|e[h.charCodeAt(N+3)],R[C++]=m>>16&255,R[C++]=m>>8&255,R[C++]=m&255;return S===2&&(m=e[h.charCodeAt(N)]<<2|e[h.charCodeAt(N+1)]>>4,R[C++]=m&255),S===1&&(m=e[h.charCodeAt(N)]<<10|e[h.charCodeAt(N+1)]<<4|e[h.charCodeAt(N+2)]>>2,R[C++]=m>>8&255,R[C++]=m&255),R}function l(h){return t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]}function d(h,m,y){for(var E,S=[],R=m;R<y;R+=3)E=(h[R]<<16&16711680)+(h[R+1]<<8&65280)+(h[R+2]&255),S.push(l(E));return S.join("")}function f(h){for(var m,y=h.length,E=y%3,S=[],R=16383,C=0,T=y-E;C<T;C+=R)S.push(d(h,C,C+R>T?T:C+R));return E===1?(m=h[y-1],S.push(t[m>>2]+t[m<<4&63]+"==")):E===2&&(m=(h[y-2]<<8)+h[y-1],S.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),S.join("")}return Ad}var Fp={};var f2;function _7(){return f2||(f2=1,Fp.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?s-1:0,f=n?-1:1,h=t[e+d];for(d+=f,i=h&(1<<-l)-1,h>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=f,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=o*256+t[e+d],d+=f,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(h?-1:1)*o*Math.pow(2,i-r)},Fp.write=function(t,e,n,r,s,i){var o,a,c,u=i*8-s-1,l=(1<<u)-1,d=l>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,m=r?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=f/c:e+=f*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+h]=a&255,h+=m,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[n+h]=o&255,h+=m,o/=256,u-=8);t[n+h-m]|=y*128}),Fp}var h2;function lC(){return h2||(h2=1,(function(t){const e=C7(),n=_7(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=R,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const L=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(L,A),L.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(L){if(L>s)throw new RangeError('The value "'+L+'" is invalid for option "size"');const A=new Uint8Array(L);return Object.setPrototypeOf(A,a.prototype),A}function a(L,A,I){if(typeof L=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(L)}return c(L,A,I)}a.poolSize=8192;function c(L,A,I){if(typeof L=="string")return f(L,A);if(ArrayBuffer.isView(L))return m(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(je(L,ArrayBuffer)||L&&je(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(je(L,SharedArrayBuffer)||L&&je(L.buffer,SharedArrayBuffer)))return y(L,A,I);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=L.valueOf&&L.valueOf();if(K!=null&&K!==L)return a.from(K,A,I);const Q=E(L);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),A,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,A,I){return c(L,A,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function l(L,A,I){return u(L),L<=0?o(L):A!==void 0?typeof I=="string"?o(L).fill(A,I):o(L).fill(A):o(L)}a.alloc=function(L,A,I){return l(L,A,I)};function d(L){return u(L),o(L<0?0:S(L)|0)}a.allocUnsafe=function(L){return d(L)},a.allocUnsafeSlow=function(L){return d(L)};function f(L,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const I=C(L,A)|0;let K=o(I);const Q=K.write(L,A);return Q!==I&&(K=K.slice(0,Q)),K}function h(L){const A=L.length<0?0:S(L.length)|0,I=o(A);for(let K=0;K<A;K+=1)I[K]=L[K]&255;return I}function m(L){if(je(L,Uint8Array)){const A=new Uint8Array(L);return y(A.buffer,A.byteOffset,A.byteLength)}return h(L)}function y(L,A,I){if(A<0||L.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<A+(I||0))throw new RangeError('"length" is outside of buffer bounds');let K;return A===void 0&&I===void 0?K=new Uint8Array(L):I===void 0?K=new Uint8Array(L,A):K=new Uint8Array(L,A,I),Object.setPrototypeOf(K,a.prototype),K}function E(L){if(a.isBuffer(L)){const A=S(L.length)|0,I=o(A);return I.length===0||L.copy(I,0,0,A),I}if(L.length!==void 0)return typeof L.length!="number"||Ee(L.length)?o(0):h(L);if(L.type==="Buffer"&&Array.isArray(L.data))return h(L.data)}function S(L){if(L>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return L|0}function R(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==a.prototype},a.compare=function(A,I){if(je(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),je(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(A)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===I)return 0;let K=A.length,Q=I.length;for(let te=0,ie=Math.min(K,Q);te<ie;++te)if(A[te]!==I[te]){K=A[te],Q=I[te];break}return K<Q?-1:Q<K?1:0},a.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(A,I){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return a.alloc(0);let K;if(I===void 0)for(I=0,K=0;K<A.length;++K)I+=A[K].length;const Q=a.allocUnsafe(I);let te=0;for(K=0;K<A.length;++K){let ie=A[K];if(je(ie,Uint8Array))te+ie.length>Q.length?(a.isBuffer(ie)||(ie=a.from(ie)),ie.copy(Q,te)):Uint8Array.prototype.set.call(Q,ie,te);else if(a.isBuffer(ie))ie.copy(Q,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=ie.length}return Q};function C(L,A){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||je(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const I=L.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&I===0)return 0;let Q=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return le(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return pe(L).length;default:if(Q)return K?-1:le(L).length;A=(""+A).toLowerCase(),Q=!0}}a.byteLength=C;function T(L,A,I){let K=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,A>>>=0,I<=A))return"";for(L||(L="utf8");;)switch(L){case"hex":return k(this,A,I);case"utf8":case"utf-8":return p(this,A,I);case"ascii":return x(this,A,I);case"latin1":case"binary":return O(this,A,I);case"base64":return _(this,A,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,A,I);default:if(K)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),K=!0}}a.prototype._isBuffer=!0;function N(L,A,I){const K=L[A];L[A]=L[I],L[I]=K}a.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<A;I+=2)N(this,I,I+1);return this},a.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<A;I+=4)N(this,I,I+3),N(this,I+1,I+2);return this},a.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<A;I+=8)N(this,I,I+7),N(this,I+1,I+6),N(this,I+2,I+5),N(this,I+3,I+4);return this},a.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?p(this,0,A):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(A){if(!a.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:a.compare(this,A)===0},a.prototype.inspect=function(){let A="";const I=t.INSPECT_MAX_BYTES;return A=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(A+=" ... "),"<Buffer "+A+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(A,I,K,Q,te){if(je(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(I===void 0&&(I=0),K===void 0&&(K=A?A.length:0),Q===void 0&&(Q=0),te===void 0&&(te=this.length),I<0||K>A.length||Q<0||te>this.length)throw new RangeError("out of range index");if(Q>=te&&I>=K)return 0;if(Q>=te)return-1;if(I>=K)return 1;if(I>>>=0,K>>>=0,Q>>>=0,te>>>=0,this===A)return 0;let ie=te-Q,ct=K-I;const Ze=Math.min(ie,ct),Je=this.slice(Q,te),$t=A.slice(I,K);for(let nt=0;nt<Ze;++nt)if(Je[nt]!==$t[nt]){ie=Je[nt],ct=$t[nt];break}return ie<ct?-1:ct<ie?1:0};function U(L,A,I,K,Q){if(L.length===0)return-1;if(typeof I=="string"?(K=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,Ee(I)&&(I=Q?0:L.length-1),I<0&&(I=L.length+I),I>=L.length){if(Q)return-1;I=L.length-1}else if(I<0)if(Q)I=0;else return-1;if(typeof A=="string"&&(A=a.from(A,K)),a.isBuffer(A))return A.length===0?-1:q(L,A,I,K,Q);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(L,A,I):Uint8Array.prototype.lastIndexOf.call(L,A,I):q(L,[A],I,K,Q);throw new TypeError("val must be string, number or Buffer")}function q(L,A,I,K,Q){let te=1,ie=L.length,ct=A.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(L.length<2||A.length<2)return-1;te=2,ie/=2,ct/=2,I/=2}function Ze($t,nt){return te===1?$t[nt]:$t.readUInt16BE(nt*te)}let Je;if(Q){let $t=-1;for(Je=I;Je<ie;Je++)if(Ze(L,Je)===Ze(A,$t===-1?0:Je-$t)){if($t===-1&&($t=Je),Je-$t+1===ct)return $t*te}else $t!==-1&&(Je-=Je-$t),$t=-1}else for(I+ct>ie&&(I=ie-ct),Je=I;Je>=0;Je--){let $t=!0;for(let nt=0;nt<ct;nt++)if(Ze(L,Je+nt)!==Ze(A,nt)){$t=!1;break}if($t)return Je}return-1}a.prototype.includes=function(A,I,K){return this.indexOf(A,I,K)!==-1},a.prototype.indexOf=function(A,I,K){return U(this,A,I,K,!0)},a.prototype.lastIndexOf=function(A,I,K){return U(this,A,I,K,!1)};function H(L,A,I,K){I=Number(I)||0;const Q=L.length-I;K?(K=Number(K),K>Q&&(K=Q)):K=Q;const te=A.length;K>te/2&&(K=te/2);let ie;for(ie=0;ie<K;++ie){const ct=parseInt(A.substr(ie*2,2),16);if(Ee(ct))return ie;L[I+ie]=ct}return ie}function P(L,A,I,K){return ue(le(A,L.length-I),L,I,K)}function $(L,A,I,K){return ue(be(A),L,I,K)}function W(L,A,I,K){return ue(pe(A),L,I,K)}function z(L,A,I,K){return ue(Ce(A,L.length-I),L,I,K)}a.prototype.write=function(A,I,K,Q){if(I===void 0)Q="utf8",K=this.length,I=0;else if(K===void 0&&typeof I=="string")Q=I,K=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(K)?(K=K>>>0,Q===void 0&&(Q="utf8")):(Q=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const te=this.length-I;if((K===void 0||K>te)&&(K=te),A.length>0&&(K<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let ie=!1;for(;;)switch(Q){case"hex":return H(this,A,I,K);case"utf8":case"utf-8":return P(this,A,I,K);case"ascii":case"latin1":case"binary":return $(this,A,I,K);case"base64":return W(this,A,I,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,A,I,K);default:if(ie)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),ie=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(L,A,I){return A===0&&I===L.length?e.fromByteArray(L):e.fromByteArray(L.slice(A,I))}function p(L,A,I){I=Math.min(L.length,I);const K=[];let Q=A;for(;Q<I;){const te=L[Q];let ie=null,ct=te>239?4:te>223?3:te>191?2:1;if(Q+ct<=I){let Ze,Je,$t,nt;switch(ct){case 1:te<128&&(ie=te);break;case 2:Ze=L[Q+1],(Ze&192)===128&&(nt=(te&31)<<6|Ze&63,nt>127&&(ie=nt));break;case 3:Ze=L[Q+1],Je=L[Q+2],(Ze&192)===128&&(Je&192)===128&&(nt=(te&15)<<12|(Ze&63)<<6|Je&63,nt>2047&&(nt<55296||nt>57343)&&(ie=nt));break;case 4:Ze=L[Q+1],Je=L[Q+2],$t=L[Q+3],(Ze&192)===128&&(Je&192)===128&&($t&192)===128&&(nt=(te&15)<<18|(Ze&63)<<12|(Je&63)<<6|$t&63,nt>65535&&nt<1114112&&(ie=nt))}}ie===null?(ie=65533,ct=1):ie>65535&&(ie-=65536,K.push(ie>>>10&1023|55296),ie=56320|ie&1023),K.push(ie),Q+=ct}return b(K)}const g=4096;function b(L){const A=L.length;if(A<=g)return String.fromCharCode.apply(String,L);let I="",K=0;for(;K<A;)I+=String.fromCharCode.apply(String,L.slice(K,K+=g));return I}function x(L,A,I){let K="";I=Math.min(L.length,I);for(let Q=A;Q<I;++Q)K+=String.fromCharCode(L[Q]&127);return K}function O(L,A,I){let K="";I=Math.min(L.length,I);for(let Q=A;Q<I;++Q)K+=String.fromCharCode(L[Q]);return K}function k(L,A,I){const K=L.length;(!A||A<0)&&(A=0),(!I||I<0||I>K)&&(I=K);let Q="";for(let te=A;te<I;++te)Q+=Ne[L[te]];return Q}function M(L,A,I){const K=L.slice(A,I);let Q="";for(let te=0;te<K.length-1;te+=2)Q+=String.fromCharCode(K[te]+K[te+1]*256);return Q}a.prototype.slice=function(A,I){const K=this.length;A=~~A,I=I===void 0?K:~~I,A<0?(A+=K,A<0&&(A=0)):A>K&&(A=K),I<0?(I+=K,I<0&&(I=0)):I>K&&(I=K),I<A&&(I=A);const Q=this.subarray(A,I);return Object.setPrototypeOf(Q,a.prototype),Q};function B(L,A,I){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+A>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(A,I,K){A=A>>>0,I=I>>>0,K||B(A,I,this.length);let Q=this[A],te=1,ie=0;for(;++ie<I&&(te*=256);)Q+=this[A+ie]*te;return Q},a.prototype.readUintBE=a.prototype.readUIntBE=function(A,I,K){A=A>>>0,I=I>>>0,K||B(A,I,this.length);let Q=this[A+--I],te=1;for(;I>0&&(te*=256);)Q+=this[A+--I]*te;return Q},a.prototype.readUint8=a.prototype.readUInt8=function(A,I){return A=A>>>0,I||B(A,1,this.length),this[A]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(A,I){return A=A>>>0,I||B(A,2,this.length),this[A]|this[A+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(A,I){return A=A>>>0,I||B(A,2,this.length),this[A]<<8|this[A+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(A,I){return A=A>>>0,I||B(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(A,I){return A=A>>>0,I||B(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},a.prototype.readBigUInt64LE=Ve(function(A){A=A>>>0,J(A,"offset");const I=this[A],K=this[A+7];(I===void 0||K===void 0)&&ne(A,this.length-8);const Q=I+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,te=this[++A]+this[++A]*2**8+this[++A]*2**16+K*2**24;return BigInt(Q)+(BigInt(te)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ve(function(A){A=A>>>0,J(A,"offset");const I=this[A],K=this[A+7];(I===void 0||K===void 0)&&ne(A,this.length-8);const Q=I*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],te=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+K;return(BigInt(Q)<<BigInt(32))+BigInt(te)}),a.prototype.readIntLE=function(A,I,K){A=A>>>0,I=I>>>0,K||B(A,I,this.length);let Q=this[A],te=1,ie=0;for(;++ie<I&&(te*=256);)Q+=this[A+ie]*te;return te*=128,Q>=te&&(Q-=Math.pow(2,8*I)),Q},a.prototype.readIntBE=function(A,I,K){A=A>>>0,I=I>>>0,K||B(A,I,this.length);let Q=I,te=1,ie=this[A+--Q];for(;Q>0&&(te*=256);)ie+=this[A+--Q]*te;return te*=128,ie>=te&&(ie-=Math.pow(2,8*I)),ie},a.prototype.readInt8=function(A,I){return A=A>>>0,I||B(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},a.prototype.readInt16LE=function(A,I){A=A>>>0,I||B(A,2,this.length);const K=this[A]|this[A+1]<<8;return K&32768?K|4294901760:K},a.prototype.readInt16BE=function(A,I){A=A>>>0,I||B(A,2,this.length);const K=this[A+1]|this[A]<<8;return K&32768?K|4294901760:K},a.prototype.readInt32LE=function(A,I){return A=A>>>0,I||B(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},a.prototype.readInt32BE=function(A,I){return A=A>>>0,I||B(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},a.prototype.readBigInt64LE=Ve(function(A){A=A>>>0,J(A,"offset");const I=this[A],K=this[A+7];(I===void 0||K===void 0)&&ne(A,this.length-8);const Q=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(K<<24);return(BigInt(Q)<<BigInt(32))+BigInt(I+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),a.prototype.readBigInt64BE=Ve(function(A){A=A>>>0,J(A,"offset");const I=this[A],K=this[A+7];(I===void 0||K===void 0)&&ne(A,this.length-8);const Q=(I<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt(Q)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+K)}),a.prototype.readFloatLE=function(A,I){return A=A>>>0,I||B(A,4,this.length),n.read(this,A,!0,23,4)},a.prototype.readFloatBE=function(A,I){return A=A>>>0,I||B(A,4,this.length),n.read(this,A,!1,23,4)},a.prototype.readDoubleLE=function(A,I){return A=A>>>0,I||B(A,8,this.length),n.read(this,A,!0,52,8)},a.prototype.readDoubleBE=function(A,I){return A=A>>>0,I||B(A,8,this.length),n.read(this,A,!1,52,8)};function w(L,A,I,K,Q,te){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>Q||A<te)throw new RangeError('"value" argument is out of bounds');if(I+K>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(A,I,K,Q){if(A=+A,I=I>>>0,K=K>>>0,!Q){const ct=Math.pow(2,8*K)-1;w(this,A,I,K,ct,0)}let te=1,ie=0;for(this[I]=A&255;++ie<K&&(te*=256);)this[I+ie]=A/te&255;return I+K},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(A,I,K,Q){if(A=+A,I=I>>>0,K=K>>>0,!Q){const ct=Math.pow(2,8*K)-1;w(this,A,I,K,ct,0)}let te=K-1,ie=1;for(this[I+te]=A&255;--te>=0&&(ie*=256);)this[I+te]=A/ie&255;return I+K},a.prototype.writeUint8=a.prototype.writeUInt8=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,1,255,0),this[I]=A&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,2,65535,0),this[I]=A&255,this[I+1]=A>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,2,65535,0),this[I]=A>>>8,this[I+1]=A&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,4,4294967295,0),this[I+3]=A>>>24,this[I+2]=A>>>16,this[I+1]=A>>>8,this[I]=A&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,4,4294967295,0),this[I]=A>>>24,this[I+1]=A>>>16,this[I+2]=A>>>8,this[I+3]=A&255,I+4};function v(L,A,I,K,Q){G(A,K,Q,L,I,7);let te=Number(A&BigInt(4294967295));L[I++]=te,te=te>>8,L[I++]=te,te=te>>8,L[I++]=te,te=te>>8,L[I++]=te;let ie=Number(A>>BigInt(32)&BigInt(4294967295));return L[I++]=ie,ie=ie>>8,L[I++]=ie,ie=ie>>8,L[I++]=ie,ie=ie>>8,L[I++]=ie,I}function D(L,A,I,K,Q){G(A,K,Q,L,I,7);let te=Number(A&BigInt(4294967295));L[I+7]=te,te=te>>8,L[I+6]=te,te=te>>8,L[I+5]=te,te=te>>8,L[I+4]=te;let ie=Number(A>>BigInt(32)&BigInt(4294967295));return L[I+3]=ie,ie=ie>>8,L[I+2]=ie,ie=ie>>8,L[I+1]=ie,ie=ie>>8,L[I]=ie,I+8}a.prototype.writeBigUInt64LE=Ve(function(A,I=0){return v(this,A,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ve(function(A,I=0){return D(this,A,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(A,I,K,Q){if(A=+A,I=I>>>0,!Q){const Ze=Math.pow(2,8*K-1);w(this,A,I,K,Ze-1,-Ze)}let te=0,ie=1,ct=0;for(this[I]=A&255;++te<K&&(ie*=256);)A<0&&ct===0&&this[I+te-1]!==0&&(ct=1),this[I+te]=(A/ie>>0)-ct&255;return I+K},a.prototype.writeIntBE=function(A,I,K,Q){if(A=+A,I=I>>>0,!Q){const Ze=Math.pow(2,8*K-1);w(this,A,I,K,Ze-1,-Ze)}let te=K-1,ie=1,ct=0;for(this[I+te]=A&255;--te>=0&&(ie*=256);)A<0&&ct===0&&this[I+te+1]!==0&&(ct=1),this[I+te]=(A/ie>>0)-ct&255;return I+K},a.prototype.writeInt8=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,1,127,-128),A<0&&(A=255+A+1),this[I]=A&255,I+1},a.prototype.writeInt16LE=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,2,32767,-32768),this[I]=A&255,this[I+1]=A>>>8,I+2},a.prototype.writeInt16BE=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,2,32767,-32768),this[I]=A>>>8,this[I+1]=A&255,I+2},a.prototype.writeInt32LE=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,4,2147483647,-2147483648),this[I]=A&255,this[I+1]=A>>>8,this[I+2]=A>>>16,this[I+3]=A>>>24,I+4},a.prototype.writeInt32BE=function(A,I,K){return A=+A,I=I>>>0,K||w(this,A,I,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[I]=A>>>24,this[I+1]=A>>>16,this[I+2]=A>>>8,this[I+3]=A&255,I+4},a.prototype.writeBigInt64LE=Ve(function(A,I=0){return v(this,A,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ve(function(A,I=0){return D(this,A,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function F(L,A,I,K,Q,te){if(I+K>L.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Z(L,A,I,K,Q){return A=+A,I=I>>>0,Q||F(L,A,I,4),n.write(L,A,I,K,23,4),I+4}a.prototype.writeFloatLE=function(A,I,K){return Z(this,A,I,!0,K)},a.prototype.writeFloatBE=function(A,I,K){return Z(this,A,I,!1,K)};function ee(L,A,I,K,Q){return A=+A,I=I>>>0,Q||F(L,A,I,8),n.write(L,A,I,K,52,8),I+8}a.prototype.writeDoubleLE=function(A,I,K){return ee(this,A,I,!0,K)},a.prototype.writeDoubleBE=function(A,I,K){return ee(this,A,I,!1,K)},a.prototype.copy=function(A,I,K,Q){if(!a.isBuffer(A))throw new TypeError("argument should be a Buffer");if(K||(K=0),!Q&&Q!==0&&(Q=this.length),I>=A.length&&(I=A.length),I||(I=0),Q>0&&Q<K&&(Q=K),Q===K||A.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),A.length-I<Q-K&&(Q=A.length-I+K);const te=Q-K;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,K,Q):Uint8Array.prototype.set.call(A,this.subarray(K,Q),I),te},a.prototype.fill=function(A,I,K,Q){if(typeof A=="string"){if(typeof I=="string"?(Q=I,I=0,K=this.length):typeof K=="string"&&(Q=K,K=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!a.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(A.length===1){const ie=A.charCodeAt(0);(Q==="utf8"&&ie<128||Q==="latin1")&&(A=ie)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(I<0||this.length<I||this.length<K)throw new RangeError("Out of range index");if(K<=I)return this;I=I>>>0,K=K===void 0?this.length:K>>>0,A||(A=0);let te;if(typeof A=="number")for(te=I;te<K;++te)this[te]=A;else{const ie=a.isBuffer(A)?A:a.from(A,Q),ct=ie.length;if(ct===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(te=0;te<K-I;++te)this[te+I]=ie[te%ct]}return this};const de={};function ae(L,A,I){de[L]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(L,A){return`The "${L}" argument must be of type number. Received type ${typeof A}`},TypeError),ae("ERR_OUT_OF_RANGE",function(L,A,I){let K=`The value of "${L}" is out of range.`,Q=I;return Number.isInteger(I)&&Math.abs(I)>2**32?Q=Oe(String(I)):typeof I=="bigint"&&(Q=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(Q=Oe(Q)),Q+="n"),K+=` It must be ${A}. Received ${Q}`,K},RangeError);function Oe(L){let A="",I=L.length;const K=L[0]==="-"?1:0;for(;I>=K+4;I-=3)A=`_${L.slice(I-3,I)}${A}`;return`${L.slice(0,I)}${A}`}function Qe(L,A,I){J(A,"offset"),(L[A]===void 0||L[A+I]===void 0)&&ne(A,L.length-(I+1))}function G(L,A,I,K,Q,te){if(L>I||L<A){const ie=typeof A=="bigint"?"n":"";let ct;throw A===0||A===BigInt(0)?ct=`>= 0${ie} and < 2${ie} ** ${(te+1)*8}${ie}`:ct=`>= -(2${ie} ** ${(te+1)*8-1}${ie}) and < 2 ** ${(te+1)*8-1}${ie}`,new de.ERR_OUT_OF_RANGE("value",ct,L)}Qe(K,Q,te)}function J(L,A){if(typeof L!="number")throw new de.ERR_INVALID_ARG_TYPE(A,"number",L)}function ne(L,A,I){throw Math.floor(L)!==L?(J(L,I),new de.ERR_OUT_OF_RANGE("offset","an integer",L)):A<0?new de.ERR_BUFFER_OUT_OF_BOUNDS:new de.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${A}`,L)}const ce=/[^+/0-9A-Za-z-_]/g;function he(L){if(L=L.split("=")[0],L=L.trim().replace(ce,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function le(L,A){A=A||1/0;let I;const K=L.length;let Q=null;const te=[];for(let ie=0;ie<K;++ie){if(I=L.charCodeAt(ie),I>55295&&I<57344){if(!Q){if(I>56319){(A-=3)>-1&&te.push(239,191,189);continue}else if(ie+1===K){(A-=3)>-1&&te.push(239,191,189);continue}Q=I;continue}if(I<56320){(A-=3)>-1&&te.push(239,191,189),Q=I;continue}I=(Q-55296<<10|I-56320)+65536}else Q&&(A-=3)>-1&&te.push(239,191,189);if(Q=null,I<128){if((A-=1)<0)break;te.push(I)}else if(I<2048){if((A-=2)<0)break;te.push(I>>6|192,I&63|128)}else if(I<65536){if((A-=3)<0)break;te.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((A-=4)<0)break;te.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return te}function be(L){const A=[];for(let I=0;I<L.length;++I)A.push(L.charCodeAt(I)&255);return A}function Ce(L,A){let I,K,Q;const te=[];for(let ie=0;ie<L.length&&!((A-=2)<0);++ie)I=L.charCodeAt(ie),K=I>>8,Q=I%256,te.push(Q),te.push(K);return te}function pe(L){return e.toByteArray(he(L))}function ue(L,A,I,K){let Q;for(Q=0;Q<K&&!(Q+I>=A.length||Q>=L.length);++Q)A[Q+I]=L[Q];return Q}function je(L,A){return L instanceof A||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===A.name}function Ee(L){return L!==L}const Ne=(function(){const L="0123456789abcdef",A=new Array(256);for(let I=0;I<16;++I){const K=I*16;for(let Q=0;Q<16;++Q)A[K+Q]=L[I]+L[Q]}return A})();function Ve(L){return typeof BigInt>"u"?Ke:L}function Ke(){throw new Error("BigInt not supported")}})(yw)),yw}var gt=lC(),Yl={};const A7="https://secure.walletconnect.org/sdk",S7=(typeof process<"u"&&typeof Yl<"u"?Yl.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||A7,x7=(typeof process<"u"&&typeof Yl<"u"?Yl.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",I7=(typeof process<"u"&&typeof Yl<"u"?Yl.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ze={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},hn={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},p2={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},qn={set(t,e){ks.isClient&&localStorage.setItem(`${ze.STORAGE_KEY}${t}`,e)},get(t){return ks.isClient?localStorage.getItem(`${ze.STORAGE_KEY}${t}`):null},delete(t,e){ks.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ze.STORAGE_KEY}${t}`))}},jp=30*1e3,ks={checkIfAllowedToTriggerEmail(){const t=qn.get(ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<jp){const n=Math.ceil((jp-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=qn.get(ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<jp)return Math.ceil((jp-e)/1e3)}return 0},checkIfRequestExists(t){return hn.NOT_SAFE_RPC_METHODS.includes(t.method)||hn.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&(t?.match(p2.transactionHash)||t?.match(p2.signedMessage))?ze.RPC_RESPONSE_TYPE_TX:ze.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return hn.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Ot;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ot||(Ot={}));var G1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(G1||(G1={}));const $e=Ot.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wa=t=>{switch(typeof t){case"undefined":return $e.undefined;case"string":return $e.string;case"number":return isNaN(t)?$e.nan:$e.number;case"boolean":return $e.boolean;case"function":return $e.function;case"bigint":return $e.bigint;case"symbol":return $e.symbol;case"object":return Array.isArray(t)?$e.array:t===null?$e.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?$e.promise:typeof Map<"u"&&t instanceof Map?$e.map:typeof Set<"u"&&t instanceof Set?$e.set:typeof Date<"u"&&t instanceof Date?$e.date:$e.object;default:return $e.unknown}},ve=Ot.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),N7=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class xi extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ot.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}xi.create=t=>new xi(t);const ph=(t,e)=>{let n;switch(t.code){case ve.invalid_type:t.received===$e.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ve.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ot.jsonStringifyReplacer)}`;break;case ve.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ot.joinValues(t.keys,", ")}`;break;case ve.invalid_union:n="Invalid input";break;case ve.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ot.joinValues(t.options)}`;break;case ve.invalid_enum_value:n=`Invalid enum value. Expected ${Ot.joinValues(t.options)}, received '${t.received}'`;break;case ve.invalid_arguments:n="Invalid function arguments";break;case ve.invalid_return_type:n="Invalid function return type";break;case ve.invalid_date:n="Invalid date";break;case ve.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ot.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ve.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ve.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ve.custom:n="Invalid input";break;case ve.invalid_intersection_types:n="Intersection results could not be merged";break;case ve.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ve.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ot.assertNever(t)}return{message:n}};let q3=ph;function T7(t){q3=t}function lg(){return q3}const dg=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},R7=[];function qe(t,e){const n=dg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,lg(),ph].filter(r=>!!r)});t.common.issues.push(n)}class Ur{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return at;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Ur.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return at;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const at=Object.freeze({status:"aborted"}),z3=t=>({status:"dirty",value:t}),Xr=t=>({status:"valid",value:t}),Y1=t=>t.status==="aborted",Z1=t=>t.status==="dirty",gh=t=>t.status==="valid",fg=t=>typeof Promise<"u"&&t instanceof Promise;var tt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(tt||(tt={}));class fo{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const g2=(t,e)=>{if(gh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new xi(t.common.issues);return this._error=n,this._error}}};function lt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class mt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Wa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Wa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ur,ctx:{common:e.parent.common,data:e.data,parsedType:Wa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(fg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wa(e)},i=this._parseSync({data:e,path:s.path,parent:s});return g2(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Wa(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(fg(s)?s:Promise.resolve(s));return g2(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ve.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Ti({schema:this,typeName:st.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Jo.create(this,this._def)}nullable(){return Eu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ii.create(this,this._def)}promise(){return Jl.create(this,this._def)}or(e){return bh.create([this,e],this._def)}and(e){return Eh.create(this,e,this._def)}transform(e){return new Ti({...lt(this._def),schema:this,typeName:st.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Sh({...lt(this._def),innerType:this,defaultValue:n,typeName:st.ZodDefault})}brand(){return new W3({typeName:st.ZodBranded,type:this,...lt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new mg({...lt(this._def),innerType:this,catchValue:n,typeName:st.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return rp.create(this,e)}readonly(){return wg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const O7=/^c[^\s-]{8,}$/i,P7=/^[a-z][a-z0-9]*$/,k7=/^[0-9A-HJKMNP-TV-Z]{26}$/,B7=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,D7=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,U7="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ww;const M7=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,$7=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,L7=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function F7(t,e){return!!((e==="v4"||!e)&&M7.test(t)||(e==="v6"||!e)&&$7.test(t))}class Ci extends mt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==$e.string){const i=this._getOrReturnCtx(e);return qe(i,{code:ve.invalid_type,expected:$e.string,received:i.parsedType}),at}const r=new Ur;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:ve.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:ve.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?qe(s,{code:ve.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&qe(s,{code:ve.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")D7.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"email",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")ww||(ww=new RegExp(U7,"u")),ww.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"emoji",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")B7.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"uuid",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")O7.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"cuid",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")P7.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"cuid2",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")k7.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"ulid",code:ve.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),qe(s,{validation:"url",code:ve.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"regex",code:ve.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),qe(s,{code:ve.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),qe(s,{code:ve.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),qe(s,{code:ve.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?L7(i).test(e.data)||(s=this._getOrReturnCtx(e,s),qe(s,{code:ve.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?F7(e.data,i.version)||(s=this._getOrReturnCtx(e,s),qe(s,{validation:"ip",code:ve.invalid_string,message:i.message}),r.dirty()):Ot.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ve.invalid_string,...tt.errToObj(r)})}_addCheck(e){return new Ci({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...tt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...tt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...tt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...tt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...tt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...tt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...tt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...tt.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,...tt.errToObj(e?.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...tt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...tt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...tt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...tt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...tt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...tt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...tt.errToObj(n)})}nonempty(e){return this.min(1,tt.errToObj(e))}trim(){return new Ci({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ci({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ci({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ci.create=t=>{var e;return new Ci({checks:[],typeName:st.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...lt(t)})};function j7(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class mc extends mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==$e.number){const i=this._getOrReturnCtx(e);return qe(i,{code:ve.invalid_type,expected:$e.number,received:i.parsedType}),at}let r;const s=new Ur;for(const i of this._def.checks)i.kind==="int"?Ot.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:ve.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:ve.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:ve.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?j7(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),qe(r,{code:ve.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),qe(r,{code:ve.not_finite,message:i.message}),s.dirty()):Ot.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,tt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,tt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,tt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,tt.toString(n))}setLimit(e,n,r,s){return new mc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:tt.toString(s)}]})}_addCheck(e){return new mc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:tt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:tt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:tt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:tt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:tt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:tt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:tt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:tt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:tt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ot.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}mc.create=t=>new mc({checks:[],typeName:st.ZodNumber,coerce:t?.coerce||!1,...lt(t)});class yc extends mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==$e.bigint){const i=this._getOrReturnCtx(e);return qe(i,{code:ve.invalid_type,expected:$e.bigint,received:i.parsedType}),at}let r;const s=new Ur;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:ve.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:ve.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),qe(r,{code:ve.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ot.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,tt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,tt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,tt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,tt.toString(n))}setLimit(e,n,r,s){return new yc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:tt.toString(s)}]})}_addCheck(e){return new yc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:tt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:tt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:tt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:tt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:tt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}yc.create=t=>{var e;return new yc({checks:[],typeName:st.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...lt(t)})};class mh extends mt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==$e.boolean){const r=this._getOrReturnCtx(e);return qe(r,{code:ve.invalid_type,expected:$e.boolean,received:r.parsedType}),at}return Xr(e.data)}}mh.create=t=>new mh({typeName:st.ZodBoolean,coerce:t?.coerce||!1,...lt(t)});class wu extends mt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==$e.date){const i=this._getOrReturnCtx(e);return qe(i,{code:ve.invalid_type,expected:$e.date,received:i.parsedType}),at}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return qe(i,{code:ve.invalid_date}),at}const r=new Ur;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:ve.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),qe(s,{code:ve.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Ot.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new wu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:tt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:tt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}wu.create=t=>new wu({checks:[],coerce:t?.coerce||!1,typeName:st.ZodDate,...lt(t)});class hg extends mt{_parse(e){if(this._getType(e)!==$e.symbol){const r=this._getOrReturnCtx(e);return qe(r,{code:ve.invalid_type,expected:$e.symbol,received:r.parsedType}),at}return Xr(e.data)}}hg.create=t=>new hg({typeName:st.ZodSymbol,...lt(t)});class yh extends mt{_parse(e){if(this._getType(e)!==$e.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:ve.invalid_type,expected:$e.undefined,received:r.parsedType}),at}return Xr(e.data)}}yh.create=t=>new yh({typeName:st.ZodUndefined,...lt(t)});class wh extends mt{_parse(e){if(this._getType(e)!==$e.null){const r=this._getOrReturnCtx(e);return qe(r,{code:ve.invalid_type,expected:$e.null,received:r.parsedType}),at}return Xr(e.data)}}wh.create=t=>new wh({typeName:st.ZodNull,...lt(t)});class Zl extends mt{constructor(){super(...arguments),this._any=!0}_parse(e){return Xr(e.data)}}Zl.create=t=>new Zl({typeName:st.ZodAny,...lt(t)});class uu extends mt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Xr(e.data)}}uu.create=t=>new uu({typeName:st.ZodUnknown,...lt(t)});class oa extends mt{_parse(e){const n=this._getOrReturnCtx(e);return qe(n,{code:ve.invalid_type,expected:$e.never,received:n.parsedType}),at}}oa.create=t=>new oa({typeName:st.ZodNever,...lt(t)});class pg extends mt{_parse(e){if(this._getType(e)!==$e.undefined){const r=this._getOrReturnCtx(e);return qe(r,{code:ve.invalid_type,expected:$e.void,received:r.parsedType}),at}return Xr(e.data)}}pg.create=t=>new pg({typeName:st.ZodVoid,...lt(t)});class Ii extends mt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==$e.array)return qe(n,{code:ve.invalid_type,expected:$e.array,received:n.parsedType}),at;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(qe(n,{code:o?ve.too_big:ve.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(qe(n,{code:ve.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(qe(n,{code:ve.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new fo(n,o,n.path,a)))).then(o=>Ur.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new fo(n,o,n.path,a)));return Ur.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ii({...this._def,minLength:{value:e,message:tt.toString(n)}})}max(e,n){return new Ii({...this._def,maxLength:{value:e,message:tt.toString(n)}})}length(e,n){return new Ii({...this._def,exactLength:{value:e,message:tt.toString(n)}})}nonempty(e){return this.min(1,e)}}Ii.create=(t,e)=>new Ii({type:t,minLength:null,maxLength:null,exactLength:null,typeName:st.ZodArray,...lt(e)});function ul(t){if(t instanceof nn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Jo.create(ul(r))}return new nn({...t._def,shape:()=>e})}else return t instanceof Ii?new Ii({...t._def,type:ul(t.element)}):t instanceof Jo?Jo.create(ul(t.unwrap())):t instanceof Eu?Eu.create(ul(t.unwrap())):t instanceof ho?ho.create(t.items.map(e=>ul(e))):t}class nn extends mt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ot.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==$e.object){const u=this._getOrReturnCtx(e);return qe(u,{code:ve.invalid_type,expected:$e.object,received:u.parsedType}),at}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof oa&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new fo(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof oa){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(qe(s,{code:ve.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new fo(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>Ur.mergeObjectSync(r,u)):Ur.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return tt.errToObj,new nn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=tt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new nn({...this._def,unknownKeys:"strip"})}passthrough(){return new nn({...this._def,unknownKeys:"passthrough"})}extend(e){return new nn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:st.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new nn({...this._def,catchall:e})}pick(e){const n={};return Ot.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new nn({...this._def,shape:()=>n})}omit(e){const n={};return Ot.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new nn({...this._def,shape:()=>n})}deepPartial(){return ul(this)}partial(e){const n={};return Ot.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new nn({...this._def,shape:()=>n})}required(e){const n={};return Ot.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Jo;)i=i._def.innerType;n[r]=i}}),new nn({...this._def,shape:()=>n})}keyof(){return H3(Ot.objectKeys(this.shape))}}nn.create=(t,e)=>new nn({shape:()=>t,unknownKeys:"strip",catchall:oa.create(),typeName:st.ZodObject,...lt(e)});nn.strictCreate=(t,e)=>new nn({shape:()=>t,unknownKeys:"strict",catchall:oa.create(),typeName:st.ZodObject,...lt(e)});nn.lazycreate=(t,e)=>new nn({shape:t,unknownKeys:"strip",catchall:oa.create(),typeName:st.ZodObject,...lt(e)});class bh extends mt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new xi(a.ctx.common.issues));return qe(n,{code:ve.invalid_union,unionErrors:o}),at}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},l=c._parseSync({data:n.data,path:n.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new xi(c));return qe(n,{code:ve.invalid_union,unionErrors:a}),at}}get options(){return this._def.options}}bh.create=(t,e)=>new bh({options:t,typeName:st.ZodUnion,...lt(e)});const P0=t=>t instanceof Ch?P0(t.schema):t instanceof Ti?P0(t.innerType()):t instanceof _h?[t.value]:t instanceof wc?t.options:t instanceof Ah?Object.keys(t.enum):t instanceof Sh?P0(t._def.innerType):t instanceof yh?[void 0]:t instanceof wh?[null]:null;class Um extends mt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==$e.object)return qe(n,{code:ve.invalid_type,expected:$e.object,received:n.parsedType}),at;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(qe(n,{code:ve.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),at)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=P0(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Um({typeName:st.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...lt(r)})}}function J1(t,e){const n=Wa(t),r=Wa(e);if(t===e)return{valid:!0,data:t};if(n===$e.object&&r===$e.object){const s=Ot.objectKeys(e),i=Ot.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=J1(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===$e.array&&r===$e.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=J1(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===$e.date&&r===$e.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Eh extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Y1(i)||Y1(o))return at;const a=J1(i.value,o.value);return a.valid?((Z1(i)||Z1(o))&&n.dirty(),{status:n.value,value:a.data}):(qe(r,{code:ve.invalid_intersection_types}),at)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Eh.create=(t,e,n)=>new Eh({left:t,right:e,typeName:st.ZodIntersection,...lt(n)});class ho extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.array)return qe(r,{code:ve.invalid_type,expected:$e.array,received:r.parsedType}),at;if(r.data.length<this._def.items.length)return qe(r,{code:ve.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),at;!this._def.rest&&r.data.length>this._def.items.length&&(qe(r,{code:ve.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new fo(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Ur.mergeArray(n,o)):Ur.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new ho({...this._def,rest:e})}}ho.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ho({items:t,typeName:st.ZodTuple,rest:null,...lt(e)})};class vh extends mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.object)return qe(r,{code:ve.invalid_type,expected:$e.object,received:r.parsedType}),at;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new fo(r,a,r.path,a)),value:o._parse(new fo(r,r.data[a],r.path,a))});return r.common.async?Ur.mergeObjectAsync(n,s):Ur.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof mt?new vh({keyType:e,valueType:n,typeName:st.ZodRecord,...lt(r)}):new vh({keyType:Ci.create(),valueType:e,typeName:st.ZodRecord,...lt(n)})}}class gg extends mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.map)return qe(r,{code:ve.invalid_type,expected:$e.map,received:r.parsedType}),at;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new fo(r,a,r.path,[u,"key"])),value:i._parse(new fo(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return at;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return at;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}}}}gg.create=(t,e,n)=>new gg({valueType:e,keyType:t,typeName:st.ZodMap,...lt(n)});class bu extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.set)return qe(r,{code:ve.invalid_type,expected:$e.set,received:r.parsedType}),at;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(qe(r,{code:ve.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(qe(r,{code:ve.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return at;l.status==="dirty"&&n.dirty(),u.add(l.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new fo(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new bu({...this._def,minSize:{value:e,message:tt.toString(n)}})}max(e,n){return new bu({...this._def,maxSize:{value:e,message:tt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}bu.create=(t,e)=>new bu({valueType:t,minSize:null,maxSize:null,typeName:st.ZodSet,...lt(e)});class Nl extends mt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==$e.function)return qe(n,{code:ve.invalid_type,expected:$e.function,received:n.parsedType}),at;function r(a,c){return dg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,lg(),ph].filter(u=>!!u),issueData:{code:ve.invalid_arguments,argumentsError:c}})}function s(a,c){return dg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,lg(),ph].filter(u=>!!u),issueData:{code:ve.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Jl){const a=this;return Xr(async function(...c){const u=new xi([]),l=await a._def.args.parseAsync(c,i).catch(h=>{throw u.addIssue(r(c,h)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(h=>{throw u.addIssue(s(d,h)),u})})}else{const a=this;return Xr(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new xi([r(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new xi([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Nl({...this._def,args:ho.create(e).rest(uu.create())})}returns(e){return new Nl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Nl({args:e||ho.create([]).rest(uu.create()),returns:n||uu.create(),typeName:st.ZodFunction,...lt(r)})}}class Ch extends mt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ch.create=(t,e)=>new Ch({getter:t,typeName:st.ZodLazy,...lt(e)});class _h extends mt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return qe(n,{received:n.data,code:ve.invalid_literal,expected:this._def.value}),at}return{status:"valid",value:e.data}}get value(){return this._def.value}}_h.create=(t,e)=>new _h({value:t,typeName:st.ZodLiteral,...lt(e)});function H3(t,e){return new wc({values:t,typeName:st.ZodEnum,...lt(e)})}class wc extends mt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{expected:Ot.joinValues(r),received:n.parsedType,code:ve.invalid_type}),at}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return qe(n,{received:n.data,code:ve.invalid_enum_value,options:r}),at}return Xr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return wc.create(e)}exclude(e){return wc.create(this.options.filter(n=>!e.includes(n)))}}wc.create=H3;class Ah extends mt{_parse(e){const n=Ot.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==$e.string&&r.parsedType!==$e.number){const s=Ot.objectValues(n);return qe(r,{expected:Ot.joinValues(s),received:r.parsedType,code:ve.invalid_type}),at}if(n.indexOf(e.data)===-1){const s=Ot.objectValues(n);return qe(r,{received:r.data,code:ve.invalid_enum_value,options:s}),at}return Xr(e.data)}get enum(){return this._def.values}}Ah.create=(t,e)=>new Ah({values:t,typeName:st.ZodNativeEnum,...lt(e)});class Jl extends mt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==$e.promise&&n.common.async===!1)return qe(n,{code:ve.invalid_type,expected:$e.promise,received:n.parsedType}),at;const r=n.parsedType===$e.promise?n.data:Promise.resolve(n.data);return Xr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Jl.create=(t,e)=>new Jl({type:t,typeName:st.ZodPromise,...lt(e)});class Ti extends mt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===st.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{qe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?at:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?at:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!gh(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>gh(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Ot.assertNever(s)}}Ti.create=(t,e,n)=>new Ti({schema:t,typeName:st.ZodEffects,effect:e,...lt(n)});Ti.createWithPreprocess=(t,e,n)=>new Ti({schema:e,effect:{type:"preprocess",transform:t},typeName:st.ZodEffects,...lt(n)});class Jo extends mt{_parse(e){return this._getType(e)===$e.undefined?Xr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Jo.create=(t,e)=>new Jo({innerType:t,typeName:st.ZodOptional,...lt(e)});class Eu extends mt{_parse(e){return this._getType(e)===$e.null?Xr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Eu.create=(t,e)=>new Eu({innerType:t,typeName:st.ZodNullable,...lt(e)});class Sh extends mt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===$e.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Sh.create=(t,e)=>new Sh({innerType:t,typeName:st.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...lt(e)});class mg extends mt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return fg(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xi(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new xi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}mg.create=(t,e)=>new mg({innerType:t,typeName:st.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...lt(e)});class yg extends mt{_parse(e){if(this._getType(e)!==$e.nan){const r=this._getOrReturnCtx(e);return qe(r,{code:ve.invalid_type,expected:$e.nan,received:r.parsedType}),at}return{status:"valid",value:e.data}}}yg.create=t=>new yg({typeName:st.ZodNaN,...lt(t)});const q7=Symbol("zod_brand");class W3 extends mt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class rp extends mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?at:i.status==="dirty"?(n.dirty(),z3(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?at:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new rp({in:e,out:n,typeName:st.ZodPipeline})}}class wg extends mt{_parse(e){const n=this._def.innerType._parse(e);return gh(n)&&(n.value=Object.freeze(n.value)),n}}wg.create=(t,e)=>new wg({innerType:t,typeName:st.ZodReadonly,...lt(e)});const V3=(t,e={},n)=>t?Zl.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):Zl.create(),z7={object:nn.lazycreate};var st;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(st||(st={}));const H7=(t,e={message:`Input not instance of ${t.name}`})=>V3(n=>n instanceof t,e),K3=Ci.create,G3=mc.create,W7=yg.create,V7=yc.create,Y3=mh.create,K7=wu.create,G7=hg.create,Y7=yh.create,Z7=wh.create,J7=Zl.create,X7=uu.create,Q7=oa.create,ej=pg.create,tj=Ii.create,nj=nn.create,rj=nn.strictCreate,sj=bh.create,ij=Um.create,oj=Eh.create,aj=ho.create,cj=vh.create,uj=gg.create,lj=bu.create,dj=Nl.create,fj=Ch.create,hj=_h.create,pj=wc.create,gj=Ah.create,mj=Jl.create,m2=Ti.create,yj=Jo.create,wj=Eu.create,bj=Ti.createWithPreprocess,Ej=rp.create,vj=()=>K3().optional(),Cj=()=>G3().optional(),_j=()=>Y3().optional(),Aj={string:(t=>Ci.create({...t,coerce:!0})),number:(t=>mc.create({...t,coerce:!0})),boolean:(t=>mh.create({...t,coerce:!0})),bigint:(t=>yc.create({...t,coerce:!0})),date:(t=>wu.create({...t,coerce:!0}))},Sj=at;var j=Object.freeze({__proto__:null,defaultErrorMap:ph,setErrorMap:T7,getErrorMap:lg,makeIssue:dg,EMPTY_PATH:R7,addIssueToContext:qe,ParseStatus:Ur,INVALID:at,DIRTY:z3,OK:Xr,isAborted:Y1,isDirty:Z1,isValid:gh,isAsync:fg,get util(){return Ot},get objectUtil(){return G1},ZodParsedType:$e,getParsedType:Wa,ZodType:mt,ZodString:Ci,ZodNumber:mc,ZodBigInt:yc,ZodBoolean:mh,ZodDate:wu,ZodSymbol:hg,ZodUndefined:yh,ZodNull:wh,ZodAny:Zl,ZodUnknown:uu,ZodNever:oa,ZodVoid:pg,ZodArray:Ii,ZodObject:nn,ZodUnion:bh,ZodDiscriminatedUnion:Um,ZodIntersection:Eh,ZodTuple:ho,ZodRecord:vh,ZodMap:gg,ZodSet:bu,ZodFunction:Nl,ZodLazy:Ch,ZodLiteral:_h,ZodEnum:wc,ZodNativeEnum:Ah,ZodPromise:Jl,ZodEffects:Ti,ZodTransformer:Ti,ZodOptional:Jo,ZodNullable:Eu,ZodDefault:Sh,ZodCatch:mg,ZodNaN:yg,BRAND:q7,ZodBranded:W3,ZodPipeline:rp,ZodReadonly:wg,custom:V3,Schema:mt,ZodSchema:mt,late:z7,get ZodFirstPartyTypeKind(){return st},coerce:Aj,any:J7,array:tj,bigint:V7,boolean:Y3,date:K7,discriminatedUnion:ij,effect:m2,enum:pj,function:dj,instanceof:H7,intersection:oj,lazy:fj,literal:hj,map:uj,nan:W7,nativeEnum:gj,never:Q7,null:Z7,nullable:wj,number:G3,object:nj,oboolean:_j,onumber:Cj,optional:yj,ostring:vj,pipeline:Ej,preprocess:bj,promise:mj,record:cj,set:lj,strictObject:rj,string:K3,symbol:G7,transformer:m2,tuple:aj,undefined:Y7,union:sj,unknown:X7,void:ej,NEVER:Sj,ZodIssueCode:ve,quotelessJson:N7,ZodError:xi});const an=j.object({message:j.string()});function Le(t){return j.literal(ze[t])}const Mm=j.object({serializedMessage:j.string().optional(),accountAddress:j.string(),chainId:j.string(),notBefore:j.string().optional(),domain:j.string(),uri:j.string(),version:j.string(),nonce:j.string(),statement:j.string().optional(),resources:j.array(j.string()).optional(),requestId:j.string().optional(),issuedAt:j.string().optional(),expirationTime:j.string().optional()});j.object({accessList:j.array(j.string()),blockHash:j.string().nullable(),blockNumber:j.string().nullable(),chainId:j.string().or(j.number()),from:j.string(),gas:j.string(),hash:j.string(),input:j.string().nullable(),maxFeePerGas:j.string(),maxPriorityFeePerGas:j.string(),nonce:j.string(),r:j.string(),s:j.string(),to:j.string(),transactionIndex:j.string().nullable(),type:j.string(),v:j.string(),value:j.string()});const xj=j.object({chainId:j.string().or(j.number()),rpcUrl:j.optional(j.string())}),Ij=j.object({email:j.string().email()}),Nj=j.object({otp:j.string()}),Tj=j.object({uri:j.string(),preferredAccountType:j.optional(j.string()),chainId:j.optional(j.string().or(j.number())),siwxMessage:j.optional(Mm),rpcUrl:j.optional(j.string())}),Rj=j.object({chainId:j.optional(j.string().or(j.number())),preferredAccountType:j.optional(j.string()),socialUri:j.optional(j.string()),siwxMessage:j.optional(Mm),rpcUrl:j.optional(j.string())}),Oj=j.object({provider:j.enum(["google","github","apple","facebook","x","discord"])}),Pj=j.object({email:j.string().email()}),kj=j.object({otp:j.string()}),Bj=j.object({otp:j.string()}),Dj=j.object({themeMode:j.optional(j.enum(["light","dark"])),themeVariables:j.optional(j.record(j.string(),j.string().or(j.number()))),w3mThemeVariables:j.optional(j.record(j.string(),j.string()))}),Uj=j.object({metadata:j.object({name:j.string(),description:j.string(),url:j.string(),icons:j.array(j.string())}).optional(),sdkVersion:j.string().optional(),sdkType:j.string().optional(),projectId:j.string()}),Mj=j.object({type:j.string()}),$j=j.object({action:j.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Lj=j.object({url:j.string()}),Fj=j.object({userName:j.string()}),jj=j.object({email:j.string().optional().nullable(),address:j.string(),chainId:j.string().or(j.number()),accounts:j.array(j.object({address:j.string(),type:j.enum([hn.ACCOUNT_TYPES.EOA,hn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:j.string().optional().nullable(),preferredAccountType:j.optional(j.string()),signature:j.string().optional(),message:j.string().optional(),siwxMessage:j.optional(Mm)}),qj=j.object({action:j.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),zj=j.object({email:j.string().email().optional().nullable(),address:j.string(),chainId:j.string().or(j.number()),smartAccountDeployed:j.optional(j.boolean()),accounts:j.array(j.object({address:j.string(),type:j.enum([hn.ACCOUNT_TYPES.EOA,hn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:j.optional(j.string()),signature:j.string().optional(),message:j.string().optional(),siwxMessage:j.optional(Mm)}),Hj=j.object({uri:j.string()}),Wj=j.object({isConnected:j.boolean()}),Vj=j.object({chainId:j.string().or(j.number())}),Kj=j.object({chainId:j.string().or(j.number())}),Gj=j.object({newEmail:j.string().email()}),Yj=j.object({smartAccountEnabledNetworks:j.array(j.number())});j.object({address:j.string(),isDeployed:j.boolean()});const Zj=j.object({version:j.string().optional()}),Jj=j.object({type:j.string(),address:j.string()}),Xj=j.any(),Qj=j.object({method:j.literal("eth_accounts")}),eq=j.object({method:j.literal("eth_blockNumber")}),tq=j.object({method:j.literal("eth_call"),params:j.array(j.any())}),nq=j.object({method:j.literal("eth_chainId")}),rq=j.object({method:j.literal("eth_estimateGas"),params:j.array(j.any())}),sq=j.object({method:j.literal("eth_feeHistory"),params:j.array(j.any())}),iq=j.object({method:j.literal("eth_gasPrice")}),oq=j.object({method:j.literal("eth_getAccount"),params:j.array(j.any())}),aq=j.object({method:j.literal("eth_getBalance"),params:j.array(j.any())}),cq=j.object({method:j.literal("eth_getBlockByHash"),params:j.array(j.any())}),uq=j.object({method:j.literal("eth_getBlockByNumber"),params:j.array(j.any())}),lq=j.object({method:j.literal("eth_getBlockReceipts"),params:j.array(j.any())}),dq=j.object({method:j.literal("eth_getBlockTransactionCountByHash"),params:j.array(j.any())}),fq=j.object({method:j.literal("eth_getBlockTransactionCountByNumber"),params:j.array(j.any())}),hq=j.object({method:j.literal("eth_getCode"),params:j.array(j.any())}),pq=j.object({method:j.literal("eth_getFilterChanges"),params:j.array(j.any())}),gq=j.object({method:j.literal("eth_getFilterLogs"),params:j.array(j.any())}),mq=j.object({method:j.literal("eth_getLogs"),params:j.array(j.any())}),yq=j.object({method:j.literal("eth_getProof"),params:j.array(j.any())}),wq=j.object({method:j.literal("eth_getStorageAt"),params:j.array(j.any())}),bq=j.object({method:j.literal("eth_getTransactionByBlockHashAndIndex"),params:j.array(j.any())}),Eq=j.object({method:j.literal("eth_getTransactionByBlockNumberAndIndex"),params:j.array(j.any())}),vq=j.object({method:j.literal("eth_getTransactionByHash"),params:j.array(j.any())}),Cq=j.object({method:j.literal("eth_getTransactionCount"),params:j.array(j.any())}),_q=j.object({method:j.literal("eth_getTransactionReceipt"),params:j.array(j.any())}),Aq=j.object({method:j.literal("eth_getUncleCountByBlockHash"),params:j.array(j.any())}),Sq=j.object({method:j.literal("eth_getUncleCountByBlockNumber"),params:j.array(j.any())}),xq=j.object({method:j.literal("eth_maxPriorityFeePerGas")}),Iq=j.object({method:j.literal("eth_newBlockFilter")}),Nq=j.object({method:j.literal("eth_newFilter"),params:j.array(j.any())}),Tq=j.object({method:j.literal("eth_newPendingTransactionFilter")}),Rq=j.object({method:j.literal("eth_sendRawTransaction"),params:j.array(j.any())}),Oq=j.object({method:j.literal("eth_syncing"),params:j.array(j.any())}),Pq=j.object({method:j.literal("eth_uninstallFilter"),params:j.array(j.any())}),y2=j.object({method:j.literal("personal_sign"),params:j.array(j.any())}),kq=j.object({method:j.literal("eth_signTypedData_v4"),params:j.array(j.any())}),Bq=j.object({method:j.literal("eth_sendTransaction"),params:j.array(j.any())}),Dq=j.object({method:j.literal("solana_signMessage"),params:j.object({message:j.string(),pubkey:j.string()})}),Uq=j.object({method:j.literal("solana_signTransaction"),params:j.object({transaction:j.string()})}),Mq=j.object({method:j.literal("solana_signAllTransactions"),params:j.object({transactions:j.array(j.string())})}),$q=j.object({method:j.literal("solana_signAndSendTransaction"),params:j.object({transaction:j.string(),options:j.object({skipPreflight:j.boolean().optional(),preflightCommitment:j.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:j.number().optional(),minContextSlot:j.number().optional()}).optional()})}),Lq=j.object({method:j.literal("wallet_sendCalls"),params:j.array(j.object({chainId:j.string().or(j.number()).optional(),from:j.string().optional(),version:j.string().optional(),capabilities:j.any().optional(),calls:j.array(j.object({to:j.string().startsWith("0x"),data:j.string().startsWith("0x").optional(),value:j.string().optional()}))}))}),Fq=j.object({method:j.literal("wallet_getCallsStatus"),params:j.array(j.string())}),jq=j.object({method:j.literal("wallet_getCapabilities"),params:j.array(j.string().or(j.number()).optional()).optional()}),qq=j.object({method:j.literal("wallet_grantPermissions"),params:j.array(j.any())}),zq=j.object({method:j.literal("wallet_revokePermissions"),params:j.any()}),Hq=j.object({method:j.literal("wallet_getAssets"),params:j.any()}),w2=j.object({token:j.string()}),Fe=j.object({id:j.string().optional()}),bw={appEvent:Fe.extend({type:Le("APP_SWITCH_NETWORK"),payload:xj}).or(Fe.extend({type:Le("APP_CONNECT_EMAIL"),payload:Ij})).or(Fe.extend({type:Le("APP_CONNECT_DEVICE")})).or(Fe.extend({type:Le("APP_CONNECT_OTP"),payload:Nj})).or(Fe.extend({type:Le("APP_CONNECT_SOCIAL"),payload:Tj})).or(Fe.extend({type:Le("APP_GET_FARCASTER_URI")})).or(Fe.extend({type:Le("APP_CONNECT_FARCASTER")})).or(Fe.extend({type:Le("APP_GET_USER"),payload:j.optional(Rj)})).or(Fe.extend({type:Le("APP_GET_SOCIAL_REDIRECT_URI"),payload:Oj})).or(Fe.extend({type:Le("APP_SIGN_OUT")})).or(Fe.extend({type:Le("APP_IS_CONNECTED"),payload:j.optional(w2)})).or(Fe.extend({type:Le("APP_GET_CHAIN_ID")})).or(Fe.extend({type:Le("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Fe.extend({type:Le("APP_INIT_SMART_ACCOUNT")})).or(Fe.extend({type:Le("APP_SET_PREFERRED_ACCOUNT"),payload:Mj})).or(Fe.extend({type:Le("APP_RPC_REQUEST"),payload:y2.or(Hq).or(Qj).or(eq).or(tq).or(nq).or(rq).or(sq).or(iq).or(oq).or(aq).or(cq).or(uq).or(lq).or(dq).or(fq).or(hq).or(pq).or(gq).or(mq).or(yq).or(wq).or(bq).or(Eq).or(vq).or(Cq).or(_q).or(Aq).or(Sq).or(xq).or(Iq).or(Nq).or(Tq).or(Rq).or(Oq).or(Pq).or(y2).or(kq).or(Bq).or(Dq).or(Uq).or(Mq).or($q).or(Fq).or(Lq).or(jq).or(qq).or(zq).and(j.object({chainId:j.string().or(j.number()).optional(),chainNamespace:j.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:j.string().optional()}))})).or(Fe.extend({type:Le("APP_UPDATE_EMAIL"),payload:Pj})).or(Fe.extend({type:Le("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:kj})).or(Fe.extend({type:Le("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Bj})).or(Fe.extend({type:Le("APP_SYNC_THEME"),payload:Dj})).or(Fe.extend({type:Le("APP_SYNC_DAPP_DATA"),payload:Uj})).or(Fe.extend({type:Le("APP_RELOAD")})).or(Fe.extend({type:Le("APP_RPC_ABORT")})),frameEvent:Fe.extend({type:Le("FRAME_SWITCH_NETWORK_ERROR"),payload:an}).or(Fe.extend({type:Le("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Kj})).or(Fe.extend({type:Le("FRAME_CONNECT_EMAIL_SUCCESS"),payload:$j})).or(Fe.extend({type:Le("FRAME_CONNECT_EMAIL_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Lj})).or(Fe.extend({type:Le("FRAME_GET_FARCASTER_URI_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Fj})).or(Fe.extend({type:Le("FRAME_CONNECT_FARCASTER_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_CONNECT_OTP_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_CONNECT_OTP_SUCCESS")})).or(Fe.extend({type:Le("FRAME_CONNECT_DEVICE_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Fe.extend({type:Le("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:jj})).or(Fe.extend({type:Le("FRAME_CONNECT_SOCIAL_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_GET_USER_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_GET_USER_SUCCESS"),payload:zj})).or(Fe.extend({type:Le("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Hj})).or(Fe.extend({type:Le("FRAME_SIGN_OUT_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_SIGN_OUT_SUCCESS")})).or(Fe.extend({type:Le("FRAME_IS_CONNECTED_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_IS_CONNECTED_SUCCESS"),payload:Wj})).or(Fe.extend({type:Le("FRAME_GET_CHAIN_ID_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Vj})).or(Fe.extend({type:Le("FRAME_RPC_REQUEST_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_RPC_REQUEST_SUCCESS"),payload:Xj})).or(Fe.extend({type:Le("FRAME_SESSION_UPDATE"),payload:w2})).or(Fe.extend({type:Le("FRAME_UPDATE_EMAIL_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_UPDATE_EMAIL_SUCCESS"),payload:qj})).or(Fe.extend({type:Le("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Fe.extend({type:Le("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Gj})).or(Fe.extend({type:Le("FRAME_SYNC_THEME_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_SYNC_THEME_SUCCESS")})).or(Fe.extend({type:Le("FRAME_SYNC_DAPP_DATA_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Fe.extend({type:Le("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Yj})).or(Fe.extend({type:Le("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Jj})).or(Fe.extend({type:Le("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_READY"),payload:Zj})).or(Fe.extend({type:Le("FRAME_RELOAD_ERROR"),payload:an})).or(Fe.extend({type:Le("FRAME_RELOAD_SUCCESS")}))};function Ew(t,e={}){return typeof e?.type=="string"&&e?.type?.includes(t)}function Wq({projectId:t,chainId:e,enableLogger:n,rpcUrl:r=X.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(S7);i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",I7),i.searchParams.set("enableLogger",String(n)),i.searchParams.set("rpcUrl",r);const o=qn.get("dapp_smart_account_version");return o&&(o==="v6"||o==="v7")&&(console.warn(">> AppKit - Forcing smart account version",o),i.searchParams.set("smartAccountVersion",o)),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class Vq{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=X.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,u)=>{function l({data:d}){if(!Ew(ze.FRAME_EVENT_KEY,d))return;const f=bw.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}f.data?.id===a&&(c(f.data),window.removeEventListener("message",l))}ks.isClient&&(window.addEventListener("message",l),u.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:a=>{ks.isClient&&window.addEventListener("message",({data:c})=>{if(!Ew(ze.FRAME_EVENT_KEY,c))return;const u=bw.frameEvent.safeParse(c);u.success?a(u.data):console.warn("W3mFrame: invalid frame event",u.error.message)})},onAppEvent:a=>{ks.isClient&&window.addEventListener("message",({data:c})=>{if(!Ew(ze.APP_EVENT_KEY,c))return;const u=bw.appEvent.safeParse(c);u.success||console.warn("W3mFrame: invalid app event",u.error.message),a(c)})},postAppEvent:a=>{if(ks.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(ks.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,n&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),ks.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=Wq({projectId:e,chainId:r,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=a,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}var Ji={exports:{}};function Kq(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Gq=Yq;function Yq(t,e,n){var r=n&&n.stringify||Kq,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var u="",l=1-s,d=-1,f=t&&t.length||0,h=0;h<f;){if(t.charCodeAt(h)===37&&h+1<f){switch(d=d>-1?d:0,t.charCodeAt(h+1)){case 100:case 102:if(l>=c||e[l]==null)break;d<h&&(u+=t.slice(d,h)),u+=Number(e[l]),d=h+2,h++;break;case 105:if(l>=c||e[l]==null)break;d<h&&(u+=t.slice(d,h)),u+=Math.floor(Number(e[l])),d=h+2,h++;break;case 79:case 111:case 106:if(l>=c||e[l]===void 0)break;d<h&&(u+=t.slice(d,h));var m=typeof e[l];if(m==="string"){u+="'"+e[l]+"'",d=h+2,h++;break}if(m==="function"){u+=e[l].name||"<anonymous>",d=h+2,h++;break}u+=r(e[l]),d=h+2,h++;break;case 115:if(l>=c)break;d<h&&(u+=t.slice(d,h)),u+=String(e[l]),d=h+2,h++;break;case 37:d<h&&(u+=t.slice(d,h)),u+="%",d=h+2,h++,l--;break}++l}++h}return d===-1?t:(d<f&&(u+=t.slice(d)),u)}const b2=Gq;Ji.exports=Xo;const xh=lz().console||{},Zq={mapHttpRequest:qp,mapHttpResponse:qp,wrapRequestSerializer:vw,wrapResponseSerializer:vw,wrapErrorSerializer:vw,req:qp,res:qp,err:v2,errWithCause:v2};function Qa(t,e){return t==="silent"?1/0:e.levels.values[t]}const dC=Symbol("pino.logFuncs"),X1=Symbol("pino.hierarchy"),Jq={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function E2(t,e){const n={logger:e,parent:t[X1]};e[X1]=n}function Xq(t,e,n){const r={};e.forEach(s=>{r[s]=n[s]?n[s]:xh[s]||xh[Jq[s]||"log"]||Tl}),t[dC]=r}function Qq(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Xo(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||xh;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Qq(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=Object.keys(t.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof n=="function"&&a.forEach(function(y){n[y]=n}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");const c=t.level||"info",u=Object.create(n);u.log||(u.log=Tl),Xq(u,a,n),E2({},u),Object.defineProperty(u,"levelVal",{get:d}),Object.defineProperty(u,"level",{get:f,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,asObjectBindingsOnly:t.browser.asObjectBindingsOnly,formatters:t.browser.formatters,levels:a,timestamp:az(t),messageKey:t.messageKey||"msg",onChild:t.onChild||Tl};u.levels=ez(t),u.level=c,u.isLevelEnabled=function(y){return this.levels.values[y]?this.levels.values[y]>=this.levels.values[this.level]:!1},u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=Tl,u.serializers=r,u._serialize=s,u._stdErrSerialize=i,u.child=function(...y){return m.call(this,l,...y)},e&&(u._logEvent=Q1());function d(){return Qa(this.level,this)}function f(){return this._level}function h(y){if(y!=="silent"&&!this.levels.values[y])throw Error("unknown level "+y);this._level=y,Tc(this,l,u,"error"),Tc(this,l,u,"fatal"),Tc(this,l,u,"warn"),Tc(this,l,u,"info"),Tc(this,l,u,"debug"),Tc(this,l,u,"trace"),o.forEach(E=>{Tc(this,l,u,E)})}function m(y,E,S){if(!E)throw new Error("missing bindings for child Pino");S=S||{},s&&E.serializers&&(S.serializers=E.serializers);const R=S.serializers;if(s&&R){var C=Object.assign({},r,R),T=t.browser.serialize===!0?Object.keys(C):s;delete E.serializers,fC([E],T,C,this._stdErrSerialize)}function N(q){this._childLevel=(q._childLevel|0)+1,this.bindings=E,C&&(this.serializers=C,this._serialize=T),e&&(this._logEvent=Q1([].concat(q._logEvent.bindings,E)))}N.prototype=this;const U=new N(this);return E2(this,U),U.child=function(...q){return m.call(this,y,...q)},U.level=S.level||this.level,y.onChild(U),U}return u}function ez(t){const e=t.customLevels||{},n=Object.assign({},Xo.levels.values,e),r=Object.assign({},Xo.levels.labels,tz(e));return{values:n,labels:r}}function tz(t){const e={};return Object.keys(t).forEach(function(n){e[t[n]]=n}),e}Xo.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Xo.stdSerializers=Zq,Xo.stdTimeFunctions=Object.assign({},{nullTime:Z3,epochTime:J3,unixTime:cz,isoTime:uz});function nz(t){const e=[];t.bindings&&e.push(t.bindings);let n=t[X1];for(;n.parent;)n=n.parent,n.logger.bindings&&e.push(n.logger.bindings);return e.reverse()}function Tc(t,e,n,r){if(Object.defineProperty(t,r,{value:Qa(t.level,n)>Qa(r,n)?Tl:n[dC][r],writable:!0,enumerable:!0,configurable:!0}),t[r]===Tl){if(!e.transmit)return;const i=e.transmit.level||t.level,o=Qa(i,n);if(Qa(r,n)<o)return}t[r]=sz(t,e,n,r);const s=nz(t);s.length!==0&&(t[r]=rz(s,t[r]))}function rz(t,e){return function(){return e.apply(this,[...t,...arguments])}}function sz(t,e,n,r){return(function(s){return function(){const i=e.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===xh?xh:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];var u=!1;if(e.serialize&&(fC(o,this._serialize,this.serializers,this._stdErrSerialize),u=!0),e.asObject||e.formatters?s.call(a,...iz(this,r,o,i,e)):s.apply(a,o),e.transmit){const l=e.transmit.level||t._level,d=Qa(l,n),f=Qa(r,n);if(f<d)return;oz(this,{ts:i,methodLevel:r,methodValue:f,transmitValue:n.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:Qa(t._level,n)},o,u)}}})(t[dC][r])}function iz(t,e,n,r,s){const{level:i,log:o=d=>d}=s.formatters||{},a=n.slice();let c=a[0];const u={};let l=(t._childLevel|0)+1;if(l<1&&(l=1),r&&(u.time=r),i){const d=i(e,t.levels.values[e]);Object.assign(u,d)}else u.level=t.levels.values[e];if(s.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;l--&&typeof a[0]=="object";)Object.assign(u,a.shift());return[o(u),...a]}else{if(c!==null&&typeof c=="object"){for(;l--&&typeof a[0]=="object";)Object.assign(u,a.shift());c=a.length?b2(a.shift(),a):void 0}else typeof c=="string"&&(c=b2(a.shift(),a));return c!==void 0&&(u[s.messageKey]=c),[o(u)]}}function fC(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Xo.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s])&&e)for(const i in t[s])e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function oz(t,e,n,r=!1){const s=e.send,i=e.ts,o=e.methodLevel,a=e.methodValue,c=e.val,u=t._logEvent.bindings;r||fC(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=n.filter(function(l){return u.indexOf(l)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,s(o,t._logEvent,c),t._logEvent=Q1(u)}function Q1(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function v2(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function az(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Z3:J3}function qp(){return{}}function vw(t){return t}function Tl(){}function Z3(){return!1}function J3(){return Date.now()}function cz(){return Math.round(Date.now()/1e3)}function uz(){return new Date(Date.now()).toISOString()}function lz(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}Ji.exports.default=Xo;Ji.exports.pino=Xo;const dz={level:"info"},$m="custom_context",hC=1e3*1024;var fz=Object.defineProperty,hz=(t,e,n)=>e in t?fz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Va=(t,e,n)=>hz(t,typeof e!="symbol"?e+"":e,n);let pz=class{constructor(e){Va(this,"nodeValue"),Va(this,"sizeInBytes"),Va(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},C2=class{constructor(e){Va(this,"lengthInNodes"),Va(this,"sizeInBytes"),Va(this,"head"),Va(this,"tail"),Va(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new pz(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}};const gz=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n);function _2(t){return typeof t=="string"?t:gz(t)||""}var mz=Object.defineProperty,yz=(t,e,n)=>e in t?mz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zp=(t,e,n)=>yz(t,typeof e!="symbol"?e+"":e,n);let X3=class{constructor(e,n=hC){zp(this,"logs"),zp(this,"level"),zp(this,"levelValue"),zp(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=Ji.exports.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new C2(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Ji.exports.levels.values.error?console.error(e):n===Ji.exports.levels.values.warn?console.warn(e):n===Ji.exports.levels.values.debug?console.debug(e):n===Ji.exports.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(_2({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new C2(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(_2({extraMetadata:e})),new Blob(n,{type:"application/json"})}};var wz=Object.defineProperty,bz=(t,e,n)=>e in t?wz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ez=(t,e,n)=>bz(t,e+"",n);let vz=class{constructor(e,n=hC){Ez(this,"baseChunkLogger"),this.baseChunkLogger=new X3(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}};var Cz=Object.defineProperty,_z=(t,e,n)=>e in t?Cz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Az=(t,e,n)=>_z(t,e+"",n);let Sz=class{constructor(e,n=hC){Az(this,"baseChunkLogger"),this.baseChunkLogger=new X3(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var xz=Object.defineProperty,Iz=Object.defineProperties,Nz=Object.getOwnPropertyDescriptors,A2=Object.getOwnPropertySymbols,Tz=Object.prototype.hasOwnProperty,Rz=Object.prototype.propertyIsEnumerable,S2=(t,e,n)=>e in t?xz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bg=(t,e)=>{for(var n in e||(e={}))Tz.call(e,n)&&S2(t,n,e[n]);if(A2)for(var n of A2(e))Rz.call(e,n)&&S2(t,n,e[n]);return t},Eg=(t,e)=>Iz(t,Nz(e));function pC(t){return Eg(bg({},t),{level:t?.level||dz.level})}function Oz(t,e,n=$m){return t[n]=e,t}function vs(t,e=$m){return t[e]||""}function Pz(t,e,n=$m){const r=vs(t,n);return r.trim()?`${r}/${e}`:e}function Cs(t,e,n=$m){const r=Pz(t,e,n),s=t.child({context:r});return Oz(s,r,n)}function kz(t){var e,n;const r=new vz((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ji.exports(Eg(bg({},t.opts),{level:"trace",browser:Eg(bg({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Bz(t){var e;const n=new Sz((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ji.exports(Eg(bg({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function Lm(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?kz(t):Bz(t)}class Dz{constructor(e){const n=pC({level:x7}),{logger:r,chunkLoggerController:s}=Lm({opts:n});this.logger=Cs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Uz{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c,metadata:u,sdkVersion:l,sdkType:d}){this.openRpcRequests=new Map,this.isInitialized=!1,r&&(this.w3mLogger=new Dz(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const f=this.getRpcUrl(n);this.projectId=e,this.sdkVersion=l,this.sdkType=d,this.metadata=u,this.w3mFrame=new Vq({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:f,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,await this.syncDappData({metadata:this.metadata,projectId:this.projectId,sdkVersion:this.sdkVersion,sdkType:this.sdkType}),await this.getSmartAccountEnabledNetworks(),this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!qn.get(ze.EMAIL_LOGIN_USED_KEY)}getEmail(){return qn.get(ze.EMAIL)}getUsername(){return qn.get(ze.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:ze.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{ks.checkIfAllowedToTriggerEmail(),await this.init();const n=await this.appEvent({type:ze.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){try{return this.appEvent({type:ze.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:ze.APP_CONNECT_OTP,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:ze.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:ze.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:ze.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){try{const n=await this.appEvent({type:ze.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:ze.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){try{const n=await this.appEvent({type:ze.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){try{return this.appEvent({type:ze.APP_SYNC_THEME,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){try{return this.appEvent({type:ze.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:ze.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:ze.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){if(e?.socialUri)try{await this.init();const n=this.getRpcUrl(e.chainId),r=await this.appEvent({type:ze.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:n}});return r.userName&&this.setSocialLoginSuccess(r.userName),this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting social"),n}else try{const n=e?.chainId||this.getLastUsedChainId()||1,r=await this.getUser({chainId:n,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(n)});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting"),n}}async getUser(e){try{await this.init();const n=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:ze.APP_GET_USER,payload:{...e,chainId:n,rpcUrl:this.getRpcUrl(n)}});return this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting"),n}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){try{await this.init();const s=this.getRpcUrl(n),i=await this.appEvent({type:ze.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:s,preferredAccountType:r}});return i.userName&&this.setSocialLoginSuccess(i.userName),i}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:ze.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:ze.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const n=this.getRpcUrl(e),r=await this.appEvent({type:ze.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:n}});return this.setLastUsedChainId(r.chainId),r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error switching network"),n}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async n=>{const r=setTimeout(()=>{n()},3e3);await this.appEvent({type:ze.APP_SIGN_OUT}),clearTimeout(r),n()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const n=e;try{if(hn.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const r=e.chainNamespace||"eip155",s=this.getActiveCaipNetwork(r)?.id;n.chainNamespace=r,n.chainId=s,n.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(e);const i=await this.appEvent({type:ze.APP_RPC_REQUEST,payload:n});return this.rpcSuccessHandler?.(i,n),i}catch(r){throw this.rpcErrorHandler?.(r,n),this.w3mLogger?.logger.error({error:r},"Error requesting"),r}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_IS_CONNECTED_ERROR&&e(),n.type===ze.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ze.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===ze.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:hn.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(Array.from(this.openRpcRequests.values()).map(async({abortController:e,method:n})=>{hn.SAFE_RPC_METHODS.includes(n)||e.abort(),await this.appEvent({type:ze.APP_RPC_ABORT})})),this.openRpcRequests.clear()}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[ze.APP_SYNC_DAPP_DATA,ze.APP_SYNC_THEME,ze.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[ze.APP_CONNECT_EMAIL,ze.APP_CONNECT_DEVICE,ze.APP_CONNECT_OTP,ze.APP_CONNECT_SOCIAL,ze.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,u)=>{const l=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const h=e;this.openRpcRequests.set(l,{...h.payload,abortController:d})}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});const f=(h,m)=>{h.id===l&&(m?.logger.info?.({framEvent:h,id:l},"Received frame response"),this.openRpcRequests.delete(h.id),h.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in h&&c(h.payload),c(void 0)):h.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in h&&u(new Error(h.payload?.message||"An error occurred")),u(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(l,h=>f(h,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){qn.set(ze.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){qn.set(ze.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&qn.set(ze.EMAIL,e),qn.set(ze.EMAIL_LOGIN_USED_KEY,"true"),qn.delete(ze.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){qn.delete(ze.EMAIL_LOGIN_USED_KEY),qn.delete(ze.EMAIL),qn.delete(ze.LAST_USED_CHAIN_KEY),qn.delete(ze.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&qn.set(ze.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=qn.get(ze.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){qn.set(ze.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=$n.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getCaipNetworks(n);return(e?r.find(i=>String(i.id)===String(e)||i.caipNetworkId===e):r[0])?.rpcUrls.default.http?.[0]}}async function Sd(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class sp{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Sd(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Sd(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Sd(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Sd(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Sd(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}sendBeacon({body:e,...n}){const r=this.createUrl(n);return navigator.sendBeacon(r.toString(),e?JSON.stringify(e):void 0)}}const eE={getFeatureValue(t,e){const n=e?.[t];return n===void 0?yt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;let e=t;return xe.isTelegram()&&(xe.isIos()&&(e=e.filter(n=>n!=="google")),xe.isMac()&&(e=e.filter(n=>n!=="x")),xe.isAndroid()&&(e=e.filter(n=>!["facebook","x"].includes(n)))),xe.isMobile()&&(e=e.filter(n=>n!=="facebook")),e},isSocialsEnabled(){return Array.isArray(oe.state.features?.socials)&&oe.state.features?.socials.length>0||Array.isArray(oe.state.remoteFeatures?.socials)&&oe.state.remoteFeatures?.socials.length>0},isEmailEnabled(){return!!(oe.state.features?.email||oe.state.remoteFeatures?.email)}},Ge=qt({features:yt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:yt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),oe={state:Ge,subscribeKey(t,e){return Vn(Ge,t,e)},setOptions(t){Object.assign(Ge,t)},setRemoteFeatures(t){if(!t)return;const e={...Ge.remoteFeatures,...t};Ge.remoteFeatures=e,Ge.remoteFeatures?.socials&&(Ge.remoteFeatures.socials=eE.filterSocialsByPlatform(Ge.remoteFeatures.socials)),Ge.features?.pay&&(Ge.remoteFeatures.email=!1,Ge.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;Ge.features||(Ge.features=yt.DEFAULT_FEATURES);const e={...Ge.features,...t};Ge.features=e,Ge.features?.pay&&Ge.remoteFeatures&&(Ge.remoteFeatures.email=!1,Ge.remoteFeatures.socials=!1)},setProjectId(t){Ge.projectId=t},setCustomRpcUrls(t){Ge.customRpcUrls=t},setAllWallets(t){Ge.allWallets=t},setIncludeWalletIds(t){Ge.includeWalletIds=t},setExcludeWalletIds(t){Ge.excludeWalletIds=t},setFeaturedWalletIds(t){Ge.featuredWalletIds=t},setTokens(t){Ge.tokens=t},setTermsConditionsUrl(t){Ge.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ge.privacyPolicyUrl=t},setCustomWallets(t){Ge.customWallets=t},setIsSiweEnabled(t){Ge.isSiweEnabled=t},setIsUniversalProvider(t){Ge.isUniversalProvider=t},setSdkVersion(t){Ge.sdkVersion=t},setMetadata(t){Ge.metadata=t},setDisableAppend(t){Ge.disableAppend=t},setEIP6963Enabled(t){Ge.enableEIP6963=t},setDebug(t){Ge.debug=t},setEnableWalletGuide(t){Ge.enableWalletGuide=t},setEnableAuthLogger(t){Ge.enableAuthLogger=t},setEnableWallets(t){Ge.enableWallets=t},setPreferUniversalLinks(t){Ge.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(yt.SIWX_DEFAULTS))t[e]??=n;Ge.siwx=t},setConnectMethodsOrder(t){Ge.features={...Ge.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ge.features={...Ge.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ge.remoteFeatures={...Ge.remoteFeatures,socials:t}},setCollapseWallets(t){Ge.features={...Ge.features,collapseWallets:t}},setEnableEmbedded(t){Ge.enableEmbedded=t},setAllowUnsupportedChain(t){Ge.allowUnsupportedChain=t},setManualWCControl(t){Ge.manualWCControl=t},setEnableNetworkSwitch(t){Ge.enableNetworkSwitch=t},setEnableMobileFullScreen(t){Ge.enableMobileFullScreen=xe.isMobile()&&t},setEnableReconnect(t){Ge.enableReconnect=t},setCoinbasePreference(t){Ge.coinbasePreference=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Ge.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Ge.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ge.universalProviderConfigOverride},getSnapshot(){return dh(Ge)}},qc=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Fn=qt({...qc}),Mz={state:Fn,subscribeKey(t,e){return Vn(Fn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=xe.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Fn.message=qc.message,Fn.variant=qc.variant,Fn.svg=qc.svg,Fn.open=qc.open,Fn.autoClose=qc.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=qc.autoClose}){Fn.open?(Fn.open=!1,setTimeout(()=>{Fn.message=t,Fn.variant=n,Fn.svg=e,Fn.open=!0,Fn.autoClose=r},150)):(Fn.message=t,Fn.variant=n,Fn.svg=e,Fn.open=!0,Fn.autoClose=r)}},eo=Mz,$z={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Q3=xe.getBlockchainApiUrl(),$r=qt({clientId:null,api:new sp({baseUrl:Q3,clientId:null}),supportedChains:{http:[],ws:[]}}),rt={state:$r,async get(t){const{st:e,sv:n}=rt.getSdkProperties(),r=oe.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return $r.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=oe.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{$r.supportedChains.http.length||await rt.getSupportedNetworks()}catch{return!1}return $r.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await rt.get({path:"v1/supported-chains"});return $r.supportedChains=t,t}catch{return $r.supportedChains}},async fetchIdentity({address:t}){const e=fe.getIdentityFromCacheForAddress(t);if(e)return e;const n=await rt.get({path:`/v1/identity/${t}`,params:{sender:V.state.activeCaipAddress?xe.getPlainAddress(V.state.activeCaipAddress):void 0}});return fe.updateIdentityCache({address:t,identity:n,timestamp:Date.now()}),n},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){if(!await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const o=fe.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await rt.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r});return fe.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?rt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?rt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async getAddressBalance({caipNetworkId:t,address:e}){return $r.api.post({path:`/v1?chainId=${t}&projectId=${oe.state.projectId}`,body:{id:"1",jsonrpc:"2.0",method:"getAddressBalance",params:{address:e}}}).then(n=>n.result)},async fetchTokenPrice({addresses:t,caipNetworkId:e=V.state.activeCaipNetwork?.caipNetworkId}){if(!await rt.isNetworkSupported(e))return{fungibles:[]};const r=fe.getTokenPriceCacheForAddresses(t);if(r)return r;const s=await $r.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:oe.state.projectId},headers:{"Content-Type":"application/json"}});return fe.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:s}),s},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?rt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:n}=rt.getSdkProperties();if(!await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return rt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){if(!await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return $r.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:yt.CONVERT_SLIPPAGE_TOLERANCE},projectId:oe.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){const{st:r,sv:s}=rt.getSdkProperties();if(!await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return rt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){const{st:r,sv:s}=rt.getSdkProperties();if(!await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return eo.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=fe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await rt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return fe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?rt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){if(!await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return[];const n=V.getAccountData()?.address;return rt.get({path:`/v1/profile/reverse/${t}`,params:{sender:n,apiVersion:"2"}})},async getEnsNameSuggestions(t){return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?rt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?$r.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?(await $r.api.post({path:"/v1/generators/onrampurl",params:{projectId:oe.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await rt.get({path:"/v1/onramp/options"})}catch{return $z}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){try{return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?await $r.api.post({path:"/v1/onramp/quote",params:{projectId:oe.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?rt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){return await rt.isNetworkSupported(V.state.activeCaipNetwork?.caipNetworkId)?$r.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:oe.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){$r.clientId=t,$r.api=new sp({baseUrl:Q3,clientId:t})}},Lz=Object.freeze({enabled:!0,events:[]}),Fz=new sp({baseUrl:xe.getAnalyticsUrl(),clientId:null}),jz=5,qz=60*1e3,ma=qt({...Lz}),zz={state:ma,subscribeKey(t,e){return Vn(ma,t,e)},async sendError(t,e){if(!ma.enabled)return;const n=Date.now();if(ma.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<qz}).length>=jz)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};ma.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=oe.state;await Fz.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:xe.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){ma.enabled=!0},disable(){ma.enabled=!1},clearEvents(){ma.events=[]}};class vu extends Error{constructor(e,n,r){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=n,this.originalError=r,r&&r instanceof Error&&(this.originalName=r.name),Object.setPrototypeOf(this,vu.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,vu):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function x2(t,e){let n="";try{t instanceof Error?n=t.message:typeof t=="string"?n=t:typeof t=="object"&&t!==null?Object.keys(t).length===0?n="Unknown error":n=t?.message||JSON.stringify(t):n=String(t)}catch(s){n="Unknown error",console.error("Error parsing error message",s)}const r=t instanceof vu?t:new vu(n,e,t);throw zz.sendError(r,r.category),r}function ii(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return x2(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return x2(a,e)}},n[r]=i}else n[r]=s}),n}const _s=qt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Hz={state:_s,subscribeNetworkImages(t){return ir(_s.networkImages,()=>t(_s.networkImages))},subscribeKey(t,e){return Vn(_s,t,e)},subscribe(t){return ir(_s,()=>t(_s))},setWalletImage(t,e){_s.walletImages[t]=e},setNetworkImage(t,e){_s.networkImages[t]=e},setChainImage(t,e){_s.chainImages[t]=e},setConnectorImage(t,e){_s.connectorImages={..._s.connectorImages,[t]:e}},setTokenImage(t,e){_s.tokenImages[t]=e},setCurrencyImage(t,e){_s.currencyImages[t]=e}},cs=ii(Hz),I2={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:"",ton:"20f673c0-095e-49b2-07cf-eb5049dcf600"},Vu=qt({networkImagePromises:{},tokenImagePromises:{}}),vg={async fetchWalletImage(t){if(t)return await Me._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Vu.networkImagePromises[t]||(Vu.networkImagePromises[t]=Me._fetchNetworkImage(t)),await Vu.networkImagePromises[t],this.getNetworkImageById(t))},async fetchTokenImage(t){if(t)return Vu.tokenImagePromises[t]||(Vu.tokenImagePromises[t]=Me._fetchTokenImage(t)),await Vu.tokenImagePromises[t],this.getTokenImage(t)},getWalletImageById(t){if(t)return cs.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return cs.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return cs.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return cs.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return cs.state.connectorImages[t.imageId]},getChainImage(t){return cs.state.networkImages[I2[t]]},getTokenImage(t){if(t)return cs.state.tokenImages[t]},getWalletImageUrl(t){if(!t)return"";const{projectId:e,sdkType:n,sdkVersion:r}=oe.state,s=new URL(`${X.W3M_API_URL}/getWalletImage/${t}`);return s.searchParams.set("projectId",e),s.searchParams.set("st",n),s.searchParams.set("sv",r),s.toString()},getAssetImageUrl(t){if(!t)return"";const{projectId:e,sdkType:n,sdkVersion:r}=oe.state,s=new URL(`${X.W3M_API_URL}/public/getAssetImage/${t}`);return s.searchParams.set("projectId",e),s.searchParams.set("st",n),s.searchParams.set("sv",r),s.toString()},getChainNamespaceImageUrl(t){return this.getAssetImageUrl(I2[t])},async getImageByToken(t,e){if(t==="native"){const r=X.NATIVE_IMAGE_IDS_BY_NAMESPACE[e]??null;return r?vg.fetchNetworkImage(r):void 0}const[,n]=Object.entries(X.TOKEN_SYMBOLS_BY_ADDRESS).find(([r])=>r.toLowerCase()===t.toLowerCase())??[];if(n)return vg.fetchTokenImage(n)}},zs={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},Wz={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===zs.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${zs.PHANTOM.url}/ul/browse/${r}?ref=${o}`}if(t===zs.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${zs.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===X.CHAIN.SOLANA&&t===zs.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${zs.COINBASE.url}/dapp?cb_url=${r}`),e===X.CHAIN.BITCOIN&&t===zs.BINANCE.id&&!("binancew3w"in window)){const s=V.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${r}&defaultChainId=${s?.id??1}`),a=new URL(zs.BINANCE.deeplink);a.searchParams.set("appId",zs.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(zs.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},Vz=xe.getAnalyticsUrl(),Kz=new sp({baseUrl:Vz,clientId:null}),Gz=["MODAL_CREATED"],Yz=45,N2=1e3*10,cn=qt({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),ot={state:cn,subscribe(t){return ir(cn,()=>t(cn))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=oe.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},shouldFlushEvents(){const t=JSON.stringify(cn.pendingEvents).length/1024>Yz,e=cn.lastFlush+N2<Date.now();return t||e},_setPendingEvent(t){try{let e=V.getAccountData()?.address;if("address"in t.data&&t.data.address&&(e=t.data.address),Gz.includes(t.data.event)||typeof window>"u")return;const n=V.getActiveCaipNetwork()?.caipNetworkId;this.state.pendingEvents.push({eventId:xe.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:n}}}),cn.reportedErrors.FORBIDDEN=!1,ot.shouldFlushEvents()&&ot._submitPendingEvents()}catch(e){console.warn("_setPendingEvent",e)}},sendEvent(t){cn.timestamp=Date.now(),cn.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(oe.state.features?.analytics||e.includes(t.event))&&ot._setPendingEvent(cn),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(t){cn.walletImpressions.push(t)},_transformPendingEventsForBatch(t){try{return t.filter(e=>e.props.event!=="WALLET_IMPRESSION_V2")}catch{return t}},_submitPendingEvents(){if(cn.lastFlush=Date.now(),!(cn.pendingEvents.length===0&&cn.walletImpressions.length===0))try{const t=ot._transformPendingEventsForBatch(cn.pendingEvents);cn.walletImpressions.length&&t.push({eventId:xe.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...cn.walletImpressions]}}),Kz.sendBeacon({path:"/batch",params:ot.getSdkProperties(),body:t}),cn.reportedErrors.FORBIDDEN=!1,cn.pendingEvents=[],cn.walletImpressions=[]}catch{cn.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){cn.subscribedToVisibilityChange||typeof document>"u"||(cn.subscribedToVisibilityChange=!0,document?.addEventListener?.("visibilitychange",()=>{document.visibilityState==="hidden"&&ot._submitPendingEvents()}),document?.addEventListener?.("freeze",()=>{ot._submitPendingEvents()}),window?.addEventListener?.("pagehide",()=>{ot._submitPendingEvents()}),setInterval(()=>{ot._submitPendingEvents()},N2))}},Zz=xe.getApiUrl(),Lr=new sp({baseUrl:Zz,clientId:null}),Jz=40,T2=4,Xz=20,it=qt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),Me={state:it,subscribeKey(t,e){return Vn(it,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=oe.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return oe.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Lr.baseUrl}/getWalletImage/${t}`,n=await Lr.getBlob({path:e,params:Me._getSdkProperties()});cs.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Lr.baseUrl}/public/getAssetImage/${t}`,n=await Lr.getBlob({path:e,params:Me._getSdkProperties()});cs.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Lr.baseUrl}/public/getAssetImage/${t}`,n=await Lr.getBlob({path:e,params:Me._getSdkProperties()});cs.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Lr.baseUrl}/public/getCurrencyImage/${t}`,n=await Lr.getBlob({path:e,params:Me._getSdkProperties()});cs.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Lr.baseUrl}/public/getTokenImage/${t}`,n=await Lr.getBlob({path:e,params:Me._getSdkProperties()});cs.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){const e=t.length,n=xe.isMobile()?t?.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(zs).map(o=>o.id).includes(s.id)):t,r=e-n.length;return{filteredWallets:n,mobileFilteredOutWalletsLength:r}},async fetchProjectConfig(){return(await Lr.get({path:"/appkit/v1/config",params:Me._getSdkProperties()})).features},async fetchUsage(){try{const t=await Lr.get({path:"/appkit/v1/project-limits",params:Me._getSdkProperties()}),{tier:e,isAboveMauLimit:n,isAboveRpcLimit:r}=t.planLimits,s=e==="starter",i=n||r;Me.state.plan={tier:e,hasExceededUsageLimit:s&&i,limits:{isAboveRpcLimit:r,isAboveMauLimit:n}}}catch(t){console.warn("Failed to fetch usage",t)}},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Lr.get({path:"/projects/v1/origins",params:Me._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===X.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=X.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=V.getAllRequestedCaipNetworks()?.map(({assets:n})=>n?.imageId).filter(Boolean).filter(n=>!vg.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Me._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=me.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Me._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Me._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Me._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];Me._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(zs).map(o=>o.id));const r=await Lr.get({path:"/getWallets",params:{...Me._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}}),{filteredWallets:s,mobileFilteredOutWalletsLength:i}=Me._filterWalletsByPlatform(r?.data);return{data:s||[],count:r?.count,mobileFilteredOutWalletsLength:i}},async prefetchWalletRanks(){const t=me.state.connectors;if(!t?.length)return;const e={page:1,entries:20,badge:"certified"};if(e.names=t.map(s=>s.name).join(","),V.state.activeChain===X.CHAIN.EVM){const s=[...t.flatMap(i=>i.connectors?.map(o=>o.info?.rdns)||[]),...t.map(i=>i.info?.rdns)].filter(i=>typeof i=="string"&&i.length>0);s.length&&(e.rdns=s.join(","))}const{data:n}=await Me.fetchWallets(e);it.explorerWallets=n,me.extendConnectorsWithExplorerWallets(n);const r=V.getRequestedCaipNetworkIds().join(",");it.explorerFilteredWallets=n.filter(s=>s.chains?.some(i=>r.includes(i)))},async fetchFeaturedWallets(){const{featuredWalletIds:t}=oe.state;if(t?.length){const e={...Me._getSdkProperties(),page:1,entries:t?.length??T2,include:t},{data:n}=await Me.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Me._fetchWalletImage(i))),it.featured=r,it.allFeatured=r}},async fetchRecommendedWallets(){try{it.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=oe.state,r=[...e??[],...n??[]].filter(Boolean),s=V.getRequestedCaipNetworkIds().join(","),i={page:1,entries:T2,include:t,exclude:r,chains:s},{data:o,count:a}=await Me.fetchWallets(i),c=fe.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>Me._fetchWalletImage(d))),it.recommended=o,it.allRecommended=o,it.count=a??0}catch{}finally{it.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=oe.state,s=V.getRequestedCaipNetworkIds().join(","),i=[...it.recommended.map(({id:d})=>d),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Jz,include:e,exclude:i,chains:s},{data:a,count:c,mobileFilteredOutWalletsLength:u}=await Me.fetchWallets(o);it.mobileFilteredOutWalletsLength=u+(it.mobileFilteredOutWalletsLength??0);const l=a.slice(0,Xz).map(d=>d.image_id).filter(Boolean);await Promise.allSettled(l.map(d=>Me._fetchWalletImage(d))),it.wallets=xe.uniqueBy([...it.wallets,...Me._filterOutExtensions(a)],"id").filter(d=>d.chains?.some(f=>s.includes(f))),it.count=c>it.count?c:it.count,it.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Me.fetchWallets(e);n&&n.forEach(r=>{it.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=oe.state,s=V.getRequestedCaipNetworkIds().join(",");it.search=[];const i={page:1,entries:100,search:t?.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Me.fetchWallets(i);ot.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Me._fetchWalletImage(c)),xe.wait(300)]),it.search=Me._filterOutExtensions(o)},initPromise(t,e){const n=it.promises[t];return n||(it.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0,fetchWalletRanks:s=!0}={}){const i=[t&&Me.initPromise("connectorImages",Me.fetchConnectorImages),e&&Me.initPromise("featuredWallets",Me.fetchFeaturedWallets),n&&Me.initPromise("recommendedWallets",Me.fetchRecommendedWallets),r&&Me.initPromise("networkImages",Me.fetchNetworkImages),s&&Me.initPromise("walletRanks",Me.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){oe.state.features?.analytics&&Me.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Lr.get({path:"/getAnalyticsConfig",params:Me._getSdkProperties()});oe.setFeatures({analytics:t})}catch{oe.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){it.featured=it.allFeatured,it.recommended=it.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");it.featured=it.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),it.recommended=it.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),it.filteredWallets=it.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))},clearFilterByNamespaces(){it.filteredWallets=[]},setFilterByNamespace(t){if(!t){it.featured=it.allFeatured,it.recommended=it.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");it.featured=it.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),it.recommended=it.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),it.filteredWallets=it.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))}},ec={filterOutDuplicatesByRDNS(t){const e=oe.state.enableEIP6963?me.state.connectors:[],n=fe.getRecentWallets(),r=e.map(a=>a.info?.rdns).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&xe.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a?.rdns&&i.includes(String(a.rdns))||!a?.rdns&&e.some(u=>u.name===a.name)))},filterOutDuplicatesByIds(t){const e=me.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"||a.type==="MULTI_CHAIN"),n=fe.getRecentWallets(),r=e.map(a=>a.explorerId||a.explorerWallet?.id||a.id),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=me.state,{featuredWalletIds:n}=oe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n?.length){const u=n.indexOf(o.id),l=n.indexOf(a.id);if(u!==-1&&l!==-1)return u-l;if(u!==-1)return-1;if(l!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const n=t?.connectMethodsOrder||oe.state.features?.connectMethodsOrder,r=e||me.state.connectors;if(n)return n;const{injected:s,announced:i}=jr.getConnectorsByType(r,Me.state.recommended,Me.state.featured),o=s.filter(jr.showConnector),a=i.filter(jr.showConnector);return o.length||a.length?["wallet","email","social"]:yt.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Me.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Me.state.excludedWallets.some(r=>U3.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))},filterWalletsByWcSupport(t){return _e.state.wcBasic?t.filter(e=>e.supports_wc):xe.isMobile()?t.filter(e=>e.supports_wc||yt.MANDATORY_WALLET_IDS_ON_MOBILE.includes(e.id)):t},getWalletConnectWallets(t){const e=[...Me.state.featured,...Me.state.recommended];Me.state.filteredWallets?.length>0?e.push(...Me.state.filteredWallets):e.push(...t);const n=xe.uniqueBy(e,"id"),r=ec.markWalletsAsInstalled(n),s=ec.filterWalletsByWcSupport(r);return ec.markWalletsWithDisplayIndex(s)}},jr={getConnectorsByType(t,e,n){const{customWallets:r}=oe.state,s=fe.getRecentWallets(),i=ec.filterOutDuplicateWallets(e),o=ec.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){const e=t.info?.rdns,n=!!e&&Me.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),r=!!t.name&&Me.state.excludedWallets.some(s=>U3.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!xe.isMobile()||xe.isMobile()&&!e&&!_e.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(V.state.chains.values()).some(n=>me.getConnectorId(n.namespace)===X.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=oe.state.features?.connectorTypeOrder??[]}){const l=[{type:"walletConnect",isEnabled:!0},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),d=new Set(l.map(m=>m.type)),f=c.filter(m=>d.has(m)).map(m=>({type:m,isEnabled:!0})),h=l.filter(({type:m})=>!f.some(({type:E})=>E===m));return Array.from(new Set([...f,...h].map(({type:m})=>m)))},sortConnectorsByExplorerWallet(t){return[...t].sort((e,n)=>e.explorerWallet&&n.explorerWallet?(e.explorerWallet.order??0)-(n.explorerWallet.order??0):e.explorerWallet?-1:n.explorerWallet?1:0)},getPriority(t){return t.id===X.CONNECTOR_ID.BASE_ACCOUNT?0:t.id===X.CONNECTOR_ID.COINBASE||t.id===X.CONNECTOR_ID.COINBASE_SDK?1:2},sortConnectorsByPriority(t){return[...t].sort((e,n)=>jr.getPriority(e)-jr.getPriority(n))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!xe.isMobile())return{accounts:[],chainId:void 0};if(t.id===X.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,n]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(r=>Number(r))]);return{accounts:e,chainId:n}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}},getFilteredCustomWallets(t){const e=fe.getRecentWallets(),n=me.state.connectors.map(o=>o.info?.rdns).filter(Boolean),r=e.map(o=>o.rdns).filter(Boolean),s=n.concat(r);if(s.includes("io.metamask.mobile")&&xe.isMobile()){const o=s.indexOf("io.metamask.mobile");s[o]="io.metamask"}return t.filter(o=>!s.includes(String(o?.rdns)))},hasWalletConnector(t){return me.state.connectors.some(e=>e.id===t.id||e.name===t.name)},isWalletCompatibleWithCurrentChain(t){const e=V.state.activeChain;return e&&t.chains?t.chains.some(n=>{const r=n.split(":")[0];return e===r}):!0},getFilteredRecentWallets(){return fe.getRecentWallets().filter(n=>!ec.isExcluded(n)).filter(n=>!this.hasWalletConnector(n)).filter(n=>this.isWalletCompatibleWithCurrentChain(n))},getCappedRecommendedWallets(t){const{connectors:e}=me.state,{customWallets:n,featuredWalletIds:r}=oe.state,s=e.find(R=>R.id==="walletConnect"),i=e.filter(R=>R.type==="INJECTED"||R.type==="ANNOUNCED"||R.type==="MULTI_CHAIN");if(!s&&!i.length&&!n?.length)return[];const o=eE.isEmailEnabled(),a=eE.isSocialsEnabled(),c=i.filter(R=>R.name!=="Browser Wallet"&&R.name!=="WalletConnect"),u=r?.length||0,l=n?.length||0,d=c.length||0,f=o?1:0,h=a?1:0,m=u+l+d+f+h,E=Math.max(0,4-m);return E<=0?[]:ec.filterOutDuplicateWallets(t).slice(0,E)},processConnectorsByType(t,e=!0){const n=jr.sortConnectorsByExplorerWallet([...t]);return e?n.filter(jr.showConnector):n},connectorList(){const t=jr.getConnectorsByType(me.state.connectors,Me.state.recommended,Me.state.featured),e=this.processConnectorsByType(t.announced.filter(h=>h.id!=="walletConnect")),n=this.processConnectorsByType(t.injected),r=this.processConnectorsByType(t.multiChain.filter(h=>h.name!=="WalletConnect"),!1),s=t.custom,i=t.recent,o=this.processConnectorsByType(t.external.filter(h=>h.id!==X.CONNECTOR_ID.COINBASE_SDK&&h.id!==X.CONNECTOR_ID.BASE_ACCOUNT)),a=t.recommended,c=t.featured,u=jr.getConnectorTypeOrder({custom:s,recent:i,announced:e,injected:n,multiChain:r,recommended:a,featured:c,external:o}),l=me.state.connectors.find(h=>h.id==="walletConnect"),d=xe.isMobile(),f=[];for(const h of u)switch(h){case"walletConnect":{!d&&l&&f.push({kind:"connector",subtype:"walletConnect",connector:l});break}case"recent":{jr.getFilteredRecentWallets().forEach(y=>f.push({kind:"wallet",subtype:"recent",wallet:y}));break}case"injected":{r.forEach(m=>f.push({kind:"connector",subtype:"multiChain",connector:m})),e.forEach(m=>f.push({kind:"connector",subtype:"announced",connector:m})),n.forEach(m=>f.push({kind:"connector",subtype:"injected",connector:m}));break}case"featured":{c.forEach(m=>f.push({kind:"wallet",subtype:"featured",wallet:m}));break}case"custom":{jr.getFilteredCustomWallets(s??[]).forEach(y=>f.push({kind:"wallet",subtype:"custom",wallet:y}));break}case"external":{o.forEach(m=>f.push({kind:"connector",subtype:"external",connector:m}));break}case"recommended":{jr.getCappedRecommendedWallets(a).forEach(y=>f.push({kind:"wallet",subtype:"recommended",wallet:y}));break}default:console.warn(`Unknown connector type: ${h}`)}return f},hasInjectedConnectors(){return me.state.connectors.filter(t=>(t.type==="INJECTED"||t.type==="ANNOUNCED"||t.type==="MULTI_CHAIN")&&t.name!=="Browser Wallet"&&t.name!=="WalletConnect").length}},Qz=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],kt=qt({view:"Connect",history:["Connect"],transactionStack:[]}),eH={state:kt,subscribeKey(t,e){return Vn(kt,t,e)},pushTransactionStack(t){kt.transactionStack.push(t)},popTransactionStack(t){const e=kt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n?.();break;case"error":r?.(),Xe.goBack();break;case"cancel":s?.(),Xe.goBack();break}},push(t,e){let n=t,r=e;Me.state.plan.hasExceededUsageLimit&&Qz.includes(t)&&(n="UsageExceeded",r=void 0),n!==kt.view&&(kt.view=n,kt.history.push(n),kt.data=r)},reset(t,e){kt.view=t,kt.history=[t],kt.data=e},replace(t,e){kt.history.at(-1)===t||(kt.view=t,kt.history[kt.history.length-1]=t,kt.data=e)},goBack(){const t=V.state.activeCaipAddress,e=Xe.state.view==="ConnectingFarcaster",n=!t&&e;if(kt.history.length>1){kt.history.pop();const[r]=kt.history.slice(-1);r&&(t&&r==="Connect"?kt.view="Account":kt.view=r)}else bt.close();kt.data?.wallet&&(kt.data.wallet=void 0),kt.data?.redirectView&&(kt.data.redirectView=void 0),setTimeout(()=>{if(n){V.setAccountProp("farcasterUrl",void 0,V.state.activeChain);const r=me.getAuthConnector();r?.provider?.reload();const s=dh(oe.state);r?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(t){if(kt.history.length>1){kt.history=kt.history.slice(0,t+1);const[e]=kt.history.slice(-1);e&&(kt.view=e)}},goBackOrCloseModal(){Xe.state.history.length>1?Xe.goBack():bt.close()}},Xe=ii(eH),vo=qt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),tE={state:vo,subscribe(t){return ir(vo,()=>t(vo))},setThemeMode(t){vo.themeMode=t;try{const e=me.getAuthConnector();if(e){const n=tE.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:hh(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){vo.themeVariables={...vo.themeVariables,...t};try{const e=me.getAuthConnector();if(e){const n=tE.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:hh(vo.themeVariables,vo.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return dh(vo)}},os=ii(tE),e8=Object.fromEntries(M3.map(t=>[t,void 0])),tH=Object.fromEntries(M3.map(t=>[t,!0])),St=qt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:e8,filterByNamespaceMap:tH}),nH={state:St,subscribe(t){return ir(St,()=>{t(St)})},subscribeKey(t,e){return Vn(St,t,e)},initialize(t){t.forEach(e=>{const n=fe.getConnectedConnectorId(e);n&&me.setConnectorId(n,e)})},setActiveConnector(t){t&&(St.activeConnector=Gl(t))},setConnectors(t){t.filter(s=>!St.allConnectors.some(i=>i.id===s.id&&me.getConnectorName(i.name)===me.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&St.allConnectors.push(Gl(s))});const n=me.getEnabledNamespaces(),r=me.getEnabledConnectors(n);St.connectors=me.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(St.filterByNamespaceMap).forEach(e=>{St.filterByNamespaceMap[e]=!1}),t.forEach(e=>{St.filterByNamespaceMap[e]=!0}),me.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){St.filterByNamespaceMap[t]=e,me.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=me.getEnabledNamespaces(),e=me.getEnabledConnectors(t),n=me.areAllNamespacesEnabled();St.connectors=me.mergeMultiChainConnectors(e),n?Me.clearFilterByNamespaces():Me.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(St.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return St.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(St.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=me.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=s?.id===X.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=me.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){if(t.id===X.CONNECTOR_ID.AUTH){const e=t,n=dh(oe.state),r=os.getSnapshot().themeMode,s=os.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e?.provider?.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:hh(s,r)}),me.setConnectors([t])}else me.setConnectors([t])},getAuthConnector(t){const e=t||V.state.activeChain,n=St.connectors.find(r=>r.id===X.CONNECTOR_ID.AUTH);if(n)return n?.connectors?.length?n.connectors.find(s=>s.chain===e):n},getAnnouncedConnectorRdns(){return St.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return jr.sortConnectorsByPriority(St.allConnectors).find(n=>n.id===t)},getConnector({id:t,namespace:e}){const n=e||V.state.activeChain,r=St.allConnectors.filter(o=>o.chain===n);return jr.sortConnectorsByPriority(r).find(o=>o.id===t||o.explorerId===t)},syncIfAuthConnector(t){if(t.id!=="AUTH")return;const e=t,n=dh(oe.state),r=os.getSnapshot().themeMode,s=os.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:hh(s,r)})},getConnectorsByNamespace(t){const e=St.allConnectors.filter(n=>n.chain===t);return me.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return V.checkIfSmartAccountEnabled()&&Dr(t)===hn.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Xe.state.data?.redirectView,n=V.state.activeChain,r=n?me.getConnector({id:t.id,namespace:n}):void 0;Wz.handleMobileDeeplinkRedirect(r?.explorerId||t.id,V.state.activeChain),r?Xe.push("ConnectingExternal",{connector:r,wallet:t,redirectView:e}):Xe.push("ConnectingWalletConnect",{wallet:t,redirectView:e})},getConnectors(t){return t?me.getConnectorsByNamespace(t):me.mergeMultiChainConnectors(St.allConnectors)},setFilterByNamespace(t){St.filterByNamespace=t,St.connectors=me.getConnectors(t),Me.setFilterByNamespace(t)},setConnectorId(t,e){t&&(St.activeConnectorIds={...St.activeConnectorIds,[e]:t},fe.setConnectedConnectorId(e,t))},removeConnectorId(t){St.activeConnectorIds={...St.activeConnectorIds,[t]:void 0},fe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return St.activeConnectorIds[t]},isConnected(t){return t?!!St.activeConnectorIds[t]:Object.values(St.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){St.activeConnectorIds={...e8}},extendConnectorsWithExplorerWallets(t){St.allConnectors.forEach(r=>{const s=t.find(i=>i.id===r.id||i.rdns&&i.rdns===r.info?.rdns);s&&(r.explorerWallet=s)});const e=me.getEnabledNamespaces(),n=me.getEnabledConnectors(e);St.connectors=me.mergeMultiChainConnectors(n)},async connect(t={}){const{namespace:e}=t;return me.setFilterByNamespace(e),Xe.push("Connect",{addWalletForNamespace:e}),new Promise((n,r)=>{if(e){const s=V.subscribeChainProp("accountState",o=>{o?.caipAddress&&(n({caipAddress:o?.caipAddress}),s())},e),i=bt.subscribeKey("open",o=>{o||(r(new Error("Modal closed")),i())})}else{const s=V.subscribeKey("activeCaipAddress",o=>{o&&(n({caipAddress:o}),s())}),i=bt.subscribeKey("open",o=>{o||(r(new Error("Modal closed")),i())})}})}},me=ii(nH),rH=1e3,xd={checkNamespaceConnectorId(t,e){return me.getConnectorId(t)===e},isSocialProvider(t){return yt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&me.setActiveConnector(e),s?.(xe.isMobile()&&t),r){const u=bt.subscribeKey("open",l=>{l||(Xe.state.view!==r&&Xe.replace(r),u(),a(new Error("Modal closed")))})}const c=V.subscribeKey("activeCaipAddress",u=>{u&&(i?.(),n&&bt.close(),c(),o($n.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,n)=>{const r=V.subscribeKey("activeCaipAddress",s=>{s&&(bt.close(),r(),e($n.parseCaipAddress(s)))});_e.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:r,onConnect:s}){let i,o=!1,a=null;const c=e||V.state.activeChain,u=V.subscribeKey("activeCaipAddress",l=>{l&&(n&&bt.close(),u())});return new Promise((l,d)=>{async function f(m){if(m.data?.resultUri)if(m.origin===X.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",f,!1);try{const y=me.getAuthConnector(c);if(y&&!o){i&&i.close(),o=!0;const E=m.data.resultUri;ot.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:t}}),fe.setConnectedSocialProvider(t),await _e.connectExternal({id:y.id,type:y.type,socialUri:E},y.chain);const S=V.state.activeCaipAddress;if(!S){d(new Error("Failed to connect"));return}l($n.parseCaipAddress(S)),ot.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}})}}catch(y){ot.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:xe.parseError(y)}}),d(new Error("Failed to connect"))}}else ot.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:"Untrusted Origin"}})}async function h(){if(ot.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:t}}),t==="farcaster"){r?.();const m=bt.subscribeKey("open",E=>{!E&&t==="farcaster"&&(d(new Error("Popup closed")),s?.(),m())}),y=me.getAuthConnector();if(y&&!V.getAccountData(c)?.farcasterUrl)try{const{url:S}=await y.provider.getFarcasterUri();V.setAccountProp("farcasterUrl",S,c)}catch{d(new Error("Failed to connect to farcaster"))}}else{const m=me.getAuthConnector();a=xe.returnOpenHref(`${X.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(m){const{uri:y}=await m.provider.getSocialRedirectUri({provider:t});if(a&&y){a.location.href=y,i=a;const E=setInterval(()=>{i?.closed&&!o&&(d(new Error("Popup closed")),clearInterval(E))},1e3);window.addEventListener("message",f,!1)}else a?.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),a?.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n?.(),e){const a=bt.subscribeKey("open",c=>{c||(Xe.state.view!==e&&Xe.replace(e),a(),i(new Error("Modal closed")))})}const o=V.subscribeKey("activeCaipAddress",a=>{a&&(r?.(),t&&bt.close(),o(),s($n.parseCaipAddress(a)))})})},async updateEmail(){const t=fe.getConnectedConnectorId(V.state.activeChain),e=me.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==X.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await bt.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(bt.close(),clearInterval(i),o(),r({email:a}))},rH),o=bt.subscribeKey("open",a=>{a||(Xe.state.view!=="Connect"&&Xe.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return V.checkIfSmartAccountEnabled()&&Dr(t)===hn.ACCOUNT_TYPES.EOA}};function t8(){const t=V.state.activeCaipNetwork?.chainNamespace||"eip155",e=V.state.activeCaipNetwork?.id||1,n=yt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function yye(t){return yt.NATIVE_TOKEN_ADDRESS[t]}function Dr(t){return V.getAccountData(t)?.preferredAccountType}function Ko(t){return t?V.state.chains.get(t)?.networkState?.caipNetwork:V.state.activeCaipNetwork}const Cg={getConnectionStatus(t,e){const n=me.state.activeConnectorIds[e],r=_e.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!oe.state.remoteFeatures?.multiWallet,n=me.state.activeConnectorIds[t],r=_e.getConnections(t),i=(_e.state.recentConnections.get(t)??[]).filter(a=>me.getConnectorById(a.connectorId)),o=Cg.excludeExistingConnections([...r.map(a=>a.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(a=>a.connectorId.toLowerCase()===n?.toLowerCase()),recentConnections:[]}},onConnectMobile(t){const e=_e.state.wcUri;if(t?.mobile_link&&e)try{_e.setWcError(!1);const{mobile_link:n,link_mode:r,name:s}=t,{redirect:i,redirectUniversalLink:o,href:a}=xe.formatNativeUrl(n,e,r),c=i,u=o,l=xe.isIframe()?"_top":"_self";_e.setWcLinking({name:s,href:a}),_e.setRecentWallet(t),oe.state.experimental_preferUniversalLinks&&u?xe.openHref(u,l):xe.openHref(c,l)}catch(n){ot.sendEvent({type:"track",event:"CONNECT_PROXY_ERROR",properties:{message:n instanceof Error?n.message:"Error parsing the deep link",uri:e,mobile_link:t.mobile_link,name:t.name}}),_e.setWcError(!0)}}},Ku=qt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1,connectingWallet:void 0}),Ds={state:Ku,subscribe(t){return ir(Ku,()=>t(Ku))},subscribeOpen(t){return Vn(Ku,"open",t)},set(t){Object.assign(Ku,{...Ku,...t})}},Zt=qt({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),sH={state:Zt,subscribe(t){return ir(Zt,()=>t(Zt))},setLastNetworkInView(t){Zt.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Zt.loading=!0;try{const e=await rt.fetchTransactions({account:t,cursor:Zt.next,chainId:V.state.activeCaipNetwork?.caipNetworkId}),n=k0.filterSpamTransactions(e.data),r=k0.filterByConnectedChain(n),s=[...Zt.transactions,...r];Zt.loading=!1,Zt.transactions=s,Zt.transactionsByYear=k0.groupTransactionsByYearAndMonth(Zt.transactionsByYear,r),Zt.empty=s.length===0,Zt.next=e.next?e.next:void 0}catch{const n=V.state.activeChain;ot.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:oe.state.projectId,cursor:Zt.next,isSmartAccount:Dr(n)===hn.ACCOUNT_TYPES.SMART_ACCOUNT}}),eo.showError("Failed to fetch transactions"),Zt.loading=!1,Zt.empty=!0,Zt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(u=>u.id!==r.id);n[s]={...o,[i]:[...c,r].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers?.every(r=>r.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=V.state.activeCaipNetwork?.caipNetworkId;return t.filter(r=>r.metadata.chain===e)},clearCursor(){Zt.next=void 0},resetTransactions(){Zt.transactions=[],Zt.transactionsByYear={},Zt.lastNetworkInView=void 0,Zt.loading=!1,Zt.empty=!1,Zt.next=void 0}},k0=ii(sH,"API_ERROR"),Et=qt({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,wcFetchingUri:!1,buffering:!1,status:"disconnected"});let Rc;const iH={state:Et,subscribe(t){return ir(Et,()=>t(Et))},subscribeKey(t,e){return Vn(Et,t,e)},_getClient(){return Et._client},setClient(t){Et._client=Gl(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);_e.syncStorageConnections(e)},syncStorageConnections(t){const e=fe.getConnections(),n=t??Array.from(V.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Et.recentConnections);i.set(r,s),Et.recentConnections=i}},getConnections(t){return t?Et.connections.get(t)??[]:[]},hasAnyConnection(t){const e=_e.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect({cache:t="auto"}={}){Et.wcFetchingUri=!0;const e=xe.isTelegram()||xe.isSafari()&&xe.isIos();if(t==="always"||t==="auto"&&e){if(Rc){await Rc,Rc=void 0;return}if(!xe.isPairingExpired(Et?.wcPairingExpiry)){const n=Et.wcUri;Et.wcUri=n;return}Rc=_e._getClient()?.connectWalletConnect?.().catch(()=>{}),_e.state.status="connecting",await Rc,Rc=void 0,Et.wcPairingExpiry=void 0,_e.state.status="connected"}else await _e._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,n=!0){const r=await _e._getClient()?.connectExternal?.(t);n&&V.setActiveNamespace(e);const s=me.state.allConnectors.find(o=>o.id===t?.id),i=t.type==="AUTH"?"email":"browser";return ot.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:i,name:s?.name||"Unknown",view:Xe.state.view,walletRank:s?.explorerWallet?.order}}),r},async reconnectExternal(t){await _e._getClient()?.reconnectExternal?.(t);const e=t.chain||V.state.activeChain;e&&me.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;bt.setLoading(!0,V.state.activeChain);const n=me.getAuthConnector();n&&(V.setAccountProp("preferredAccountType",t,e),await n.provider.setPreferredAccount(t),fe.setPreferredAccountTypes(Object.entries(V.state.chains).reduce((r,[s,i])=>{const o=s,a=Dr(o);return a!==void 0&&(r[o]=a),r},{})),await _e.reconnectExternal(n),bt.setLoading(!1,V.state.activeChain),ot.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:V.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return _e._getClient()?.signMessage(t)},parseUnits(t,e){return _e._getClient()?.parseUnits(t,e)},formatUnits(t,e){return _e._getClient()?.formatUnits(t,e)},updateBalance(t){return _e._getClient()?.updateBalance(t)},async sendTransaction(t){return _e._getClient()?.sendTransaction(t)},async getCapabilities(t){return _e._getClient()?.getCapabilities(t)},async grantPermissions(t){return _e._getClient()?.grantPermissions(t)},async walletGetAssets(t){return _e._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return _e._getClient()?.estimateGas(t)},async writeContract(t){return _e._getClient()?.writeContract(t)},async writeSolanaTransaction(t){return _e._getClient()?.writeSolanaTransaction(t)},async getEnsAddress(t){return _e._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return _e._getClient()?.getEnsAvatar(t)},checkInstalled(t){return _e._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){Et.wcUri=void 0,Et.wcPairingExpiry=void 0,Et.wcLinking=void 0,Et.recentWallet=void 0,Et.wcFetchingUri=!1,Et.status="disconnected",k0.resetTransactions(),fe.deleteWalletConnectDeepLink(),fe.deleteRecentWallet(),Ds.set({connectingWallet:void 0})},resetUri(){Et.wcUri=void 0,Et.wcPairingExpiry=void 0,Rc=void 0,Et.wcFetchingUri=!1,Ds.set({connectingWallet:void 0})},finalizeWcConnection(t){const{wcLinking:e,recentWallet:n}=_e.state;e&&fe.setWalletConnectDeepLink(e),n&&fe.setAppKitRecent(n),t&&ot.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:Xe.state.data?.wallet?.name||"Unknown",view:Xe.state.view,walletRank:n?.order}})},setWcBasic(t){Et.wcBasic=t},setUri(t){Et.wcUri=t,Et.wcFetchingUri=!1,Et.wcPairingExpiry=xe.getPairingExpiry()},setWcLinking(t){Et.wcLinking=t},setWcError(t){Et.wcError=t,Et.wcFetchingUri=!1,Et.buffering=!1},setRecentWallet(t){Et.recentWallet=t},setBuffering(t){Et.buffering=t},setStatus(t){Et.status=t},setIsSwitchingConnection(t){Et.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){try{await _e._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:n})}catch(r){throw new vu("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},async disconnectConnector({id:t,namespace:e}){try{await _e._getClient()?.disconnectConnector({id:t,namespace:e})}catch(n){throw new vu("Failed to disconnect connector","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){const n=new Map(Et.connections);n.set(e,t),Et.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){const r=V.getAccountData(e)?.user?.accounts?.find(i=>i.type==="smartAccount"),s=r&&r.address.toLowerCase()===t.toLowerCase()&&xd.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await _e.setPreferredAccountType(s,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=me.getConnectorById(t.connectorId),s=t.connectorId===X.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)n&&await _e.handleAuthAccountSwitch({address:n,namespace:e});else return(await _e.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e))?.address;return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){const s=me.getConnectorById(t.connectorId),i=t.auth?.name?.toLowerCase(),o=t.connectorId===X.CONNECTOR_ID.AUTH,a=t.connectorId===X.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&xd.isSocialProvider(i)){const{address:u}=await xd.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){bt.open({view:"ConnectingFarcaster"})},onConnect(){Xe.replace("ProfileWallets")}});c=u}else{const{address:u}=await xd.connectEmail({closeModalOnConnect:r,onOpen(){bt.open({view:"EmailLogin"})},onConnect(){Xe.replace("ProfileWallets")}});c=u}else if(a){const{address:u}=await xd.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(l){const d=l?"AllWallets":"ConnectingWalletConnect";bt.state.open?Xe.push(d):bt.open({view:d})},onConnect(){Xe.replace("ProfileWallets")}});c=u}else{const u=await _e.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);u&&(c=u.address)}return o&&n&&await _e.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=V.getAccountData(n)?.caipAddress;if(o){const{address:c}=$n.parseCaipAddress(o);i=c}const a=Cg.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await _e.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const u=c.toLowerCase()!==i.toLowerCase();s?.({address:c,namespace:n,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await _e.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&s?.({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}},_e=ii(iH),Cw={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Yh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}};let _w;async function R2(){if(!_w){const{createPublicClient:t,http:e,defineChain:n}=await kn(async()=>{const{createPublicClient:r,http:s,defineChain:i}=await import("./index-DEpYdeP1.js");return{createPublicClient:r,http:s,defineChain:i}},__vite__mapDeps([2,3,1,4,5,0]));_w={createPublicClient:t,http:e,defineChain:n}}return _w}const nE={getBlockchainApiRpcUrl(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()},async getViemChain(t){const{defineChain:e}=await R2(),{chainId:n}=$n.parseCaipNetworkId(t.caipNetworkId);return e({...t,id:Number(n)})},async createViemPublicClient(t){const{createPublicClient:e,http:n}=await R2(),r=oe.state.projectId,s=await nE.getViemChain(t);if(!s)throw new Error(`Chain ${t.caipNetworkId} not found in viem/chains`);return e({chain:s,transport:n(nE.getBlockchainApiRpcUrl(t.caipNetworkId,r))})}},gC={async getMyTokensWithBalance(t={forceUpdate:void 0,caipNetwork:V.state.activeCaipNetwork,address:V.getAccountData()?.address}){const{forceUpdate:e,caipNetwork:n,address:r}=t,s=me.getConnectorId("eip155")===X.CONNECTOR_ID.AUTH;if(!r)return[];const i=n?`${n.caipNetworkId}:${r}`:r,o=fe.getBalanceCacheForCaipAddress(i);if(o)return o.balances;if(n&&n.chainNamespace===X.CHAIN.EVM&&s){const c=await this.getEIP155Balances(r,n);if(c)return this.filterLowQualityTokens(c)}const a=await rt.getBalance(r,n?.caipNetworkId,e);return this.filterLowQualityTokens(a.balances)},async getEIP155Balances(t,e){try{const n=Cw.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await _e.getCapabilities(t))?.[n]?.assetDiscovery?.supported)return null;const s=await _e.walletGetAssets({account:t,chainFilter:[n]});if(!Cw.isWalletGetAssetsResponse(s))return null;const o=(s[n]||[]).map(a=>Cw.createBalance(a,e.caipNetworkId));return fe.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},async fetchERC20Balance({caipAddress:t,assetAddress:e,caipNetwork:n}){const r=await nE.createViemPublicClient(n),{address:s}=$n.parseCaipAddress(t),[{result:i},{result:o},{result:a},{result:c}]=await r.multicall({contracts:[{address:e,functionName:"name",args:[],abi:Tp},{address:e,functionName:"symbol",args:[],abi:Tp},{address:e,functionName:"balanceOf",args:[s],abi:Tp},{address:e,functionName:"decimals",args:[],abi:Tp}]});return{name:i,symbol:o,decimals:c,balance:a&&c?Yh(a,c):"0"}}},Aw={adapters:{}},n8={state:Aw,initialize(t){Aw.adapters={...t}},get(t){return Aw.adapters[t]}},_g={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0,ton:void 0},es=qt({providers:{..._g},providerIds:{..._g}}),Lt={state:es,subscribeKey(t,e){return Vn(es,t,e)},subscribe(t){return ir(es,()=>{t(es)})},subscribeProviders(t){return ir(es.providers,()=>t(es.providers))},setProvider(t,e){t&&e&&(es.providers[t]=Gl(e))},getProvider(t){if(t)return es.providers[t]},setProviderId(t,e){e&&(es.providerIds[t]=e)},getProviderId(t){if(t)return es.providerIds[t]},reset(){es.providers={..._g},es.providerIds={..._g}},resetChain(t){es.providers[t]=void 0,es.providerIds[t]=void 0}},oH={async getTokenList(t){return(await rt.fetchSwapTokens({chainId:t}))?.tokens?.map(r=>({...r,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=V.state.activeCaipNetwork;if(!t)return null;try{if(t.chainNamespace==="solana"){const e=(await _e?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e}}else return await rt.fetchGasPrice({chainId:t.caipNetworkId})}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await rt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s?.allowance&&n&&r){const i=_e.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await gC.getMyTokensWithBalance({forceUpdate:t,caipNetwork:V.state.activeCaipNetwork,address:V.getAccountData()?.address});return V.setAccountProp("tokenBalance",e,V.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:t8(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]},async handleSwapError(t){try{const e=t?.cause;return e?.json&&(await e.json())?.reasons?.[0]?.description?.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}}},xt=qt({tokenBalances:[],loading:!1}),aH={state:xt,subscribe(t){return ir(xt,()=>t(xt))},subscribeKey(t,e){return Vn(xt,t,e)},setToken(t){t&&(xt.token=Gl(t))},setTokenAmount(t){xt.sendTokenAmount=t},setReceiverAddress(t){xt.receiverAddress=t},setReceiverProfileImageUrl(t){xt.receiverProfileImageUrl=t},setReceiverProfileName(t){xt.receiverProfileName=t},setNetworkBalanceInUsd(t){xt.networkBalanceInUSD=t},setLoading(t){xt.loading=t},getSdkEventProperties(t){return{message:xe.parseError(t),isSmartAccount:Dr(V.state.activeChain)===hn.ACCOUNT_TYPES.SMART_ACCOUNT,token:xt.token?.symbol||"",amount:xt.sendTokenAmount??0,network:V.state.activeCaipNetwork?.caipNetworkId||""}},async sendToken(){try{switch(ht.setLoading(!0),V.state.activeCaipNetwork?.chainNamespace){case"eip155":await ht.sendEvmToken();return;case"solana":await ht.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}catch(t){throw Ei.isUserRejectedRequestError(t)?new Xa(t):t}finally{ht.setLoading(!1)}},async sendEvmToken(){const t=V.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Dr(t);if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!ht.state.token)throw new Error("A token is required");if(ht.state.token?.address){ot.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===hn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.address,amount:ht.state.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||""}});const{hash:n}=await ht.sendERC20Token({receiverAddress:ht.state.receiverAddress,tokenAddress:ht.state.token.address,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals});n&&(xt.hash=n)}else{ot.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===hn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token.symbol||"",amount:ht.state.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||""}});const{hash:n}=await ht.sendNativeToken({receiverAddress:ht.state.receiverAddress,sendTokenAmount:ht.state.sendTokenAmount,decimals:ht.state.token.quantity.decimals});n&&(xt.hash=n)}},async fetchTokenBalance(t){xt.loading=!0;const e=V.state.activeChain,n=V.state.activeCaipNetwork?.caipNetworkId,r=V.state.activeCaipNetwork?.chainNamespace,s=V.getAccountData(e)?.caipAddress??V.state.activeCaipAddress,i=s?xe.getPlainAddress(s):void 0;if(xt.lastRetry&&!xe.isAllowedRetry(xt.lastRetry,30*yt.ONE_SEC_MS))return xt.loading=!1,[];try{if(i&&n&&r){const o=await gC.getMyTokensWithBalance();return xt.tokenBalances=o,xt.lastRetry=void 0,o}}catch(o){xt.lastRetry=Date.now(),t?.(o),eo.showError("Token Balance Unavailable")}finally{xt.loading=!1}return[]},fetchNetworkBalance(){if(xt.tokenBalances.length===0)return;const t=oH.mapBalancesToSwapTokens(xt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===t8());e&&(xt.networkBalanceInUSD=e?F3.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){Xe.pushTransactionStack({});const e=t.receiverAddress,n=V.getAccountData()?.address,r=_e.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i=await _e.sendTransaction({chainNamespace:X.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)});return ot.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Dr("eip155")===hn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token?.symbol||"",amount:t.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||"",hash:i||""}}),_e._getClient()?.updateBalance("eip155"),ht.resetSend(),{hash:i}},async sendERC20Token(t){Xe.pushTransactionStack({onSuccess(){Xe.replace("Account")}});const e=_e.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),n=V.getAccountData()?.address;if(n&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const r=xe.getPlainAddress(t.tokenAddress);if(!r)throw new Error("SendController:sendERC20Token - tokenAddress is required");const s=await _e.writeContract({fromAddress:n,tokenAddress:r,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:b7.getERC20Abi(r),chainNamespace:X.CHAIN.EVM});return ot.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Dr("eip155")===hn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ht.state.token?.symbol||"",amount:t.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||"",hash:s||""}}),ht.resetSend(),{hash:s}}return{hash:void 0}},async sendSolanaToken(){if(!ht.state.sendTokenAmount||!ht.state.receiverAddress)throw new Error("An amount and receiver address are required");Xe.pushTransactionStack({onSuccess(){Xe.replace("Account")}});let t;ht.state.token&&ht.state.token.address!==yt.SOLANA_NATIVE_TOKEN_ADDRESS&&(xe.isCaipAddress(ht.state.token.address)?t=xe.getPlainAddress(ht.state.token.address):t=ht.state.token.address);const e=await _e.sendTransaction({chainNamespace:"solana",tokenMint:t,to:ht.state.receiverAddress,value:ht.state.sendTokenAmount});e&&(xt.hash=e),_e._getClient()?.updateBalance("solana"),ot.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:ht.state.token?.symbol||"",amount:ht.state.sendTokenAmount,network:V.state.activeCaipNetwork?.caipNetworkId||"",hash:e||""}}),ht.resetSend()},resetSend(){xt.token=void 0,xt.sendTokenAmount=void 0,xt.receiverAddress=void 0,xt.receiverProfileImageUrl=void 0,xt.receiverProfileName=void 0,xt.loading=!1,xt.tokenBalances=[]}},ht=ii(aH),Sw={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Hp={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Re=qt({chains:a7(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),r8={state:Re,subscribe(t){return ir(Re,()=>{t(Re)})},subscribeKey(t,e){return Vn(Re,t,e)},subscribeAccountStateProp(t,e,n){const r=n||Re.activeChain;return r?Vn(Re.chains.get(r)?.accountState||{},t,e):()=>{}},subscribeChainProp(t,e,n){let r;return ir(Re.chains,()=>{const s=n||Re.activeChain;if(s){const i=Re.chains.get(s)?.[t];r!==i&&(r=i,e(i))}})},initialize(t,e,n){const{chainId:r,namespace:s}=fe.getActiveNetworkProps(),i=e?.find(l=>l.id.toString()===r?.toString()),a=t.find(l=>l?.namespace===s)||t?.[0],c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=oe.state.enableEmbedded?new Set([...c]):new Set([...e?.map(l=>l.chainNamespace)??[]]);(t?.length===0||!a)&&(Re.noAdapters=!0),Re.noAdapters||(Re.activeChain=a?.namespace,Re.activeCaipNetwork=i,V.setChainNetworkData(a?.namespace,{caipNetwork:i}),Re.activeChain&&Ds.set({activeChain:a?.namespace})),u.forEach(l=>{const d=e?.filter(m=>m.chainNamespace===l),f=fe.getPreferredAccountTypes()||{},h={...oe.state.defaultAccountTypes,...f};V.state.chains.set(l,{namespace:l,networkState:qt({...Hp,caipNetwork:d?.[0]}),accountState:qt({...Sw,preferredAccountType:h[l]}),caipNetworks:d??[],...n}),V.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){if(Re.activeChain===t){const e=Array.from(Re.chains.entries()).find(([n])=>n!==t);if(e){const n=e[1]?.caipNetworks?.[0];n&&V.setActiveCaipNetwork(n)}}Re.chains.delete(t)},addAdapter(t,{connectionControllerClient:e},n){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Re.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Hp,caipNetwork:n[0]},accountState:{...Sw},caipNetworks:n,connectionControllerClient:e}),V.setRequestedCaipNetworks(n?.filter(r=>r.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=Re.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];e.caipNetworks?.find(r=>r.id===t.id)||n.push(t),Re.chains.set(t.chainNamespace,{...e,caipNetworks:n}),V.setRequestedCaipNetworks(n,t.chainNamespace),me.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const n=Re.chains.get(t);if(n){const r=Re.activeCaipNetwork?.id===e,s=[...n.caipNetworks?.filter(i=>i.id!==e)||[]];r&&n?.caipNetworks?.[0]&&V.setActiveCaipNetwork(n.caipNetworks[0]),Re.chains.set(t,{...n,caipNetworks:s}),V.setRequestedCaipNetworks(s||[],t),s.length===0&&me.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Re.chains.get(t);n&&(n.networkState={...n.networkState||Hp,...e},Re.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Re.chains.get(t);if(r){const s={...r.accountState||Sw,...e};Re.chains.set(t,{...r,accountState:s}),(Re.chains.size===1||Re.activeChain===t)&&e.caipAddress&&(Re.activeCaipAddress=e.caipAddress)}},setChainNetworkData(t,e){if(!t)return;const n=Re.chains.get(t);if(n){const r={...n.networkState||Hp,...e};Re.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){V.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){Re.activeChain=t;const e=t?Re.chains.get(t):void 0,n=e?.networkState?.caipNetwork;n?.id&&t&&(Re.activeCaipAddress=e?.accountState?.caipAddress,Re.activeCaipNetwork=n,V.setChainNetworkData(t,{caipNetwork:n}),fe.setActiveCaipNetworkId(n?.caipNetworkId),Ds.set({activeChain:t,selectedNetworkId:n?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;const e=Re.activeChain===t.chainNamespace;e||V.setIsSwitchingNamespace(!0);const n=Re.chains.get(t.chainNamespace);Re.activeChain=t.chainNamespace,Re.activeCaipNetwork=t,V.setChainNetworkData(t.chainNamespace,{caipNetwork:t});let r=n?.accountState?.address;if(r)Re.activeCaipAddress=`${t.chainNamespace}:${t.id}:${r}`;else if(e&&Re.activeCaipAddress){const{address:i}=$n.parseCaipAddress(Re.activeCaipAddress);r=i,Re.activeCaipAddress=`${t.caipNetworkId}:${r}`}else Re.activeCaipAddress=void 0;V.setChainAccountData(t.chainNamespace,{address:r,caipAddress:Re.activeCaipAddress}),ht.resetSend(),Ds.set({activeChain:Re.activeChain,selectedNetworkId:Re.activeCaipNetwork?.caipNetworkId}),fe.setActiveCaipNetworkId(t.caipNetworkId),!V.checkIfSupportedNetwork(t.chainNamespace)&&oe.state.enableNetworkSwitch&&!oe.state.allowUnsupportedChain&&!_e.state.wcBasic&&V.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=Re.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==V.state.activeChain,n=V.getNetworkData(t)?.caipNetwork,r=V.getCaipNetworkByNamespace(t,n?.id);e&&r&&await V.switchActiveNetwork(r)},async switchActiveNetwork(t,{throwOnFailure:e=!1}={}){const n=V.state.activeChain;if(!n)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r=Lt.getProviderId(Re.activeChain)==="AUTH",s=V.getAccountData(n)?.address,i=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t.chainNamespace);try{if(s&&t.chainNamespace===n||r&&i){const o=n8.get(t.chainNamespace);if(!o)throw new Error("Adapter not found");await o.switchNetwork({caipNetwork:t})}V.setActiveCaipNetwork(t)}catch(o){if(e)throw o}ot.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})},getConnectionControllerClient(t){const e=t||Re.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Re.chains.get(e);if(!n?.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){const n=Re.chains.get(e)?.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Re.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=e?.networkState||{};return xe.sortRequestedNetworks(n,r).filter(o=>o?.id)},getAllRequestedCaipNetworks(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=V.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){V.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=V.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));me.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=V.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){return t?Re.chains.get(t)?.networkState?.caipNetwork:Re.activeCaipNetwork},getActiveCaipAddress(){return Re.activeCaipAddress},getApprovedCaipNetworkIds(t){return Re.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},setApprovedCaipNetworksData(t,e){V.setAdapterNetworkState(t,e)},checkIfSupportedNetwork(t,e){const n=e||Re.activeCaipNetwork?.caipNetworkId,r=V.getRequestedCaipNetworks(t);return r.length?r?.some(s=>s.caipNetworkId===n):!0},checkIfSupportedChainId(t){return Re.activeChain?V.getRequestedCaipNetworks(Re.activeChain)?.some(n=>n.id===t):!0},checkIfSmartAccountEnabled(){const t=fh.caipNetworkIdToNumber(Re.activeCaipNetwork?.caipNetworkId);return!Re.activeChain||!t?!1:!!(qn.get(ze.SMART_ACCOUNT_ENABLED_NETWORKS)?.split(",")||[])?.includes(t.toString())},showUnsupportedChainUI(){bt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Re.activeCaipNetwork;return!!(t?.chainNamespace&&yt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){V.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=V.state.chains.get(e)?.accountState?.preferredAccountType,r=oe.state.defaultAccountTypes[e];Re.activeCaipAddress=void 0,V.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),me.removeConnectorId(e)},setIsSwitchingNamespace(t){Re.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(Re.chains.forEach(n=>{X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(r=>r===n.namespace)&&n.namespace&&t.push(n.namespace)}),t.length>0){const n=t[0];return e=n?Re.chains.get(n)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||Re.activeChain;if(e)return V.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||Re.activeChain;if(e)return V.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const n=V.state.chains.get(t),r=n?.caipNetworks?.find(s=>s.id.toString()===e?.toString());return r||n?.networkState?.caipNetwork||n?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=me.state.filterByNamespace;return(t?[Re.chains.get(t)]:Array.from(Re.chains.values())).flatMap(n=>n?.caipNetworks||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?V.getRequestedCaipNetworks(t):V.getAllRequestedCaipNetworks()},getCaipNetworkById(t,e){return r8.getCaipNetworks(e).find(n=>n.id.toString()===t.toString()||n.caipNetworkId.toString()===t.toString())},setLastConnectedSIWECaipNetwork(t){Re.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Re.lastConnectedSIWECaipNetwork},async fetchTokenBalance(t){const e=V.getAccountData();if(!e)return[];const n=V.state.activeCaipNetwork?.caipNetworkId,r=V.state.activeCaipNetwork?.chainNamespace,s=V.state.activeCaipAddress,i=s?xe.getPlainAddress(s):void 0;if(V.setAccountProp("balanceLoading",!0,r),e.lastRetry&&!xe.isAllowedRetry(e.lastRetry,30*yt.ONE_SEC_MS))return V.setAccountProp("balanceLoading",!1,r),[];try{if(i&&n&&r){const o=await gC.getMyTokensWithBalance();return V.setAccountProp("tokenBalance",o,r),V.setAccountProp("lastRetry",void 0,r),V.setAccountProp("balanceLoading",!1,r),o}}catch(o){V.setAccountProp("lastRetry",Date.now(),r),t?.(o),eo.showError("Token Balance Unavailable")}finally{V.setAccountProp("balanceLoading",!1,r)}return[]},isCaipNetworkDisabled(t){const e=t.chainNamespace,n=!!V.getAccountData(e)?.caipAddress,r=V.getAllApprovedCaipNetworkIds(),s=V.getNetworkProp("supportsAllNetworks",e)!==!1,i=me.getConnectorId(e),o=me.getAuthConnector(),a=i===X.CONNECTOR_ID.AUTH&&o;return!n||s||a?!1:!r?.includes(t.caipNetworkId)}},V=ii(r8),cH={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=V.state.activeCaipNetwork,r=V.state.activeChain,s=Xe.state.data;if(t.id===n?.id)return;const o=!!V.getAccountData(r)?.address,a=!!V.getAccountData(t.chainNamespace)?.address,c=t.chainNamespace!==r,l=me.getConnectorId(r)===X.CONNECTOR_ID.AUTH,d=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(f=>f===t.chainNamespace);e||l&&d?Xe.push("SwitchNetwork",{...s,network:t}):o&&c&&!a?Xe.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Xe.push("SwitchNetwork",{...s,network:t})}},ts=qt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),uH={state:ts,subscribe(t){return ir(ts,()=>t(ts))},subscribeKey(t,e){return Vn(ts,t,e)},async open(t){const e=t?.namespace,n=V.state.activeChain,r=e&&e!==n,s=V.getAccountData(t?.namespace)?.caipAddress,i=V.state.noAdapters;if(_e.state.wcBasic?Me.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await Me.prefetch(),me.setFilterByNamespace(t?.namespace),bt.setLoading(!0,e),e&&r){const o=V.getNetworkData(e)?.caipNetwork||V.getRequestedCaipNetworks(e)[0];o&&(i?(await V.switchActiveNetwork(o),Xe.push("ConnectingWalletConnectBasic")):cH.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0}))}else oe.state.manualWCControl||i&&!s?xe.isMobile()?Xe.reset("AllWallets"):Xe.reset("ConnectingWalletConnectBasic"):t?.view?Xe.reset(t.view,t.data):s?Xe.reset("Account"):Xe.reset("Connect");ts.open=!0,Ds.set({open:!0}),ot.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=oe.state.enableEmbedded,e=!!V.state.activeCaipAddress;ts.open&&ot.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ts.open=!1,Xe.reset("Connect"),bt.clearLoading(),t?e?Xe.replace("Account"):Xe.push("Connect"):Ds.set({open:!1}),_e.resetUri()},setLoading(t,e){e&&ts.loadingNamespaceMap.set(e,t),ts.loading=t,Ds.set({loading:t})},clearLoading(){ts.loadingNamespaceMap.clear(),ts.loading=!1,Ds.set({loading:!1})},shake(){ts.shake||(ts.shake=!0,setTimeout(()=>{ts.shake=!1},500))}},bt=ii(uH),wf={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},rE={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},lH={providers:j3,selectedProvider:null,error:null,purchaseCurrency:wf,paymentCurrency:rE,purchaseCurrencies:[wf],paymentCurrencies:[],quotesLoading:!1},It=qt(lH),dH={state:It,subscribe(t){return ir(It,()=>t(It))},subscribeKey(t,e){return Vn(It,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=V.state.activeChain,n=e===X.CHAIN.SOLANA?"SOL":"USDC",r=e?V.state.chains.get(e)?.accountState?.address??"":"",s=new URL(t.url);s.searchParams.append("publicKey",v7),s.searchParams.append("destinationCurrencyCode",n),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",oe.state.projectId),It.selectedProvider={...t,url:s.toString()}}else It.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=j3.filter(r=>e.includes(r.name));It.providers=n}else It.providers=[]},setPurchaseCurrency(t){It.purchaseCurrency=t},setPaymentCurrency(t){It.paymentCurrency=t},setPurchaseAmount(t){sE.state.purchaseAmount=t},setPaymentAmount(t){sE.state.paymentAmount=t},async getAvailableCurrencies(){const t=await rt.getOnrampOptions();It.purchaseCurrencies=t.purchaseCurrencies,It.paymentCurrencies=t.paymentCurrencies,It.paymentCurrency=t.paymentCurrencies[0]||rE,It.purchaseCurrency=t.purchaseCurrencies[0]||wf,await Me.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Me.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){It.quotesLoading=!0;try{const t=await rt.getOnrampQuote({purchaseCurrency:It.purchaseCurrency,paymentCurrency:It.paymentCurrency,amount:It.paymentAmount?.toString()||"0",network:It.purchaseCurrency?.symbol});return It.quotesLoading=!1,It.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return It.error=t.message,It.quotesLoading=!1,null}finally{It.quotesLoading=!1}},resetState(){It.selectedProvider=null,It.error=null,It.purchaseCurrency=wf,It.paymentCurrency=rE,It.purchaseCurrencies=[wf],It.paymentCurrencies=[],It.paymentAmount=void 0,It.purchaseAmount=void 0,It.quotesLoading=!1}},sE=ii(dH);var Wp={exports:{}},O2;function fH(){if(O2)return Wp.exports;O2=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(N,U,q){return Function.prototype.apply.call(N,U,q)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:n=function(N){return Object.getOwnPropertyNames(N)};function r(T){console&&console.warn&&console.warn(T)}var s=Number.isNaN||function(N){return N!==N};function i(){i.init.call(this)}Wp.exports=i,Wp.exports.once=S,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||s(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||s(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this};function c(T){return T._maxListeners===void 0?i.defaultMaxListeners:T._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(N){for(var U=[],q=1;q<arguments.length;q++)U.push(arguments[q]);var H=N==="error",P=this._events;if(P!==void 0)H=H&&P.error===void 0;else if(!H)return!1;if(H){var $;if(U.length>0&&($=U[0]),$ instanceof Error)throw $;var W=new Error("Unhandled error."+($?" ("+$.message+")":""));throw W.context=$,W}var z=P[N];if(z===void 0)return!1;if(typeof z=="function")e(z,this,U);else for(var _=z.length,p=m(z,_),q=0;q<_;++q)e(p[q],this,U);return!0};function u(T,N,U,q){var H,P,$;if(a(U),P=T._events,P===void 0?(P=T._events=Object.create(null),T._eventsCount=0):(P.newListener!==void 0&&(T.emit("newListener",N,U.listener?U.listener:U),P=T._events),$=P[N]),$===void 0)$=P[N]=U,++T._eventsCount;else if(typeof $=="function"?$=P[N]=q?[U,$]:[$,U]:q?$.unshift(U):$.push(U),H=c(T),H>0&&$.length>H&&!$.warned){$.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=T,W.type=N,W.count=$.length,r(W)}return T}i.prototype.addListener=function(N,U){return u(this,N,U,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(N,U){return u(this,N,U,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(T,N,U){var q={fired:!1,wrapFn:void 0,target:T,type:N,listener:U},H=l.bind(q);return H.listener=U,q.wrapFn=H,H}i.prototype.once=function(N,U){return a(U),this.on(N,d(this,N,U)),this},i.prototype.prependOnceListener=function(N,U){return a(U),this.prependListener(N,d(this,N,U)),this},i.prototype.removeListener=function(N,U){var q,H,P,$,W;if(a(U),H=this._events,H===void 0)return this;if(q=H[N],q===void 0)return this;if(q===U||q.listener===U)--this._eventsCount===0?this._events=Object.create(null):(delete H[N],H.removeListener&&this.emit("removeListener",N,q.listener||U));else if(typeof q!="function"){for(P=-1,$=q.length-1;$>=0;$--)if(q[$]===U||q[$].listener===U){W=q[$].listener,P=$;break}if(P<0)return this;P===0?q.shift():y(q,P),q.length===1&&(H[N]=q[0]),H.removeListener!==void 0&&this.emit("removeListener",N,W||U)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(N){var U,q,H;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[N]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete q[N]),this;if(arguments.length===0){var P=Object.keys(q),$;for(H=0;H<P.length;++H)$=P[H],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=q[N],typeof U=="function")this.removeListener(N,U);else if(U!==void 0)for(H=U.length-1;H>=0;H--)this.removeListener(N,U[H]);return this};function f(T,N,U){var q=T._events;if(q===void 0)return[];var H=q[N];return H===void 0?[]:typeof H=="function"?U?[H.listener||H]:[H]:U?E(H):m(H,H.length)}i.prototype.listeners=function(N){return f(this,N,!0)},i.prototype.rawListeners=function(N){return f(this,N,!1)},i.listenerCount=function(T,N){return typeof T.listenerCount=="function"?T.listenerCount(N):h.call(T,N)},i.prototype.listenerCount=h;function h(T){var N=this._events;if(N!==void 0){var U=N[T];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function m(T,N){for(var U=new Array(N),q=0;q<N;++q)U[q]=T[q];return U}function y(T,N){for(;N+1<T.length;N++)T[N]=T[N+1];T.pop()}function E(T){for(var N=new Array(T.length),U=0;U<N.length;++U)N[U]=T[U].listener||T[U];return N}function S(T,N){return new Promise(function(U,q){function H($){T.removeListener(N,P),q($)}function P(){typeof T.removeListener=="function"&&T.removeListener("error",H),U([].slice.call(arguments))}C(T,N,P,{once:!0}),N!=="error"&&R(T,H,{once:!0})})}function R(T,N,U){typeof T.on=="function"&&C(T,"error",N,U)}function C(T,N,U,q){if(typeof T.on=="function")q.once?T.once(N,U):T.on(N,U);else if(typeof T.addEventListener=="function")T.addEventListener(N,function H(P){q.once&&T.removeEventListener(N,H),U(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return Wp.exports}var oi=fH();const mC=fd(oi);var xw={};var iE=function(t,e){return iE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},iE(t,e)};function hH(t,e){iE(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var oE=function(){return oE=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oE.apply(this,arguments)};function pH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function gH(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function mH(t,e){return function(n,r){e(n,r,t)}}function yH(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function wH(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function bH(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function EH(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function vH(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function aE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s8(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function CH(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s8(arguments[e]));return t}function _H(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Ih(t){return this instanceof Ih?(this.v=t,this):new Ih(t)}function AH(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(h){return new Promise(function(m,y){i.push([f,h,m,y])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(m){d(i[0][3],m)}}function c(f){f.value instanceof Ih?Promise.resolve(f.value.v).then(u,l):d(i[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}function SH(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Ih(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function xH(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof aE=="function"?aE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function IH(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function NH(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function TH(t){return t&&t.__esModule?t:{default:t}}function RH(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function OH(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const PH=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return oE},__asyncDelegator:SH,__asyncGenerator:AH,__asyncValues:xH,__await:Ih,__awaiter:wH,__classPrivateFieldGet:RH,__classPrivateFieldSet:OH,__createBinding:EH,__decorate:gH,__exportStar:vH,__extends:hH,__generator:bH,__importDefault:TH,__importStar:NH,__makeTemplateObject:IH,__metadata:yH,__param:mH,__read:s8,__rest:pH,__spread:CH,__spreadArrays:_H,__values:aE},Symbol.toStringTag,{value:"Module"})),ip=Bm(PH);var Iw={},Id={},P2;function kH(){if(P2)return Id;P2=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Id.delay=t,Id}var Oc={},Nw={},Pc={},k2;function BH(){return k2||(k2=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.ONE_THOUSAND=Pc.ONE_HUNDRED=void 0,Pc.ONE_HUNDRED=100,Pc.ONE_THOUSAND=1e3),Pc}var Tw={},B2;function DH(){return B2||(B2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(Tw)),Tw}var D2;function i8(){return D2||(D2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ip;e.__exportStar(BH(),t),e.__exportStar(DH(),t)})(Nw)),Nw}var U2;function UH(){if(U2)return Oc;U2=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.fromMiliseconds=Oc.toMiliseconds=void 0;const t=i8();function e(r){return r*t.ONE_THOUSAND}Oc.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Oc.fromMiliseconds=n,Oc}var M2;function MH(){return M2||(M2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ip;e.__exportStar(kH(),t),e.__exportStar(UH(),t)})(Iw)),Iw}var Gu={},$2;function $H(){if($2)return Gu;$2=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Gu.Watch=t,Gu.default=t,Gu}var Rw={},Nd={},L2;function LH(){if(L2)return Nd;L2=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.IWatch=void 0;class t{}return Nd.IWatch=t,Nd}var F2;function FH(){return F2||(F2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),ip.__exportStar(LH(),t)})(Rw)),Rw}var j2;function jH(){return j2||(j2=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ip;e.__exportStar(MH(),t),e.__exportStar($H(),t),e.__exportStar(FH(),t),e.__exportStar(i8(),t)})(xw)),xw}var Ae=jH();class ku{}let qH=class extends ku{constructor(e){super()}};const q2=Ae.FIVE_SECONDS,Bu={pulse:"heartbeat_pulse"};let zH=class o8 extends qH{constructor(e){super(e),this.events=new oi.EventEmitter,this.interval=q2,this.interval=e?.interval||q2}static async init(e){const n=new o8(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ae.toMiliseconds(this.interval))}pulse(){this.events.emit(Bu.pulse)}};const HH=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,WH=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,VH=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function KH(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){GH(t);return}return e}function GH(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Vp(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!VH.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(HH.test(t)||WH.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,KH)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function YH(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Yn(t,...e){try{return YH(t(...e))}catch(n){return Promise.reject(n)}}function ZH(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function JH(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function B0(t){if(ZH(t))return String(t);if(JH(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return B0(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const cE="base64:";function XH(t){return typeof t=="string"?t:cE+tW(t)}function QH(t){return typeof t!="string"||!t.startsWith(cE)?t:eW(t.slice(cE.length))}function eW(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function tW(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ss(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function nW(...t){return ss(t.join(":"))}function Kp(t){return t=ss(t),t?t+":":""}function rW(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function sW(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const iW="memory",oW=()=>{const t=new Map;return{name:iW,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function aW(t={}){const e={mounts:{"":t.driver||oW()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},r=(u,l)=>e.mountpoints.filter(d=>d.startsWith(u)||l&&u.startsWith(d)).map(d=>({relativeBase:u.length>d.length?u.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(u,l)=>{if(e.watching){l=ss(l);for(const d of e.watchListeners)d(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await z2(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,d)=>{const f=new Map,h=m=>{let y=f.get(m.base);return y||(y={driver:m.driver,base:m.base,items:[]},f.set(m.base,y)),y};for(const m of u){const y=typeof m=="string",E=ss(y?m:m.key),S=y?void 0:m.value,R=y||!m.options?l:{...l,...m.options},C=n(E);h(C).items.push({key:E,value:S,relativeKey:C.relativeKey,options:R})}return Promise.all([...f.values()].map(m=>d(m))).then(m=>m.flat())},c={hasItem(u,l={}){u=ss(u);const{relativeKey:d,driver:f}=n(u);return Yn(f.hasItem,d,l)},getItem(u,l={}){u=ss(u);const{relativeKey:d,driver:f}=n(u);return Yn(f.getItem,d,l).then(h=>Vp(h))},getItems(u,l={}){return a(u,l,d=>d.driver.getItems?Yn(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),l).then(f=>f.map(h=>({key:nW(d.base,h.key),value:Vp(h.value)}))):Promise.all(d.items.map(f=>Yn(d.driver.getItem,f.relativeKey,f.options).then(h=>({key:f.key,value:Vp(h)})))))},getItemRaw(u,l={}){u=ss(u);const{relativeKey:d,driver:f}=n(u);return f.getItemRaw?Yn(f.getItemRaw,d,l):Yn(f.getItem,d,l).then(h=>QH(h))},async setItem(u,l,d={}){if(l===void 0)return c.removeItem(u);u=ss(u);const{relativeKey:f,driver:h}=n(u);h.setItem&&(await Yn(h.setItem,f,B0(l),d),h.watch||s("update",u))},async setItems(u,l){await a(u,l,async d=>{if(d.driver.setItems)return Yn(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:B0(f.value),options:f.options})),l);d.driver.setItem&&await Promise.all(d.items.map(f=>Yn(d.driver.setItem,f.relativeKey,B0(f.value),f.options)))})},async setItemRaw(u,l,d={}){if(l===void 0)return c.removeItem(u,d);u=ss(u);const{relativeKey:f,driver:h}=n(u);if(h.setItemRaw)await Yn(h.setItemRaw,f,l,d);else if(h.setItem)await Yn(h.setItem,f,XH(l),d);else return;h.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=ss(u);const{relativeKey:d,driver:f}=n(u);f.removeItem&&(await Yn(f.removeItem,d,l),(l.removeMeta||l.removeMata)&&await Yn(f.removeItem,d+"$",l),f.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=ss(u);const{relativeKey:d,driver:f}=n(u),h=Object.create(null);if(f.getMeta&&Object.assign(h,await Yn(f.getMeta,d,l)),!l.nativeOnly){const m=await Yn(f.getItem,d+"$",l).then(y=>Vp(y));m&&typeof m=="object"&&(typeof m.atime=="string"&&(m.atime=new Date(m.atime)),typeof m.mtime=="string"&&(m.mtime=new Date(m.mtime)),Object.assign(h,m))}return h},setMeta(u,l,d={}){return this.setItem(u+"$",l,d)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){u=Kp(u);const d=r(u,!0);let f=[];const h=[];let m=!0;for(const E of d){E.driver.flags?.maxDepth||(m=!1);const S=await Yn(E.driver.getKeys,E.relativeBase,l);for(const R of S){const C=E.mountpoint+ss(R);f.some(T=>C.startsWith(T))||h.push(C)}f=[E.mountpoint,...f.filter(R=>!R.startsWith(E.mountpoint))]}const y=l.maxDepth!==void 0&&!m;return h.filter(E=>(!y||rW(E,l.maxDepth))&&sW(E,u))},async clear(u,l={}){u=Kp(u),await Promise.all(r(u,!1).map(async d=>{if(d.driver.clear)return Yn(d.driver.clear,d.relativeBase,l);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",l);return Promise.all(f.map(h=>d.driver.removeItem(h,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>H2(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=Kp(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((d,f)=>f.length-d.length)),e.mounts[u]=l,e.watching&&Promise.resolve(z2(l,s,u)).then(d=>{e.unwatch[u]=d}).catch(console.error),c},async unmount(u,l=!0){u=Kp(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u]?.(),delete e.unwatch[u]),l&&await H2(e.mounts[u]),e.mountpoints=e.mountpoints.filter(d=>d!==u),delete e.mounts[u])},getMount(u=""){u=ss(u)+":";const l=n(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=ss(u),r(u,l.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,d={})=>c.setItem(u,l,d),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function z2(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function H2(t){typeof t.dispose=="function"&&await Yn(t.dispose)}function Du(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function a8(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Du(n);return(s,i)=>r.then(o=>i(o.transaction(e,s).objectStore(e)))}let Ow;function op(){return Ow||(Ow=a8("keyval-store","keyval")),Ow}function W2(t,e=op()){return e("readonly",n=>Du(n.get(t)))}function cW(t,e,n=op()){return n("readwrite",r=>(r.put(e,t),Du(r.transaction)))}function uW(t,e=op()){return e("readwrite",n=>(n.delete(t),Du(n.transaction)))}function lW(t=op()){return t("readwrite",e=>(e.clear(),Du(e.transaction)))}function dW(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Du(t.transaction)}function fW(t=op()){return t("readonly",e=>{if(e.getAllKeys)return Du(e.getAllKeys());const n=[];return dW(e,r=>n.push(r.key)).then(()=>n)})}const hW=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),pW=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Cu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return pW(t)}catch{return t}}function _u(t){return typeof t=="string"?t:hW(t)||""}const gW="idb-keyval";var mW=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=a8(t.dbName,t.storeName)),{name:gW,options:t,async hasItem(s){return!(typeof await W2(n(s),r)>"u")},async getItem(s){return await W2(n(s),r)??null},setItem(s,i){return cW(n(s),i,r)},removeItem(s){return uW(n(s),r)},getKeys(){return fW(r)},clear(){return lW(r)}}};const yW="WALLET_CONNECT_V2_INDEXED_DB",wW="keyvaluestorage";let bW=class{constructor(){this.indexedDb=aW({driver:mW({dbName:yW,storeName:wW})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,_u(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D0={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Pw<"u"&&Pw.localStorage?D0.exports=Pw.localStorage:typeof window<"u"&&window.localStorage?D0.exports=window.localStorage:D0.exports=new e})();function EW(t){var e;return[t[0],Cu((e=t[1])!=null?e:"")]}let vW=class{constructor(){this.localStorage=D0.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(EW)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Cu(n)}async setItem(e,n){this.localStorage.setItem(e,_u(n))}async removeItem(e){this.localStorage.removeItem(e)}};const CW="wc_storage_version",V2=1,_W=async(t,e,n)=>{const r=CW,s=await e.getItem(r);if(s&&s>=V2){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(r,V2),n(e),AW(t,o)},AW=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let SW=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new vW;this.storage=e;try{const n=new bW;_W(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var xW=Object.defineProperty,IW=(t,e,n)=>e in t?xW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K2=(t,e,n)=>IW(t,typeof e!="symbol"?e+"":e,n);let NW=class extends ku{constructor(e){super(),this.opts=e,K2(this,"protocol","wc"),K2(this,"version",2)}};var TW=Object.defineProperty,RW=(t,e,n)=>e in t?TW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OW=(t,e,n)=>RW(t,e+"",n);let PW=class extends ku{constructor(e,n){super(),this.core=e,this.logger=n,OW(this,"records",new Map)}},kW=class{constructor(e,n){this.logger=e,this.core=n}},BW=class extends ku{constructor(e,n){super(),this.relayer=e,this.logger=n}},DW=class extends ku{constructor(e){super()}},UW=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},MW=class extends ku{constructor(e,n){super(),this.relayer=e,this.logger=n}},$W=class extends ku{constructor(e,n){super(),this.core=e,this.logger=n}},LW=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},FW=class{constructor(e,n){this.projectId=e,this.logger=n}},jW=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var qW=Object.defineProperty,zW=(t,e,n)=>e in t?qW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G2=(t,e,n)=>zW(t,typeof e!="symbol"?e+"":e,n);let HW=class{constructor(e){this.opts=e,G2(this,"protocol","wc"),G2(this,"version",2)}},WW=class{constructor(e){this.client=e}};function VW(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function c8(t,...e){if(!VW(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Y2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function KW(t,e){c8(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Yu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const kw=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function GW(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function u8(t){return typeof t=="string"&&(t=GW(t)),c8(t),t}let YW=class{clone(){return this._cloneInto()}};function ZW(t){const e=r=>t().update(u8(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function l8(t=32){if(Yu&&typeof Yu.getRandomValues=="function")return Yu.getRandomValues(new Uint8Array(t));if(Yu&&typeof Yu.randomBytes=="function")return Yu.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function JW(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}let XW=class extends YW{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kw(this.buffer)}update(e){Y2(this);const{view:n,buffer:r,blockLen:s}=this;e=u8(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=kw(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Y2(this),KW(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;JW(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=kw(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Gp=BigInt(2**32-1),uE=BigInt(32);function d8(t,e=!1){return e?{h:Number(t&Gp),l:Number(t>>uE&Gp)}:{h:Number(t>>uE&Gp)|0,l:Number(t&Gp)|0}}function QW(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=d8(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const eV=(t,e)=>BigInt(t>>>0)<<uE|BigInt(e>>>0),tV=(t,e,n)=>t>>>n,nV=(t,e,n)=>t<<32-n|e>>>n,rV=(t,e,n)=>t>>>n|e<<32-n,sV=(t,e,n)=>t<<32-n|e>>>n,iV=(t,e,n)=>t<<64-n|e>>>n-32,oV=(t,e,n)=>t>>>n-32|e<<64-n,aV=(t,e)=>e,cV=(t,e)=>t,uV=(t,e,n)=>t<<n|e>>>32-n,lV=(t,e,n)=>e<<n|t>>>32-n,dV=(t,e,n)=>e<<n-32|t>>>64-n,fV=(t,e,n)=>t<<n-32|e>>>64-n;function hV(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const pV=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),gV=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,mV=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),yV=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,wV=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),bV=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ft={fromBig:d8,split:QW,toBig:eV,shrSH:tV,shrSL:nV,rotrSH:rV,rotrSL:sV,rotrBH:iV,rotrBL:oV,rotr32H:aV,rotr32L:cV,rotlSH:uV,rotlSL:lV,rotlBH:dV,rotlBL:fV,add:hV,add3L:pV,add3H:gV,add4L:mV,add4H:yV,add5H:bV,add5L:wV},[EV,vV]=ft.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ya=new Uint32Array(80),wa=new Uint32Array(80);let CV=class extends XW{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:h,Gl:m,Hh:y,Hl:E}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,m,y,E]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,m,y,E){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=m|0,this.Hh=y|0,this.Hl=E|0}process(e,n){for(let C=0;C<16;C++,n+=4)ya[C]=e.getUint32(n),wa[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const T=ya[C-15]|0,N=wa[C-15]|0,U=ft.rotrSH(T,N,1)^ft.rotrSH(T,N,8)^ft.shrSH(T,N,7),q=ft.rotrSL(T,N,1)^ft.rotrSL(T,N,8)^ft.shrSL(T,N,7),H=ya[C-2]|0,P=wa[C-2]|0,$=ft.rotrSH(H,P,19)^ft.rotrBH(H,P,61)^ft.shrSH(H,P,6),W=ft.rotrSL(H,P,19)^ft.rotrBL(H,P,61)^ft.shrSL(H,P,6),z=ft.add4L(q,W,wa[C-7],wa[C-16]),_=ft.add4H(z,U,$,ya[C-7],ya[C-16]);ya[C]=_|0,wa[C]=z|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:h,Fl:m,Gh:y,Gl:E,Hh:S,Hl:R}=this;for(let C=0;C<80;C++){const T=ft.rotrSH(d,f,14)^ft.rotrSH(d,f,18)^ft.rotrBH(d,f,41),N=ft.rotrSL(d,f,14)^ft.rotrSL(d,f,18)^ft.rotrBL(d,f,41),U=d&h^~d&y,q=f&m^~f&E,H=ft.add5L(R,N,q,vV[C],wa[C]),P=ft.add5H(H,S,T,U,EV[C],ya[C]),$=H|0,W=ft.rotrSH(r,s,28)^ft.rotrBH(r,s,34)^ft.rotrBH(r,s,39),z=ft.rotrSL(r,s,28)^ft.rotrBL(r,s,34)^ft.rotrBL(r,s,39),_=r&i^r&a^i&a,p=s&o^s&c^o&c;S=y|0,R=E|0,y=h|0,E=m|0,h=d|0,m=f|0,{h:d,l:f}=ft.add(u|0,l|0,P|0,$|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=ft.add3L($,z,p);r=ft.add3H(g,P,W,_),s=g|0}({h:r,l:s}=ft.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ft.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ft.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=ft.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=ft.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:m}=ft.add(this.Fh|0,this.Fl|0,h|0,m|0),{h:y,l:E}=ft.add(this.Gh|0,this.Gl|0,y|0,E|0),{h:S,l:R}=ft.add(this.Hh|0,this.Hl|0,S|0,R|0),this.set(r,s,i,o,a,c,u,l,d,f,h,m,y,E,S,R)}roundClean(){ya.fill(0),wa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const _V=ZW(()=>new CV);const yC=BigInt(0),f8=BigInt(1),AV=BigInt(2);function wC(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function bC(t){if(!wC(t))throw new Error("Uint8Array expected")}function Bw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const SV=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function EC(t){bC(t);let e="";for(let n=0;n<t.length;n++)e+=SV[t[n]];return e}function h8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?yC:BigInt("0x"+t)}const Co={_0:48,_9:57,A:65,F:70,a:97,f:102};function Z2(t){if(t>=Co._0&&t<=Co._9)return t-Co._0;if(t>=Co.A&&t<=Co.F)return t-(Co.A-10);if(t>=Co.a&&t<=Co.f)return t-(Co.a-10)}function p8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Z2(t.charCodeAt(i)),a=Z2(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function xV(t){return h8(EC(t))}function U0(t){return bC(t),h8(EC(Uint8Array.from(t).reverse()))}function g8(t,e){return p8(t.toString(16).padStart(e*2,"0"))}function lE(t,e){return g8(t,e).reverse()}function _o(t,e,n){let r;if(typeof e=="string")try{r=p8(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(wC(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function J2(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];bC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Dw=t=>typeof t=="bigint"&&yC<=t;function IV(t,e,n){return Dw(t)&&Dw(e)&&Dw(n)&&e<=t&&t<n}function Td(t,e,n,r){if(!IV(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function NV(t){let e;for(e=0;t>yC;t>>=f8,e+=1);return e}const TV=t=>(AV<<BigInt(t-1))-f8,RV={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||wC(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function vC(t,e,n={}){const r=(s,i,o)=>{const a=RV[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function X2(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const sr=BigInt(0),fn=BigInt(1),Hc=BigInt(2),OV=BigInt(3),dE=BigInt(4),Q2=BigInt(5),eS=BigInt(8);function Hn(t,e){const n=t%e;return n>=sr?n:e+n}function PV(t,e,n){if(e<sr)throw new Error("invalid exponent, negatives unsupported");if(n<=sr)throw new Error("invalid modulus");if(n===fn)return sr;let r=fn;for(;e>sr;)e&fn&&(r=r*t%n),t=t*t%n,e>>=fn;return r}function Di(t,e,n){let r=t;for(;e-- >sr;)r*=r,r%=n;return r}function tS(t,e){if(t===sr)throw new Error("invert: expected non-zero number");if(e<=sr)throw new Error("invert: expected positive modulus, got "+e);let n=Hn(t,e),r=e,s=sr,i=fn;for(;n!==sr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==fn)throw new Error("invert: does not exist");return Hn(s,e)}function kV(t){const e=(t-fn)/Hc;let n,r,s;for(n=t-fn,r=0;n%Hc===sr;n/=Hc,r++);for(s=Hc;s<t&&PV(s,e,t)!==t-fn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+fn)/dE;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+fn)/Hc;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,u=o.pow(o.mul(o.ONE,s),n),l=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let m=o.sqr(d);f<c&&!o.eql(m,o.ONE);f++)m=o.sqr(m);const h=o.pow(u,fn<<BigInt(c-f-1));u=o.sqr(h),l=o.mul(l,h),d=o.mul(d,u),c=f}return l}}function BV(t){if(t%dE===OV){const e=(t+fn)/dE;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%eS===Q2){const e=(t-Q2)/eS;return function(n,r){const s=n.mul(r,Hc),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Hc),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return kV(t)}const DV=(t,e)=>(Hn(t,e)&fn)===fn,UV=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function MV(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=UV.reduce((r,s)=>(r[s]="function",r),e);return vC(t,n)}function $V(t,e,n){if(n<sr)throw new Error("invalid exponent, negatives unsupported");if(n===sr)return t.ONE;if(n===fn)return e;let r=t.ONE,s=e;for(;n>sr;)n&fn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=fn;return r}function LV(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function m8(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function y8(t,e,n=!1,r={}){if(t<=sr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=m8(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:TV(s),ZERO:sr,ONE:fn,create:c=>Hn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return sr<=c&&c<t},is0:c=>c===sr,isOdd:c=>(c&fn)===fn,neg:c=>Hn(-c,t),eql:(c,u)=>c===u,sqr:c=>Hn(c*c,t),add:(c,u)=>Hn(c+u,t),sub:(c,u)=>Hn(c-u,t),mul:(c,u)=>Hn(c*u,t),pow:(c,u)=>$V(a,c,u),div:(c,u)=>Hn(c*tS(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>tS(c,t),sqrt:r.sqrt||(c=>(o||(o=BV(t)),o(a,c))),invertBatch:c=>LV(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?lE(c,i):g8(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?U0(c):xV(c)}});return Object.freeze(a)}const nS=BigInt(0),Yp=BigInt(1);function Uw(t,e){const n=e.negate();return t?n:e}function w8(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Mw(t,e){w8(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function FV(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function jV(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const $w=new WeakMap,b8=new WeakMap;function Lw(t){return b8.get(t)||1}function qV(t,e){return{constTimeNegate:Uw,hasPrecomputes(n){return Lw(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>nS;)r&Yp&&(s=s.add(i)),i=i.double(),r>>=Yp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Mw(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Mw(n,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),l=2**n,d=BigInt(n);for(let f=0;f<i;f++){const h=f*o;let m=Number(s&u);s>>=d,m>o&&(m-=l,s+=Yp);const y=h,E=h+Math.abs(m)-1,S=f%2!==0,R=m<0;m===0?c=c.add(Uw(S,r[y])):a=a.add(Uw(R,r[E]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Mw(n,e),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let d=0;d<o;d++){const f=d*a;if(s===nS)break;let h=Number(s&c);if(s>>=l,h>a&&(h-=u,s+=Yp),h===0)continue;let m=r[f+Math.abs(h)-1];h<0&&(m=m.negate()),i=i.add(m)}return i},getPrecomputes(n,r,s){let i=$w.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&$w.set(r,s(i))),i},wNAFCached(n,r,s){const i=Lw(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Lw(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){w8(r,e),b8.set(n,r),$w.delete(n)}}}function zV(t,e,n,r){if(FV(n,t),jV(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=NV(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let d=u;d>=0;d-=o){c.fill(s);for(let h=0;h<r.length;h++){const m=r[h],y=Number(m>>BigInt(d)&BigInt(a));c[y]=c[y].add(n[h])}let f=s;for(let h=c.length-1,m=s;h>0;h--)m=m.add(c[h]),f=f.add(m);if(l=l.add(f),d!==0)for(let h=0;h<o;h++)l=l.double()}return l}function HV(t){return MV(t.Fp),vC(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...m8(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ai=BigInt(0),ns=BigInt(1),Zp=BigInt(2),WV=BigInt(8),VV={zip215:!0};function KV(t){const e=HV(t);return vC(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function GV(t){const e=KV(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=Zp<<BigInt(a*8)-ns,l=n.create,d=y8(e.n,e.nBitLength),f=e.uvRatio||((g,b)=>{try{return{isValid:!0,value:n.sqrt(g*n.inv(b))}}catch{return{isValid:!1,value:ai}}}),h=e.adjustScalarBytes||(g=>g),m=e.domain||((g,b,x)=>{if(Bw("phflag",x),b.length||x)throw new Error("Contexts/pre-hash are not supported");return g});function y(g,b){Td("coordinate "+g,b,ai,u)}function E(g){if(!(g instanceof C))throw new Error("ExtendedPoint expected")}const S=X2((g,b)=>{const{ex:x,ey:O,ez:k}=g,M=g.is0();b==null&&(b=M?WV:n.inv(k));const B=l(x*b),w=l(O*b),v=l(k*b);if(M)return{x:ai,y:ns};if(v!==ns)throw new Error("invZ was invalid");return{x:B,y:w}}),R=X2(g=>{const{a:b,d:x}=e;if(g.is0())throw new Error("bad point: ZERO");const{ex:O,ey:k,ez:M,et:B}=g,w=l(O*O),v=l(k*k),D=l(M*M),F=l(D*D),Z=l(w*b),ee=l(D*l(Z+v)),de=l(F+l(x*l(w*v)));if(ee!==de)throw new Error("bad point: equation left != right (1)");const ae=l(O*k),Oe=l(M*B);if(ae!==Oe)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(b,x,O,k){this.ex=b,this.ey=x,this.ez=O,this.et=k,y("x",b),y("y",x),y("z",O),y("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof C)throw new Error("extended point not allowed");const{x,y:O}=b||{};return y("x",x),y("y",O),new C(x,O,ns,l(x*O))}static normalizeZ(b){const x=n.invertBatch(b.map(O=>O.ez));return b.map((O,k)=>O.toAffine(x[k])).map(C.fromAffine)}static msm(b,x){return zV(C,d,b,x)}_setWindowSize(b){U.setWindowSize(this,b)}assertValidity(){R(this)}equals(b){E(b);const{ex:x,ey:O,ez:k}=this,{ex:M,ey:B,ez:w}=b,v=l(x*w),D=l(M*k),F=l(O*w),Z=l(B*k);return v===D&&F===Z}is0(){return this.equals(C.ZERO)}negate(){return new C(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:b}=e,{ex:x,ey:O,ez:k}=this,M=l(x*x),B=l(O*O),w=l(Zp*l(k*k)),v=l(b*M),D=x+O,F=l(l(D*D)-M-B),Z=v+B,ee=Z-w,de=v-B,ae=l(F*ee),Oe=l(Z*de),Qe=l(F*de),G=l(ee*Z);return new C(ae,Oe,G,Qe)}add(b){E(b);const{a:x,d:O}=e,{ex:k,ey:M,ez:B,et:w}=this,{ex:v,ey:D,ez:F,et:Z}=b;if(x===BigInt(-1)){const Ce=l((M-k)*(D+v)),pe=l((M+k)*(D-v)),ue=l(pe-Ce);if(ue===ai)return this.double();const je=l(B*Zp*Z),Ee=l(w*Zp*F),Ne=Ee+je,Ve=pe+Ce,Ke=Ee-je,L=l(Ne*ue),A=l(Ve*Ke),I=l(Ne*Ke),K=l(ue*Ve);return new C(L,A,K,I)}const ee=l(k*v),de=l(M*D),ae=l(w*O*Z),Oe=l(B*F),Qe=l((k+M)*(v+D)-ee-de),G=Oe-ae,J=Oe+ae,ne=l(de-x*ee),ce=l(Qe*G),he=l(J*ne),le=l(Qe*ne),be=l(G*J);return new C(ce,he,be,le)}subtract(b){return this.add(b.negate())}wNAF(b){return U.wNAFCached(this,b,C.normalizeZ)}multiply(b){const x=b;Td("scalar",x,ns,r);const{p:O,f:k}=this.wNAF(x);return C.normalizeZ([O,k])[0]}multiplyUnsafe(b,x=C.ZERO){const O=b;return Td("scalar",O,ai,r),O===ai?N:this.is0()||O===ns?this:U.wNAFCachedUnsafe(this,O,C.normalizeZ,x)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return U.unsafeLadder(this,r).is0()}toAffine(b){return S(this,b)}clearCofactor(){const{h:b}=e;return b===ns?this:this.multiplyUnsafe(b)}static fromHex(b,x=!1){const{d:O,a:k}=e,M=n.BYTES;b=_o("pointHex",b,M),Bw("zip215",x);const B=b.slice(),w=b[M-1];B[M-1]=w&-129;const v=U0(B),D=x?u:n.ORDER;Td("pointHex.y",v,ai,D);const F=l(v*v),Z=l(F-ns),ee=l(O*F-k);let{isValid:de,value:ae}=f(Z,ee);if(!de)throw new Error("Point.fromHex: invalid y coordinate");const Oe=(ae&ns)===ns,Qe=(w&128)!==0;if(!x&&ae===ai&&Qe)throw new Error("Point.fromHex: x=0 and x_0=1");return Qe!==Oe&&(ae=l(-ae)),C.fromAffine({x:ae,y:v})}static fromPrivateKey(b){return P(b).point}toRawBytes(){const{x:b,y:x}=this.toAffine(),O=lE(x,n.BYTES);return O[O.length-1]|=b&ns?128:0,O}toHex(){return EC(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,ns,l(e.Gx*e.Gy)),C.ZERO=new C(ai,ns,ns,ai);const{BASE:T,ZERO:N}=C,U=qV(C,a*8);function q(g){return Hn(g,r)}function H(g){return q(U0(g))}function P(g){const b=n.BYTES;g=_o("private key",g,b);const x=_o("hashed private key",i(g),2*b),O=h(x.slice(0,b)),k=x.slice(b,2*b),M=H(O),B=T.multiply(M),w=B.toRawBytes();return{head:O,prefix:k,scalar:M,point:B,pointBytes:w}}function $(g){return P(g).pointBytes}function W(g=new Uint8Array,...b){const x=J2(...b);return H(i(m(x,_o("context",g),!!s)))}function z(g,b,x={}){g=_o("message",g),s&&(g=s(g));const{prefix:O,scalar:k,pointBytes:M}=P(b),B=W(x.context,O,g),w=T.multiply(B).toRawBytes(),v=W(x.context,w,M,g),D=q(B+v*k);Td("signature.s",D,ai,r);const F=J2(w,lE(D,n.BYTES));return _o("result",F,n.BYTES*2)}const _=VV;function p(g,b,x,O=_){const{context:k,zip215:M}=O,B=n.BYTES;g=_o("signature",g,2*B),b=_o("message",b),x=_o("publicKey",x,B),M!==void 0&&Bw("zip215",M),s&&(b=s(b));const w=U0(g.slice(B,2*B));let v,D,F;try{v=C.fromHex(x,M),D=C.fromHex(g.slice(0,B),M),F=T.multiplyUnsafe(w)}catch{return!1}if(!M&&v.isSmallOrder())return!1;const Z=W(k,D.toRawBytes(),v.toRawBytes(),b);return D.add(v.multiplyUnsafe(Z)).subtract(F).clearCofactor().equals(C.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:$,sign:z,verify:p,ExtendedPoint:C,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>o(n.BYTES),precompute(g=8,b=C.BASE){return b._setWindowSize(g),b.multiply(BigInt(3)),b}}}}BigInt(0),BigInt(1);const CC=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),rS=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const YV=BigInt(1),sS=BigInt(2);BigInt(3);const ZV=BigInt(5),JV=BigInt(8);function XV(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=CC,o=t*t%i*t%i,a=Di(o,sS,i)*o%i,c=Di(a,YV,i)*t%i,u=Di(c,ZV,i)*c%i,l=Di(u,e,i)*u%i,d=Di(l,n,i)*l%i,f=Di(d,r,i)*d%i,h=Di(f,s,i)*f%i,m=Di(h,s,i)*f%i,y=Di(m,e,i)*u%i;return{pow_p_5_8:Di(y,sS,i)*t%i,b2:o}}function QV(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function eK(t,e){const n=CC,r=Hn(e*e*e,n),s=Hn(r*r*e,n),i=XV(t*s).pow_p_5_8;let o=Hn(t*r*i,n);const a=Hn(e*o*o,n),c=o,u=Hn(o*rS,n),l=a===t,d=a===Hn(-t,n),f=a===Hn(-t*rS,n);return l&&(o=c),(d||f)&&(o=u),DV(o,n)&&(o=Hn(-o,n)),{isValid:l||d,value:o}}const tK=y8(CC,void 0,!0),nK={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:tK,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:JV,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:_V,randomBytes:l8,adjustScalarBytes:QV,uvRatio:eK},E8=GV(nK),rK="EdDSA",sK="JWT",Ag=".",Fm="base64url",v8="utf8",C8="utf8",iK=":",oK="did",aK="key",iS="base58btc",cK="z",uK="K36",lK=32;function _C(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function _8(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?_C(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function A8(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=_8(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return _C(n)}function dK(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var y=0,E=0,S=0,R=m.length;S!==R&&m[S]===0;)S++,y++;for(var C=(R-S)*l+1>>>0,T=new Uint8Array(C);S!==R;){for(var N=m[S],U=0,q=C-1;(N!==0||U<E)&&q!==-1;q--,U++)N+=256*T[q]>>>0,T[q]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");E=U,S++}for(var H=C-E;H!==C&&T[H]===0;)H++;for(var P=c.repeat(y);H<C;++H)P+=t.charAt(T[H]);return P}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var y=0;if(m[y]!==" "){for(var E=0,S=0;m[y]===c;)E++,y++;for(var R=(m.length-y)*u+1>>>0,C=new Uint8Array(R);m[y];){var T=n[m.charCodeAt(y)];if(T===255)return;for(var N=0,U=R-1;(T!==0||N<S)&&U!==-1;U--,N++)T+=a*C[U]>>>0,C[U]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");S=N,y++}if(m[y]!==" "){for(var q=R-S;q!==R&&C[q]===0;)q++;for(var H=new Uint8Array(E+(R-q)),P=E;q!==R;)H[P++]=C[q++];return H}}}function h(m){var y=f(m);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var fK=dK,hK=fK;const S8=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},pK=t=>new TextEncoder().encode(t),gK=t=>new TextDecoder().decode(t);let mK=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},yK=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return x8(this,e)}},wK=class{constructor(e){this.decoders=e}or(e){return x8(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const x8=(t,e)=>new wK({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let bK=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new mK(e,n,r),this.decoder=new yK(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const jm=({name:t,prefix:e,encode:n,decode:r})=>new bK(t,e,n,r),ap=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=hK(n,e);return jm({prefix:t,name:e,encode:r,decode:i=>S8(s(i))})},EK=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},vK=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},yr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>jm({prefix:e,name:t,encode(s){return vK(s,r,n)},decode(s){return EK(s,r,n,t)}}),CK=jm({prefix:"\0",name:"identity",encode:t=>gK(t),decode:t=>pK(t)});var _K=Object.freeze({__proto__:null,identity:CK});const AK=yr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var SK=Object.freeze({__proto__:null,base2:AK});const xK=yr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var IK=Object.freeze({__proto__:null,base8:xK});const NK=ap({prefix:"9",name:"base10",alphabet:"0123456789"});var TK=Object.freeze({__proto__:null,base10:NK});const RK=yr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),OK=yr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var PK=Object.freeze({__proto__:null,base16:RK,base16upper:OK});const kK=yr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),BK=yr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),DK=yr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),UK=yr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),MK=yr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$K=yr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),LK=yr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),FK=yr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),jK=yr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var qK=Object.freeze({__proto__:null,base32:kK,base32upper:BK,base32pad:DK,base32padupper:UK,base32hex:MK,base32hexupper:$K,base32hexpad:LK,base32hexpadupper:FK,base32z:jK});const zK=ap({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),HK=ap({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var WK=Object.freeze({__proto__:null,base36:zK,base36upper:HK});const VK=ap({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),KK=ap({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var GK=Object.freeze({__proto__:null,base58btc:VK,base58flickr:KK});const YK=yr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ZK=yr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),JK=yr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),XK=yr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var QK=Object.freeze({__proto__:null,base64:YK,base64pad:ZK,base64url:JK,base64urlpad:XK});const I8=Array.from(""),eG=I8.reduce((t,e,n)=>(t[n]=e,t),[]),tG=I8.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function nG(t){return t.reduce((e,n)=>(e+=eG[n],e),"")}function rG(t){const e=[];for(const n of t){const r=tG[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const sG=jm({prefix:"",name:"base256emoji",encode:nG,decode:rG});var iG=Object.freeze({__proto__:null,base256emoji:sG}),oG=N8,oS=128,aG=-128,cG=Math.pow(2,31);function N8(t,e,n){e=e||[],n=n||0;for(var r=n;t>=cG;)e[n++]=t&255|oS,t/=128;for(;t&aG;)e[n++]=t&255|oS,t>>>=7;return e[n]=t|0,N8.bytes=n-r+1,e}var uG=fE,lG=128,aS=127;function fE(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw fE.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&aS)<<s:(o&aS)*Math.pow(2,s),s+=7}while(o>=lG);return fE.bytes=i-r,n}var dG=Math.pow(2,7),fG=Math.pow(2,14),hG=Math.pow(2,21),pG=Math.pow(2,28),gG=Math.pow(2,35),mG=Math.pow(2,42),yG=Math.pow(2,49),wG=Math.pow(2,56),bG=Math.pow(2,63),EG=function(t){return t<dG?1:t<fG?2:t<hG?3:t<pG?4:t<gG?5:t<mG?6:t<yG?7:t<wG?8:t<bG?9:10},vG={encode:oG,decode:uG,encodingLength:EG},T8=vG;const cS=(t,e,n=0)=>(T8.encode(t,e,n),e),uS=t=>T8.encodingLength(t),hE=(t,e)=>{const n=e.byteLength,r=uS(t),s=r+uS(n),i=new Uint8Array(s+n);return cS(t,i,0),cS(n,i,r),i.set(e,s),new CG(t,n,e,i)};let CG=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const R8=({name:t,code:e,encode:n})=>new _G(t,e,n);let _G=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?hE(this.code,n):n.then(r=>hE(this.code,r))}else throw Error("Unknown type, must be binary type")}};const O8=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),AG=R8({name:"sha2-256",code:18,encode:O8("SHA-256")}),SG=R8({name:"sha2-512",code:19,encode:O8("SHA-512")});var xG=Object.freeze({__proto__:null,sha256:AG,sha512:SG});const P8=0,IG="identity",k8=S8,NG=t=>hE(P8,k8(t)),TG={code:P8,name:IG,encode:k8,digest:NG};var RG=Object.freeze({__proto__:null,identity:TG});new TextEncoder,new TextDecoder;const lS={..._K,...SK,...IK,...TK,...PK,...qK,...WK,...GK,...QK,...iG};({...xG,...RG});function B8(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const dS=B8("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Fw=B8("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=_8(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),D8={utf8:dS,"utf-8":dS,hex:lS.base16,latin1:Fw,ascii:Fw,binary:Fw,...lS};function qm(t,e="utf8"){const n=D8[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function hd(t,e="utf8"){const n=D8[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?_C(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function fS(t){return Cu(qm(hd(t,Fm),v8))}function Sg(t){return qm(hd(_u(t),v8),Fm)}function U8(t){const e=hd(uK,iS),n=cK+qm(A8([e,t]),iS);return[oK,aK,n].join(iK)}function OG(t){return qm(t,Fm)}function PG(t){return hd(t,Fm)}function kG(t){return hd([Sg(t.header),Sg(t.payload)].join(Ag),C8)}function BG(t){return[Sg(t.header),Sg(t.payload),OG(t.signature)].join(Ag)}function pE(t){const e=t.split(Ag),n=fS(e[0]),r=fS(e[1]),s=PG(e[2]),i=hd(e.slice(0,2).join(Ag),C8);return{header:n,payload:r,signature:s,data:i}}function hS(t=l8(lK)){const e=E8.getPublicKey(t);return{secretKey:A8([t,e]),publicKey:e}}async function DG(t,e,n,r,s=Ae.fromMiliseconds(Date.now())){const i={alg:rK,typ:sK},o=U8(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=kG({header:i,payload:c}),l=E8.sign(u,r.secretKey.slice(0,32));return BG({header:i,payload:c,signature:l})}var pS=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},UG=(function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t})(),MG=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t})(),$G=(function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t})(),LG=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),FG=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),jG=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,qG=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,gS=3,zG=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",jG]],mS=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function HG(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new FG:typeof navigator<"u"?VG(navigator.userAgent):GG()}function WG(t){return t!==""&&zG.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function VG(t){var e=WG(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new LG;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<gS&&(s=pS(pS([],s,!0),YG(gS-s.length),!0)):s=[];var i=s.join("."),o=KG(t),a=qG.exec(t);return a&&a[1]?new $G(n,i,o,a[1]):new UG(n,i,o)}function KG(t){for(var e=0,n=mS.length;e<n;e++){var r=mS[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function GG(){var t=typeof process<"u"&&process.version;return t?new MG(process.version.slice(1)):null}function YG(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Ft={},yS;function M8(){if(yS)return Ft;yS=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.getLocalStorage=Ft.getLocalStorageOrThrow=Ft.getCrypto=Ft.getCryptoOrThrow=Ft.getLocation=Ft.getLocationOrThrow=Ft.getNavigator=Ft.getNavigatorOrThrow=Ft.getDocument=Ft.getDocumentOrThrow=Ft.getFromWindowOrThrow=Ft.getFromWindow=void 0;function t(f){let h;return typeof window<"u"&&typeof window[f]<"u"&&(h=window[f]),h}Ft.getFromWindow=t;function e(f){const h=t(f);if(!h)throw new Error(`${f} is not defined in Window`);return h}Ft.getFromWindowOrThrow=e;function n(){return e("document")}Ft.getDocumentOrThrow=n;function r(){return t("document")}Ft.getDocument=r;function s(){return e("navigator")}Ft.getNavigatorOrThrow=s;function i(){return t("navigator")}Ft.getNavigator=i;function o(){return e("location")}Ft.getLocationOrThrow=o;function a(){return t("location")}Ft.getLocation=a;function c(){return e("crypto")}Ft.getCryptoOrThrow=c;function u(){return t("crypto")}Ft.getCrypto=u;function l(){return e("localStorage")}Ft.getLocalStorageOrThrow=l;function d(){return t("localStorage")}return Ft.getLocalStorage=d,Ft}var aa=M8(),Rd={},wS;function ZG(){if(wS)return Rd;wS=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.getWindowMetadata=void 0;const t=M8();function e(){let n,r;try{n=t.getDocumentOrThrow(),r=t.getLocationOrThrow()}catch{return null}function s(){const h=n.getElementsByTagName("link"),m=[];for(let y=0;y<h.length;y++){const E=h[y],S=E.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const R=E.getAttribute("href");if(R)if(R.toLowerCase().indexOf("https:")===-1&&R.toLowerCase().indexOf("http:")===-1&&R.indexOf("//")!==0){let C=r.protocol+"//"+r.host;if(R.indexOf("/")===0)C+=R;else{const T=r.pathname.split("/");T.pop();const N=T.join("/");C+=N+"/"+R}m.push(C)}else if(R.indexOf("//")===0){const C=r.protocol+R;m.push(C)}else m.push(R)}}return m}function i(...h){const m=n.getElementsByTagName("meta");for(let y=0;y<m.length;y++){const E=m[y],S=["itemprop","property","name"].map(R=>E.getAttribute(R)).filter(R=>R?h.includes(R):!1);if(S.length&&S){const R=E.getAttribute("content");if(R)return R}}return""}function o(){let h=i("name","og:site_name","og:title","twitter:title");return h||(h=n.title),h}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),u=a(),l=r.origin,d=s();return{description:u,url:l,icons:d,name:c}}return Rd.getWindowMetadata=e,Rd}var JG=ZG();const XG="0.1.1";function QG(){return XG}class en extends Error{constructor(e,n={}){const r=(()=>{if(n.cause instanceof en){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof en&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${QG()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return $8(this,e)}}function $8(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?$8(t.cause,e):e?null:t}const Zu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function eY(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Nh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Au(t,...e){if(!eY(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function tY(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Nh(t.outputLen),Nh(t.blockLen)}function Xl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function L8(t,e){Au(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function nY(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ql(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function jw(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ui(t,e){return t<<32-e|t>>>e}const rY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function sY(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function iY(t){for(let e=0;e<t.length;e++)t[e]=sY(t[e]);return t}const bS=rY?t=>t:iY;function oY(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function zm(t){return typeof t=="string"&&(t=oY(t)),Au(t),t}function aY(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Au(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let AC=class{};function F8(t){const e=r=>t().update(zm(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function cY(t=32){if(Zu&&typeof Zu.getRandomValues=="function")return Zu.getRandomValues(new Uint8Array(t));if(Zu&&typeof Zu.randomBytes=="function")return Uint8Array.from(Zu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function uY(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function lY(t,e,n){return t&e^~t&n}function dY(t,e,n){return t&e^t&n^e&n}let fY=class extends AC{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=jw(this.buffer)}update(e){Xl(this),e=zm(e),Au(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=jw(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Xl(this),L8(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ql(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;uY(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=jw(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const ba=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Jp=BigInt(2**32-1),ES=BigInt(32);function hY(t,e=!1){return e?{h:Number(t&Jp),l:Number(t>>ES&Jp)}:{h:Number(t>>ES&Jp)|0,l:Number(t&Jp)|0}}function pY(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=hY(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const gY=(t,e,n)=>t<<n|e>>>32-n,mY=(t,e,n)=>e<<n|t>>>32-n,yY=(t,e,n)=>e<<n-32|t>>>64-n,wY=(t,e,n)=>t<<n-32|e>>>64-n,bY=BigInt(0),Od=BigInt(1),EY=BigInt(2),vY=BigInt(7),CY=BigInt(256),_Y=BigInt(113),j8=[],q8=[],z8=[];for(let t=0,e=Od,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],j8.push(2*(5*r+n)),q8.push((t+1)*(t+2)/2%64);let s=bY;for(let i=0;i<7;i++)e=(e<<Od^(e>>vY)*_Y)%CY,e&EY&&(s^=Od<<(Od<<BigInt(i))-Od);z8.push(s)}const H8=pY(z8,!0),AY=H8[0],SY=H8[1],vS=(t,e,n)=>n>32?yY(t,e,n):gY(t,e,n),CS=(t,e,n)=>n>32?wY(t,e,n):mY(t,e,n);function xY(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=vS(u,l,1)^n[a],f=CS(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=q8[o],c=vS(s,i,a),u=CS(s,i,a),l=j8[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=AY[r],t[1]^=SY[r]}Ql(n)}class SC extends AC{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Nh(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=nY(this.state)}clone(){return this._cloneInto()}keccak(){bS(this.state32),xY(this.state32,this.rounds),bS(this.state32),this.posOut=0,this.pos=0}update(e){Xl(this),e=zm(e),Au(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Xl(this,!1),Au(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Nh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(L8(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ql(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new SC(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const IY=(t,e,n)=>F8(()=>new SC(e,t,n)),NY=IY(1,136,256/8),TY=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ea=new Uint32Array(64);let RY=class extends fY{constructor(e=32){super(64,e,8,!1),this.A=ba[0]|0,this.B=ba[1]|0,this.C=ba[2]|0,this.D=ba[3]|0,this.E=ba[4]|0,this.F=ba[5]|0,this.G=ba[6]|0,this.H=ba[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ea[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Ea[d-15],h=Ea[d-2],m=Ui(f,7)^Ui(f,18)^f>>>3,y=Ui(h,17)^Ui(h,19)^h>>>10;Ea[d]=y+Ea[d-7]+m+Ea[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Ui(a,6)^Ui(a,11)^Ui(a,25),h=l+f+lY(a,c,u)+TY[d]+Ea[d]|0,y=(Ui(r,2)^Ui(r,13)^Ui(r,22))+dY(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+y|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){Ql(Ea)}destroy(){this.set(0,0,0,0,0,0,0,0),Ql(this.buffer)}};const OY=F8(()=>new RY);const xC=BigInt(0),gE=BigInt(1);function cp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function IC(t){if(!cp(t))throw new Error("Uint8Array expected")}function Th(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Xp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function W8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?xC:BigInt("0x"+t)}const V8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",PY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Rh(t){if(IC(t),V8)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=PY[t[n]];return e}const Ao={_0:48,_9:57,A:65,F:70,a:97,f:102};function _S(t){if(t>=Ao._0&&t<=Ao._9)return t-Ao._0;if(t>=Ao.A&&t<=Ao.F)return t-(Ao.A-10);if(t>=Ao.a&&t<=Ao.f)return t-(Ao.a-10)}function xg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(V8)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=_S(t.charCodeAt(i)),a=_S(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function lu(t){return W8(Rh(t))}function K8(t){return IC(t),W8(Rh(Uint8Array.from(t).reverse()))}function up(t,e){return xg(t.toString(16).padStart(e*2,"0"))}function G8(t,e){return up(t,e).reverse()}function Vs(t,e,n){let r;if(typeof e=="string")try{r=xg(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(cp(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Ig(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];IC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const qw=t=>typeof t=="bigint"&&xC<=t;function NC(t,e,n){return qw(t)&&qw(e)&&qw(n)&&e<=t&&t<n}function Rl(t,e,n,r){if(!NC(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function kY(t){let e;for(e=0;t>xC;t>>=gE,e+=1);return e}const Hm=t=>(gE<<BigInt(t))-gE,zw=t=>new Uint8Array(t),AS=t=>Uint8Array.from(t);function BY(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=zw(t),s=zw(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=zw(0))=>{s=a(AS([0]),d),r=a(),d.length!==0&&(s=a(AS([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return Ig(...f)};return(d,f)=>{o(),c(d);let h;for(;!(h=f(u()));)c();return o(),h}}const DY={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||cp(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Wm(t,e,n={}){const r=(s,i,o)=>{const a=DY[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function SS(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}function UY(t,e){if(TS(t)>e)throw new rZ({givenSize:TS(t),maxSize:e})}const So={zero:48,nine:57,A:65,F:70,a:97,f:102};function xS(t){if(t>=So.zero&&t<=So.nine)return t-So.zero;if(t>=So.A&&t<=So.F)return t-(So.A-10);if(t>=So.a&&t<=So.f)return t-(So.a-10)}function MY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new sZ({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function Y8(t,e){if(bc(t)>e)throw new KY({givenSize:bc(t),maxSize:e})}function $Y(t,e){if(typeof e=="number"&&e>0&&e>bc(t)-1)throw new X8({offset:e,position:"start",size:bc(t)})}function LY(t,e,n){if(typeof e=="number"&&typeof n=="number"&&bc(t)!==n-e)throw new X8({offset:n,position:"end",size:bc(t)})}function Z8(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new GY({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const FY="#__bigint";function TC(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+FY:s,n)}const jY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qY(t,e={}){const{strict:n=!1}=e;if(!t)throw new IS(t);if(typeof t!="string")throw new IS(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new NS(t);if(!t.startsWith("0x"))throw new NS(t)}function zY(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function RC(t){return t instanceof Uint8Array?Ng(t):Array.isArray(t)?Ng(new Uint8Array(t)):t}function Ng(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=jY[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Y8(r,e.size),J8(r,e.size)):r}function Hw(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new VY({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${t}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?HY(c,r):c}function HY(t,e){return Z8(t,{dir:"left",size:e})}function J8(t,e){return Z8(t,{dir:"right",size:e})}function Mo(t,e,n,r={}){const{strict:s}=r;$Y(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&LY(i,e,n),i}function bc(t){return Math.ceil((t.length-2)/2)}function WY(t,e={}){const{strict:n=!1}=e;try{return qY(t,{strict:n}),!0}catch{return!1}}class VY extends en{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class IS extends en{constructor(e){super(`Value \`${typeof e=="object"?TC(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class NS extends en{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let KY=class extends en{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class X8 extends en{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let GY=class extends en{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const YY=new TextEncoder;function ZY(t){if(!(t instanceof Uint8Array)){if(!t)throw new Qp(t);if(typeof t!="object")throw new Qp(t);if(!("BYTES_PER_ELEMENT"in t))throw new Qp(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new Qp(t)}}function JY(t){return t instanceof Uint8Array?t:typeof t=="string"?QY(t):XY(t)}function XY(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function QY(t,e={}){const{size:n}=e;let r=t;n&&(Y8(t,n),r=J8(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=xS(s.charCodeAt(c++)),l=xS(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new en(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u*16+l}return o}function eZ(t,e={}){const{size:n}=e,r=YY.encode(t);return typeof n=="number"?(UY(r,n),tZ(r,n)):r}function tZ(t,e){return MY(t,{dir:"right",size:e})}function TS(t){return t.length}function nZ(t){try{return ZY(t),!0}catch{return!1}}class Qp extends en{constructor(e){super(`Value \`${typeof e=="object"?TC(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class rZ extends en{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class sZ extends en{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function Q8(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=NY(JY(t));return n==="Bytes"?r:Ng(r)}class iZ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const oZ={checksum:new iZ(8192)},Ww=oZ.checksum;function eR(t,e={}){const{compressed:n}=e,{prefix:r,x:s,y:i}=t;if(n===!1||typeof s=="bigint"&&typeof i=="bigint"){if(r!==4)throw new RS({prefix:r,cause:new fZ});return}if(n===!0||typeof s=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new RS({prefix:r,cause:new dZ});return}throw new lZ({publicKey:t})}function aZ(t){const e=(()=>{if(WY(t))return tR(t);if(nZ(t))return cZ(t);const{prefix:n,x:r,y:s}=t;return typeof r=="bigint"&&typeof s=="bigint"?{prefix:n??4,x:r,y:s}:{prefix:n,x:r}})();return eR(e),e}function cZ(t){return tR(Ng(t))}function tR(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new hZ({publicKey:t});if(t.length===130){const r=BigInt(Mo(t,0,32)),s=BigInt(Mo(t,32,64));return{prefix:4,x:r,y:s}}if(t.length===132){const r=Number(Mo(t,0,1)),s=BigInt(Mo(t,1,33)),i=BigInt(Mo(t,33,65));return{prefix:r,x:s,y:i}}const e=Number(Mo(t,0,1)),n=BigInt(Mo(t,1,33));return{prefix:e,x:n}}function uZ(t,e={}){eR(t);const{prefix:n,x:r,y:s}=t,{includePrefix:i=!0}=e;return zY(i?Hw(n,{size:1}):"0x",Hw(r,{size:32}),typeof s=="bigint"?Hw(s,{size:32}):"0x")}class lZ extends en{constructor({publicKey:e}){super(`Value \`${TC(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class RS extends en{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class dZ extends en{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class fZ extends en{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let hZ=class extends en{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${bc(RC(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const pZ=/^0x[a-fA-F0-9]{40}$/;function nR(t,e={}){const{strict:n=!0}=e;if(!pZ.test(t))throw new OS({address:t,cause:new yZ});if(n){if(t.toLowerCase()===t)return;if(rR(t)!==t)throw new OS({address:t,cause:new wZ})}}function rR(t){if(Ww.has(t))return Ww.get(t);nR(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=Q8(eZ(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return Ww.set(t,s),s}function gZ(t,e={}){const{checksum:n=!1}=e;return nR(t),n?rR(t):t}function mZ(t,e={}){const n=Q8(`0x${uZ(t).slice(4)}`).substring(26);return gZ(`0x${n}`,e)}class OS extends en{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class yZ extends en{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class wZ extends en{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}let sR=class extends AC{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,tY(e);const r=zm(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ql(i)}update(e){return Xl(this),this.iHash.update(e),this}digestInto(e){Xl(this),Au(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const iR=(t,e,n)=>new sR(t,e).update(n).digest();iR.create=(t,e)=>new sR(t,e);const ps=BigInt(0),Kr=BigInt(1),Jc=BigInt(2),bZ=BigInt(3),oR=BigInt(4),aR=BigInt(5),cR=BigInt(8);function us(t,e){const n=t%e;return n>=ps?n:e+n}function $s(t,e,n){let r=t;for(;e-- >ps;)r*=r,r%=n;return r}function mE(t,e){if(t===ps)throw new Error("invert: expected non-zero number");if(e<=ps)throw new Error("invert: expected positive modulus, got "+e);let n=us(t,e),r=e,s=ps,i=Kr;for(;n!==ps;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==Kr)throw new Error("invert: does not exist");return us(s,e)}function uR(t,e){const n=(t.ORDER+Kr)/oR,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function EZ(t,e){const n=(t.ORDER-aR)/cR,r=t.mul(e,Jc),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Jc),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function vZ(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Kr,n=0;for(;e%Jc===ps;)e/=Jc,n++;let r=Jc;const s=OC(t);for(;PS(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return uR;let i=s.pow(r,e);const o=(e+Kr)/Jc;return function(c,u){if(c.is0(u))return u;if(PS(c,u)!==1)throw new Error("Cannot find square root");let l=n,d=c.mul(c.ONE,i),f=c.pow(u,e),h=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let m=1,y=c.sqr(f);for(;!c.eql(y,c.ONE);)if(m++,y=c.sqr(y),m===l)throw new Error("Cannot find square root");const E=Kr<<BigInt(l-m-1),S=c.pow(d,E);l=m,d=c.sqr(S),f=c.mul(f,d),h=c.mul(h,S)}return h}}function CZ(t){return t%oR===bZ?uR:t%cR===aR?EZ:vZ(t)}const _Z=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function AZ(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=_Z.reduce((r,s)=>(r[s]="function",r),e);return Wm(t,n)}function SZ(t,e,n){if(n<ps)throw new Error("invalid exponent, negatives unsupported");if(n===ps)return t.ONE;if(n===Kr)return e;let r=t.ONE,s=e;for(;n>ps;)n&Kr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Kr;return r}function lR(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function PS(t,e){const n=(t.ORDER-Kr)/Jc,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function dR(t,e){e!==void 0&&Nh(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function OC(t,e,n=!1,r={}){if(t<=ps)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=dR(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Hm(s),ZERO:ps,ONE:Kr,create:c=>us(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ps<=c&&c<t},is0:c=>c===ps,isOdd:c=>(c&Kr)===Kr,neg:c=>us(-c,t),eql:(c,u)=>c===u,sqr:c=>us(c*c,t),add:(c,u)=>us(c+u,t),sub:(c,u)=>us(c-u,t),mul:(c,u)=>us(c*u,t),pow:(c,u)=>SZ(a,c,u),div:(c,u)=>us(c*mE(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>mE(c,t),sqrt:r.sqrt||(c=>(o||(o=CZ(t)),o(a,c))),toBytes:c=>n?G8(c,i):up(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?K8(c):lu(c)},invertBatch:c=>lR(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function fR(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function hR(t){const e=fR(t);return e+Math.ceil(e/2)}function xZ(t,e,n=!1){const r=t.length,s=fR(e),i=hR(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?K8(t):lu(t),a=us(o,e-Kr)+Kr;return n?G8(a,s):up(a,s)}const kS=BigInt(0),yE=BigInt(1);function Vw(t,e){const n=e.negate();return t?n:e}function pR(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Kw(t,e){pR(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Hm(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function BS(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=yE);const u=e*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:u}}function IZ(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function NZ(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Gw=new WeakMap,gR=new WeakMap;function Yw(t){return gR.get(t)||1}function TZ(t,e){return{constTimeNegate:Vw,hasPrecomputes(n){return Yw(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>kS;)r&yE&&(s=s.add(i)),i=i.double(),r>>=yE;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Kw(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Kw(n,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:m}=BS(s,c,a);s=u,d?o=o.add(Vw(h,r[m])):i=i.add(Vw(f,r[l]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Kw(n,e);for(let a=0;a<o.windows&&s!==kS;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=BS(s,a,o);if(s=c,!l){const f=r[u];i=i.add(d?f.negate():f)}}return i},getPrecomputes(n,r,s){let i=Gw.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Gw.set(r,s(i))),i},wNAFCached(n,r,s){const i=Yw(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Yw(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){pR(r,e),gR.set(n,r),Gw.delete(n)}}}function RZ(t,e,n,r){IZ(n,t),NZ(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=kY(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Hm(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){l.fill(o);for(let y=0;y<i;y++){const E=r[y],S=Number(E>>BigInt(h)&u);l[S]=l[S].add(n[y])}let m=o;for(let y=l.length-1,E=o;y>0;y--)E=E.add(l[y]),m=m.add(E);if(f=f.add(m),h!==0)for(let y=0;y<c;y++)f=f.double()}return f}function mR(t){return AZ(t.Fp),Wm(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...dR(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function DS(t){t.lowS!==void 0&&Th("lowS",t.lowS),t.prehash!==void 0&&Th("prehash",t.prehash)}function OZ(t){const e=mR(t);Wm(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}let PZ=class extends Error{constructor(e=""){super(e)}};const Fo={Err:PZ,_tlv:{encode:(t,e)=>{const{Err:n}=Fo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Xp(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Xp(s.length/2|128):"";return Xp(t)+i+s+e},decode(t,e){const{Err:n}=Fo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Fo;if(t<Ho)throw new e("integer: negative integers are not allowed");let n=Xp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Fo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return lu(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Fo,s=Vs("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=Fo,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function Zw(t,e){return Rh(up(t,e))}const Ho=BigInt(0),Jn=BigInt(1);BigInt(2);const Jw=BigInt(3),kZ=BigInt(4);function BZ(t){const e=OZ(t),{Fp:n}=e,r=OC(e.n,e.nBitLength),s=e.toBytes||((C,T,N)=>{const U=T.toAffine();return Ig(Uint8Array.from([4]),n.toBytes(U.x),n.toBytes(U.y))}),i=e.fromBytes||(C=>{const T=C.subarray(1),N=n.fromBytes(T.subarray(0,n.BYTES)),U=n.fromBytes(T.subarray(n.BYTES,2*n.BYTES));return{x:N,y:U}});function o(C){const{a:T,b:N}=e,U=n.sqr(C),q=n.mul(U,C);return n.add(n.add(q,n.mul(C,T)),N)}function a(C,T){const N=n.sqr(T),U=o(C);return n.eql(N,U)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,Jw),kZ),u=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function l(C){return NC(C,Jn,e.n)}function d(C){const{allowedPrivateKeyLengths:T,nByteLength:N,wrapPrivateKey:U,n:q}=e;if(T&&typeof C!="bigint"){if(cp(C)&&(C=Rh(C)),typeof C!="string"||!T.includes(C.length))throw new Error("invalid private key");C=C.padStart(N*2,"0")}let H;try{H=typeof C=="bigint"?C:lu(Vs("private key",C,N))}catch{throw new Error("invalid private key, expected hex or "+N+" bytes, got "+typeof C)}return U&&(H=us(H,q)),Rl("private key",H,Jn,q),H}function f(C){if(!(C instanceof y))throw new Error("ProjectivePoint expected")}const h=SS((C,T)=>{const{px:N,py:U,pz:q}=C;if(n.eql(q,n.ONE))return{x:N,y:U};const H=C.is0();T==null&&(T=H?n.ONE:n.inv(q));const P=n.mul(N,T),$=n.mul(U,T),W=n.mul(q,T);if(H)return{x:n.ZERO,y:n.ZERO};if(!n.eql(W,n.ONE))throw new Error("invZ was invalid");return{x:P,y:$}}),m=SS(C=>{if(C.is0()){if(e.allowInfinityPoint&&!n.is0(C.py))return;throw new Error("bad point: ZERO")}const{x:T,y:N}=C.toAffine();if(!n.isValid(T)||!n.isValid(N))throw new Error("bad point: x or y not FE");if(!a(T,N))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class y{constructor(T,N,U){if(T==null||!n.isValid(T))throw new Error("x required");if(N==null||!n.isValid(N)||n.is0(N))throw new Error("y required");if(U==null||!n.isValid(U))throw new Error("z required");this.px=T,this.py=N,this.pz=U,Object.freeze(this)}static fromAffine(T){const{x:N,y:U}=T||{};if(!T||!n.isValid(N)||!n.isValid(U))throw new Error("invalid affine point");if(T instanceof y)throw new Error("projective point not allowed");const q=H=>n.eql(H,n.ZERO);return q(N)&&q(U)?y.ZERO:new y(N,U,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(T){const N=lR(n,T.map(U=>U.pz));return T.map((U,q)=>U.toAffine(N[q])).map(y.fromAffine)}static fromHex(T){const N=y.fromAffine(i(Vs("pointHex",T)));return N.assertValidity(),N}static fromPrivateKey(T){return y.BASE.multiply(d(T))}static msm(T,N){return RZ(y,r,T,N)}_setWindowSize(T){R.setWindowSize(this,T)}assertValidity(){m(this)}hasEvenY(){const{y:T}=this.toAffine();if(n.isOdd)return!n.isOdd(T);throw new Error("Field doesn't support isOdd")}equals(T){f(T);const{px:N,py:U,pz:q}=this,{px:H,py:P,pz:$}=T,W=n.eql(n.mul(N,$),n.mul(H,q)),z=n.eql(n.mul(U,$),n.mul(P,q));return W&&z}negate(){return new y(this.px,n.neg(this.py),this.pz)}double(){const{a:T,b:N}=e,U=n.mul(N,Jw),{px:q,py:H,pz:P}=this;let $=n.ZERO,W=n.ZERO,z=n.ZERO,_=n.mul(q,q),p=n.mul(H,H),g=n.mul(P,P),b=n.mul(q,H);return b=n.add(b,b),z=n.mul(q,P),z=n.add(z,z),$=n.mul(T,z),W=n.mul(U,g),W=n.add($,W),$=n.sub(p,W),W=n.add(p,W),W=n.mul($,W),$=n.mul(b,$),z=n.mul(U,z),g=n.mul(T,g),b=n.sub(_,g),b=n.mul(T,b),b=n.add(b,z),z=n.add(_,_),_=n.add(z,_),_=n.add(_,g),_=n.mul(_,b),W=n.add(W,_),g=n.mul(H,P),g=n.add(g,g),_=n.mul(g,b),$=n.sub($,_),z=n.mul(g,p),z=n.add(z,z),z=n.add(z,z),new y($,W,z)}add(T){f(T);const{px:N,py:U,pz:q}=this,{px:H,py:P,pz:$}=T;let W=n.ZERO,z=n.ZERO,_=n.ZERO;const p=e.a,g=n.mul(e.b,Jw);let b=n.mul(N,H),x=n.mul(U,P),O=n.mul(q,$),k=n.add(N,U),M=n.add(H,P);k=n.mul(k,M),M=n.add(b,x),k=n.sub(k,M),M=n.add(N,q);let B=n.add(H,$);return M=n.mul(M,B),B=n.add(b,O),M=n.sub(M,B),B=n.add(U,q),W=n.add(P,$),B=n.mul(B,W),W=n.add(x,O),B=n.sub(B,W),_=n.mul(p,M),W=n.mul(g,O),_=n.add(W,_),W=n.sub(x,_),_=n.add(x,_),z=n.mul(W,_),x=n.add(b,b),x=n.add(x,b),O=n.mul(p,O),M=n.mul(g,M),x=n.add(x,O),O=n.sub(b,O),O=n.mul(p,O),M=n.add(M,O),b=n.mul(x,M),z=n.add(z,b),b=n.mul(B,M),W=n.mul(k,W),W=n.sub(W,b),b=n.mul(k,x),_=n.mul(B,_),_=n.add(_,b),new y(W,z,_)}subtract(T){return this.add(T.negate())}is0(){return this.equals(y.ZERO)}wNAF(T){return R.wNAFCached(this,T,y.normalizeZ)}multiplyUnsafe(T){const{endo:N,n:U}=e;Rl("scalar",T,Ho,U);const q=y.ZERO;if(T===Ho)return q;if(this.is0()||T===Jn)return this;if(!N||R.hasPrecomputes(this))return R.wNAFCachedUnsafe(this,T,y.normalizeZ);let{k1neg:H,k1:P,k2neg:$,k2:W}=N.splitScalar(T),z=q,_=q,p=this;for(;P>Ho||W>Ho;)P&Jn&&(z=z.add(p)),W&Jn&&(_=_.add(p)),p=p.double(),P>>=Jn,W>>=Jn;return H&&(z=z.negate()),$&&(_=_.negate()),_=new y(n.mul(_.px,N.beta),_.py,_.pz),z.add(_)}multiply(T){const{endo:N,n:U}=e;Rl("scalar",T,Jn,U);let q,H;if(N){const{k1neg:P,k1:$,k2neg:W,k2:z}=N.splitScalar(T);let{p:_,f:p}=this.wNAF($),{p:g,f:b}=this.wNAF(z);_=R.constTimeNegate(P,_),g=R.constTimeNegate(W,g),g=new y(n.mul(g.px,N.beta),g.py,g.pz),q=_.add(g),H=p.add(b)}else{const{p:P,f:$}=this.wNAF(T);q=P,H=$}return y.normalizeZ([q,H])[0]}multiplyAndAddUnsafe(T,N,U){const q=y.BASE,H=($,W)=>W===Ho||W===Jn||!$.equals(q)?$.multiplyUnsafe(W):$.multiply(W),P=H(this,N).add(H(T,U));return P.is0()?void 0:P}toAffine(T){return h(this,T)}isTorsionFree(){const{h:T,isTorsionFree:N}=e;if(T===Jn)return!0;if(N)return N(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:T,clearCofactor:N}=e;return T===Jn?this:N?N(y,this):this.multiplyUnsafe(e.h)}toRawBytes(T=!0){return Th("isCompressed",T),this.assertValidity(),s(y,this,T)}toHex(T=!0){return Th("isCompressed",T),Rh(this.toRawBytes(T))}}y.BASE=new y(e.Gx,e.Gy,n.ONE),y.ZERO=new y(n.ZERO,n.ONE,n.ZERO);const{endo:E,nBitLength:S}=e,R=TZ(y,E?Math.ceil(S/2):S);return{CURVE:e,ProjectivePoint:y,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function DZ(t){const e=mR(t);return Wm(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function UZ(t){const e=DZ(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(g){return us(g,r)}function u(g){return mE(g,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:h}=BZ({...e,toBytes(g,b,x){const O=b.toAffine(),k=n.toBytes(O.x),M=Ig;return Th("isCompressed",x),x?M(Uint8Array.from([b.hasEvenY()?2:3]),k):M(Uint8Array.from([4]),k,n.toBytes(O.y))},fromBytes(g){const b=g.length,x=g[0],O=g.subarray(1);if(b===o&&(x===2||x===3)){const k=lu(O);if(!NC(k,Jn,n.ORDER))throw new Error("Point is not on curve");const M=f(k);let B;try{B=n.sqrt(M)}catch(D){const F=D instanceof Error?": "+D.message:"";throw new Error("Point is not on curve"+F)}const w=(B&Jn)===Jn;return(x&1)===1!==w&&(B=n.neg(B)),{x:k,y:B}}else if(b===a&&x===4){const k=n.fromBytes(O.subarray(0,n.BYTES)),M=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:k,y:M}}else{const k=o,M=a;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+M+", got "+b)}}});function m(g){const b=r>>Jn;return g>b}function y(g){return m(g)?c(-g):g}const E=(g,b,x)=>lu(g.slice(b,x));class S{constructor(b,x,O){Rl("r",b,Jn,r),Rl("s",x,Jn,r),this.r=b,this.s=x,O!=null&&(this.recovery=O),Object.freeze(this)}static fromCompact(b){const x=s;return b=Vs("compactSignature",b,x*2),new S(E(b,0,x),E(b,x,2*x))}static fromDER(b){const{r:x,s:O}=Fo.toSig(Vs("DER",b));return new S(x,O)}assertValidity(){}addRecoveryBit(b){return new S(this.r,this.s,b)}recoverPublicKey(b){const{r:x,s:O,recovery:k}=this,M=q(Vs("msgHash",b));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const B=k===2||k===3?x+e.n:x;if(B>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const w=(k&1)===0?"02":"03",v=l.fromHex(w+Zw(B,n.BYTES)),D=u(B),F=c(-M*D),Z=c(O*D),ee=l.BASE.multiplyAndAddUnsafe(v,F,Z);if(!ee)throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return xg(this.toDERHex())}toDERHex(){return Fo.hexFromSig(this)}toCompactRawBytes(){return xg(this.toCompactHex())}toCompactHex(){const b=s;return Zw(this.r,b)+Zw(this.s,b)}}const R={isValidPrivateKey(g){try{return d(g),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const g=hR(e.n);return xZ(e.randomBytes(g),e.n)},precompute(g=8,b=l.BASE){return b._setWindowSize(g),b.multiply(BigInt(3)),b}};function C(g,b=!0){return l.fromPrivateKey(g).toRawBytes(b)}function T(g){if(typeof g=="bigint")return!1;if(g instanceof l)return!0;const x=Vs("key",g).length,O=n.BYTES,k=O+1,M=2*O+1;if(!(e.allowedPrivateKeyLengths||s===k))return x===k||x===M}function N(g,b,x=!0){if(T(g)===!0)throw new Error("first arg must be private key");if(T(b)===!1)throw new Error("second arg must be public key");return l.fromHex(b).multiply(d(g)).toRawBytes(x)}const U=e.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");const b=lu(g),x=g.length*8-i;return x>0?b>>BigInt(x):b},q=e.bits2int_modN||function(g){return c(U(g))},H=Hm(i);function P(g){return Rl("num < 2^"+i,g,Ho,H),up(g,s)}function $(g,b,x=W){if(["recovered","canonical"].some(ae=>ae in x))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:k}=e;let{lowS:M,prehash:B,extraEntropy:w}=x;M==null&&(M=!0),g=Vs("msgHash",g),DS(x),B&&(g=Vs("prehashed msgHash",O(g)));const v=q(g),D=d(b),F=[P(D),P(v)];if(w!=null&&w!==!1){const ae=w===!0?k(n.BYTES):w;F.push(Vs("extraEntropy",ae))}const Z=Ig(...F),ee=v;function de(ae){const Oe=U(ae);if(!h(Oe))return;const Qe=u(Oe),G=l.BASE.multiply(Oe).toAffine(),J=c(G.x);if(J===Ho)return;const ne=c(Qe*c(ee+J*D));if(ne===Ho)return;let ce=(G.x===J?0:2)|Number(G.y&Jn),he=ne;return M&&m(ne)&&(he=y(ne),ce^=1),new S(J,he,ce)}return{seed:Z,k2sig:de}}const W={lowS:e.lowS,prehash:!1},z={lowS:e.lowS,prehash:!1};function _(g,b,x=W){const{seed:O,k2sig:k}=$(g,b,x),M=e;return BY(M.hash.outputLen,M.nByteLength,M.hmac)(O,k)}l.BASE._setWindowSize(8);function p(g,b,x,O=z){const k=g;b=Vs("msgHash",b),x=Vs("publicKey",x);const{lowS:M,prehash:B,format:w}=O;if(DS(O),"strict"in O)throw new Error("options.strict was renamed to lowS");if(w!==void 0&&w!=="compact"&&w!=="der")throw new Error("format must be compact or der");const v=typeof k=="string"||cp(k),D=!v&&!w&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!v&&!D)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let F,Z;try{if(D&&(F=new S(k.r,k.s)),v){try{w!=="compact"&&(F=S.fromDER(k))}catch(ce){if(!(ce instanceof Fo.Err))throw ce}!F&&w!=="der"&&(F=S.fromCompact(k))}Z=l.fromHex(x)}catch{return!1}if(!F||M&&F.hasHighS())return!1;B&&(b=e.hash(b));const{r:ee,s:de}=F,ae=q(b),Oe=u(de),Qe=c(ae*Oe),G=c(ee*Oe),J=l.BASE.multiplyAndAddUnsafe(Z,Qe,G)?.toAffine();return J?c(J.x)===ee:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:N,sign:_,verify:p,ProjectivePoint:l,Signature:S,utils:R}}function MZ(t){return{hash:t,hmac:(e,...n)=>iR(t,e,aY(...n)),randomBytes:cY}}function $Z(t,e){const n=r=>UZ({...t,...MZ(r)});return{...n(e),create:n}}const yR=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),US=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),LZ=BigInt(0),FZ=BigInt(1),wE=BigInt(2),MS=(t,e)=>(t+e/wE)/e;function jZ(t){const e=yR,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=$s(l,n,e)*l%e,f=$s(d,n,e)*l%e,h=$s(f,wE,e)*u%e,m=$s(h,s,e)*h%e,y=$s(m,i,e)*m%e,E=$s(y,a,e)*y%e,S=$s(E,c,e)*E%e,R=$s(S,a,e)*y%e,C=$s(R,n,e)*l%e,T=$s(C,o,e)*m%e,N=$s(T,r,e)*u%e,U=$s(N,wE,e);if(!bE.eql(bE.sqr(U),t))throw new Error("Cannot find square root");return U}const bE=OC(yR,void 0,void 0,{sqrt:jZ}),qZ=$Z({a:LZ,b:BigInt(7),Fp:bE,n:US,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=US,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-FZ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=MS(i*t,e),c=MS(-r*t,e);let u=us(t-a*n-c*s,e),l=us(-a*r-c*i,e);const d=u>o,f=l>o;if(d&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},OY);function zZ(t){if(t.length!==130&&t.length!==132)throw new WZ({signature:t});const e=BigInt(Mo(t,0,32)),n=BigInt(Mo(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return HZ(s)}catch{throw new VZ({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function HZ(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new KZ({value:t})}class WZ extends en{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${bc(RC(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class VZ extends en{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class KZ extends en{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const Ju=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function lp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function EE(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Uu(t,...e){if(!lp(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wR(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");EE(t.outputLen),EE(t.blockLen)}function Tg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function GZ(t,e){Uu(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ed(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Xw(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Mi(t,e){return t<<32-e|t>>>e}const bR=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",YZ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function du(t){if(Uu(t),bR)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=YZ[t[n]];return e}const xo={_0:48,_9:57,A:65,F:70,a:97,f:102};function $S(t){if(t>=xo._0&&t<=xo._9)return t-xo._0;if(t>=xo.A&&t<=xo.F)return t-(xo.A-10);if(t>=xo.a&&t<=xo.f)return t-(xo.a-10)}function Rg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(bR)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=$S(t.charCodeAt(i)),a=$S(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function ZZ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function PC(t){return typeof t=="string"&&(t=ZZ(t)),Uu(t),t}function Xi(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Uu(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let ER=class{};function kC(t){const e=r=>t().update(PC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function BC(t=32){if(Ju&&typeof Ju.getRandomValues=="function")return Ju.getRandomValues(new Uint8Array(t));if(Ju&&typeof Ju.randomBytes=="function")return Uint8Array.from(Ju.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const DC=BigInt(0),vE=BigInt(1);function Su(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function _i(t,e,n=""){const r=lp(t),s=t?.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function e0(t){const e=t.toString(16);return e.length&1?"0"+e:e}function vR(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?DC:BigInt("0x"+t)}function Vm(t){return vR(du(t))}function Oh(t){return Uu(t),vR(du(Uint8Array.from(t).reverse()))}function UC(t,e){return Rg(t.toString(16).padStart(e*2,"0"))}function CR(t,e){return UC(t,e).reverse()}function ln(t,e,n){let r;if(typeof e=="string")try{r=Rg(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(lp(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function LS(t){return Uint8Array.from(t)}const Qw=t=>typeof t=="bigint"&&DC<=t;function JZ(t,e,n){return Qw(t)&&Qw(e)&&Qw(n)&&e<=t&&t<n}function CE(t,e,n,r){if(!JZ(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function _R(t){let e;for(e=0;t>DC;t>>=vE,e+=1);return e}const dp=t=>(vE<<BigInt(t))-vE;function XZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...h)=>n(o,i,...h),l=(h=r(0))=>{o=u(s(0),h),i=u(),h.length!==0&&(o=u(s(1),h),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const m=[];for(;h<e;){i=u();const y=i.slice();m.push(y),h+=i.length}return Xi(...m)};return(h,m)=>{c(),l(h);let y;for(;!(y=m(d()));)l();return c(),y}}function fp(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Og(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const gs=BigInt(0),pr=BigInt(1),Xc=BigInt(2),AR=BigInt(3),SR=BigInt(4),xR=BigInt(5),QZ=BigInt(7),IR=BigInt(8),eJ=BigInt(9),NR=BigInt(16);function Un(t,e){const n=t%e;return n>=gs?n:e+n}function un(t,e,n){let r=t;for(;e-- >gs;)r*=r,r%=n;return r}function FS(t,e){if(t===gs)throw new Error("invert: expected non-zero number");if(e<=gs)throw new Error("invert: expected positive modulus, got "+e);let n=Un(t,e),r=e,s=gs,i=pr;for(;n!==gs;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==pr)throw new Error("invert: does not exist");return Un(s,e)}function MC(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function TR(t,e){const n=(t.ORDER+pr)/SR,r=t.pow(e,n);return MC(t,r,e),r}function tJ(t,e){const n=(t.ORDER-xR)/IR,r=t.mul(e,Xc),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Xc),s),a=t.mul(i,t.sub(o,t.ONE));return MC(t,a,e),a}function nJ(t){const e=Mu(t),n=RR(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+QZ)/NR;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,r);const d=a.mul(u,s),f=a.mul(u,i),h=a.eql(a.sqr(l),c),m=a.eql(a.sqr(d),c);u=a.cmov(u,l,h),l=a.cmov(f,d,m);const y=a.eql(a.sqr(l),c),E=a.cmov(u,l,y);return MC(a,E,c),E}}function RR(t){if(t<AR)throw new Error("sqrt is not defined for small field");let e=t-pr,n=0;for(;e%Xc===gs;)e/=Xc,n++;let r=Xc;const s=Mu(t);for(;jS(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return TR;let i=s.pow(r,e);const o=(e+pr)/Xc;return function(c,u){if(c.is0(u))return u;if(jS(c,u)!==1)throw new Error("Cannot find square root");let l=n,d=c.mul(c.ONE,i),f=c.pow(u,e),h=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let m=1,y=c.sqr(f);for(;!c.eql(y,c.ONE);)if(m++,y=c.sqr(y),m===l)throw new Error("Cannot find square root");const E=pr<<BigInt(l-m-1),S=c.pow(d,E);l=m,d=c.sqr(S),f=c.mul(f,d),h=c.mul(h,S)}return h}}function rJ(t){return t%SR===AR?TR:t%IR===xR?tJ:t%NR===eJ?nJ(t):RR(t)}const sJ=(t,e)=>(Un(t,e)&pr)===pr,iJ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oJ(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=iJ.reduce((r,s)=>(r[s]="function",r),e);return fp(t,n),t}function aJ(t,e,n){if(n<gs)throw new Error("invalid exponent, negatives unsupported");if(n===gs)return t.ONE;if(n===pr)return e;let r=t.ONE,s=e;for(;n>gs;)n&pr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=pr;return r}function OR(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function jS(t,e){const n=(t.ORDER-pr)/Xc,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function PR(t,e){e!==void 0&&EE(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Mu(t,e,n=!1,r={}){if(t<=gs)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:u}=PR(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:u,MASK:dp(c),ZERO:gs,ONE:pr,allowedLengths:a,create:f=>Un(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return gs<=f&&f<t},is0:f=>f===gs,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&pr)===pr,neg:f=>Un(-f,t),eql:(f,h)=>f===h,sqr:f=>Un(f*f,t),add:(f,h)=>Un(f+h,t),sub:(f,h)=>Un(f-h,t),mul:(f,h)=>Un(f*h,t),pow:(f,h)=>aJ(d,f,h),div:(f,h)=>Un(f*FS(h,t),t),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>FS(f,t),sqrt:i||(f=>(l||(l=rJ(t)),l(d,f))),toBytes:f=>n?CR(f,u):UC(f,u),fromBytes:(f,h=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const y=new Uint8Array(u);y.set(f,n?0:y.length-f.length),f=y}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let m=n?Oh(f):Vm(f);if(o&&(m=Un(m,t)),!h&&!d.isValid(m))throw new Error("invalid field element: outside of range 0..ORDER");return m},invertBatch:f=>OR(d,f),cmov:(f,h,m)=>m?h:f});return Object.freeze(d)}function kR(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function BR(t){const e=kR(t);return e+Math.ceil(e/2)}function cJ(t,e,n=!1){const r=t.length,s=kR(e),i=BR(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Oh(t):Vm(t),a=Un(o,e-pr)+pr;return n?CR(a,s):UC(a,s)}function uJ(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function lJ(t,e,n){return t&e^~t&n}function dJ(t,e,n){return t&e^t&n^e&n}let DR=class extends ER{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Xw(this.buffer)}update(e){Tg(this),e=PC(e),Uu(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Xw(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Tg(this),GZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ed(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;uJ(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Xw(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const va=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Er=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),vr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),t0=BigInt(2**32-1),qS=BigInt(32);function fJ(t,e=!1){return e?{h:Number(t&t0),l:Number(t>>qS&t0)}:{h:Number(t>>qS&t0)|0,l:Number(t&t0)|0}}function hJ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=fJ(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const zS=(t,e,n)=>t>>>n,HS=(t,e,n)=>t<<32-n|e>>>n,Xu=(t,e,n)=>t>>>n|e<<32-n,Qu=(t,e,n)=>t<<32-n|e>>>n,n0=(t,e,n)=>t<<64-n|e>>>n-32,r0=(t,e,n)=>t>>>n-32|e<<64-n;function Io(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const pJ=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),gJ=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,mJ=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),yJ=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,wJ=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),bJ=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,EJ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ca=new Uint32Array(64);let vJ=class extends DR{constructor(e=32){super(64,e,8,!1),this.A=va[0]|0,this.B=va[1]|0,this.C=va[2]|0,this.D=va[3]|0,this.E=va[4]|0,this.F=va[5]|0,this.G=va[6]|0,this.H=va[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ca[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Ca[d-15],h=Ca[d-2],m=Mi(f,7)^Mi(f,18)^f>>>3,y=Mi(h,17)^Mi(h,19)^h>>>10;Ca[d]=y+Ca[d-7]+m+Ca[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Mi(a,6)^Mi(a,11)^Mi(a,25),h=l+f+lJ(a,c,u)+EJ[d]+Ca[d]|0,y=(Mi(r,2)^Mi(r,13)^Mi(r,22))+dJ(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+y|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){ed(Ca)}destroy(){this.set(0,0,0,0,0,0,0,0),ed(this.buffer)}};const UR=hJ(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),CJ=UR[0],_J=UR[1],_a=new Uint32Array(80),Aa=new Uint32Array(80);class MR extends DR{constructor(e=64){super(128,e,16,!1),this.Ah=vr[0]|0,this.Al=vr[1]|0,this.Bh=vr[2]|0,this.Bl=vr[3]|0,this.Ch=vr[4]|0,this.Cl=vr[5]|0,this.Dh=vr[6]|0,this.Dl=vr[7]|0,this.Eh=vr[8]|0,this.El=vr[9]|0,this.Fh=vr[10]|0,this.Fl=vr[11]|0,this.Gh=vr[12]|0,this.Gl=vr[13]|0,this.Hh=vr[14]|0,this.Hl=vr[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:h,Gl:m,Hh:y,Hl:E}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,m,y,E]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,m,y,E){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=m|0,this.Hh=y|0,this.Hl=E|0}process(e,n){for(let C=0;C<16;C++,n+=4)_a[C]=e.getUint32(n),Aa[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const T=_a[C-15]|0,N=Aa[C-15]|0,U=Xu(T,N,1)^Xu(T,N,8)^zS(T,N,7),q=Qu(T,N,1)^Qu(T,N,8)^HS(T,N,7),H=_a[C-2]|0,P=Aa[C-2]|0,$=Xu(H,P,19)^n0(H,P,61)^zS(H,P,6),W=Qu(H,P,19)^r0(H,P,61)^HS(H,P,6),z=mJ(q,W,Aa[C-7],Aa[C-16]),_=yJ(z,U,$,_a[C-7],_a[C-16]);_a[C]=_|0,Aa[C]=z|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:h,Fl:m,Gh:y,Gl:E,Hh:S,Hl:R}=this;for(let C=0;C<80;C++){const T=Xu(d,f,14)^Xu(d,f,18)^n0(d,f,41),N=Qu(d,f,14)^Qu(d,f,18)^r0(d,f,41),U=d&h^~d&y,q=f&m^~f&E,H=wJ(R,N,q,_J[C],Aa[C]),P=bJ(H,S,T,U,CJ[C],_a[C]),$=H|0,W=Xu(r,s,28)^n0(r,s,34)^n0(r,s,39),z=Qu(r,s,28)^r0(r,s,34)^r0(r,s,39),_=r&i^r&a^i&a,p=s&o^s&c^o&c;S=y|0,R=E|0,y=h|0,E=m|0,h=d|0,m=f|0,{h:d,l:f}=Io(u|0,l|0,P|0,$|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=pJ($,z,p);r=gJ(g,P,W,_),s=g|0}({h:r,l:s}=Io(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Io(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Io(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=Io(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=Io(this.Eh|0,this.El|0,d|0,f|0),{h,l:m}=Io(this.Fh|0,this.Fl|0,h|0,m|0),{h:y,l:E}=Io(this.Gh|0,this.Gl|0,y|0,E|0),{h:S,l:R}=Io(this.Hh|0,this.Hl|0,S|0,R|0),this.set(r,s,i,o,a,c,u,l,d,f,h,m,y,E,S,R)}roundClean(){ed(_a,Aa)}destroy(){ed(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class AJ extends MR{constructor(){super(48),this.Ah=Er[0]|0,this.Al=Er[1]|0,this.Bh=Er[2]|0,this.Bl=Er[3]|0,this.Ch=Er[4]|0,this.Cl=Er[5]|0,this.Dh=Er[6]|0,this.Dl=Er[7]|0,this.Eh=Er[8]|0,this.El=Er[9]|0,this.Fh=Er[10]|0,this.Fl=Er[11]|0,this.Gh=Er[12]|0,this.Gl=Er[13]|0,this.Hh=Er[14]|0,this.Hl=Er[15]|0}}const SJ=kC(()=>new vJ),xJ=kC(()=>new MR),twe=kC(()=>new AJ);class $R extends ER{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,wR(e);const r=PC(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ed(i)}update(e){return Tg(this),this.iHash.update(e),this}digestInto(e){Tg(this),Uu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const LR=(t,e,n)=>new $R(t,e).update(n).digest();LR.create=(t,e)=>new $R(t,e);const td=BigInt(0),Qc=BigInt(1);function Pg(t,e){const n=e.negate();return t?n:e}function eu(t,e){const n=OR(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function FR(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function eb(t,e){FR(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=dp(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function WS(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Qc);const u=e*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:u}}function IJ(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function NJ(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const tb=new WeakMap,jR=new WeakMap;function nb(t){return jR.get(t)||1}function VS(t){if(t!==td)throw new Error("invalid wNAF")}class qR{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>td;)n&Qc&&(r=r.add(s)),s=s.double(),n>>=Qc;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=eb(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=eb(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:h}=WS(r,a,o);r=c,l?i=i.add(Pg(f,n[h])):s=s.add(Pg(d,n[u]))}return VS(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=eb(e,this.bits);for(let o=0;o<i.windows&&r!==td;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=WS(r,o,i);if(r=a,!u){const d=n[c];s=s.add(l?d.negate():d)}}return VS(r),s}getPrecomputes(e,n,r){let s=tb.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),tb.set(n,s))),s}cached(e,n,r){const s=nb(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=nb(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){FR(n,this.bits),jR.set(e,n),tb.delete(e)}hasCache(e){return nb(e)!==1}}function TJ(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>td||r>td;)n&Qc&&(i=i.add(s)),r&Qc&&(o=o.add(s)),s=s.double(),n>>=Qc,r>>=Qc;return{p1:i,p2:o}}function zR(t,e,n,r){IJ(n,t),NJ(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=_R(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=dp(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){l.fill(o);for(let y=0;y<i;y++){const E=r[y],S=Number(E>>BigInt(h)&u);l[S]=l[S].add(n[y])}let m=o;for(let y=l.length-1,E=o;y>0;y--)E=E.add(l[y]),m=m.add(E);if(f=f.add(m),h!==0)for(let y=0;y<c;y++)f=f.double()}return f}function KS(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return oJ(e),e}else return Mu(t,{isLE:n})}function HR(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>td))throw new Error(`CURVE.${c} must be positive bigint`)}const s=KS(e.p,n.Fp,r),i=KS(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const c of a)if(!s.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}const GS=(t,e)=>(t+(t>=0?e:-e)/WR)/e;function RJ(t,e,n){const[[r,s],[i,o]]=e,a=GS(o*t,n),c=GS(-s*t,n);let u=t-a*r-c*i,l=-a*s-c*o;const d=u<Go,f=l<Go;d&&(u=-u),f&&(l=-l);const h=dp(Math.ceil(_R(n)/2))+Ol;if(u<Go||u>=h||l<Go||l>=h)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}function _E(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function rb(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return Su(n.lowS,"lowS"),Su(n.prehash,"prehash"),n.format!==void 0&&_E(n.format),n}class OJ extends Error{constructor(e=""){super(e)}}const jo={Err:OJ,_tlv:{encode:(t,e)=>{const{Err:n}=jo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=e0(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?e0(s.length/2|128):"";return e0(t)+i+s+e},decode(t,e){const{Err:n}=jo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=jo;if(t<Go)throw new e("integer: negative integers are not allowed");let n=e0(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=jo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Vm(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=jo,s=ln("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=jo,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Go=BigInt(0),Ol=BigInt(1),WR=BigInt(2),s0=BigInt(3),PJ=BigInt(4);function fl(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=ln("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function kJ(t,e={}){const n=HR("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;fp(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=KR(r,s);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(z,_,p){const{x:g,y:b}=_.toAffine(),x=r.toBytes(g);if(Su(p,"isCompressed"),p){l();const O=!r.isOdd(b);return Xi(VR(O),x)}else return Xi(Uint8Array.of(4),x,r.toBytes(b))}function f(z){_i(z,void 0,"Point");const{publicKey:_,publicKeyUncompressed:p}=u,g=z.length,b=z[0],x=z.subarray(1);if(g===_&&(b===2||b===3)){const O=r.fromBytes(x);if(!r.isValid(O))throw new Error("bad point: is not on curve, wrong x");const k=y(O);let M;try{M=r.sqrt(k)}catch(v){const D=v instanceof Error?": "+v.message:"";throw new Error("bad point: is not on curve, sqrt error"+D)}l();const B=r.isOdd(M);return(b&1)===1!==B&&(M=r.neg(M)),{x:O,y:M}}else if(g===p&&b===4){const O=r.BYTES,k=r.fromBytes(x.subarray(0,O)),M=r.fromBytes(x.subarray(O,O*2));if(!E(k,M))throw new Error("bad point: is not on curve");return{x:k,y:M}}else throw new Error(`bad point: got length ${g}, expected compressed=${_} or uncompressed=${p}`)}const h=e.toBytes||d,m=e.fromBytes||f;function y(z){const _=r.sqr(z),p=r.mul(_,z);return r.add(r.add(p,r.mul(z,i.a)),i.b)}function E(z,_){const p=r.sqr(_),g=y(z);return r.eql(p,g)}if(!E(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const S=r.mul(r.pow(i.a,s0),PJ),R=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(S,R)))throw new Error("bad curve params: a or b");function C(z,_,p=!1){if(!r.isValid(_)||p&&r.is0(_))throw new Error(`bad point coordinate ${z}`);return _}function T(z){if(!(z instanceof P))throw new Error("ProjectivePoint expected")}function N(z){if(!c||!c.basises)throw new Error("no endo");return RJ(z,c.basises,s.ORDER)}const U=Og((z,_)=>{const{X:p,Y:g,Z:b}=z;if(r.eql(b,r.ONE))return{x:p,y:g};const x=z.is0();_==null&&(_=x?r.ONE:r.inv(b));const O=r.mul(p,_),k=r.mul(g,_),M=r.mul(b,_);if(x)return{x:r.ZERO,y:r.ZERO};if(!r.eql(M,r.ONE))throw new Error("invZ was invalid");return{x:O,y:k}}),q=Og(z=>{if(z.is0()){if(e.allowInfinityPoint&&!r.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:_,y:p}=z.toAffine();if(!r.isValid(_)||!r.isValid(p))throw new Error("bad point: x or y not field elements");if(!E(_,p))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function H(z,_,p,g,b){return p=new P(r.mul(p.X,z),p.Y,p.Z),_=Pg(g,_),p=Pg(b,p),_.add(p)}class P{constructor(_,p,g){this.X=C("x",_),this.Y=C("y",p,!0),this.Z=C("z",g),Object.freeze(this)}static CURVE(){return i}static fromAffine(_){const{x:p,y:g}=_||{};if(!_||!r.isValid(p)||!r.isValid(g))throw new Error("invalid affine point");if(_ instanceof P)throw new Error("projective point not allowed");return r.is0(p)&&r.is0(g)?P.ZERO:new P(p,g,r.ONE)}static fromBytes(_){const p=P.fromAffine(m(_i(_,void 0,"point")));return p.assertValidity(),p}static fromHex(_){return P.fromBytes(ln("pointHex",_))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(_=8,p=!0){return W.createCache(this,_),p||this.multiply(s0),this}assertValidity(){q(this)}hasEvenY(){const{y:_}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(_)}equals(_){T(_);const{X:p,Y:g,Z:b}=this,{X:x,Y:O,Z:k}=_,M=r.eql(r.mul(p,k),r.mul(x,b)),B=r.eql(r.mul(g,k),r.mul(O,b));return M&&B}negate(){return new P(this.X,r.neg(this.Y),this.Z)}double(){const{a:_,b:p}=i,g=r.mul(p,s0),{X:b,Y:x,Z:O}=this;let k=r.ZERO,M=r.ZERO,B=r.ZERO,w=r.mul(b,b),v=r.mul(x,x),D=r.mul(O,O),F=r.mul(b,x);return F=r.add(F,F),B=r.mul(b,O),B=r.add(B,B),k=r.mul(_,B),M=r.mul(g,D),M=r.add(k,M),k=r.sub(v,M),M=r.add(v,M),M=r.mul(k,M),k=r.mul(F,k),B=r.mul(g,B),D=r.mul(_,D),F=r.sub(w,D),F=r.mul(_,F),F=r.add(F,B),B=r.add(w,w),w=r.add(B,w),w=r.add(w,D),w=r.mul(w,F),M=r.add(M,w),D=r.mul(x,O),D=r.add(D,D),w=r.mul(D,F),k=r.sub(k,w),B=r.mul(D,v),B=r.add(B,B),B=r.add(B,B),new P(k,M,B)}add(_){T(_);const{X:p,Y:g,Z:b}=this,{X:x,Y:O,Z:k}=_;let M=r.ZERO,B=r.ZERO,w=r.ZERO;const v=i.a,D=r.mul(i.b,s0);let F=r.mul(p,x),Z=r.mul(g,O),ee=r.mul(b,k),de=r.add(p,g),ae=r.add(x,O);de=r.mul(de,ae),ae=r.add(F,Z),de=r.sub(de,ae),ae=r.add(p,b);let Oe=r.add(x,k);return ae=r.mul(ae,Oe),Oe=r.add(F,ee),ae=r.sub(ae,Oe),Oe=r.add(g,b),M=r.add(O,k),Oe=r.mul(Oe,M),M=r.add(Z,ee),Oe=r.sub(Oe,M),w=r.mul(v,ae),M=r.mul(D,ee),w=r.add(M,w),M=r.sub(Z,w),w=r.add(Z,w),B=r.mul(M,w),Z=r.add(F,F),Z=r.add(Z,F),ee=r.mul(v,ee),ae=r.mul(D,ae),Z=r.add(Z,ee),ee=r.sub(F,ee),ee=r.mul(v,ee),ae=r.add(ae,ee),F=r.mul(Z,ae),B=r.add(B,F),F=r.mul(Oe,ae),M=r.mul(de,M),M=r.sub(M,F),F=r.mul(de,Z),w=r.mul(Oe,w),w=r.add(w,F),new P(M,B,w)}subtract(_){return this.add(_.negate())}is0(){return this.equals(P.ZERO)}multiply(_){const{endo:p}=e;if(!s.isValidNot0(_))throw new Error("invalid scalar: out of range");let g,b;const x=O=>W.cached(this,O,k=>eu(P,k));if(p){const{k1neg:O,k1:k,k2neg:M,k2:B}=N(_),{p:w,f:v}=x(k),{p:D,f:F}=x(B);b=v.add(F),g=H(p.beta,w,D,O,M)}else{const{p:O,f:k}=x(_);g=O,b=k}return eu(P,[g,b])[0]}multiplyUnsafe(_){const{endo:p}=e,g=this;if(!s.isValid(_))throw new Error("invalid scalar: out of range");if(_===Go||g.is0())return P.ZERO;if(_===Ol)return g;if(W.hasCache(this))return this.multiply(_);if(p){const{k1neg:b,k1:x,k2neg:O,k2:k}=N(_),{p1:M,p2:B}=TJ(P,g,x,k);return H(p.beta,M,B,b,O)}else return W.unsafe(g,_)}multiplyAndAddUnsafe(_,p,g){const b=this.multiplyUnsafe(p).add(_.multiplyUnsafe(g));return b.is0()?void 0:b}toAffine(_){return U(this,_)}isTorsionFree(){const{isTorsionFree:_}=e;return o===Ol?!0:_?_(P,this):W.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:_}=e;return o===Ol?this:_?_(P,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(_=!0){return Su(_,"isCompressed"),this.assertValidity(),h(P,this,_)}toHex(_=!0){return du(this.toBytes(_))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(_=!0){return this.toBytes(_)}_setWindowSize(_){this.precompute(_)}static normalizeZ(_){return eu(P,_)}static msm(_,p){return zR(P,s,_,p)}static fromPrivateKey(_){return P.BASE.multiply(fl(s,_))}}P.BASE=new P(i.Gx,i.Gy,r.ONE),P.ZERO=new P(r.ZERO,r.ONE,r.ZERO),P.Fp=r,P.Fn=s;const $=s.BITS,W=new qR(P,e.endo?Math.ceil($/2):$);return P.BASE.precompute(8),P}function VR(t){return Uint8Array.of(t?2:3)}function KR(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function BJ(t,e={}){const{Fn:n}=t,r=e.randomBytes||BC,s=Object.assign(KR(t.Fp,n),{seed:BR(n.ORDER)});function i(h){try{return!!fl(n,h)}catch{return!1}}function o(h,m){const{publicKey:y,publicKeyUncompressed:E}=s;try{const S=h.length;return m===!0&&S!==y||m===!1&&S!==E?!1:!!t.fromBytes(h)}catch{return!1}}function a(h=r(s.seed)){return cJ(_i(h,s.seed,"seed"),n.ORDER)}function c(h,m=!0){return t.BASE.multiply(fl(n,h)).toBytes(m)}function u(h){const m=a(h);return{secretKey:m,publicKey:c(m)}}function l(h){if(typeof h=="bigint")return!1;if(h instanceof t)return!0;const{secretKey:m,publicKey:y,publicKeyUncompressed:E}=s;if(n.allowedLengths||m===y)return;const S=ln("key",h).length;return S===y||S===E}function d(h,m,y=!0){if(l(h)===!0)throw new Error("first arg must be private key");if(l(m)===!1)throw new Error("second arg must be public key");const E=fl(n,h);return t.fromHex(m).multiply(E).toBytes(y)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:h=>fl(n,h),precompute(h=8,m=t.BASE){return m.precompute(h,!1)}},lengths:s})}function DJ(t,e,n={}){wR(e),fp(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||BC,s=n.hmac||((p,...g)=>LR(e,p,Xi(...g))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h}=BJ(t,n),m={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},y="compact";function E(p){const g=a>>Ol;return p>g}function S(p,g){if(!o.isValidNot0(g))throw new Error(`invalid signature ${p}: out of range 1..Point.Fn.ORDER`);return g}function R(p,g){_E(g);const b=h.signature,x=g==="compact"?b:g==="recovered"?b+1:void 0;return _i(p,x,`${g} signature`)}class C{constructor(g,b,x){this.r=S("r",g),this.s=S("s",b),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(g,b=y){R(g,b);let x;if(b==="der"){const{r:B,s:w}=jo.toSig(_i(g));return new C(B,w)}b==="recovered"&&(x=g[0],b="compact",g=g.subarray(1));const O=o.BYTES,k=g.subarray(0,O),M=g.subarray(O,O*2);return new C(o.fromBytes(k),o.fromBytes(M),x)}static fromHex(g,b){return this.fromBytes(Rg(g),b)}addRecoveryBit(g){return new C(this.r,this.s,g)}recoverPublicKey(g){const b=i.ORDER,{r:x,s:O,recovery:k}=this;if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");if(a*WR<b&&k>1)throw new Error("recovery id is ambiguous for h>1 curve");const B=k===2||k===3?x+a:x;if(!i.isValid(B))throw new Error("recovery id 2 or 3 invalid");const w=i.toBytes(B),v=t.fromBytes(Xi(VR((k&1)===0),w)),D=o.inv(B),F=N(ln("msgHash",g)),Z=o.create(-F*D),ee=o.create(O*D),de=t.BASE.multiplyUnsafe(Z).add(v.multiplyUnsafe(ee));if(de.is0())throw new Error("point at infinify");return de.assertValidity(),de}hasHighS(){return E(this.s)}toBytes(g=y){if(_E(g),g==="der")return Rg(jo.hexFromSig(this));const b=o.toBytes(this.r),x=o.toBytes(this.s);if(g==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Xi(Uint8Array.of(this.recovery),b,x)}return Xi(b,x)}toHex(g){return du(this.toBytes(g))}assertValidity(){}static fromCompact(g){return C.fromBytes(ln("sig",g),"compact")}static fromDER(g){return C.fromBytes(ln("sig",g),"der")}normalizeS(){return this.hasHighS()?new C(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return du(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return du(this.toBytes("compact"))}}const T=n.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");const b=Vm(g),x=g.length*8-c;return x>0?b>>BigInt(x):b},N=n.bits2int_modN||function(g){return o.create(T(g))},U=dp(c);function q(p){return CE("num < 2^"+c,p,Go,U),o.toBytes(p)}function H(p,g){return _i(p,void 0,"message"),g?_i(e(p),void 0,"prehashed message"):p}function P(p,g,b){if(["recovered","canonical"].some(Z=>Z in b))throw new Error("sign() legacy options not supported");const{lowS:x,prehash:O,extraEntropy:k}=rb(b,m);p=H(p,O);const M=N(p),B=fl(o,g),w=[q(B),q(M)];if(k!=null&&k!==!1){const Z=k===!0?r(h.secretKey):k;w.push(ln("extraEntropy",Z))}const v=Xi(...w),D=M;function F(Z){const ee=T(Z);if(!o.isValidNot0(ee))return;const de=o.inv(ee),ae=t.BASE.multiply(ee).toAffine(),Oe=o.create(ae.x);if(Oe===Go)return;const Qe=o.create(de*o.create(D+Oe*B));if(Qe===Go)return;let G=(ae.x===Oe?0:2)|Number(ae.y&Ol),J=Qe;return x&&E(Qe)&&(J=o.neg(Qe),G^=1),new C(Oe,J,G)}return{seed:v,k2sig:F}}function $(p,g,b={}){p=ln("message",p);const{seed:x,k2sig:O}=P(p,g,b);return XZ(e.outputLen,o.BYTES,s)(x,O)}function W(p){let g;const b=typeof p=="string"||lp(p),x=!b&&p!==null&&typeof p=="object"&&typeof p.r=="bigint"&&typeof p.s=="bigint";if(!b&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)g=new C(p.r,p.s);else if(b){try{g=C.fromBytes(ln("sig",p),"der")}catch(O){if(!(O instanceof jo.Err))throw O}if(!g)try{g=C.fromBytes(ln("sig",p),"compact")}catch{return!1}}return g||!1}function z(p,g,b,x={}){const{lowS:O,prehash:k,format:M}=rb(x,m);if(b=ln("publicKey",b),g=H(ln("message",g),k),"strict"in x)throw new Error("options.strict was renamed to lowS");const B=M===void 0?W(p):C.fromBytes(ln("sig",p),M);if(B===!1)return!1;try{const w=t.fromBytes(b);if(O&&B.hasHighS())return!1;const{r:v,s:D}=B,F=N(g),Z=o.inv(D),ee=o.create(F*Z),de=o.create(v*Z),ae=t.BASE.multiplyUnsafe(ee).add(w.multiplyUnsafe(de));return ae.is0()?!1:o.create(ae.x)===v}catch{return!1}}function _(p,g,b={}){const{prehash:x}=rb(b,m);return g=H(g,x),C.fromBytes(p,"recovered").recoverPublicKey(g).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h,Point:t,sign:$,verify:z,recoverPublicKey:_,Signature:C,hash:e})}function UJ(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Mu(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function MJ(t){const{CURVE:e,curveOpts:n}=UJ(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function $J(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,PR(n.Fn.ORDER,n.Fn.BITS))})}function LJ(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=MJ(t),i=kJ(e,n),o=DJ(i,r,s);return $J(t,o)}function FJ(t,e){const n=r=>LJ({...t,hash:r});return{...n(e),create:n}}const $C={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},jJ={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},YS=BigInt(2);function qJ(t){const e=$C.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=un(l,n,e)*l%e,f=un(d,n,e)*l%e,h=un(f,YS,e)*u%e,m=un(h,s,e)*h%e,y=un(m,i,e)*m%e,E=un(y,a,e)*y%e,S=un(E,c,e)*E%e,R=un(S,a,e)*y%e,C=un(R,n,e)*l%e,T=un(C,o,e)*m%e,N=un(T,r,e)*u%e,U=un(N,YS,e);if(!AE.eql(AE.sqr(U),t))throw new Error("Cannot find square root");return U}const AE=Mu($C.p,{sqrt:qJ}),zJ=FJ({...$C,Fp:AE,lowS:!0,endo:jJ},SJ);function HJ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function GR(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function kg(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function LC(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function SE(t){if(!Array.isArray(t))throw new Error("array expected")}function Bg(t,e){if(!GR(!0,e))throw new Error(`${t}: array of strings expected`)}function WJ(t,e){if(!GR(!1,e))throw new Error(`${t}: array of numbers expected`)}function VJ(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function KJ(t){const e=typeof t=="string"?t.split(""):t,n=e.length;Bg("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(SE(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(SE(s),s.map(i=>{kg("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function GJ(t=""){return kg("join",t),{encode:e=>(Bg("join.decode",e),e.join(t)),decode:e=>(kg("join.decode",e),e.split(t))}}function YJ(t,e="="){return LC(t),kg("padding",e),{encode(n){for(Bg("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){Bg("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const YR=(t,e)=>e===0?t:YR(e,t%e),Dg=(t,e)=>t+(e-YR(t,e)),sb=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function ZS(t,e,n,r){if(SE(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Dg(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Dg(e,n)}`);let s=0,i=0;const o=sb[e],a=sb[n]-1,c=[];for(const u of t){if(LC(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(s=s<<e|u,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const l=sb[i];if(l===void 0)throw new Error("invalid carry");s&=l-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function ZJ(t,e=!1){if(LC(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Dg(8,t)>32||Dg(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!HJ(n))throw new Error("radix2.encode input should be Uint8Array");return ZS(Array.from(n),8,t,!e)},decode:n=>(WJ("radix2.decode",n),Uint8Array.from(ZS(n,t,8,e)))}}const JJ=VJ(ZJ(5),KJ("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),YJ(5),GJ(""));function XJ(t){return mZ(QJ(t))}function QJ(t){const{payload:e,signature:n}=t,{r,s,yParity:i}=n,a=new qZ.Signature(BigInt(r),BigInt(s)).addRecoveryBit(i).recoverPublicKey(RC(e).substring(2));return aZ(a)}function eX(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),d=l.charCodeAt(0);if(e[d]!==255)throw new TypeError(l+" is ambiguous");e[d]=u}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,d=0,f=0;const h=u.length;for(;f!==h&&u[f]===0;)f++,l++;const m=(h-f)*i+1>>>0,y=new Uint8Array(m);for(;f!==h;){let R=u[f],C=0;for(let T=m-1;(R!==0||C<d)&&T!==-1;T--,C++)R+=256*y[T]>>>0,y[T]=R%n>>>0,R=R/n>>>0;if(R!==0)throw new Error("Non-zero carry");d=C,f++}let E=m-d;for(;E!==m&&y[E]===0;)E++;let S=r.repeat(l);for(;E<m;++E)S+=t.charAt(y[E]);return S}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,d=0,f=0;for(;u[l]===r;)d++,l++;const h=(u.length-l)*s+1>>>0,m=new Uint8Array(h);for(;l<u.length;){const R=u.charCodeAt(l);if(R>255)return;let C=e[R];if(C===255)return;let T=0;for(let N=h-1;(C!==0||T<f)&&N!==-1;N--,T++)C+=n*m[N]>>>0,m[N]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");f=T,l++}let y=h-f;for(;y!==h&&m[y]===0;)y++;const E=new Uint8Array(d+(h-y));let S=d;for(;y!==h;)E[S++]=m[y++];return E}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var tX="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const tr=eX(tX);function nX(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if((s&4294967168)===0){n++;continue}else if((s&4294965248)===0)n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?n+=3:n+=4}}return n}function rX(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const sX=new TextEncoder,iX=50;function oX(t,e,n){sX.encodeInto(t,e.subarray(n))}function aX(t,e,n){t.length>iX?oX(t,e,n):rX(t,e,n)}const cX=4096;function ZR(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if((a&128)===0)i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,u=t[r++]&63;i.push((a&31)<<12|c<<6|u)}else if((a&248)===240){const c=t[r++]&63,u=t[r++]&63,l=t[r++]&63;let d=(a&7)<<18|c<<12|u<<6|l;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=cX&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const uX=new TextDecoder,lX=200;function dX(t,e,n){const r=t.subarray(e,e+n);return uX.decode(r)}function fX(t,e,n){return n>lX?dX(t,e,n):ZR(t,e,n)}class i0{constructor(e,n){this.type=e,this.data=n}}class Ns extends Error{constructor(e){super(e);const n=Object.create(Ns.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ns.name})}}const Pd=4294967295;function hX(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function JR(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function XR(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function pX(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const gX=-1,mX=4294967296-1,yX=17179869184-1;function wX({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=yX)if(e===0&&t<=mX){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),JR(r,4,t),n}}function bX(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function EX(t){if(t instanceof Date){const e=bX(t);return wX(e)}else return null}function vX(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=XR(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new Ns(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function CX(t){const e=vX(t);return new Date(e.sec*1e3+e.nsec/1e6)}const _X={type:gX,encode:EX,decode:CX};class Ug{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(_X)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new i0(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new i0(o,i)}}}return e instanceof i0?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new i0(n,e)}}Ug.defaultCodec=new Ug;function AX(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function xE(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):AX(t)?new Uint8Array(t):Uint8Array.from(t)}const SX=100,xX=2048;let IX=class QR{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??Ug.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??SX,this.initialBufferSize=e?.initialBufferSize??xX,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new QR({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=nX(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),aX(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=xE(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),hX(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),JR(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function NX(t,e){return new IX(e).encodeSharedRef(t)}function ib(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const TX=16,RX=16;class OX{constructor(e=TX,n=RX){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=ZR(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const IE="array",bf="map_key",eO="map_value",PX=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Ns("The type of key must be string or number but "+typeof t)};class kX{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=IE,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=bf,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===IE){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===bf||e.type===eO){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const kd=-1,FC=new DataView(new ArrayBuffer(0)),BX=new Uint8Array(FC.buffer);try{FC.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const JS=new RangeError("Insufficient data"),DX=new OX;let UX=class tO{constructor(e){this.totalPos=0,this.pos=0,this.view=FC,this.bytes=BX,this.headByte=kd,this.stack=new kX,this.entered=!1,this.extensionCodec=e?.extensionCodec??Ug.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Pd,this.maxBinLength=e?.maxBinLength??Pd,this.maxArrayLength=e?.maxArrayLength??Pd,this.maxMapLength=e?.maxMapLength??Pd,this.maxExtLength=e?.maxExtLength??Pd,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:DX,this.mapKeyConverter=e?.mapKeyConverter??PX}clone(){return new tO({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=kd,this.stack.reset()}setBuffer(e){const n=xE(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===kd&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=xE(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${ib(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new Ns(`Unrecognized type byte: ${ib(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===IE)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===bf){if(n==="__proto__")throw new Ns("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=eO;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=bf;continue e}}return n}}readHeadByte(){return this.headByte===kd&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=kd}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Ns(`Unrecognized array type byte: ${ib(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Ns(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Ns(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new Ns(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw JS;const r=this.pos+n;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?s=this.keyDecoder.decode(this.bytes,r,e):s=fX(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===bf:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Ns(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw JS;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new Ns(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=pX(this.view,this.pos);return this.pos+=8,e}readI64(){const e=XR(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function MX(t,e){return new UX(e).decode(t)}function jC(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function nO(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?jC(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Ef(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=nO(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return jC(n)}function $X(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var y=0,E=0,S=0,R=m.length;S!==R&&m[S]===0;)S++,y++;for(var C=(R-S)*l+1>>>0,T=new Uint8Array(C);S!==R;){for(var N=m[S],U=0,q=C-1;(N!==0||U<E)&&q!==-1;q--,U++)N+=256*T[q]>>>0,T[q]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");E=U,S++}for(var H=C-E;H!==C&&T[H]===0;)H++;for(var P=c.repeat(y);H<C;++H)P+=t.charAt(T[H]);return P}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var y=0;if(m[y]!==" "){for(var E=0,S=0;m[y]===c;)E++,y++;for(var R=(m.length-y)*u+1>>>0,C=new Uint8Array(R);m[y];){var T=n[m.charCodeAt(y)];if(T===255)return;for(var N=0,U=R-1;(T!==0||N<S)&&U!==-1;U--,N++)T+=a*C[U]>>>0,C[U]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");S=N,y++}if(m[y]!==" "){for(var q=R-S;q!==R&&C[q]===0;)q++;for(var H=new Uint8Array(E+(R-q)),P=E;q!==R;)H[P++]=C[q++];return H}}}function h(m){var y=f(m);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var LX=$X,FX=LX;const jX=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},qX=t=>new TextEncoder().encode(t),zX=t=>new TextDecoder().decode(t);class HX{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class WX{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return rO(this,e)}}class VX{constructor(e){this.decoders=e}or(e){return rO(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const rO=(t,e)=>new VX({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class KX{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new HX(e,n,r),this.decoder=new WX(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Km=({name:t,prefix:e,encode:n,decode:r})=>new KX(t,e,n,r),hp=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=FX(n,e);return Km({prefix:t,name:e,encode:r,decode:i=>jX(s(i))})},GX=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},YX=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},wr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Km({prefix:e,name:t,encode(s){return YX(s,r,n)},decode(s){return GX(s,r,n,t)}}),ZX=Km({prefix:"\0",name:"identity",encode:t=>zX(t),decode:t=>qX(t)}),JX=Object.freeze(Object.defineProperty({__proto__:null,identity:ZX},Symbol.toStringTag,{value:"Module"})),XX=wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),QX=Object.freeze(Object.defineProperty({__proto__:null,base2:XX},Symbol.toStringTag,{value:"Module"})),eQ=wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),tQ=Object.freeze(Object.defineProperty({__proto__:null,base8:eQ},Symbol.toStringTag,{value:"Module"})),nQ=hp({prefix:"9",name:"base10",alphabet:"0123456789"}),rQ=Object.freeze(Object.defineProperty({__proto__:null,base10:nQ},Symbol.toStringTag,{value:"Module"})),sQ=wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),iQ=wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),oQ=Object.freeze(Object.defineProperty({__proto__:null,base16:sQ,base16upper:iQ},Symbol.toStringTag,{value:"Module"})),aQ=wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cQ=wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),uQ=wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lQ=wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dQ=wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fQ=wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hQ=wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pQ=wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gQ=wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),mQ=Object.freeze(Object.defineProperty({__proto__:null,base32:aQ,base32hex:dQ,base32hexpad:hQ,base32hexpadupper:pQ,base32hexupper:fQ,base32pad:uQ,base32padupper:lQ,base32upper:cQ,base32z:gQ},Symbol.toStringTag,{value:"Module"})),yQ=hp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),wQ=hp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),bQ=Object.freeze(Object.defineProperty({__proto__:null,base36:yQ,base36upper:wQ},Symbol.toStringTag,{value:"Module"})),EQ=hp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vQ=hp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),CQ=Object.freeze(Object.defineProperty({__proto__:null,base58btc:EQ,base58flickr:vQ},Symbol.toStringTag,{value:"Module"})),_Q=wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),AQ=wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),SQ=wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xQ=wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),IQ=Object.freeze(Object.defineProperty({__proto__:null,base64:_Q,base64pad:AQ,base64url:SQ,base64urlpad:xQ},Symbol.toStringTag,{value:"Module"})),sO=Array.from(""),NQ=sO.reduce((t,e,n)=>(t[n]=e,t),[]),TQ=sO.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function RQ(t){return t.reduce((e,n)=>(e+=NQ[n],e),"")}function OQ(t){const e=[];for(const n of t){const r=TQ[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const PQ=Km({prefix:"",name:"base256emoji",encode:RQ,decode:OQ}),kQ=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:PQ},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const XS={...JX,...QX,...tQ,...rQ,...oQ,...mQ,...bQ,...CQ,...IQ,...kQ};function iO(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const QS=iO("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ob=iO("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=nO(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),oO={utf8:QS,"utf-8":QS,hex:XS.base16,latin1:ob,ascii:ob,binary:ob,...XS};function Ys(t,e="utf8"){const n=oO[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?jC(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ws(t,e="utf8"){const n=oO[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const BQ={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var ab,ex;function aO(){if(ex)return ab;ex=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function n(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function s(o,a,c){let u=`
`+o+" = ";for(let l=0;l<a.length;l+=2){if(c===32)u+=r(a[l]).toUpperCase(),u+=" ",u+=r(a[l+1]).toUpperCase();else if(c===64)u+=r(a[l+1]).toUpperCase(),u+=r(a[l]).toUpperCase();else throw new Error("Invalid size "+c);l%6===4?u+=`
`+new Array(o.length+4).join(" "):l<a.length-2&&(u+=" ")}console.log(u)}function i(o,a,c){let u=new Date().getTime();const l=new Uint8Array(a);for(let f=0;f<a;f++)l[f]=f%256;const d=new Date().getTime();console.log("Generated random input in "+(d-u)+"ms"),u=d;for(let f=0;f<c;f++){const h=o(l),m=new Date().getTime(),y=m-u;u=m,console.log("Hashed in "+y+"ms: "+h.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(y/1e3)*100)/100+" MB PER SECOND")}}return ab={normalizeInput:e,toHex:n,debugPrint:s,testSpeed:i},ab}var cb,tx;function DQ(){if(tx)return cb;tx=1;const t=aO();function e(S,R,C){const T=S[R]+S[C];let N=S[R+1]+S[C+1];T>=4294967296&&N++,S[R]=T,S[R+1]=N}function n(S,R,C,T){let N=S[R]+C;C<0&&(N+=4294967296);let U=S[R+1]+T;N>=4294967296&&U++,S[R]=N,S[R+1]=U}function r(S,R){return S[R]^S[R+1]<<8^S[R+2]<<16^S[R+3]<<24}function s(S,R,C,T,N,U){const q=u[N],H=u[N+1],P=u[U],$=u[U+1];e(c,S,R),n(c,S,q,H);let W=c[T]^c[S],z=c[T+1]^c[S+1];c[T]=z,c[T+1]=W,e(c,C,T),W=c[R]^c[C],z=c[R+1]^c[C+1],c[R]=W>>>24^z<<8,c[R+1]=z>>>24^W<<8,e(c,S,R),n(c,S,P,$),W=c[T]^c[S],z=c[T+1]^c[S+1],c[T]=W>>>16^z<<16,c[T+1]=z>>>16^W<<16,e(c,C,T),W=c[R]^c[C],z=c[R+1]^c[C+1],c[R]=z>>>31^W<<1,c[R+1]=W>>>31^z<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(S){return S*2})),c=new Uint32Array(32),u=new Uint32Array(32);function l(S,R){let C=0;for(C=0;C<16;C++)c[C]=S.h[C],c[C+16]=i[C];for(c[24]=c[24]^S.t,c[25]=c[25]^S.t/4294967296,R&&(c[28]=~c[28],c[29]=~c[29]),C=0;C<32;C++)u[C]=r(S.b,4*C);for(C=0;C<12;C++)s(0,8,16,24,a[C*16+0],a[C*16+1]),s(2,10,18,26,a[C*16+2],a[C*16+3]),s(4,12,20,28,a[C*16+4],a[C*16+5]),s(6,14,22,30,a[C*16+6],a[C*16+7]),s(0,10,20,30,a[C*16+8],a[C*16+9]),s(2,12,22,24,a[C*16+10],a[C*16+11]),s(4,14,16,26,a[C*16+12],a[C*16+13]),s(6,8,18,28,a[C*16+14],a[C*16+15]);for(C=0;C<16;C++)S.h[C]=S.h[C]^c[C]^c[C+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function f(S,R,C,T){if(S===0||S>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(R&&R.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(C&&C.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(T&&T.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const N={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:S};d.fill(0),d[0]=S,R&&(d[1]=R.length),d[2]=1,d[3]=1,C&&d.set(C,32),T&&d.set(T,48);for(let U=0;U<16;U++)N.h[U]=i[U]^r(d,U*4);return R&&(h(N,R),N.c=128),N}function h(S,R){for(let C=0;C<R.length;C++)S.c===128&&(S.t+=S.c,l(S,!1),S.c=0),S.b[S.c++]=R[C]}function m(S){for(S.t+=S.c;S.c<128;)S.b[S.c++]=0;l(S,!0);const R=new Uint8Array(S.outlen);for(let C=0;C<S.outlen;C++)R[C]=S.h[C>>2]>>8*(C&3);return R}function y(S,R,C,T,N){C=C||64,S=t.normalizeInput(S),T&&(T=t.normalizeInput(T)),N&&(N=t.normalizeInput(N));const U=f(C,R,T,N);return h(U,S),m(U)}function E(S,R,C,T,N){const U=y(S,R,C,T,N);return t.toHex(U)}return cb={blake2b:y,blake2bHex:E,blake2bInit:f,blake2bUpdate:h,blake2bFinal:m},cb}var ub,nx;function UQ(){if(nx)return ub;nx=1;const t=aO();function e(m,y){return m[y]^m[y+1]<<8^m[y+2]<<16^m[y+3]<<24}function n(m,y,E,S,R,C){o[m]=o[m]+o[y]+R,o[S]=r(o[S]^o[m],16),o[E]=o[E]+o[S],o[y]=r(o[y]^o[E],12),o[m]=o[m]+o[y]+C,o[S]=r(o[S]^o[m],8),o[E]=o[E]+o[S],o[y]=r(o[y]^o[E],7)}function r(m,y){return m>>>y^m<<32-y}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(m,y){let E=0;for(E=0;E<8;E++)o[E]=m.h[E],o[E+8]=s[E];for(o[12]^=m.t,o[13]^=m.t/4294967296,y&&(o[14]=~o[14]),E=0;E<16;E++)a[E]=e(m.b,4*E);for(E=0;E<10;E++)n(0,4,8,12,a[i[E*16+0]],a[i[E*16+1]]),n(1,5,9,13,a[i[E*16+2]],a[i[E*16+3]]),n(2,6,10,14,a[i[E*16+4]],a[i[E*16+5]]),n(3,7,11,15,a[i[E*16+6]],a[i[E*16+7]]),n(0,5,10,15,a[i[E*16+8]],a[i[E*16+9]]),n(1,6,11,12,a[i[E*16+10]],a[i[E*16+11]]),n(2,7,8,13,a[i[E*16+12]],a[i[E*16+13]]),n(3,4,9,14,a[i[E*16+14]],a[i[E*16+15]]);for(E=0;E<8;E++)m.h[E]^=o[E]^o[E+8]}function u(m,y){if(!(m>0&&m<=32))throw new Error("Incorrect output length, should be in [1, 32]");const E=y?y.length:0;if(y&&!(E>0&&E<=32))throw new Error("Incorrect key length, should be in [1, 32]");const S={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:m};return S.h[0]^=16842752^E<<8^m,E>0&&(l(S,y),S.c=64),S}function l(m,y){for(let E=0;E<y.length;E++)m.c===64&&(m.t+=m.c,c(m,!1),m.c=0),m.b[m.c++]=y[E]}function d(m){for(m.t+=m.c;m.c<64;)m.b[m.c++]=0;c(m,!0);const y=new Uint8Array(m.outlen);for(let E=0;E<m.outlen;E++)y[E]=m.h[E>>2]>>8*(E&3)&255;return y}function f(m,y,E){E=E||32,m=t.normalizeInput(m);const S=u(E,y);return l(S,m),d(S)}function h(m,y,E){const S=f(m,y,E);return t.toHex(S)}return ub={blake2s:f,blake2sHex:h,blake2sInit:u,blake2sUpdate:l,blake2sFinal:d},ub}var lb,rx;function MQ(){if(rx)return lb;rx=1;const t=DQ(),e=UQ();return lb={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},lb}var $Q=MQ(),LQ={};const FQ=":";function Qo(t){const[e,n]=t.split(FQ);return{namespace:e,reference:n}}function cO(t,e){return t.includes(":")?[t]:e.chains||[]}var jQ=Object.defineProperty,qQ=Object.defineProperties,zQ=Object.getOwnPropertyDescriptors,sx=Object.getOwnPropertySymbols,HQ=Object.prototype.hasOwnProperty,WQ=Object.prototype.propertyIsEnumerable,NE=(t,e,n)=>e in t?jQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ix=(t,e)=>{for(var n in e||(e={}))HQ.call(e,n)&&NE(t,n,e[n]);if(sx)for(var n of sx(e))WQ.call(e,n)&&NE(t,n,e[n]);return t},VQ=(t,e)=>qQ(t,zQ(e)),ox=(t,e,n)=>NE(t,typeof e!="symbol"?e+"":e,n);const KQ="ReactNative",Us={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},GQ="js";function Mg(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ac(){return!aa.getDocument()&&!!aa.getNavigator()&&navigator.product===KQ}function YQ(){return Ac()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function ZQ(){return Ac()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function pd(){return!Mg()&&!!aa.getNavigator()&&!!aa.getDocument()}function pp(){return Ac()?Us.reactNative:Mg()?Us.node:pd()?Us.browser:Us.unknown}function ax(){var t;try{return Ac()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function JQ(t,e){const n=new URLSearchParams(t);return Object.entries(e).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!=null&&n.set(r,String(s))}),n.toString()}function XQ(t){var e,n;const r=uO();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),VQ(ix(ix({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function uO(){return JG.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function QQ(){if(pp()===Us.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=HG();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function eee(){var t;const e=pp();return e===Us.browser?[e,((t=aa.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function lO(t,e,n){const r=QQ(),s=eee();return[[t,e].join("-"),[GQ,n].join("-"),r,s].join("/")}function tee({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=n.split("?"),l=lO(t,e,r),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=JQ(u[1]||"",d);return u[0]+"?"+f}function tu(t,e){return t.filter(n=>e.includes(n)).length===t.length}function TE(t){return Object.fromEntries(t.entries())}function RE(t){return new Map(Object.entries(t))}function zc(t=Ae.FIVE_MINUTES,e){const n=Ae.toMiliseconds(t||Ae.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},n),r=a,s=c})}}function to(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function dO(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function nee(t){return dO("topic",t)}function ree(t){return dO("id",t)}function fO(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Pn(t,e){return Ae.fromMiliseconds(Date.now()+Ae.toMiliseconds(t))}function Zi(t){return Date.now()>=Ae.toMiliseconds(t)}function Ut(t,e){return`${t}${e?`:${e}`:""}`}function oo(t=[],e=[]){return[...new Set([...t,...e])]}async function see({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s?.href;if(typeof i!="string")return;const o=iee(i,t,e),a=pp();if(a===Us.browser){if(!((r=aa.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}oee(o)}else a===Us.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function iee(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${lee(r,!0)}`}else s=`${s}/wc?${r}`;return s}function oee(t){let e="_self";uee()?e="_top":(cee()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function aee(t,e){let n="";try{if(pd()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function cx(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function ux(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function qC(){return typeof process<"u"&&LQ.IS_VITEST==="true"}function cee(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function uee(){try{return window.self!==window.top}catch{return!1}}function lee(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function hO(t){return Buffer.from(t,"base64").toString("utf-8")}function dee(t){return new Promise(e=>setTimeout(e,t))}let fee=class{constructor({limit:e}){ox(this,"limit"),ox(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const o0=BigInt(2**32-1),lx=BigInt(32);function pO(t,e=!1){return e?{h:Number(t&o0),l:Number(t>>lx&o0)}:{h:Number(t>>lx&o0)|0,l:Number(t&o0)|0}}function gO(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=pO(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const dx=(t,e,n)=>t>>>n,fx=(t,e,n)=>t<<32-n|e>>>n,ja=(t,e,n)=>t>>>n|e<<32-n,qa=(t,e,n)=>t<<32-n|e>>>n,rf=(t,e,n)=>t<<64-n|e>>>n-32,sf=(t,e,n)=>t>>>n-32|e<<64-n,hee=(t,e)=>e,pee=(t,e)=>t,gee=(t,e,n)=>t<<n|e>>>32-n,mee=(t,e,n)=>e<<n|t>>>32-n,yee=(t,e,n)=>e<<n-32|t>>>64-n,wee=(t,e,n)=>t<<n-32|e>>>64-n;function hi(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const zC=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),HC=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,bee=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Eee=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,vee=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Cee=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,el=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Gm(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ca(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ri(t,...e){if(!Gm(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ym(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ca(t.outputLen),ca(t.blockLen)}function Ec(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function WC(t,e){Ri(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ph(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ni(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function db(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function $i(t,e){return t<<32-e|t>>>e}const mO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function yO(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const ko=mO?t=>t:t=>yO(t);function _ee(t){for(let e=0;e<t.length;e++)t[e]=yO(t[e]);return t}const za=mO?t=>t:_ee,wO=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Aee=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pl(t){if(Ri(t),wO)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Aee[t[n]];return e}const No={_0:48,_9:57,A:65,F:70,a:97,f:102};function hx(t){if(t>=No._0&&t<=No._9)return t-No._0;if(t>=No.A&&t<=No.F)return t-(No.A-10);if(t>=No.a&&t<=No.f)return t-(No.a-10)}function $g(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(wO)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=hx(t.charCodeAt(i)),a=hx(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function bO(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ni(t){return typeof t=="string"&&(t=bO(t)),Ri(t),t}function Ka(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ri(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Zm=class{};function gp(t){const e=r=>t().update(Ni(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function See(t){const e=(r,s)=>t(s).update(Ni(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function $u(t=32){if(el&&typeof el.getRandomValues=="function")return el.getRandomValues(new Uint8Array(t));if(el&&typeof el.randomBytes=="function")return Uint8Array.from(el.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const xee=BigInt(0),Bd=BigInt(1),Iee=BigInt(2),Nee=BigInt(7),Tee=BigInt(256),Ree=BigInt(113),EO=[],vO=[],CO=[];for(let t=0,e=Bd,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],EO.push(2*(5*r+n)),vO.push((t+1)*(t+2)/2%64);let s=xee;for(let i=0;i<7;i++)e=(e<<Bd^(e>>Nee)*Ree)%Tee,e&Iee&&(s^=Bd<<(Bd<<BigInt(i))-Bd);CO.push(s)}const _O=gO(CO,!0),Oee=_O[0],Pee=_O[1],px=(t,e,n)=>n>32?yee(t,e,n):gee(t,e,n),gx=(t,e,n)=>n>32?wee(t,e,n):mee(t,e,n);function kee(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=px(u,l,1)^n[a],f=gx(u,l,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=vO[o],c=px(s,i,a),u=gx(s,i,a),l=EO[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Oee[r],t[1]^=Pee[r]}ni(n)}let Bee=class AO extends Zm{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,ca(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Ph(this.state)}clone(){return this._cloneInto()}keccak(){za(this.state32),kee(this.state32,this.rounds),za(this.state32),this.posOut=0,this.pos=0}update(e){Ec(this),e=Ni(e),Ri(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ec(this,!1),Ri(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ca(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(WC(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ni(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new AO(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Dee=(t,e,n)=>gp(()=>new Bee(e,t,n)),Uee=Dee(1,136,256/8);function Mee(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function $ee(t,e,n){return t&e^~t&n}function Lee(t,e,n){return t&e^t&n^e&n}let SO=class extends Zm{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=db(this.buffer)}update(e){Ec(this),e=Ni(e),Ri(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=db(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ec(this),WC(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ni(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Mee(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=db(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Sa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),_r=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Fee=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xa=new Uint32Array(64);class jee extends SO{constructor(e=32){super(64,e,8,!1),this.A=Sa[0]|0,this.B=Sa[1]|0,this.C=Sa[2]|0,this.D=Sa[3]|0,this.E=Sa[4]|0,this.F=Sa[5]|0,this.G=Sa[6]|0,this.H=Sa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)xa[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=xa[d-15],h=xa[d-2],m=$i(f,7)^$i(f,18)^f>>>3,y=$i(h,17)^$i(h,19)^h>>>10;xa[d]=y+xa[d-7]+m+xa[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=$i(a,6)^$i(a,11)^$i(a,25),h=l+f+$ee(a,c,u)+Fee[d]+xa[d]|0,m=($i(r,2)^$i(r,13)^$i(r,22))+Lee(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){ni(xa)}destroy(){this.set(0,0,0,0,0,0,0,0),ni(this.buffer)}}const xO=gO(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),qee=xO[0],zee=xO[1],Ia=new Uint32Array(80),Na=new Uint32Array(80);let VC=class extends SO{constructor(e=64){super(128,e,16,!1),this.Ah=_r[0]|0,this.Al=_r[1]|0,this.Bh=_r[2]|0,this.Bl=_r[3]|0,this.Ch=_r[4]|0,this.Cl=_r[5]|0,this.Dh=_r[6]|0,this.Dl=_r[7]|0,this.Eh=_r[8]|0,this.El=_r[9]|0,this.Fh=_r[10]|0,this.Fl=_r[11]|0,this.Gh=_r[12]|0,this.Gl=_r[13]|0,this.Hh=_r[14]|0,this.Hl=_r[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:h,Gl:m,Hh:y,Hl:E}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,m,y,E]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,m,y,E){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=m|0,this.Hh=y|0,this.Hl=E|0}process(e,n){for(let C=0;C<16;C++,n+=4)Ia[C]=e.getUint32(n),Na[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const T=Ia[C-15]|0,N=Na[C-15]|0,U=ja(T,N,1)^ja(T,N,8)^dx(T,N,7),q=qa(T,N,1)^qa(T,N,8)^fx(T,N,7),H=Ia[C-2]|0,P=Na[C-2]|0,$=ja(H,P,19)^rf(H,P,61)^dx(H,P,6),W=qa(H,P,19)^sf(H,P,61)^fx(H,P,6),z=bee(q,W,Na[C-7],Na[C-16]),_=Eee(z,U,$,Ia[C-7],Ia[C-16]);Ia[C]=_|0,Na[C]=z|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:h,Fl:m,Gh:y,Gl:E,Hh:S,Hl:R}=this;for(let C=0;C<80;C++){const T=ja(d,f,14)^ja(d,f,18)^rf(d,f,41),N=qa(d,f,14)^qa(d,f,18)^sf(d,f,41),U=d&h^~d&y,q=f&m^~f&E,H=vee(R,N,q,zee[C],Na[C]),P=Cee(H,S,T,U,qee[C],Ia[C]),$=H|0,W=ja(r,s,28)^rf(r,s,34)^rf(r,s,39),z=qa(r,s,28)^sf(r,s,34)^sf(r,s,39),_=r&i^r&a^i&a,p=s&o^s&c^o&c;S=y|0,R=E|0,y=h|0,E=m|0,h=d|0,m=f|0,{h:d,l:f}=hi(u|0,l|0,P|0,$|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=zC($,z,p);r=HC(g,P,W,_),s=g|0}({h:r,l:s}=hi(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=hi(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=hi(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=hi(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=hi(this.Eh|0,this.El|0,d|0,f|0),{h,l:m}=hi(this.Fh|0,this.Fl|0,h|0,m|0),{h:y,l:E}=hi(this.Gh|0,this.Gl|0,y|0,E|0),{h:S,l:R}=hi(this.Hh|0,this.Hl|0,S|0,R|0),this.set(r,s,i,o,a,c,u,l,d,f,h,m,y,E,S,R)}roundClean(){ni(Ia,Na)}destroy(){ni(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class Hee extends VC{constructor(){super(48),this.Ah=Cr[0]|0,this.Al=Cr[1]|0,this.Bh=Cr[2]|0,this.Bl=Cr[3]|0,this.Ch=Cr[4]|0,this.Cl=Cr[5]|0,this.Dh=Cr[6]|0,this.Dl=Cr[7]|0,this.Eh=Cr[8]|0,this.El=Cr[9]|0,this.Fh=Cr[10]|0,this.Fl=Cr[11]|0,this.Gh=Cr[12]|0,this.Gl=Cr[13]|0,this.Hh=Cr[14]|0,this.Hl=Cr[15]|0}}const Ar=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Wee extends VC{constructor(){super(32),this.Ah=Ar[0]|0,this.Al=Ar[1]|0,this.Bh=Ar[2]|0,this.Bl=Ar[3]|0,this.Ch=Ar[4]|0,this.Cl=Ar[5]|0,this.Dh=Ar[6]|0,this.Dl=Ar[7]|0,this.Eh=Ar[8]|0,this.El=Ar[9]|0,this.Fh=Ar[10]|0,this.Fl=Ar[11]|0,this.Gh=Ar[12]|0,this.Gl=Ar[13]|0,this.Hh=Ar[14]|0,this.Hl=Ar[15]|0}}const Jm=gp(()=>new jee),Vee=gp(()=>new VC),Kee=gp(()=>new Hee),Gee=gp(()=>new Wee),Yee=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),jn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Be=new Uint32Array(32);function Ta(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Be[2*t],u=Be[2*t+1],l=Be[2*e],d=Be[2*e+1],f=Be[2*n],h=Be[2*n+1],m=Be[2*r],y=Be[2*r+1],E=zC(c,l,o);u=HC(E,u,d,a),c=E|0,{Dh:y,Dl:m}={Dh:y^u,Dl:m^c},{Dh:y,Dl:m}={Dh:hee(y,m),Dl:pee(y)},{h,l:f}=hi(h,f,y,m),{Bh:d,Bl:l}={Bh:d^h,Bl:l^f},{Bh:d,Bl:l}={Bh:ja(d,l,24),Bl:qa(d,l,24)},Be[2*t]=c,Be[2*t+1]=u,Be[2*e]=l,Be[2*e+1]=d,Be[2*n]=f,Be[2*n+1]=h,Be[2*r]=m,Be[2*r+1]=y}function Ra(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Be[2*t],u=Be[2*t+1],l=Be[2*e],d=Be[2*e+1],f=Be[2*n],h=Be[2*n+1],m=Be[2*r],y=Be[2*r+1],E=zC(c,l,o);u=HC(E,u,d,a),c=E|0,{Dh:y,Dl:m}={Dh:y^u,Dl:m^c},{Dh:y,Dl:m}={Dh:ja(y,m,16),Dl:qa(y,m,16)},{h,l:f}=hi(h,f,y,m),{Bh:d,Bl:l}={Bh:d^h,Bl:l^f},{Bh:d,Bl:l}={Bh:rf(d,l,63),Bl:sf(d,l,63)},Be[2*t]=c,Be[2*t+1]=u,Be[2*e]=l,Be[2*e+1]=d,Be[2*n]=f,Be[2*n+1]=h,Be[2*r]=m,Be[2*r+1]=y}function Zee(t,e={},n,r,s){if(ca(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class Jee extends Zm{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ca(e),ca(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Ph(this.buffer)}update(e){Ec(this),e=Ni(e),Ri(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(za(s),this.compress(s,0,!1),za(s),this.pos=0);const u=Math.min(n-this.pos,i-c),l=o+c;if(u===n&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));za(d);for(let f=0;c+n<i;f+=s.length,c+=n)this.length+=n,this.compress(d,f,!1);za(d);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){Ec(this),WC(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,ni(this.buffer.subarray(n)),za(r),this.compress(r,0,!0),za(r);const s=Ph(e);this.get().forEach((i,o)=>s[o]=ko(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class Xee extends Jee{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=jn[0]|0,this.v0h=jn[1]|0,this.v1l=jn[2]|0,this.v1h=jn[3]|0,this.v2l=jn[4]|0,this.v2h=jn[5]|0,this.v3l=jn[6]|0,this.v3h=jn[7]|0,this.v4l=jn[8]|0,this.v4h=jn[9]|0,this.v5l=jn[10]|0,this.v5h=jn[11]|0,this.v6l=jn[12]|0,this.v6h=jn[13]|0,this.v7l=jn[14]|0,this.v7h=jn[15]|0,Zee(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Ni(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Ni(i);const a=Ph(i);this.v4l^=ko(a[0]),this.v4h^=ko(a[1]),this.v5l^=ko(a[2]),this.v5h^=ko(a[3])}if(s!==void 0){s=Ni(s);const a=Ph(s);this.v6l^=ko(a[0]),this.v6h^=ko(a[1]),this.v7l^=ko(a[2]),this.v7h^=ko(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:f,v6l:h,v6h:m,v7l:y,v7h:E}=this;return[e,n,r,s,i,o,a,c,u,l,d,f,h,m,y,E]}set(e,n,r,s,i,o,a,c,u,l,d,f,h,m,y,E){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=f|0,this.v6l=h|0,this.v6h=m|0,this.v7l=y|0,this.v7h=E|0}compress(e,n,r){this.get().forEach((c,u)=>Be[u]=c),Be.set(jn,16);let{h:s,l:i}=pO(BigInt(this.length));Be[24]=jn[8]^i,Be[25]=jn[9]^s,r&&(Be[28]=~Be[28],Be[29]=~Be[29]);let o=0;const a=Yee;for(let c=0;c<12;c++)Ta(0,4,8,12,e,n+2*a[o++]),Ra(0,4,8,12,e,n+2*a[o++]),Ta(1,5,9,13,e,n+2*a[o++]),Ra(1,5,9,13,e,n+2*a[o++]),Ta(2,6,10,14,e,n+2*a[o++]),Ra(2,6,10,14,e,n+2*a[o++]),Ta(3,7,11,15,e,n+2*a[o++]),Ra(3,7,11,15,e,n+2*a[o++]),Ta(0,5,10,15,e,n+2*a[o++]),Ra(0,5,10,15,e,n+2*a[o++]),Ta(1,6,11,12,e,n+2*a[o++]),Ra(1,6,11,12,e,n+2*a[o++]),Ta(2,7,8,13,e,n+2*a[o++]),Ra(2,7,8,13,e,n+2*a[o++]),Ta(3,4,9,14,e,n+2*a[o++]),Ra(3,4,9,14,e,n+2*a[o++]);this.v0l^=Be[0]^Be[16],this.v0h^=Be[1]^Be[17],this.v1l^=Be[2]^Be[18],this.v1h^=Be[3]^Be[19],this.v2l^=Be[4]^Be[20],this.v2h^=Be[5]^Be[21],this.v3l^=Be[6]^Be[22],this.v3h^=Be[7]^Be[23],this.v4l^=Be[8]^Be[24],this.v4h^=Be[9]^Be[25],this.v5l^=Be[10]^Be[26],this.v5h^=Be[11]^Be[27],this.v6l^=Be[12]^Be[28],this.v6h^=Be[13]^Be[29],this.v7l^=Be[14]^Be[30],this.v7h^=Be[15]^Be[31],ni(Be)}destroy(){this.destroyed=!0,ni(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Qee=See(t=>new Xee(t)),ete="https://rpc.walletconnect.org/v1";function IO(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Uee(n)).toString("hex")}async function tte(t,e,n,r,s,i){switch(n.t){case"eip191":return await nte(t,e,n.s);case"eip1271":return await rte(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function nte(t,e,n){const r=zZ(n);return XJ({payload:IO(e),signature:r}).toLowerCase()===t.toLowerCase()}async function rte(t,e,n,r,s,i){const o=Qo(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=n.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:IO(e)).substring(2),f=a+d+c+l+u,h=await fetch(`${i||ete}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:ste(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:m}=await h.json();return m?m.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function ste(){return Date.now()+Math.floor(Math.random()*1e3)}function ite(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return tr.encode(i)}function ote(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=Qee(r,{dkLen:32});return tr.encode(s)}function mx(t){const e=new Uint8Array(Jm(ate(t)));return tr.encode(e)}function ate(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function yx(t){const e=Buffer.from(t,"base64"),n=MX(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=NX(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=Gee(i);return JJ.encode(o).replace(/=+$/,"")}function fb(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function cte(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(fb(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(fb(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(fb(r.length)),s.push(r);const i=Buffer.concat(s),o=Jm(i);return Buffer.from(o).toString("hex").toUpperCase()}function ute(t){var e,n;const r=[];try{if(typeof t=="string")return r.push(t),r;if(typeof t!="object")return r;t!=null&&t.id&&r.push(t.id);const s=(n=(e=t?.capabilities)==null?void 0:e.caip345)==null?void 0:n.transactionHashes;s&&r.push(...s)}catch(s){console.warn("getWalletSendCallsHashes failed: ",s)}return r}var lte=Object.defineProperty,dte=Object.defineProperties,fte=Object.getOwnPropertyDescriptors,wx=Object.getOwnPropertySymbols,hte=Object.prototype.hasOwnProperty,pte=Object.prototype.propertyIsEnumerable,bx=(t,e,n)=>e in t?lte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gte=(t,e)=>{for(var n in e||(e={}))hte.call(e,n)&&bx(t,n,e[n]);if(wx)for(var n of wx(e))pte.call(e,n)&&bx(t,n,e[n]);return t},mte=(t,e)=>dte(t,fte(e));const NO="did:pkh:",yte={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},wte=t=>t?yte[t]||t:"",Xm=t=>t?.split(":"),bte=t=>{const e=t&&Xm(t);if(e)return t.includes(NO)?e[3]:e[1]},Ete=t=>{const e=t&&Xm(t);if(e)return t.includes(NO)?e[2]:e[0]},OE=t=>{const e=t&&Xm(t);if(e)return e[2]+":"+e[3]},Lg=t=>{const e=t&&Xm(t);if(e)return e.pop()};async function Ex(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=TO(s,s.iss),o=Lg(s.iss);return await tte(o,i,r,OE(s.iss),n)}const TO=(t,e)=>{const n=Ete(e);if(!n)throw new Error("Invalid issuer: "+e);const r=`${t.domain} wants you to sign in with your ${wte(n)} account:`,s=Lg(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const o=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,c=`Chain ID: ${bte(e)}`,u=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,d=t.exp?`Expiration Time: ${t.exp}`:void 0,f=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,m=t.resources?`Resources:${t.resources.map(E=>`
- ${E}`).join("")}`:void 0,y=M0(t.resources);if(y){const E=kh(y);i=Tte(i,E)}return[r,s,"",i,"",o,a,c,u,l,d,f,h,m].filter(E=>E!=null).join(`
`)};function vte(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Cte(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function xu(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function _te(t,e,n,r={}){return n?.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Ate(e,n,r)}}}function Ate(t,e,n={}){e=e?.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function RO(t){return xu(t),`urn:recap:${vte(t).replace(/=/g,"")}`}function kh(t){const e=Cte(t.replace("urn:recap:",""));return xu(e),e}function Ste(t,e,n){const r=_te(t,e,n);return RO(r)}function xte(t){return t&&t.includes("urn:recap:")}function Ite(t,e){const n=kh(t),r=kh(e),s=Nte(n,r);return RO(s)}function Nte(t,e){xu(t),xu(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;r.att[s]=mte(gte({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),r}function Tte(t="",e){xu(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));r.push(l.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function vx(t){var e;const n=kh(t);xu(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Cx(t){const e=kh(t);xu(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function M0(t){if(!t)return;const e=t?.[t.length-1];return xte(e)?e:void 0}function OO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function PE(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function hb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ls(t,...e){if(!OO(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _x(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Rte(t,e){ls(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ac(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function nd(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ote(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Pte=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function kte(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function kE(t){if(typeof t=="string")t=kte(t);else if(OO(t))t=BE(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Bte(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Dte(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Ute=(t,e)=>{function n(r,...s){if(ls(r),!Pte)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?ls(u):ls(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&ls(s[1]);const o=e(r,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");ls(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ls(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(ls(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(n,t),n};function Ax(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!$te(e))throw new Error("invalid output, must be aligned");return e}function Sx(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Mte(t,e,n){PE(n);const r=new Uint8Array(16),s=Ote(r);return Sx(s,0,BigInt(e),n),Sx(s,8,BigInt(t),n),r}function $te(t){return t.byteOffset%4===0}function BE(t){return Uint8Array.from(t)}const PO=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Lte=PO("expand 16-byte k"),Fte=PO("expand 32-byte k"),jte=ac(Lte),qte=ac(Fte);function Nt(t,e){return t<<e|t>>>32-e}function DE(t){return t.byteOffset%4===0}const a0=64,zte=16,kO=2**32-1,xx=new Uint32Array;function Hte(t,e,n,r,s,i,o,a){const c=s.length,u=new Uint8Array(a0),l=ac(u),d=DE(s)&&DE(i),f=d?ac(s):xx,h=d?ac(i):xx;for(let m=0;m<c;o++){if(t(e,n,r,l,o,a),o>=kO)throw new Error("arx: counter overflow");const y=Math.min(a0,c-m);if(d&&y===a0){const E=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let S=0,R;S<zte;S++)R=E+S,h[R]=f[R]^l[S];m+=a0;continue}for(let E=0,S;E<y;E++)S=m+E,i[S]=s[S]^u[E];m+=y}}function Wte(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Bte({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return hb(s),hb(o),PE(i),PE(n),(a,c,u,l,d=0)=>{ls(a),ls(c),ls(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),ls(l),hb(d),d<0||d>=kO)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const h=[];let m=a.length,y,E;if(m===32)h.push(y=BE(a)),E=qte;else if(m===16&&n)y=new Uint8Array(32),y.set(a),y.set(a,16),E=jte,h.push(y);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);DE(c)||h.push(c=BE(c));const S=ac(y);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(E,S,ac(c.subarray(0,16)),S),c=c.subarray(16)}const R=16-s;if(R!==c.length)throw new Error(`arx: nonce must be ${R} or 16 bytes`);if(R!==12){const T=new Uint8Array(12);T.set(c,i?0:12-c.length),c=T,h.push(c)}const C=ac(c);return Hte(t,E,S,C,u,l,d,o),nd(...h),l}}const or=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Vte{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=kE(e),ls(e,32);const n=or(e,0),r=or(e,2),s=or(e,4),i=or(e,6),o=or(e,8),a=or(e,10),c=or(e,12),u=or(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=or(e,16+2*l)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],f=o[5],h=o[6],m=o[7],y=o[8],E=o[9],S=or(e,n+0),R=or(e,n+2),C=or(e,n+4),T=or(e,n+6),N=or(e,n+8),U=or(e,n+10),q=or(e,n+12),H=or(e,n+14);let P=i[0]+(S&8191),$=i[1]+((S>>>13|R<<3)&8191),W=i[2]+((R>>>10|C<<6)&8191),z=i[3]+((C>>>7|T<<9)&8191),_=i[4]+((T>>>4|N<<12)&8191),p=i[5]+(N>>>1&8191),g=i[6]+((N>>>14|U<<2)&8191),b=i[7]+((U>>>11|q<<5)&8191),x=i[8]+((q>>>8|H<<8)&8191),O=i[9]+(H>>>5|s),k=0,M=k+P*a+$*(5*E)+W*(5*y)+z*(5*m)+_*(5*h);k=M>>>13,M&=8191,M+=p*(5*f)+g*(5*d)+b*(5*l)+x*(5*u)+O*(5*c),k+=M>>>13,M&=8191;let B=k+P*c+$*a+W*(5*E)+z*(5*y)+_*(5*m);k=B>>>13,B&=8191,B+=p*(5*h)+g*(5*f)+b*(5*d)+x*(5*l)+O*(5*u),k+=B>>>13,B&=8191;let w=k+P*u+$*c+W*a+z*(5*E)+_*(5*y);k=w>>>13,w&=8191,w+=p*(5*m)+g*(5*h)+b*(5*f)+x*(5*d)+O*(5*l),k+=w>>>13,w&=8191;let v=k+P*l+$*u+W*c+z*a+_*(5*E);k=v>>>13,v&=8191,v+=p*(5*y)+g*(5*m)+b*(5*h)+x*(5*f)+O*(5*d),k+=v>>>13,v&=8191;let D=k+P*d+$*l+W*u+z*c+_*a;k=D>>>13,D&=8191,D+=p*(5*E)+g*(5*y)+b*(5*m)+x*(5*h)+O*(5*f),k+=D>>>13,D&=8191;let F=k+P*f+$*d+W*l+z*u+_*c;k=F>>>13,F&=8191,F+=p*a+g*(5*E)+b*(5*y)+x*(5*m)+O*(5*h),k+=F>>>13,F&=8191;let Z=k+P*h+$*f+W*d+z*l+_*u;k=Z>>>13,Z&=8191,Z+=p*c+g*a+b*(5*E)+x*(5*y)+O*(5*m),k+=Z>>>13,Z&=8191;let ee=k+P*m+$*h+W*f+z*d+_*l;k=ee>>>13,ee&=8191,ee+=p*u+g*c+b*a+x*(5*E)+O*(5*y),k+=ee>>>13,ee&=8191;let de=k+P*y+$*m+W*h+z*f+_*d;k=de>>>13,de&=8191,de+=p*l+g*u+b*c+x*a+O*(5*E),k+=de>>>13,de&=8191;let ae=k+P*E+$*y+W*m+z*h+_*f;k=ae>>>13,ae&=8191,ae+=p*d+g*l+b*u+x*c+O*a,k+=ae>>>13,ae&=8191,k=(k<<2)+k|0,k=k+M|0,M=k&8191,k=k>>>13,B+=k,i[0]=M,i[1]=B,i[2]=w,i[3]=v,i[4]=D,i[5]=F,i[6]=Z,i[7]=ee,i[8]=de,i[9]=ae}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;nd(r)}update(e){_x(this),e=kE(e),ls(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){nd(this.h,this.r,this.buffer,this.pad)}digestInto(e){_x(this),Rte(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Kte(t){const e=(r,s)=>t(s).update(kE(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Gte=Kte(t=>new Vte(t));function Yte(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],f=e[2],h=e[3],m=e[4],y=e[5],E=e[6],S=e[7],R=s,C=n[0],T=n[1],N=n[2],U=o,q=a,H=c,P=u,$=l,W=d,z=f,_=h,p=m,g=y,b=E,x=S,O=R,k=C,M=T,B=N;for(let v=0;v<i;v+=2)U=U+$|0,O=Nt(O^U,16),p=p+O|0,$=Nt($^p,12),U=U+$|0,O=Nt(O^U,8),p=p+O|0,$=Nt($^p,7),q=q+W|0,k=Nt(k^q,16),g=g+k|0,W=Nt(W^g,12),q=q+W|0,k=Nt(k^q,8),g=g+k|0,W=Nt(W^g,7),H=H+z|0,M=Nt(M^H,16),b=b+M|0,z=Nt(z^b,12),H=H+z|0,M=Nt(M^H,8),b=b+M|0,z=Nt(z^b,7),P=P+_|0,B=Nt(B^P,16),x=x+B|0,_=Nt(_^x,12),P=P+_|0,B=Nt(B^P,8),x=x+B|0,_=Nt(_^x,7),U=U+W|0,B=Nt(B^U,16),b=b+B|0,W=Nt(W^b,12),U=U+W|0,B=Nt(B^U,8),b=b+B|0,W=Nt(W^b,7),q=q+z|0,O=Nt(O^q,16),x=x+O|0,z=Nt(z^x,12),q=q+z|0,O=Nt(O^q,8),x=x+O|0,z=Nt(z^x,7),H=H+_|0,k=Nt(k^H,16),p=p+k|0,_=Nt(_^p,12),H=H+_|0,k=Nt(k^H,8),p=p+k|0,_=Nt(_^p,7),P=P+$|0,M=Nt(M^P,16),g=g+M|0,$=Nt($^g,12),P=P+$|0,M=Nt(M^P,8),g=g+M|0,$=Nt($^g,7);let w=0;r[w++]=o+U|0,r[w++]=a+q|0,r[w++]=c+H|0,r[w++]=u+P|0,r[w++]=l+$|0,r[w++]=d+W|0,r[w++]=f+z|0,r[w++]=h+_|0,r[w++]=m+p|0,r[w++]=y+g|0,r[w++]=E+b|0,r[w++]=S+x|0,r[w++]=R+O|0,r[w++]=C+k|0,r[w++]=T+M|0,r[w++]=N+B|0}const Zte=Wte(Yte,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Jte=new Uint8Array(16),Ix=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Jte.subarray(n))},Xte=new Uint8Array(32);function Nx(t,e,n,r,s){const i=t(e,n,Xte),o=Gte.create(i);s&&Ix(o,s),Ix(o,r);const a=Mte(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return nd(i,a),c}const Qte=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=Ax(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Nx(t,e,n,a,r);return i.set(c,o),nd(c),i},decrypt(s,i){i=Ax(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Nx(t,e,n,o,r);if(!Dte(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),nd(c),i}}),BO=Ute({blockSize:64,nonceLength:12,tagLength:16},Qte(Zte));let DO=class extends Zm{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Ym(e);const r=Ni(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ni(i)}update(e){return Ec(this),this.iHash.update(e),this}digestInto(e){Ec(this),Ri(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Qm=(t,e,n)=>new DO(t,e).update(n).digest();Qm.create=(t,e)=>new DO(t,e);function ene(t,e,n){return Ym(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Qm(t,Ni(n),Ni(e))}const pb=Uint8Array.from([0]),Tx=Uint8Array.of();function tne(t,e,n,r=32){Ym(t),ca(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=Tx);const o=new Uint8Array(i*s),a=Qm.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)pb[0]=l+1,c.update(l===0?Tx:u).update(n).update(pb).digestInto(u),o.set(u,s*l),a._cloneInto(c);return a.destroy(),c.destroy(),ni(u,pb),o.slice(0,r)}const nne=(t,e,n,r,s)=>tne(t,ene(t,e,n),r,s),ey=Jm,KC=BigInt(0),UE=BigInt(1);function Fg(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function nu(t,e,n=""){const r=Gm(t),s=t?.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function c0(t){const e=t.toString(16);return e.length&1?"0"+e:e}function UO(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?KC:BigInt("0x"+t)}function ty(t){return UO(Pl(t))}function jg(t){return Ri(t),UO(Pl(Uint8Array.from(t).reverse()))}function GC(t,e){return $g(t.toString(16).padStart(e*2,"0"))}function YC(t,e){return GC(t,e).reverse()}function Pr(t,e,n){let r;if(typeof e=="string")try{r=$g(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Gm(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const gb=t=>typeof t=="bigint"&&KC<=t;function rne(t,e,n){return gb(t)&&gb(e)&&gb(n)&&e<=t&&t<n}function ME(t,e,n,r){if(!rne(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function MO(t){let e;for(e=0;t>KC;t>>=UE,e+=1);return e}const mp=t=>(UE<<BigInt(t))-UE;function sne(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...f)=>n(o,i,...f),l=(f=r(0))=>{o=u(s(0),f),i=u(),f.length!==0&&(o=u(s(1),f),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){i=u();const m=i.slice();h.push(m),f+=i.length}return Ka(...h)};return(f,h)=>{c(),l(f);let m;for(;!(m=h(d()));)l();return c(),m}}function ny(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Rx(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ms=BigInt(0),Gr=BigInt(1),ru=BigInt(2),$O=BigInt(3),LO=BigInt(4),FO=BigInt(5),ine=BigInt(7),jO=BigInt(8),one=BigInt(9),qO=BigInt(16);function Ts(t,e){const n=t%e;return n>=ms?n:e+n}function di(t,e,n){let r=t;for(;e-- >ms;)r*=r,r%=n;return r}function Ox(t,e){if(t===ms)throw new Error("invert: expected non-zero number");if(e<=ms)throw new Error("invert: expected positive modulus, got "+e);let n=Ts(t,e),r=e,s=ms,i=Gr;for(;n!==ms;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Gr)throw new Error("invert: does not exist");return Ts(s,e)}function ZC(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function zO(t,e){const n=(t.ORDER+Gr)/LO,r=t.pow(e,n);return ZC(t,r,e),r}function ane(t,e){const n=(t.ORDER-FO)/jO,r=t.mul(e,ru),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,ru),s),a=t.mul(i,t.sub(o,t.ONE));return ZC(t,a,e),a}function cne(t){const e=Sc(t),n=HO(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+ine)/qO;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,r);const d=a.mul(u,s),f=a.mul(u,i),h=a.eql(a.sqr(l),c),m=a.eql(a.sqr(d),c);u=a.cmov(u,l,h),l=a.cmov(f,d,m);const y=a.eql(a.sqr(l),c),E=a.cmov(u,l,y);return ZC(a,E,c),E}}function HO(t){if(t<$O)throw new Error("sqrt is not defined for small field");let e=t-Gr,n=0;for(;e%ru===ms;)e/=ru,n++;let r=ru;const s=Sc(t);for(;Px(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return zO;let i=s.pow(r,e);const o=(e+Gr)/ru;return function(a,c){if(a.is0(c))return c;if(Px(a,c)!==1)throw new Error("Cannot find square root");let u=n,l=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,m=a.sqr(d);for(;!a.eql(m,a.ONE);)if(h++,m=a.sqr(m),h===u)throw new Error("Cannot find square root");const y=Gr<<BigInt(u-h-1),E=a.pow(l,y);u=h,l=a.sqr(E),d=a.mul(d,l),f=a.mul(f,E)}return f}}function une(t){return t%LO===$O?zO:t%jO===FO?ane:t%qO===one?cne(t):HO(t)}const lne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function dne(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=lne.reduce((r,s)=>(r[s]="function",r),e);return ny(t,n),t}function fne(t,e,n){if(n<ms)throw new Error("invalid exponent, negatives unsupported");if(n===ms)return t.ONE;if(n===Gr)return e;let r=t.ONE,s=e;for(;n>ms;)n&Gr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Gr;return r}function WO(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Px(t,e){const n=(t.ORDER-Gr)/ru,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function VO(t,e){e!==void 0&&ca(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Sc(t,e,n=!1,r={}){if(t<=ms)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:u}=VO(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:u,MASK:mp(c),ZERO:ms,ONE:Gr,allowedLengths:a,create:f=>Ts(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return ms<=f&&f<t},is0:f=>f===ms,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&Gr)===Gr,neg:f=>Ts(-f,t),eql:(f,h)=>f===h,sqr:f=>Ts(f*f,t),add:(f,h)=>Ts(f+h,t),sub:(f,h)=>Ts(f-h,t),mul:(f,h)=>Ts(f*h,t),pow:(f,h)=>fne(d,f,h),div:(f,h)=>Ts(f*Ox(h,t),t),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>Ox(f,t),sqrt:i||(f=>(l||(l=une(t)),l(d,f))),toBytes:f=>n?YC(f,u):GC(f,u),fromBytes:(f,h=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const y=new Uint8Array(u);y.set(f,n?0:y.length-f.length),f=y}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let m=n?jg(f):ty(f);if(o&&(m=Ts(m,t)),!h&&!d.isValid(m))throw new Error("invalid field element: outside of range 0..ORDER");return m},invertBatch:f=>WO(d,f),cmov:(f,h,m)=>m?h:f});return Object.freeze(d)}function KO(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function GO(t){const e=KO(t);return e+Math.ceil(e/2)}function hne(t,e,n=!1){const r=t.length,s=KO(e),i=GO(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?jg(t):ty(t),a=Ts(o,e-Gr)+Gr;return n?YC(a,s):GC(a,s)}const rd=BigInt(0),su=BigInt(1);function qg(t,e){const n=e.negate();return t?n:e}function mb(t,e){const n=WO(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function YO(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function yb(t,e){YO(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=mp(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function kx(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=su);const u=e*r,l=u+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:h,offsetF:u}}function pne(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function gne(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const wb=new WeakMap,ZO=new WeakMap;function bb(t){return ZO.get(t)||1}function Bx(t){if(t!==rd)throw new Error("invalid wNAF")}class mne{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>rd;)n&su&&(r=r.add(s)),s=s.double(),n>>=su;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=yb(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=yb(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:h}=kx(r,a,o);r=c,l?i=i.add(qg(f,n[h])):s=s.add(qg(d,n[u]))}return Bx(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=yb(e,this.bits);for(let o=0;o<i.windows&&r!==rd;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=kx(r,o,i);if(r=a,!u){const d=n[c];s=s.add(l?d.negate():d)}}return Bx(r),s}getPrecomputes(e,n,r){let s=wb.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),wb.set(n,s))),s}cached(e,n,r){const s=bb(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=bb(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){YO(n,this.bits),ZO.set(e,n),wb.delete(e)}hasCache(e){return bb(e)!==1}}function yne(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>rd||r>rd;)n&su&&(i=i.add(s)),r&su&&(o=o.add(s)),s=s.double(),n>>=su,r>>=su;return{p1:i,p2:o}}function wne(t,e,n,r){pne(n,t),gne(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=MO(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=mp(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){l.fill(o);for(let y=0;y<i;y++){const E=r[y],S=Number(E>>BigInt(h)&u);l[S]=l[S].add(n[y])}let m=o;for(let y=l.length-1,E=o;y>0;y--)E=E.add(l[y]),m=m.add(E);if(f=f.add(m),h!==0)for(let y=0;y<c;y++)f=f.double()}return f}function Dx(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return dne(e),e}else return Sc(t,{isLE:n})}function bne(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>rd))throw new Error(`CURVE.${a} must be positive bigint`)}const s=Dx(e.p,n.Fp,r),i=Dx(e.n,n.Fn,r),o=["Gx","Gy","a","b"];for(const a of o)if(!s.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),bO("HashToScalar-");const Dd=BigInt(0),tl=BigInt(1),u0=BigInt(2);function Ene(t){return ny(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function vne(t){const e=Ene(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||$u,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),h=a?u0**BigInt(254):u0**BigInt(447),m=a?BigInt(8)*u0**BigInt(251)-tl:BigInt(4)*u0**BigInt(445)-tl,y=h+m+tl,E=z=>Ts(z,n),S=R(d);function R(z){return YC(E(z),l)}function C(z){const _=Pr("u coordinate",z,l);return a&&(_[31]&=127),E(jg(_))}function T(z){return jg(s(Pr("scalar",z,l)))}function N(z,_){const p=H(C(_),T(z));if(p===Dd)throw new Error("invalid private or public key received");return R(p)}function U(z){return N(z,S)}function q(z,_,p){const g=E(z*(_-p));return _=E(_-g),p=E(p+g),{x_2:_,x_3:p}}function H(z,_){ME("u",z,Dd,n),ME("scalar",_,h,y);const p=_,g=z;let b=tl,x=Dd,O=z,k=tl,M=Dd;for(let w=BigInt(u-1);w>=Dd;w--){const v=p>>w&tl;M^=v,{x_2:b,x_3:O}=q(M,b,O),{x_2:x,x_3:k}=q(M,x,k),M=v;const D=b+x,F=E(D*D),Z=b-x,ee=E(Z*Z),de=F-ee,ae=O+k,Oe=O-k,Qe=E(Oe*D),G=E(ae*Z),J=Qe+G,ne=Qe-G;O=E(J*J),k=E(g*E(ne*ne)),b=E(F*ee),x=E(de*(F+E(f*de)))}({x_2:b,x_3:O}=q(M,b,O)),{x_2:x,x_3:k}=q(M,x,k);const B=i(x);return E(b*B)}const P={secretKey:l,publicKey:l,seed:l},$=(z=c(l))=>(Ri(z,P.seed),z);function W(z){const _=$(z);return{secretKey:_,publicKey:U(_)}}return{keygen:W,getSharedSecret:(z,_)=>N(z,_),getPublicKey:z=>U(z),scalarMult:N,scalarMultBase:U,utils:{randomSecretKey:$,randomPrivateKey:$},GuBytes:S.slice(),lengths:P}}const Cne=BigInt(1),Ux=BigInt(2),_ne=BigInt(3),Ane=BigInt(5);BigInt(8);const JO=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Sne={p:JO,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function xne(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=JO,o=t*t%i*t%i,a=di(o,Ux,i)*o%i,c=di(a,Cne,i)*t%i,u=di(c,Ane,i)*c%i,l=di(u,e,i)*u%i,d=di(l,n,i)*l%i,f=di(d,r,i)*d%i,h=di(f,s,i)*f%i,m=di(h,s,i)*f%i,y=di(m,e,i)*u%i;return{pow_p_5_8:di(y,Ux,i)*t%i,b2:o}}function Ine(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Nne=Sc(Sne.p,{isLE:!0}),$E=(()=>{const t=Nne.ORDER;return vne({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=xne(e);return Ts(di(n,_ne,t)*r,t)},adjustScalarBytes:Ine})})(),Mx=(t,e)=>(t+(t>=0?e:-e)/XO)/e;function Tne(t,e,n){const[[r,s],[i,o]]=e,a=Mx(o*t,n),c=Mx(-s*t,n);let u=t-a*r-c*i,l=-a*s-c*o;const d=u<Yo,f=l<Yo;d&&(u=-u),f&&(l=-l);const h=mp(Math.ceil(MO(n)/2))+kl;if(u<Yo||u>=h||l<Yo||l>=h)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}function LE(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Eb(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return Fg(n.lowS,"lowS"),Fg(n.prehash,"prehash"),n.format!==void 0&&LE(n.format),n}class Rne extends Error{constructor(e=""){super(e)}}const qo={Err:Rne,_tlv:{encode:(t,e)=>{const{Err:n}=qo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=c0(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?c0(s.length/2|128):"";return c0(t)+i+s+e},decode(t,e){const{Err:n}=qo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=qo;if(t<Yo)throw new e("integer: negative integers are not allowed");let n=c0(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=qo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ty(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=qo,s=Pr("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=qo,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Yo=BigInt(0),kl=BigInt(1),XO=BigInt(2),l0=BigInt(3),One=BigInt(4);function hl(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=Pr("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Pne(t,e={}){const n=bne("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;ny(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=eP(r,s);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(z,_,p){const{x:g,y:b}=_.toAffine(),x=r.toBytes(g);if(Fg(p,"isCompressed"),p){l();const O=!r.isOdd(b);return Ka(QO(O),x)}else return Ka(Uint8Array.of(4),x,r.toBytes(b))}function f(z){nu(z,void 0,"Point");const{publicKey:_,publicKeyUncompressed:p}=u,g=z.length,b=z[0],x=z.subarray(1);if(g===_&&(b===2||b===3)){const O=r.fromBytes(x);if(!r.isValid(O))throw new Error("bad point: is not on curve, wrong x");const k=y(O);let M;try{M=r.sqrt(k)}catch(w){const v=w instanceof Error?": "+w.message:"";throw new Error("bad point: is not on curve, sqrt error"+v)}l();const B=r.isOdd(M);return(b&1)===1!==B&&(M=r.neg(M)),{x:O,y:M}}else if(g===p&&b===4){const O=r.BYTES,k=r.fromBytes(x.subarray(0,O)),M=r.fromBytes(x.subarray(O,O*2));if(!E(k,M))throw new Error("bad point: is not on curve");return{x:k,y:M}}else throw new Error(`bad point: got length ${g}, expected compressed=${_} or uncompressed=${p}`)}const h=e.toBytes||d,m=e.fromBytes||f;function y(z){const _=r.sqr(z),p=r.mul(_,z);return r.add(r.add(p,r.mul(z,i.a)),i.b)}function E(z,_){const p=r.sqr(_),g=y(z);return r.eql(p,g)}if(!E(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const S=r.mul(r.pow(i.a,l0),One),R=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(S,R)))throw new Error("bad curve params: a or b");function C(z,_,p=!1){if(!r.isValid(_)||p&&r.is0(_))throw new Error(`bad point coordinate ${z}`);return _}function T(z){if(!(z instanceof P))throw new Error("ProjectivePoint expected")}function N(z){if(!c||!c.basises)throw new Error("no endo");return Tne(z,c.basises,s.ORDER)}const U=Rx((z,_)=>{const{X:p,Y:g,Z:b}=z;if(r.eql(b,r.ONE))return{x:p,y:g};const x=z.is0();_==null&&(_=x?r.ONE:r.inv(b));const O=r.mul(p,_),k=r.mul(g,_),M=r.mul(b,_);if(x)return{x:r.ZERO,y:r.ZERO};if(!r.eql(M,r.ONE))throw new Error("invZ was invalid");return{x:O,y:k}}),q=Rx(z=>{if(z.is0()){if(e.allowInfinityPoint&&!r.is0(z.Y))return;throw new Error("bad point: ZERO")}const{x:_,y:p}=z.toAffine();if(!r.isValid(_)||!r.isValid(p))throw new Error("bad point: x or y not field elements");if(!E(_,p))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function H(z,_,p,g,b){return p=new P(r.mul(p.X,z),p.Y,p.Z),_=qg(g,_),p=qg(b,p),_.add(p)}class P{constructor(_,p,g){this.X=C("x",_),this.Y=C("y",p,!0),this.Z=C("z",g),Object.freeze(this)}static CURVE(){return i}static fromAffine(_){const{x:p,y:g}=_||{};if(!_||!r.isValid(p)||!r.isValid(g))throw new Error("invalid affine point");if(_ instanceof P)throw new Error("projective point not allowed");return r.is0(p)&&r.is0(g)?P.ZERO:new P(p,g,r.ONE)}static fromBytes(_){const p=P.fromAffine(m(nu(_,void 0,"point")));return p.assertValidity(),p}static fromHex(_){return P.fromBytes(Pr("pointHex",_))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(_=8,p=!0){return W.createCache(this,_),p||this.multiply(l0),this}assertValidity(){q(this)}hasEvenY(){const{y:_}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(_)}equals(_){T(_);const{X:p,Y:g,Z:b}=this,{X:x,Y:O,Z:k}=_,M=r.eql(r.mul(p,k),r.mul(x,b)),B=r.eql(r.mul(g,k),r.mul(O,b));return M&&B}negate(){return new P(this.X,r.neg(this.Y),this.Z)}double(){const{a:_,b:p}=i,g=r.mul(p,l0),{X:b,Y:x,Z:O}=this;let k=r.ZERO,M=r.ZERO,B=r.ZERO,w=r.mul(b,b),v=r.mul(x,x),D=r.mul(O,O),F=r.mul(b,x);return F=r.add(F,F),B=r.mul(b,O),B=r.add(B,B),k=r.mul(_,B),M=r.mul(g,D),M=r.add(k,M),k=r.sub(v,M),M=r.add(v,M),M=r.mul(k,M),k=r.mul(F,k),B=r.mul(g,B),D=r.mul(_,D),F=r.sub(w,D),F=r.mul(_,F),F=r.add(F,B),B=r.add(w,w),w=r.add(B,w),w=r.add(w,D),w=r.mul(w,F),M=r.add(M,w),D=r.mul(x,O),D=r.add(D,D),w=r.mul(D,F),k=r.sub(k,w),B=r.mul(D,v),B=r.add(B,B),B=r.add(B,B),new P(k,M,B)}add(_){T(_);const{X:p,Y:g,Z:b}=this,{X:x,Y:O,Z:k}=_;let M=r.ZERO,B=r.ZERO,w=r.ZERO;const v=i.a,D=r.mul(i.b,l0);let F=r.mul(p,x),Z=r.mul(g,O),ee=r.mul(b,k),de=r.add(p,g),ae=r.add(x,O);de=r.mul(de,ae),ae=r.add(F,Z),de=r.sub(de,ae),ae=r.add(p,b);let Oe=r.add(x,k);return ae=r.mul(ae,Oe),Oe=r.add(F,ee),ae=r.sub(ae,Oe),Oe=r.add(g,b),M=r.add(O,k),Oe=r.mul(Oe,M),M=r.add(Z,ee),Oe=r.sub(Oe,M),w=r.mul(v,ae),M=r.mul(D,ee),w=r.add(M,w),M=r.sub(Z,w),w=r.add(Z,w),B=r.mul(M,w),Z=r.add(F,F),Z=r.add(Z,F),ee=r.mul(v,ee),ae=r.mul(D,ae),Z=r.add(Z,ee),ee=r.sub(F,ee),ee=r.mul(v,ee),ae=r.add(ae,ee),F=r.mul(Z,ae),B=r.add(B,F),F=r.mul(Oe,ae),M=r.mul(de,M),M=r.sub(M,F),F=r.mul(de,Z),w=r.mul(Oe,w),w=r.add(w,F),new P(M,B,w)}subtract(_){return this.add(_.negate())}is0(){return this.equals(P.ZERO)}multiply(_){const{endo:p}=e;if(!s.isValidNot0(_))throw new Error("invalid scalar: out of range");let g,b;const x=O=>W.cached(this,O,k=>mb(P,k));if(p){const{k1neg:O,k1:k,k2neg:M,k2:B}=N(_),{p:w,f:v}=x(k),{p:D,f:F}=x(B);b=v.add(F),g=H(p.beta,w,D,O,M)}else{const{p:O,f:k}=x(_);g=O,b=k}return mb(P,[g,b])[0]}multiplyUnsafe(_){const{endo:p}=e,g=this;if(!s.isValid(_))throw new Error("invalid scalar: out of range");if(_===Yo||g.is0())return P.ZERO;if(_===kl)return g;if(W.hasCache(this))return this.multiply(_);if(p){const{k1neg:b,k1:x,k2neg:O,k2:k}=N(_),{p1:M,p2:B}=yne(P,g,x,k);return H(p.beta,M,B,b,O)}else return W.unsafe(g,_)}multiplyAndAddUnsafe(_,p,g){const b=this.multiplyUnsafe(p).add(_.multiplyUnsafe(g));return b.is0()?void 0:b}toAffine(_){return U(this,_)}isTorsionFree(){const{isTorsionFree:_}=e;return o===kl?!0:_?_(P,this):W.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:_}=e;return o===kl?this:_?_(P,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(_=!0){return Fg(_,"isCompressed"),this.assertValidity(),h(P,this,_)}toHex(_=!0){return Pl(this.toBytes(_))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(_=!0){return this.toBytes(_)}_setWindowSize(_){this.precompute(_)}static normalizeZ(_){return mb(P,_)}static msm(_,p){return wne(P,s,_,p)}static fromPrivateKey(_){return P.BASE.multiply(hl(s,_))}}P.BASE=new P(i.Gx,i.Gy,r.ONE),P.ZERO=new P(r.ZERO,r.ONE,r.ZERO),P.Fp=r,P.Fn=s;const $=s.BITS,W=new mne(P,e.endo?Math.ceil($/2):$);return P.BASE.precompute(8),P}function QO(t){return Uint8Array.of(t?2:3)}function eP(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function kne(t,e={}){const{Fn:n}=t,r=e.randomBytes||$u,s=Object.assign(eP(t.Fp,n),{seed:GO(n.ORDER)});function i(f){try{return!!hl(n,f)}catch{return!1}}function o(f,h){const{publicKey:m,publicKeyUncompressed:y}=s;try{const E=f.length;return h===!0&&E!==m||h===!1&&E!==y?!1:!!t.fromBytes(f)}catch{return!1}}function a(f=r(s.seed)){return hne(nu(f,s.seed,"seed"),n.ORDER)}function c(f,h=!0){return t.BASE.multiply(hl(n,f)).toBytes(h)}function u(f){const h=a(f);return{secretKey:h,publicKey:c(h)}}function l(f){if(typeof f=="bigint")return!1;if(f instanceof t)return!0;const{secretKey:h,publicKey:m,publicKeyUncompressed:y}=s;if(n.allowedLengths||h===m)return;const E=Pr("key",f).length;return E===m||E===y}function d(f,h,m=!0){if(l(f)===!0)throw new Error("first arg must be private key");if(l(h)===!1)throw new Error("second arg must be public key");const y=hl(n,f);return t.fromHex(h).multiply(y).toBytes(m)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:f=>hl(n,f),precompute(f=8,h=t.BASE){return h.precompute(f,!1)}},lengths:s})}function Bne(t,e,n={}){Ym(e),ny(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||$u,s=n.hmac||((p,...g)=>Qm(e,p,Ka(...g))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h}=kne(t,n),m={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},y="compact";function E(p){const g=a>>kl;return p>g}function S(p,g){if(!o.isValidNot0(g))throw new Error(`invalid signature ${p}: out of range 1..Point.Fn.ORDER`);return g}function R(p,g){LE(g);const b=h.signature,x=g==="compact"?b:g==="recovered"?b+1:void 0;return nu(p,x,`${g} signature`)}class C{constructor(g,b,x){this.r=S("r",g),this.s=S("s",b),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(g,b=y){R(g,b);let x;if(b==="der"){const{r:B,s:w}=qo.toSig(nu(g));return new C(B,w)}b==="recovered"&&(x=g[0],b="compact",g=g.subarray(1));const O=o.BYTES,k=g.subarray(0,O),M=g.subarray(O,O*2);return new C(o.fromBytes(k),o.fromBytes(M),x)}static fromHex(g,b){return this.fromBytes($g(g),b)}addRecoveryBit(g){return new C(this.r,this.s,g)}recoverPublicKey(g){const b=i.ORDER,{r:x,s:O,recovery:k}=this;if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");if(a*XO<b&&k>1)throw new Error("recovery id is ambiguous for h>1 curve");const M=k===2||k===3?x+a:x;if(!i.isValid(M))throw new Error("recovery id 2 or 3 invalid");const B=i.toBytes(M),w=t.fromBytes(Ka(QO((k&1)===0),B)),v=o.inv(M),D=N(Pr("msgHash",g)),F=o.create(-D*v),Z=o.create(O*v),ee=t.BASE.multiplyUnsafe(F).add(w.multiplyUnsafe(Z));if(ee.is0())throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return E(this.s)}toBytes(g=y){if(LE(g),g==="der")return $g(qo.hexFromSig(this));const b=o.toBytes(this.r),x=o.toBytes(this.s);if(g==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ka(Uint8Array.of(this.recovery),b,x)}return Ka(b,x)}toHex(g){return Pl(this.toBytes(g))}assertValidity(){}static fromCompact(g){return C.fromBytes(Pr("sig",g),"compact")}static fromDER(g){return C.fromBytes(Pr("sig",g),"der")}normalizeS(){return this.hasHighS()?new C(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Pl(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Pl(this.toBytes("compact"))}}const T=n.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const g=ty(p),b=p.length*8-c;return b>0?g>>BigInt(b):g},N=n.bits2int_modN||function(p){return o.create(T(p))},U=mp(c);function q(p){return ME("num < 2^"+c,p,Yo,U),o.toBytes(p)}function H(p,g){return nu(p,void 0,"message"),g?nu(e(p),void 0,"prehashed message"):p}function P(p,g,b){if(["recovered","canonical"].some(Z=>Z in b))throw new Error("sign() legacy options not supported");const{lowS:x,prehash:O,extraEntropy:k}=Eb(b,m);p=H(p,O);const M=N(p),B=hl(o,g),w=[q(B),q(M)];if(k!=null&&k!==!1){const Z=k===!0?r(h.secretKey):k;w.push(Pr("extraEntropy",Z))}const v=Ka(...w),D=M;function F(Z){const ee=T(Z);if(!o.isValidNot0(ee))return;const de=o.inv(ee),ae=t.BASE.multiply(ee).toAffine(),Oe=o.create(ae.x);if(Oe===Yo)return;const Qe=o.create(de*o.create(D+Oe*B));if(Qe===Yo)return;let G=(ae.x===Oe?0:2)|Number(ae.y&kl),J=Qe;return x&&E(Qe)&&(J=o.neg(Qe),G^=1),new C(Oe,J,G)}return{seed:v,k2sig:F}}function $(p,g,b={}){p=Pr("message",p);const{seed:x,k2sig:O}=P(p,g,b);return sne(e.outputLen,o.BYTES,s)(x,O)}function W(p){let g;const b=typeof p=="string"||Gm(p),x=!b&&p!==null&&typeof p=="object"&&typeof p.r=="bigint"&&typeof p.s=="bigint";if(!b&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)g=new C(p.r,p.s);else if(b){try{g=C.fromBytes(Pr("sig",p),"der")}catch(O){if(!(O instanceof qo.Err))throw O}if(!g)try{g=C.fromBytes(Pr("sig",p),"compact")}catch{return!1}}return g||!1}function z(p,g,b,x={}){const{lowS:O,prehash:k,format:M}=Eb(x,m);if(b=Pr("publicKey",b),g=H(Pr("message",g),k),"strict"in x)throw new Error("options.strict was renamed to lowS");const B=M===void 0?W(p):C.fromBytes(Pr("sig",p),M);if(B===!1)return!1;try{const w=t.fromBytes(b);if(O&&B.hasHighS())return!1;const{r:v,s:D}=B,F=N(g),Z=o.inv(D),ee=o.create(F*Z),de=o.create(v*Z),ae=t.BASE.multiplyUnsafe(ee).add(w.multiplyUnsafe(de));return ae.is0()?!1:o.create(ae.x)===v}catch{return!1}}function _(p,g,b={}){const{prehash:x}=Eb(b,m);return g=H(g,x),C.fromBytes(p,"recovered").recoverPublicKey(g).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:h,Point:t,sign:$,verify:z,recoverPublicKey:_,Signature:C,hash:e})}function Dne(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Sc(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function Une(t){const{CURVE:e,curveOpts:n}=Dne(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function Mne(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,VO(n.Fn.ORDER,n.Fn.BITS))})}function $ne(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=Une(t),i=Pne(e,n),o=Bne(i,r,s);return Mne(t,o)}function FE(t,e){const n=r=>$ne({...t,hash:r});return{...n(e),create:n}}const tP={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},nP={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},rP={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Lne=Sc(tP.p),Fne=Sc(nP.p),jne=Sc(rP.p),qne=FE({...tP,Fp:Lne,lowS:!1},Jm);FE({...nP,Fp:Fne,lowS:!1},Kee),FE({...rP,Fp:jne,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Vee);const zne=qne,sP="base10",Yr="base16",ds="base64pad",Ga="base64url",yp="utf8",iP=0,ea=1,wp=2,Hne=0,$x=1,vf=12,JC=32;function Wne(){const t=$E.utils.randomPrivateKey(),e=$E.getPublicKey(t);return{privateKey:ws(t,Yr),publicKey:ws(e,Yr)}}function jE(){const t=$u(JC);return ws(t,Yr)}function Vne(t,e){const n=$E.getSharedSecret(Ys(t,Yr),Ys(e,Yr)),r=nne(ey,n,void 0,void 0,JC);return ws(r,Yr)}function $0(t){const e=ey(Ys(t,Yr));return ws(e,Yr)}function Ks(t){const e=ey(Ys(t,yp));return ws(e,Yr)}function oP(t){return Ys(`${t}`,sP)}function Iu(t){return Number(ws(t,sP))}function aP(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function cP(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Kne(t){const e=oP(typeof t.type<"u"?t.type:iP);if(Iu(e)===ea&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ys(t.senderPublicKey,Yr):void 0,r=typeof t.iv<"u"?Ys(t.iv,Yr):$u(vf),s=Ys(t.symKey,Yr),i=BO(s,r).encrypt(Ys(t.message,yp)),o=uP({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Ga?aP(o):o}function Gne(t){const e=Ys(t.symKey,Yr),{sealed:n,iv:r}=Bh({encoded:t.encoded,encoding:t.encoding}),s=BO(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ws(s,yp)}function Yne(t,e){const n=oP(wp),r=$u(vf),s=Ys(t,yp),i=uP({type:n,sealed:s,iv:r});return e===Ga?aP(i):i}function Zne(t,e){const{sealed:n}=Bh({encoded:t,encoding:e});return ws(n,yp)}function uP(t){if(Iu(t.type)===wp)return ws(Ef([t.type,t.sealed]),ds);if(Iu(t.type)===ea){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ws(Ef([t.type,t.senderPublicKey,t.iv,t.sealed]),ds)}return ws(Ef([t.type,t.iv,t.sealed]),ds)}function Bh(t){const e=(t.encoding||ds)===Ga?cP(t.encoded):t.encoded,n=Ys(e,ds),r=n.slice(Hne,$x),s=$x;if(Iu(r)===ea){const c=s+JC,u=c+vf,l=n.slice(s,c),d=n.slice(c,u),f=n.slice(u);return{type:r,sealed:f,iv:d,senderPublicKey:l}}if(Iu(r)===wp){const c=n.slice(s),u=$u(vf);return{type:r,sealed:c,iv:u}}const i=s+vf,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Jne(t,e){const n=Bh({encoded:t,encoding:e?.encoding});return lP({type:Iu(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ws(n.senderPublicKey,Yr):void 0,receiverPublicKey:e?.receiverPublicKey})}function lP(t){const e=t?.type||iP;if(e===ea){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function Lx(t){return t.type===ea&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Fx(t){return t.type===wp}function Xne(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Ef([new Uint8Array([4]),e,n])}function Qne(t,e){const[n,r,s]=t.split("."),i=Buffer.from(cP(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,u=ey(c),l=Xne(e);if(!zne.verify(Ef([o,a]),u,l))throw new Error("Invalid signature");return pE(t).payload}const ere="irn";function zg(t){return t?.relay||{protocol:ere}}function pl(t){const e=BQ[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var tre=Object.defineProperty,nre=Object.defineProperties,rre=Object.getOwnPropertyDescriptors,jx=Object.getOwnPropertySymbols,sre=Object.prototype.hasOwnProperty,ire=Object.prototype.propertyIsEnumerable,qx=(t,e,n)=>e in t?tre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vb=(t,e)=>{for(var n in e||(e={}))sre.call(e,n)&&qx(t,n,e[n]);if(jx)for(var n of jx(e))ire.call(e,n)&&qx(t,n,e[n]);return t},ore=(t,e)=>nre(t,rre(e));function are(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function zx(t){if(!t.includes("wc:")){const u=hO(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:cre(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:are(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function cre(t){return t.startsWith("//")?t.substring(2):t}function ure(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function Hx(t){const e=new URLSearchParams,n=vb(vb(ore(vb({},ure(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(n).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!==void 0&&e.append(r,String(s))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function d0(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var lre=Object.defineProperty,dre=Object.defineProperties,fre=Object.getOwnPropertyDescriptors,Wx=Object.getOwnPropertySymbols,hre=Object.prototype.hasOwnProperty,pre=Object.prototype.propertyIsEnumerable,Vx=(t,e,n)=>e in t?lre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gre=(t,e)=>{for(var n in e||(e={}))hre.call(e,n)&&Vx(t,n,e[n]);if(Wx)for(var n of Wx(e))pre.call(e,n)&&Vx(t,n,e[n]);return t},mre=(t,e)=>dre(t,fre(e));function gd(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function dP(t){const e=[];return Object.values(t).forEach(n=>{e.push(...gd(n.accounts))}),[...new Set(e)]}function yre(t){const e=[];return Object.values(t).forEach(n=>{e.push(...n.methods)}),[...new Set(e)]}function wre(t){const e=[];return Object.values(t).forEach(n=>{e.push(...n.events)}),[...new Set(e)]}function bre(t,e){const n=[];return Object.values(t).forEach(r=>{gd(r.accounts).includes(e)&&n.push(...r.methods)}),n}function Ere(t,e){const n=[];return Object.values(t).forEach(r=>{gd(r.accounts).includes(e)&&n.push(...r.events)}),n}function ry(t){return t.includes(":")}function gl(t){return ry(t)?t.split(":")[0]:t}function Kx(t){var e,n,r;const s={};if(!ao(t))return s;for(const[i,o]of Object.entries(t)){const a=ry(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=gl(i);s[l]=mre(gre({},s[l]),{chains:oo(a,(e=s[l])==null?void 0:e.chains),methods:oo(c,(n=s[l])==null?void 0:n.methods),events:oo(u,(r=s[l])==null?void 0:r.events)})}return s}function vre(t){const e={};return t?.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function Gx(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=vre(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=oo(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function Cre(t,e){var n,r,s,i,o,a;const c=Kx(t),u=Kx(e),l={},d=Object.keys(c).concat(Object.keys(u));for(const f of d)l[f]={chains:oo((n=c[f])==null?void 0:n.chains,(r=u[f])==null?void 0:r.chains),methods:oo((s=c[f])==null?void 0:s.methods,(i=u[f])==null?void 0:i.methods),events:oo((o=c[f])==null?void 0:o.events,(a=u[f])==null?void 0:a.events)};return l}const _re={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Are={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ie(t,e){const{message:n,code:r}=Are[t];return{message:e?`${n} ${e}`:n,code:r}}function Jt(t,e){const{message:n,code:r}=_re[t];return{message:e?`${n} ${e}`:n,code:r}}function ta(t,e){return!!Array.isArray(t)}function ao(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Qn(t){return typeof t>"u"}function Mn(t,e){return e&&Qn(t)?!0:typeof t=="string"&&!!t.trim().length}function XC(t,e){return typeof t=="number"&&!isNaN(t)}function Sre(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return tu(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=gd(a),d=n[o];(!tu(cO(o,d),l)||!tu(d.methods,c)||!tu(d.events,u))&&(i=!1)}),i):!1}function Hg(t){return Mn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function xre(t){if(Mn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Hg(n)}}return!1}function Ire(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Mn(t,!1)){if(e(t))return!0;const n=hO(t);return e(n)}}catch{}return!1}function Nre(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Tre(t){return t?.topic}function Rre(t,e){let n=null;return Mn(t?.publicKey,!1)||(n=Ie("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function Yx(t){let e=!0;return ta(t)?t.length&&(e=t.every(n=>Mn(n,!1))):e=!1,e}function Ore(t,e,n){let r=null;return ta(e)&&e.length?e.forEach(s=>{r||Hg(s)||(r=Jt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Hg(t)||(r=Jt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Pre(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=Ore(s,cO(s,i),`${e} ${n}`);o&&(r=o)}),r}function kre(t,e){let n=null;return ta(t)?t.forEach(r=>{n||xre(r)||(n=Jt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Jt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Bre(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=kre(r?.accounts,`${e} namespace`);s&&(n=s)}),n}function Dre(t,e){let n=null;return Yx(t?.methods)?Yx(t?.events)||(n=Jt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Jt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function fP(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Dre(r,`${e}, namespace`);s&&(n=s)}),n}function Ure(t,e,n){let r=null;if(t&&ao(t)){const s=fP(t,e);s&&(r=s);const i=Pre(t,e,n);i&&(r=i)}else r=Ie("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function Cb(t,e){let n=null;if(t&&ao(t)){const r=fP(t,e);r&&(n=r);const s=Bre(t,e);s&&(n=s)}else n=Ie("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function hP(t){return Mn(t.protocol,!0)}function Mre(t,e){let n=!1;return t?t&&ta(t)&&t.length&&t.forEach(r=>{n=hP(r)}):n=!0,n}function $re(t){return typeof t=="number"}function is(t){return typeof t<"u"&&typeof t!==null}function Lre(t){return!(!t||typeof t!="object"||!t.code||!XC(t.code)||!t.message||!Mn(t.message,!1))}function Fre(t){return!(Qn(t)||!Mn(t.method,!1))}function jre(t){return!(Qn(t)||Qn(t.result)&&Qn(t.error)||!XC(t.id)||!Mn(t.jsonrpc,!1))}function qre(t){return!(Qn(t)||!Mn(t.name,!1))}function Zx(t,e){return!(!Hg(e)||!dP(t).includes(e))}function zre(t,e,n){return Mn(n,!1)?bre(t,e).includes(n):!1}function Hre(t,e,n){return Mn(n,!1)?Ere(t,e).includes(n):!1}function Jx(t,e,n){let r=null;const s=Wre(t),i=Vre(e),o=Object.keys(s),a=Object.keys(i),c=Xx(Object.keys(t)),u=Xx(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),tu(o,a)||(r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const f=gd(e[d].accounts);f.includes(d)||(r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{r||(tu(s[d].methods,i[d].methods)?tu(s[d].events,i[d].events)||(r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ie("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Wre(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function Xx(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Vre(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:gd(t[n].accounts)?.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}),e}function Kre(t,e){return XC(t)&&t<=e.max&&t>=e.min}function Qx(){const t=pp();return new Promise(e=>{switch(t){case Us.browser:e(Gre());break;case Us.reactNative:e(Yre());break;case Us.node:e(Zre());break;default:e(!0)}})}function Gre(){return pd()&&navigator?.onLine}async function Yre(){return Ac()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function Zre(){return!0}function Jre(t){switch(pp()){case Us.browser:Xre(t);break;case Us.reactNative:Qre(t);break}}function Xre(t){!Ac()&&pd()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Qre(t){Ac()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function ese(){var t;return pd()&&aa.getDocument()?((t=aa.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const _b={};class Ud{static get(e){return _b[e]}static set(e,n){_b[e]=n}static delete(e){delete _b[e]}}function tse(t){const e=tr.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function nse({publicKey:t,signature:e,payload:n}){var r;const s=qE(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=ise(n.address),a=n.era==="00"?new Uint8Array([0]):qE(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${sse(n.tip)}`),d=ase(l),f=new Uint8Array([0,...t,o,...e,...a,...u,...d,...s]),h=ose(f.length+1);return new Uint8Array([...h,i,...f])}function rse(t){const e=qE(t),n=$Q.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function qE(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function sse(t){return t.startsWith("0x")?t.slice(2):t}function ise(t){const e=tr.decode(t)[0];return e===42?0:e===60?2:1}function ose(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function ase(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function cse(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=tse(t.transaction.address),r=nse({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return rse(s)}function QC({logger:t,name:e}){const n=typeof t=="string"?Lm({opts:{level:t,name:e}}).logger:t;return n.level=typeof t=="string"?t:t.level,n}const use="PARSE_ERROR",lse="INVALID_REQUEST",dse="METHOD_NOT_FOUND",fse="INVALID_PARAMS",pP="INTERNAL_ERROR",e_="SERVER_ERROR",hse=[-32700,-32600,-32601,-32602,-32603],Cf={[use]:{code:-32700,message:"Parse error"},[lse]:{code:-32600,message:"Invalid Request"},[dse]:{code:-32601,message:"Method not found"},[fse]:{code:-32602,message:"Invalid params"},[pP]:{code:-32603,message:"Internal error"},[e_]:{code:-32e3,message:"Server error"}},gP=e_;function pse(t){return hse.includes(t)}function eI(t){return Object.keys(Cf).includes(t)?Cf[t]:Cf[gP]}function gse(t){const e=Object.values(Cf).find(n=>n.code===t);return e||Cf[gP]}function mP(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Ab={},To={},tI;function mse(){if(tI)return To;tI=1,Object.defineProperty(To,"__esModule",{value:!0}),To.isBrowserCryptoAvailable=To.getSubtleCrypto=To.getBrowerCrypto=void 0;function t(){return Yi?.crypto||Yi?.msCrypto||{}}To.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}To.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return To.isBrowserCryptoAvailable=n,To}var Ro={},nI;function yse(){if(nI)return Ro;nI=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.isBrowser=Ro.isNode=Ro.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Ro.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Ro.isNode=e;function n(){return!t()&&!e()}return Ro.isBrowser=n,Ro}var rI;function wse(){return rI||(rI=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ip;e.__exportStar(mse(),t),e.__exportStar(yse(),t)})(Ab)),Ab}var bse=wse();function Wi(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function tc(t=6){return BigInt(Wi(t))}function yi(t,e,n){return{id:n||Wi(),jsonrpc:"2.0",method:t,params:e}}function Dh(t,e){return{id:t,jsonrpc:"2.0",result:e}}function sy(t,e,n){return{id:t,jsonrpc:"2.0",error:Ese(e)}}function Ese(t,e){return typeof t>"u"?eI(pP):(typeof t=="string"&&(t=Object.assign(Object.assign({},eI(e_)),{message:t})),pse(t.code)&&(t=gse(t.code)),t)}let vse=class{},Cse=class extends vse{constructor(){super()}},_se=class extends Cse{constructor(e){super()}};const Ase="^https?:",Sse="^wss?:";function xse(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function yP(t,e){const n=xse(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function sI(t){return yP(t,Ase)}function iI(t){return yP(t,Sse)}function Ise(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function wP(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function t_(t){return wP(t)&&"method"in t}function iy(t){return wP(t)&&(Vi(t)||Gs(t))}function Vi(t){return"result"in t}function Gs(t){return"error"in t}let n_=class extends _se{constructor(e){super(e),this.events=new oi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(yi(e.method,e.params||[],e.id||tc().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Gs(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),iy(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Nse=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Tse=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",oI=t=>t.split("?")[0],aI=10,Rse=Nse();let Ose=class{constructor(e){if(this.url=e,this.events=new oi.EventEmitter,this.registering=!1,!iI(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(_u(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!iI(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=bse.isReactNative()?void 0:{rejectUnauthorized:!Ise(e)},i=new Rse(e,[],s);Tse()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Cu(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=sy(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return mP(e,oI(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>aI&&this.events.setMaxListeners(aI)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${oI(this.url)}`));return this.events.emit("register_error",n),n}};var Pse={};const bP="wc",EP=2,zE="core",po=`${bP}@2:${zE}:`,kse={logger:"error"},Bse={database:":memory:"},Dse="crypto",cI="client_ed25519_seed",Use=Ae.ONE_DAY,Mse="keychain",$se="0.3",Lse="messages",Fse="0.3",jse=Ae.SIX_HOURS,qse="publisher",vP="irn",zse="error",CP="wss://relay.walletconnect.org",Hse="relayer",Dn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Wse="_subscription",Ls={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Vse=.1,HE="2.23.1",Gt={link_mode:"link_mode",relay:"relay"},L0={inbound:"inbound",outbound:"outbound"},Kse="0.3",Gse="WALLETCONNECT_CLIENT_ID",uI="WALLETCONNECT_LINK_MODE_APPS",Is={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Yse="subscription",Zse="0.3",Jse="pairing",Xse="0.3",Md={wc_pairingDelete:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ae.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ae.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:0}}},Wc={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ci={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Qse="history",eie="0.3",tie="expirer",Hs={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},nie="0.3",rie="verify-api",sie="https://verify.walletconnect.com",_P="https://verify.walletconnect.org",_f=_P,iie=`${_f}/v3`,oie=[sie,_P],aie="echo",cie="https://echo.walletconnect.com",zi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Bo={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ui={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},kc={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},Bc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},$d={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},uie=.1,lie="event-client",die=86400,fie="https://pulse.walletconnect.org/batch";function hie(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var y=0,E=0,S=0,R=m.length;S!==R&&m[S]===0;)S++,y++;for(var C=(R-S)*l+1>>>0,T=new Uint8Array(C);S!==R;){for(var N=m[S],U=0,q=C-1;(N!==0||U<E)&&q!==-1;q--,U++)N+=256*T[q]>>>0,T[q]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");E=U,S++}for(var H=C-E;H!==C&&T[H]===0;)H++;for(var P=c.repeat(y);H<C;++H)P+=t.charAt(T[H]);return P}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var y=0;if(m[y]!==" "){for(var E=0,S=0;m[y]===c;)E++,y++;for(var R=(m.length-y)*u+1>>>0,C=new Uint8Array(R);m[y];){var T=n[m.charCodeAt(y)];if(T===255)return;for(var N=0,U=R-1;(T!==0||N<S)&&U!==-1;U--,N++)T+=a*C[U]>>>0,C[U]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");S=N,y++}if(m[y]!==" "){for(var q=R-S;q!==R&&C[q]===0;)q++;for(var H=new Uint8Array(E+(R-q)),P=E;q!==R;)H[P++]=C[q++];return H}}}function h(m){var y=f(m);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var pie=hie,gie=pie;const AP=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},mie=t=>new TextEncoder().encode(t),yie=t=>new TextDecoder().decode(t);class wie{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class bie{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return SP(this,e)}}class Eie{constructor(e){this.decoders=e}or(e){return SP(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const SP=(t,e)=>new Eie({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class vie{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new wie(e,n,r),this.decoder=new bie(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const oy=({name:t,prefix:e,encode:n,decode:r})=>new vie(t,e,n,r),bp=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=gie(n,e);return oy({prefix:t,name:e,encode:r,decode:i=>AP(s(i))})},Cie=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},_ie=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},br=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>oy({prefix:e,name:t,encode(s){return _ie(s,r,n)},decode(s){return Cie(s,r,n,t)}}),Aie=oy({prefix:"\0",name:"identity",encode:t=>yie(t),decode:t=>mie(t)});var Sie=Object.freeze({__proto__:null,identity:Aie});const xie=br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Iie=Object.freeze({__proto__:null,base2:xie});const Nie=br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Tie=Object.freeze({__proto__:null,base8:Nie});const Rie=bp({prefix:"9",name:"base10",alphabet:"0123456789"});var Oie=Object.freeze({__proto__:null,base10:Rie});const Pie=br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kie=br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Bie=Object.freeze({__proto__:null,base16:Pie,base16upper:kie});const Die=br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Uie=br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Mie=br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$ie=br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Lie=br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Fie=br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jie=br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qie=br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),zie=br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Hie=Object.freeze({__proto__:null,base32:Die,base32upper:Uie,base32pad:Mie,base32padupper:$ie,base32hex:Lie,base32hexupper:Fie,base32hexpad:jie,base32hexpadupper:qie,base32z:zie});const Wie=bp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vie=bp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Kie=Object.freeze({__proto__:null,base36:Wie,base36upper:Vie});const Gie=bp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Yie=bp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Zie=Object.freeze({__proto__:null,base58btc:Gie,base58flickr:Yie});const Jie=br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Xie=br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Qie=br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),eoe=br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var toe=Object.freeze({__proto__:null,base64:Jie,base64pad:Xie,base64url:Qie,base64urlpad:eoe});const xP=Array.from(""),noe=xP.reduce((t,e,n)=>(t[n]=e,t),[]),roe=xP.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function soe(t){return t.reduce((e,n)=>(e+=noe[n],e),"")}function ioe(t){const e=[];for(const n of t){const r=roe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const ooe=oy({prefix:"",name:"base256emoji",encode:soe,decode:ioe});var aoe=Object.freeze({__proto__:null,base256emoji:ooe}),coe=IP,lI=128,uoe=-128,loe=Math.pow(2,31);function IP(t,e,n){e=e||[],n=n||0;for(var r=n;t>=loe;)e[n++]=t&255|lI,t/=128;for(;t&uoe;)e[n++]=t&255|lI,t>>>=7;return e[n]=t|0,IP.bytes=n-r+1,e}var doe=WE,foe=128,dI=127;function WE(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw WE.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&dI)<<s:(o&dI)*Math.pow(2,s),s+=7}while(o>=foe);return WE.bytes=i-r,n}var hoe=Math.pow(2,7),poe=Math.pow(2,14),goe=Math.pow(2,21),moe=Math.pow(2,28),yoe=Math.pow(2,35),woe=Math.pow(2,42),boe=Math.pow(2,49),Eoe=Math.pow(2,56),voe=Math.pow(2,63),Coe=function(t){return t<hoe?1:t<poe?2:t<goe?3:t<moe?4:t<yoe?5:t<woe?6:t<boe?7:t<Eoe?8:t<voe?9:10},_oe={encode:coe,decode:doe,encodingLength:Coe},NP=_oe;const fI=(t,e,n=0)=>(NP.encode(t,e,n),e),hI=t=>NP.encodingLength(t),VE=(t,e)=>{const n=e.byteLength,r=hI(t),s=r+hI(n),i=new Uint8Array(s+n);return fI(t,i,0),fI(n,i,r),i.set(e,s),new Aoe(t,n,e,i)};class Aoe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const TP=({name:t,code:e,encode:n})=>new Soe(t,e,n);class Soe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?VE(this.code,n):n.then(r=>VE(this.code,r))}else throw Error("Unknown type, must be binary type")}}const RP=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),xoe=TP({name:"sha2-256",code:18,encode:RP("SHA-256")}),Ioe=TP({name:"sha2-512",code:19,encode:RP("SHA-512")});var Noe=Object.freeze({__proto__:null,sha256:xoe,sha512:Ioe});const OP=0,Toe="identity",PP=AP,Roe=t=>VE(OP,PP(t)),Ooe={code:OP,name:Toe,encode:PP,digest:Roe};var Poe=Object.freeze({__proto__:null,identity:Ooe});new TextEncoder,new TextDecoder;const pI={...Sie,...Iie,...Tie,...Oie,...Bie,...Hie,...Kie,...Zie,...toe,...aoe};({...Noe,...Poe});function kP(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function koe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?kP(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function BP(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const gI=BP("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Sb=BP("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=koe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Boe={utf8:gI,"utf-8":gI,hex:pI.base16,latin1:Sb,ascii:Sb,binary:Sb,...pI};function Doe(t,e="utf8"){const n=Boe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?kP(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var Uoe=Object.defineProperty,Moe=(t,e,n)=>e in t?Uoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Li=(t,e,n)=>Moe(t,typeof e!="symbol"?e+"":e,n);class $oe{constructor(e,n){this.core=e,this.logger=n,Li(this,"keychain",new Map),Li(this,"name",Mse),Li(this,"version",$se),Li(this,"initialized",!1),Li(this,"storagePrefix",po),Li(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Li(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Li(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Li(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ie("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Li(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Cs(n,this.name)}get context(){return vs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,TE(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?RE(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Loe=Object.defineProperty,Foe=(t,e,n)=>e in t?Loe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kn=(t,e,n)=>Foe(t,typeof e!="symbol"?e+"":e,n);class joe{constructor(e,n,r){this.core=e,this.logger=n,Kn(this,"name",Dse),Kn(this,"keychain"),Kn(this,"randomSessionIdentifier",jE()),Kn(this,"initialized",!1),Kn(this,"clientId"),Kn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Kn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Kn(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const s=await this.getClientSeed(),i=hS(s),o=U8(i.publicKey);return this.clientId=o,o}),Kn(this,"generateKeyPair",()=>{this.isInitialized();const s=Wne();return this.setPrivateKey(s.publicKey,s.privateKey)}),Kn(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=hS(i),a=this.randomSessionIdentifier;return await DG(a,s,Use,o)}),Kn(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Vne(a,i);return this.setSymKey(c,o)}),Kn(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||$0(s);return await this.keychain.set(o,s),o}),Kn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Kn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Kn(this,"encode",async(s,i,o)=>{this.isInitialized();const a=lP(o),c=_u(i);if(Fx(a))return Yne(c,o?.encoding);if(Lx(a)){const f=a.senderPublicKey,h=a.receiverPublicKey;s=await this.generateSharedKey(f,h)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return Kne({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o?.encoding})}),Kn(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Jne(i,o);if(Fx(a)){const c=Zne(i,o?.encoding);return Cu(c)}if(Lx(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=Gne({symKey:c,encoded:i,encoding:o?.encoding});return Cu(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Kn(this,"getPayloadType",(s,i=ds)=>{const o=Bh({encoded:s,encoding:i});return Iu(o.type)}),Kn(this,"getPayloadSenderPublicKey",(s,i=ds)=>{const o=Bh({encoded:s,encoding:i});return o.senderPublicKey?ws(o.senderPublicKey,Yr):void 0}),this.core=e,this.logger=Cs(n,this.name),this.keychain=r||new $oe(this.core,this.logger)}get context(){return vs(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(cI)}catch{e=jE(),await this.keychain.set(cI,e)}return Doe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qoe=Object.defineProperty,zoe=Object.defineProperties,Hoe=Object.getOwnPropertyDescriptors,mI=Object.getOwnPropertySymbols,Woe=Object.prototype.hasOwnProperty,Voe=Object.prototype.propertyIsEnumerable,KE=(t,e,n)=>e in t?qoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Koe=(t,e)=>{for(var n in e||(e={}))Woe.call(e,n)&&KE(t,n,e[n]);if(mI)for(var n of mI(e))Voe.call(e,n)&&KE(t,n,e[n]);return t},Goe=(t,e)=>zoe(t,Hoe(e)),As=(t,e,n)=>KE(t,typeof e!="symbol"?e+"":e,n);class Yoe extends kW{constructor(e,n){super(e,n),this.logger=e,this.core=n,As(this,"messages",new Map),As(this,"messagesWithoutClientAck",new Map),As(this,"name",Lse),As(this,"version",Fse),As(this,"initialized",!1),As(this,"storagePrefix",po),As(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),As(this,"set",async(r,s,i)=>{this.isInitialized();const o=Ks(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===L0.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Goe(Koe({},c),{[o]:s}))}return await this.persist(),o}),As(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),As(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),As(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Ks(s);return typeof i[o]<"u"}),As(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Ks(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),As(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Cs(e,this.name),this.core=n}get context(){return vs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,TE(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,TE(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?RE(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?RE(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Zoe=Object.defineProperty,Joe=Object.defineProperties,Xoe=Object.getOwnPropertyDescriptors,yI=Object.getOwnPropertySymbols,Qoe=Object.prototype.hasOwnProperty,eae=Object.prototype.propertyIsEnumerable,GE=(t,e,n)=>e in t?Zoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nl=(t,e)=>{for(var n in e||(e={}))Qoe.call(e,n)&&GE(t,n,e[n]);if(yI)for(var n of yI(e))eae.call(e,n)&&GE(t,n,e[n]);return t},wI=(t,e)=>Joe(t,Xoe(e)),Fs=(t,e,n)=>GE(t,typeof e!="symbol"?e+"":e,n);class tae extends BW{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Fs(this,"events",new oi.EventEmitter),Fs(this,"name",qse),Fs(this,"queue",new Map),Fs(this,"publishTimeout",Ae.toMiliseconds(Ae.ONE_MINUTE)),Fs(this,"initialPublishTimeout",Ae.toMiliseconds(Ae.ONE_SECOND*15)),Fs(this,"needsTransportRestart",!1),Fs(this,"publish",async(r,s,i)=>{var o,a,c,u,l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const d=i?.ttl||jse,f=i?.prompt||!1,h=i?.tag||0,m=i?.id||tc().toString(),y=pl(zg().protocol),E={id:m,method:i?.publishMethod||y.publish,params:nl({topic:r,message:s,ttl:d,prompt:f,tag:h,attestation:i?.attestation},i?.tvf)},S=`Failed to publish payload, please try again. id:${m} tag:${h}`;try{Qn((o=E.params)==null?void 0:o.prompt)&&((a=E.params)==null||delete a.prompt),Qn((c=E.params)==null?void 0:c.tag)&&((u=E.params)==null||delete u.tag);const R=new Promise(async C=>{const T=({id:U})=>{var q;((q=E.id)==null?void 0:q.toString())===U.toString()&&(this.removeRequestFromQueue(U),this.relayer.events.removeListener(Dn.publish,T),C())};this.relayer.events.on(Dn.publish,T);const N=to(new Promise((U,q)=>{this.rpcPublish(E,i).then(U).catch(H=>{this.logger.warn(H,H?.message),q(H)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${m} tag:${h}`);try{await N,this.events.removeListener(Dn.publish,T)}catch(U){this.queue.set(m,{request:E,opts:i,attempt:1}),this.logger.warn(U,U?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:m,topic:r,message:s,opts:i}}),await to(R,this.publishTimeout,S)}catch(R){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(R),(l=i?.internal)!=null&&l.throwOnFailedPublish)throw R}finally{this.queue.delete(m)}}),Fs(this,"publishCustom",async r=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:u,opts:l={}}=r,{attestation:d,tvf:f,publishMethod:h,prompt:m,tag:y,ttl:E=Ae.FIVE_MINUTES}=l,S=l.id||tc().toString(),R=pl(zg().protocol),C=h||R.publish,T={id:S,method:C,params:nl(wI(nl({},u),{ttl:E,prompt:m,tag:y,attestation:d}),f)},N=`Failed to publish custom payload, please try again. id:${S} tag:${y}`;try{Qn((s=T.params)==null?void 0:s.prompt)&&((i=T.params)==null||delete i.prompt),Qn((o=T.params)==null?void 0:o.tag)&&((a=T.params)==null||delete a.tag);const U=new Promise(async q=>{const H=({id:$})=>{var W;((W=T.id)==null?void 0:W.toString())===$.toString()&&(this.removeRequestFromQueue($),this.relayer.events.removeListener(Dn.publish,H),q())};this.relayer.events.on(Dn.publish,H);const P=to(new Promise(($,W)=>{this.rpcPublish(T,l).then($).catch(z=>{this.logger.warn(z,z?.message),W(z)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${C} id:${S} tag:${y}`);try{await P,this.events.removeListener(Dn.publish,H)}catch($){this.queue.set(S,{request:T,opts:l,attempt:1}),this.logger.warn($,$?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:S,payload:u,opts:l}}),await to(U,this.publishTimeout,N)}catch(U){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(U),(c=l?.internal)!=null&&c.throwOnFailedPublish)throw U}finally{this.queue.delete(S)}}),Fs(this,"on",(r,s)=>{this.events.on(r,s)}),Fs(this,"once",(r,s)=>{this.events.once(r,s)}),Fs(this,"off",(r,s)=>{this.events.off(r,s)}),Fs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Cs(n,this.name),this.registerEventListeners()}get context(){return vs(this.logger)}async rpcPublish(e,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(Dn.publish,nl(nl({},e),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{var r;const s=e.attempt+1;this.queue.set(n,wI(nl({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Bu.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Dn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Dn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var nae=Object.defineProperty,rae=(t,e,n)=>e in t?nae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rl=(t,e,n)=>rae(t,typeof e!="symbol"?e+"":e,n);class sae{constructor(){rl(this,"map",new Map),rl(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),rl(this,"get",e=>this.map.get(e)||[]),rl(this,"exists",(e,n)=>this.get(e).includes(n)),rl(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),rl(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var iae=Object.defineProperty,oae=Object.defineProperties,aae=Object.getOwnPropertyDescriptors,bI=Object.getOwnPropertySymbols,cae=Object.prototype.hasOwnProperty,uae=Object.prototype.propertyIsEnumerable,YE=(t,e,n)=>e in t?iae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ld=(t,e)=>{for(var n in e||(e={}))cae.call(e,n)&&YE(t,n,e[n]);if(bI)for(var n of bI(e))uae.call(e,n)&&YE(t,n,e[n]);return t},xb=(t,e)=>oae(t,aae(e)),jt=(t,e,n)=>YE(t,typeof e!="symbol"?e+"":e,n);class lae extends MW{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,jt(this,"subscriptions",new Map),jt(this,"topicMap",new sae),jt(this,"events",new oi.EventEmitter),jt(this,"name",Yse),jt(this,"version",Zse),jt(this,"pending",new Map),jt(this,"cached",[]),jt(this,"initialized",!1),jt(this,"storagePrefix",po),jt(this,"subscribeTimeout",Ae.toMiliseconds(Ae.ONE_MINUTE)),jt(this,"initialSubscribeTimeout",Ae.toMiliseconds(Ae.ONE_SECOND*15)),jt(this,"clientId"),jt(this,"batchSubscribeTopicsLimit",500),jt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),jt(this,"subscribe",async(r,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=zg(s),a={topic:r,relay:o,transportType:s?.transportType};(i=s?.internal)!=null&&i.skipSubscribe||this.pending.set(r,a);const c=await this.rpcSubscribe(r,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),jt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),jt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),jt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),jt(this,"on",(r,s)=>{this.events.on(r,s)}),jt(this,"once",(r,s)=>{this.events.once(r,s)}),jt(this,"off",(r,s)=>{this.events.off(r,s)}),jt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),jt(this,"start",async()=>{await this.onConnect()}),jt(this,"stop",async()=>{await this.onDisconnect()}),jt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),jt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),jt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Bu.pulse,async()=>{await this.checkPending()}),this.events.on(Is.created,async r=>{const s=Is.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Is.deleted,async r=>{const s=Is.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Cs(n,this.name),this.clientId=""}get context(){return vs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=zg(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Jt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s,i;const o=await this.getSubscriptionId(e);if((s=r?.internal)!=null&&s.skipSubscribe)return o;(!r||r?.transportType===Gt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const a={method:pl(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{if(r?.transportType===Gt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},Ae.toMiliseconds(Ae.ONE_SECOND)),o;const u=new Promise(async d=>{const f=h=>{h.topic===e&&(this.events.removeListener(Is.created,f),d(h.id))};this.events.on(Is.created,f);try{const h=await to(new Promise((m,y)=>{this.relayer.request(a).catch(E=>{this.logger.warn(E,E?.message),y(E)}).then(m)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Is.created,f),d(h)}catch{}}),l=await to(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return l?o:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Dn.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:pl(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await to(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Dn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:pl(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await to(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Dn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:pl(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,xb(Ld({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Ld({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Ld({},n)),this.topicMap.set(n.topic,e),this.events.emit(Is.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Is.deleted,xb(Ld({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Is.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Is.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=Ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>xb(Ld({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await dee(Ae.toMiliseconds(Ae.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Ks(e+await this.getClientId())}}var dae=Object.defineProperty,EI=Object.getOwnPropertySymbols,fae=Object.prototype.hasOwnProperty,hae=Object.prototype.propertyIsEnumerable,ZE=(t,e,n)=>e in t?dae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vI=(t,e)=>{for(var n in e||(e={}))fae.call(e,n)&&ZE(t,n,e[n]);if(EI)for(var n of EI(e))hae.call(e,n)&&ZE(t,n,e[n]);return t},Tt=(t,e,n)=>ZE(t,typeof e!="symbol"?e+"":e,n);class pae extends DW{constructor(e){var n;super(e),Tt(this,"protocol","wc"),Tt(this,"version",2),Tt(this,"core"),Tt(this,"logger"),Tt(this,"events",new oi.EventEmitter),Tt(this,"provider"),Tt(this,"messages"),Tt(this,"subscriber"),Tt(this,"publisher"),Tt(this,"name",Hse),Tt(this,"transportExplicitlyClosed",!1),Tt(this,"initialized",!1),Tt(this,"connectionAttemptInProgress",!1),Tt(this,"relayUrl"),Tt(this,"projectId"),Tt(this,"packageName"),Tt(this,"bundleId"),Tt(this,"hasExperiencedNetworkDisruption",!1),Tt(this,"pingTimeout"),Tt(this,"heartBeatTimeout",Ae.toMiliseconds(Ae.THIRTY_SECONDS+Ae.FIVE_SECONDS)),Tt(this,"reconnectTimeout"),Tt(this,"connectPromise"),Tt(this,"reconnectInProgress",!1),Tt(this,"requestsInFlight",[]),Tt(this,"connectTimeout",Ae.toMiliseconds(Ae.ONE_SECOND*15)),Tt(this,"request",async r=>{var s,i;this.logger.debug("Publishing Request Payload");const o=r.id||tc().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:r.method,topic:(s=r.params)==null?void 0:s.topic},"relayer.request - publishing...");const a=`${o}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(a);const c=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==a),c}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),Tt(this,"resetPingTimeout",()=>{Mg()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,s,i,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||o.call(i)}catch(a){this.logger.warn(a,a?.message)}},this.heartBeatTimeout))}),Tt(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Tt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Dn.connect)}),Tt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Tt(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Dn.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Tt(this,"registerProviderListeners",()=>{this.provider.on(Ls.payload,this.onPayloadHandler),this.provider.on(Ls.connect,this.onConnectHandler),this.provider.on(Ls.disconnect,this.onDisconnectHandler),this.provider.on(Ls.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=QC({logger:(n=e.logger)!=null?n:zse,name:this.name}),this.messages=new Yoe(this.logger,e.core),this.subscriber=new lae(this,this.logger),this.publisher=new tae(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||CP,YQ()?this.packageName=ax():ZQ()&&(this.bundleId=ax()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return vs(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Gt.relay},L0.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n?.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(Is.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(Is.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,vI({internal:{throwOnFailedPublish:o}},n)).catch(f=>{o&&d(f)})||a,l()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await to(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Qx())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Pn(Ae.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Dn.message,e),await this.recordMessageEvent(e,L0.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ls.disconnect,i),await to(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ls.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ls.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ls.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Ae.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(Mg())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new n_(new Ose(tee({sdkVersion:HE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),t_(e)){if(!e.method.endsWith(Wse))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Gt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(vI({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else iy(e)&&this.events.emit(Dn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,L0.inbound),this.events.emit(Dn.message,e))}async acknowledgePayload(e){const n=Dh(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ls.payload,this.onPayloadHandler),this.provider.off(Ls.connect,this.onConnectHandler),this.provider.off(Ls.disconnect,this.onDisconnectHandler),this.provider.off(Ls.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Qx();Jre(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Bu.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&ese())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Dn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Ae.toMiliseconds(Vse)))))}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function gae(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function CI(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function _I(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const mae="[object RegExp]",yae="[object String]",wae="[object Number]",bae="[object Boolean]",AI="[object Arguments]",Eae="[object Symbol]",vae="[object Date]",Cae="[object Map]",_ae="[object Set]",Aae="[object Array]",Sae="[object Function]",xae="[object ArrayBuffer]",Ib="[object Object]",Iae="[object Error]",Nae="[object DataView]",Tae="[object Uint8Array]",Rae="[object Uint8ClampedArray]",Oae="[object Uint16Array]",Pae="[object Uint32Array]",kae="[object BigUint64Array]",Bae="[object Int8Array]",Dae="[object Int16Array]",Uae="[object Int32Array]",Mae="[object BigInt64Array]",$ae="[object Float32Array]",Lae="[object Float64Array]";function Fae(){}function SI(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function jae(t,e,n){return of(t,e,void 0,void 0,void 0,void 0,n)}function of(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Af(t,e,i,o)}return Af(t,e,i,o)}function Af(t,e,n,r){if(Object.is(t,e))return!0;let s=_I(t),i=_I(e);if(s===AI&&(s=Ib),i===AI&&(i=Ib),s!==i)return!1;switch(s){case yae:return t.toString()===e.toString();case wae:{const c=t.valueOf(),u=e.valueOf();return gae(c,u)}case bae:case vae:case Eae:return Object.is(t.valueOf(),e.valueOf());case mae:return t.source===e.source&&t.flags===e.flags;case Sae:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case Cae:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!of(u,e.get(c),c,t,e,n,r))return!1;return!0}case _ae:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],f=u.findIndex(h=>of(d,h,void 0,t,e,n,r));if(f===-1)return!1;u.splice(f,1)}return!0}case Aae:case Tae:case Rae:case Oae:case Pae:case kae:case Bae:case Dae:case Uae:case Mae:case $ae:case Lae:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!of(t[c],e[c],c,t,e,n,r))return!1;return!0}case xae:return t.byteLength!==e.byteLength?!1:Af(new Uint8Array(t),new Uint8Array(e),n,r);case Nae:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Af(new Uint8Array(t),new Uint8Array(e),n,r);case Iae:return t.name===e.name&&t.message===e.message;case Ib:{if(!(Af(t.constructor,e.constructor,n,r)||SI(t)&&SI(e)))return!1;const c=[...Object.keys(t),...CI(t)],u=[...Object.keys(e),...CI(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],f=t[d];if(!Object.hasOwn(e,d))return!1;const h=e[d];if(!of(f,h,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function qae(t,e){return jae(t,e,Fae)}var zae=Object.defineProperty,xI=Object.getOwnPropertySymbols,Hae=Object.prototype.hasOwnProperty,Wae=Object.prototype.propertyIsEnumerable,JE=(t,e,n)=>e in t?zae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,II=(t,e)=>{for(var n in e||(e={}))Hae.call(e,n)&&JE(t,n,e[n]);if(xI)for(var n of xI(e))Wae.call(e,n)&&JE(t,n,e[n]);return t},rs=(t,e,n)=>JE(t,typeof e!="symbol"?e+"":e,n);class Lu extends UW{constructor(e,n,r,s=po,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,rs(this,"map",new Map),rs(this,"version",Kse),rs(this,"cached",[]),rs(this,"initialized",!1),rs(this,"getKey"),rs(this,"storagePrefix",po),rs(this,"recentlyDeleted",[]),rs(this,"recentlyDeletedLimit",200),rs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Qn(o)?this.map.set(this.getKey(o),o):Nre(o)?this.map.set(o.id,o):Tre(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),rs(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),rs(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),rs(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>qae(a[c],o[c]))):this.values)),rs(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=II(II({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),rs(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Cs(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return vs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Ie("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Vae=Object.defineProperty,Kae=(t,e,n)=>e in t?Vae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_t=(t,e,n)=>Kae(t,typeof e!="symbol"?e+"":e,n);class Gae{constructor(e,n){this.core=e,this.logger=n,_t(this,"name",Jse),_t(this,"version",Xse),_t(this,"events",new mC),_t(this,"pairings"),_t(this,"initialized",!1),_t(this,"storagePrefix",po),_t(this,"ignoredPayloadTypes",[ea]),_t(this,"registeredMethods",[]),_t(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),_t(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),_t(this,"create",async r=>{this.isInitialized();const s=jE(),i=await this.core.crypto.setSymKey(s),o=Pn(Ae.FIVE_MINUTES),a={protocol:vP},c={topic:i,expiry:o,relay:a,active:!1,methods:r?.methods},u=Hx({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r?.methods});return this.events.emit(Wc.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r?.transportType,internal:r?.internal}),{topic:i,uri:u}}),_t(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[zi.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=zx(r.uri);s.props.properties.topic=i,s.addTrace(zi.pairing_uri_validation_success),s.addTrace(zi.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(zi.existing_pairing),l.active)throw s.setError(Bo.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(zi.pairing_not_expired)}const d=c||Pn(Ae.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(zi.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Wc.create,f),s.addTrace(zi.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(zi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Bo.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(h){throw s.setError(Bo.subscribe_pairing_topic_failure),h}return s.addTrace(zi.subscribe_pairing_topic_success),f}),_t(this,"activate",async({topic:r})=>{this.isInitialized();const s=Pn(Ae.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),_t(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=zc();this.events.once(Ut("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),_t(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),_t(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),_t(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),_t(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Jt("USER_DISCONNECTED")),await this.deletePairing(s))}),_t(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return Hx({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),_t(this,"sendRequest",async(r,s,i)=>{const o=yi(s,i),a=await this.core.crypto.encode(r,o),c=Md[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),_t(this,"sendResult",async(r,s,i)=>{const o=Dh(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=Md[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),_t(this,"sendError",async(r,s,i)=>{const o=sy(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=Md[c]?Md[c].res:Md.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),_t(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Jt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),_t(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Zi(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),_t(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),_t(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;return o==="wc_pairingPing"?this.onPairingPingResponse(s,i):this.onUnknownRpcMethodResponse(o)}),_t(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Wc.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),_t(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Vi(s)?this.events.emit(Ut("pairing_ping",i),{}):Gs(s)&&this.events.emit(Ut("pairing_ping",i),{error:s.error})},500)}),_t(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Wc.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),_t(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Jt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),_t(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Jt("WC_METHOD_UNSUPPORTED",r))}),_t(this,"isValidPair",(r,s)=>{var i;if(!is(r)){const{message:a}=Ie("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Bo.malformed_pairing_uri),new Error(a)}if(!Ire(r.uri)){const{message:a}=Ie("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Bo.malformed_pairing_uri),new Error(a)}const o=zx(r?.uri);if(!((i=o?.relay)!=null&&i.protocol)){const{message:a}=Ie("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Bo.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ie("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Bo.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Ae.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(Bo.pairing_expired);const{message:a}=Ie("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),_t(this,"isValidPing",async r=>{if(!is(r)){const{message:i}=Ie("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),_t(this,"isValidDisconnect",async r=>{if(!is(r)){const{message:i}=Ie("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),_t(this,"isValidPairingTopic",async r=>{if(!Mn(r,!1)){const{message:s}=Ie("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Zi(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ie("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Cs(n,this.name),this.pairings=new Lu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return vs(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Dn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Gt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);t_(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):iy(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Hs.expired,async e=>{const{topic:n}=fO(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Wc.expire,{topic:n}))})}}var Yae=Object.defineProperty,Zae=(t,e,n)=>e in t?Yae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ar=(t,e,n)=>Zae(t,typeof e!="symbol"?e+"":e,n);class Jae extends PW{constructor(e,n){super(e,n),this.core=e,this.logger=n,ar(this,"records",new Map),ar(this,"events",new oi.EventEmitter),ar(this,"name",Qse),ar(this,"version",eie),ar(this,"cached",[]),ar(this,"initialized",!1),ar(this,"storagePrefix",po),ar(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ar(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Pn(Ae.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ci.created,o)}),ar(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Gs(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ci.updated,s))}),ar(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),ar(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ci.deleted,i)}}),this.persist()}),ar(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),ar(this,"on",(r,s)=>{this.events.on(r,s)}),ar(this,"once",(r,s)=>{this.events.once(r,s)}),ar(this,"off",(r,s)=>{this.events.off(r,s)}),ar(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Cs(n,this.name)}get context(){return vs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:yi(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ci.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ci.created,e=>{const n=ci.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ci.updated,e=>{const n=ci.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ci.deleted,e=>{const n=ci.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Bu.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Ae.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ci.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Xae=Object.defineProperty,Qae=(t,e,n)=>e in t?Xae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sr=(t,e,n)=>Qae(t,typeof e!="symbol"?e+"":e,n);class ece extends $W{constructor(e,n){super(e,n),this.core=e,this.logger=n,Sr(this,"expirations",new Map),Sr(this,"events",new oi.EventEmitter),Sr(this,"name",tie),Sr(this,"version",nie),Sr(this,"cached",[]),Sr(this,"initialized",!1),Sr(this,"storagePrefix",po),Sr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Sr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Sr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Hs.created,{target:i,expiration:o})}),Sr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Sr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Hs.deleted,{target:s,expiration:i})}}),Sr(this,"on",(r,s)=>{this.events.on(r,s)}),Sr(this,"once",(r,s)=>{this.events.once(r,s)}),Sr(this,"off",(r,s)=>{this.events.off(r,s)}),Sr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Cs(n,this.name)}get context(){return vs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return nee(e);if(typeof e=="number")return ree(e);const{message:n}=Ie("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Hs.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Ae.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Hs.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Bu.pulse,()=>this.checkExpirations()),this.events.on(Hs.created,e=>{const n=Hs.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Hs.expired,e=>{const n=Hs.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Hs.deleted,e=>{const n=Hs.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}var tce=Object.defineProperty,nce=(t,e,n)=>e in t?tce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,On=(t,e,n)=>nce(t,typeof e!="symbol"?e+"":e,n);class rce extends LW{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,On(this,"name",rie),On(this,"abortController"),On(this,"isDevEnv"),On(this,"verifyUrlV3",iie),On(this,"storagePrefix",po),On(this,"version",EP),On(this,"publicKey"),On(this,"fetchPromise"),On(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ae.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),On(this,"register",async s=>{if(!pd()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=aa.getDocument(),l=this.startAbortTimer(Ae.ONE_SECOND*5),d=await new Promise((f,h)=>{const m=()=>{window.removeEventListener("message",E),u.body.removeChild(y),h("attestation aborted")};this.abortController.signal.addEventListener("abort",m);const y=u.createElement("iframe");y.src=c,y.style.display="none",y.addEventListener("error",m,{signal:this.abortController.signal});const E=S=>{if(S.data&&typeof S.data=="string")try{const R=JSON.parse(S.data);if(R.type==="verify_attestation"){if(pE(R.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(y),this.abortController.signal.removeEventListener("abort",m),window.removeEventListener("message",E),f(R.attestation===null?"":R.attestation)}}catch(R){this.logger.warn(R)}};u.body.appendChild(y),window.addEventListener("message",E,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(u){this.logger.warn(u)}return""}),On(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(pE(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,c)}),On(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Ae.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),On(this,"getVerifyUrl",s=>{let i=s||_f;return oie.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${_f}`),i=_f),i}),On(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Ae.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),On(this,"persistPublicKey",async s=>{this.logger.debug(s,"persisting public key to local storage"),await this.store.setItem(this.storeKey,s),this.publicKey=s}),On(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),On(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),On(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),On(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),On(this,"validateAttestation",(s,i)=>{const o=Qne(s,i.publicKey),a={hasExpired:Ae.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Cs(n,this.name),this.abortController=new AbortController,this.isDevEnv=qC(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return vs(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ae.toMiliseconds(e))}}var sce=Object.defineProperty,ice=(t,e,n)=>e in t?sce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NI=(t,e,n)=>ice(t,typeof e!="symbol"?e+"":e,n);class oce extends FW{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,NI(this,"context",aie),NI(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${cie}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Cs(n,this.context)}}var ace=Object.defineProperty,TI=Object.getOwnPropertySymbols,cce=Object.prototype.hasOwnProperty,uce=Object.prototype.propertyIsEnumerable,XE=(t,e,n)=>e in t?ace(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fd=(t,e)=>{for(var n in e||(e={}))cce.call(e,n)&&XE(t,n,e[n]);if(TI)for(var n of TI(e))uce.call(e,n)&&XE(t,n,e[n]);return t},Gn=(t,e,n)=>XE(t,typeof e!="symbol"?e+"":e,n);class lce extends jW{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Gn(this,"context",lie),Gn(this,"storagePrefix",po),Gn(this,"storageVersion",uie),Gn(this,"events",new Map),Gn(this,"shouldPersist",!1),Gn(this,"init",async()=>{if(!qC())try{const s={eventId:ux(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:lO(this.core.relayer.protocol,this.core.relayer.version,HE)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Gn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=ux(),l=this.core.projectId||"",d=Date.now(),f=Fd({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Gn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Fd(Fd({},a),this.setMethods(a.eventId))}),Gn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Gn(this,"setEventListeners",()=>{this.core.heartbeat.on(Bu.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Ae.fromMiliseconds(Date.now())-Ae.fromMiliseconds(s.timestamp)>die&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Gn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Gn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Gn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Gn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Gn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Fd(Fd({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Gn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Gn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${fie}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${HE}${i}`,{method:"POST",body:JSON.stringify(s)})}),Gn(this,"getAppDomain",()=>uO().url),this.logger=Cs(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var dce=Object.defineProperty,RI=Object.getOwnPropertySymbols,fce=Object.prototype.hasOwnProperty,hce=Object.prototype.propertyIsEnumerable,QE=(t,e,n)=>e in t?dce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OI=(t,e)=>{for(var n in e||(e={}))fce.call(e,n)&&QE(t,n,e[n]);if(RI)for(var n of RI(e))hce.call(e,n)&&QE(t,n,e[n]);return t},zt=(t,e,n)=>QE(t,typeof e!="symbol"?e+"":e,n);let pce=class DP extends NW{constructor(e){var n;super(e),zt(this,"protocol",bP),zt(this,"version",EP),zt(this,"name",zE),zt(this,"relayUrl"),zt(this,"projectId"),zt(this,"customStoragePrefix"),zt(this,"events",new oi.EventEmitter),zt(this,"logger"),zt(this,"heartbeat"),zt(this,"relayer"),zt(this,"crypto"),zt(this,"storage"),zt(this,"history"),zt(this,"expirer"),zt(this,"pairing"),zt(this,"verify"),zt(this,"echoClient"),zt(this,"linkModeSupportedApps"),zt(this,"eventClient"),zt(this,"initialized",!1),zt(this,"logChunkController"),zt(this,"on",(a,c)=>this.events.on(a,c)),zt(this,"once",(a,c)=>this.events.once(a,c)),zt(this,"off",(a,c)=>this.events.off(a,c)),zt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),zt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:Gt.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||CP,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=pC({level:typeof e?.logger=="string"&&e.logger?e.logger:kse.logger,name:zE}),{logger:i,chunkLoggerController:o}=Lm({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Cs(i,this.name),this.heartbeat=new zH,this.crypto=new joe(this,this.logger,e?.keychain),this.history=new Jae(this,this.logger),this.expirer=new ece(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new SW(OI(OI({},Bse),e?.storageOptions)),this.relayer=new pae({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Gae(this,this.logger),this.verify=new rce(this,this.logger,this.storage),this.echoClient=new oce(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new lce(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new DP(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Gse,r),n}get context(){return vs(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(uI,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(uI)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Pse.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const gce=pce,UP="wc",MP=2,$P="client",r_=`${UP}@${MP}:${$P}:`,Nb={name:$P,logger:"error"},PI="WALLETCONNECT_DEEPLINK_CHOICE",mce="proposal",kI="Proposal expired",yce="session",sl=Ae.SEVEN_DAYS,wce="engine",cr={wc_sessionPropose:{req:{ttl:Ae.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ae.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ae.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ae.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ae.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ae.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ae.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ae.FIVE_MINUTES,prompt:!1,tag:1119}}},Tb={min:Ae.FIVE_MINUTES,max:Ae.SEVEN_DAYS},Fi={idle:"IDLE",active:"ACTIVE"},bce={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Ece="request",vce=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Cce="wc",_ce="auth",Ace="authKeys",Sce="pairingTopics",xce="requests",ay=`${Cce}@${1.5}:${_ce}:`,F0=`${ay}:PUB_KEY`;var Ice=Object.defineProperty,Nce=Object.defineProperties,Tce=Object.getOwnPropertyDescriptors,BI=Object.getOwnPropertySymbols,Rce=Object.prototype.hasOwnProperty,Oce=Object.prototype.propertyIsEnumerable,ev=(t,e,n)=>e in t?Ice(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pt=(t,e)=>{for(var n in e||(e={}))Rce.call(e,n)&&ev(t,n,e[n]);if(BI)for(var n of BI(e))Oce.call(e,n)&&ev(t,n,e[n]);return t},ur=(t,e)=>Nce(t,Tce(e)),ge=(t,e,n)=>ev(t,typeof e!="symbol"?e+"":e,n);class Pce extends WW{constructor(e){super(e),ge(this,"name",wce),ge(this,"events",new mC),ge(this,"initialized",!1),ge(this,"requestQueue",{state:Fi.idle,queue:[]}),ge(this,"sessionRequestQueue",{state:Fi.idle,queue:[]}),ge(this,"emittedSessionRequests",new fee({limit:500})),ge(this,"requestQueueDelay",Ae.ONE_SECOND),ge(this,"expectedPairingMethodMap",new Map),ge(this,"recentlyDeletedMap",new Map),ge(this,"recentlyDeletedLimit",200),ge(this,"relayMessageCache",[]),ge(this,"pendingSessions",new Map),ge(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(cr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ae.toMiliseconds(this.requestQueueDelay)))}),ge(this,"connect",async n=>{var r;this.isInitialized(),await this.confirmOnlineStateOrThrow();const s=ur(Pt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(s),s.optionalNamespaces=Cre(s.requiredNamespaces,s.optionalNamespaces),s.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:c,scopedProperties:u,relays:l,authentication:d,walletPay:f}=s,h=((r=d?.[0])==null?void 0:r.ttl)||cr.wc_sessionPropose.req.ttl||Ae.FIVE_MINUTES;this.validateRequestExpiry(h);let m=i,y,E=!1;try{if(m){const P=this.client.core.pairing.pairings.get(m);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),E=P.active}}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${m}) failed`),P}if(!m||!E){const{topic:P,uri:$}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});m=P,y=$}if(!m){const{message:P}=Ie("NO_MATCHING_KEY",`connect() pairing topic: ${m}`);throw new Error(P)}const S=await this.client.core.crypto.generateKeyPair(),R=Pn(h),C=Pt(ur(Pt(Pt({requiredNamespaces:o,optionalNamespaces:a,relays:l??[{protocol:vP}],proposer:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:R,pairingTopic:m},c&&{sessionProperties:c}),u&&{scopedProperties:u}),{id:Wi()}),(d||f)&&{requests:{authentication:d?.map(P=>{const{domain:$,chains:W,nonce:z,uri:_,exp:p,nbf:g,type:b,statement:x,requestId:O,resources:k,signatureTypes:M}=P;return{domain:$,chains:W,nonce:z,type:b??"caip122",aud:_,version:"1",iat:new Date().toISOString(),exp:p,nbf:g,statement:x,requestId:O,resources:k,signatureTypes:M}}),walletPay:f}}),T=Ut("session_connect",C.id),{reject:N,resolve:U,done:q}=zc(h,kI),H=({id:P})=>{P===C.id&&(this.client.events.off("proposal_expire",H),this.pendingSessions.delete(C.id),this.events.emit(T,{error:{message:kI,code:0}}))};return this.client.events.on("proposal_expire",H),this.events.once(T,({error:P,session:$})=>{this.client.events.off("proposal_expire",H),P?N(P):$&&U($)}),await this.setProposal(C.id,C),await this.sendProposeSession({proposal:C,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:C.id}}}).catch(P=>{throw this.deleteProposal(C.id),P}),{uri:y,approval:q}}),ge(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ge(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[ui.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch($){throw o.setError(kc.no_internet_connection),$}try{await this.isValidProposalId(n?.id)}catch($){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),o.setError(kc.proposal_not_found),$}try{await this.isValidApprove(n)}catch($){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(kc.session_approve_namespace_validation_failure),$}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:h}=n,m=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:y,proposer:E,requiredNamespaces:S,optionalNamespaces:R}=m;let C=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:y});C||(C=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ui.session_approve_started,properties:{topic:y,trace:[ui.session_approve_started,ui.session_namespaces_validation_success]}}));const T=await this.client.core.crypto.generateKeyPair(),N=E.publicKey,U=await this.client.core.crypto.generateSharedKey(T,N),q=ur(Pt(Pt(Pt({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:T,metadata:this.client.metadata},expiry:Pn(sl)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{proposalRequestsResponses:h}),H=Gt.relay;C.addTrace(ui.subscribing_session_topic);try{await this.client.core.relayer.subscribe(U,{transportType:H,internal:{skipSubscribe:!0}})}catch($){throw C.setError(kc.subscribe_session_topic_failure),$}C.addTrace(ui.subscribe_session_topic_success);const P=ur(Pt({},q),{topic:U,requiredNamespaces:S,optionalNamespaces:R,pairingTopic:y,acknowledged:!1,self:q.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:T,transportType:Gt.relay,authentication:h?.authentication,walletPayResult:h?.walletPay});await this.client.session.set(U,P),C.addTrace(ui.store_session);try{await this.sendApproveSession({sessionTopic:U,proposal:m,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:T},sessionSettleRequest:q,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:Pt({correlationId:a},this.getTVFApproveParams(P))}}),C.addTrace(ui.session_approve_publish_success)}catch($){throw this.client.logger.error($),this.client.session.delete(U,Jt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(U),$}return this.client.core.eventClient.deleteEvent({eventId:C.eventId}),await this.client.core.pairing.updateMetadata({topic:y,metadata:E.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:y}),await this.setExpiry(U,Pn(sl)),{topic:U,acknowledged:()=>Promise.resolve(this.client.session.get(U))}}),ge(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:cr.wc_sessionPropose.reject}),await this.deleteProposal(r)}),ge(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=zc(Ae.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),c=Wi(),u=tc().toString(),l=this.client.session.get(r).namespaces;return this.events.once(Ut("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:l}),a(d)}),{acknowledged:i}}),ge(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Wi(),{done:i,resolve:o,reject:a}=zc(Ae.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return this.events.once(Ut("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Pn(sl)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),ge(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(E){throw this.client.logger.error("request() -> isValidRequest() failed"),E}const{chainId:r,request:s,topic:i,expiry:o=cr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);a?.transportType===Gt.relay&&await this.confirmOnlineStateOrThrow();const c=Wi(),u=tc().toString(),{done:l,resolve:d,reject:f}=zc(o,"Request expired. Please try again.");this.events.once(Ut("session_request",c),({error:E,result:S})=>{E?f(E):d(S)});const h="wc_sessionRequest",m=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(m)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:h,params:{request:ur(Pt({},s),{expiryTimestamp:Pn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:m}).catch(E=>f(E)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await l();const y={request:ur(Pt({},s),{expiryTimestamp:Pn(o)}),chainId:r};return await Promise.all([new Promise(async E=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:h,params:y,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,y)}).catch(S=>f(S)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),E()}),new Promise(async E=>{var S;if(!((S=a.sessionConfig)!=null&&S.disableDeepLink)){const R=await aee(this.client.core.storage,PI);await see({id:c,topic:i,wcDeepLink:R})}E()}),l()]).then(E=>E[2])}),ge(this,"respond",async n=>{var r,s;this.isInitialized();const i=this.client.core.eventClient.createEvent({properties:{topic:n?.topic||((s=(r=n?.response)==null?void 0:r.id)==null?void 0:s.toString()),trace:[ui.session_request_response_started]}});try{await this.isValidRespond(n)}catch(d){throw i.addTrace(d?.message),i.setError(kc.session_request_response_validation_failure),d}i.addTrace(ui.session_request_response_validation_success);const{topic:o,response:a}=n,{id:c}=a,u=this.client.session.get(o);u.transportType===Gt.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);try{i.addTrace(ui.session_request_response_publish_started),Vi(a)?await this.sendResult({id:c,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:l}):Gs(a)&&await this.sendError({id:c,topic:o,error:a.error,appLink:l}),this.cleanupAfterResponse(n)}catch(d){throw i.addTrace(d?.message),i.setError(kc.session_request_response_publish_failure),d}}),ge(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Wi(),i=tc().toString(),{done:o,resolve:a,reject:c}=zc(Ae.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");this.events.once(Ut("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ge(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=tc().toString(),a=Wi();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ge(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Jt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ie("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),ge(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>Sre(r,n)))),ge(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ge(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Gt.link_mode:Gt.relay;o===Gt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:f,exp:h,nbf:m,methods:y=[],expiry:E}=n,S=[...n.resources||[]],{topic:R,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:R,uri:C}});const T=await this.client.core.crypto.generateKeyPair(),N=$0(T);if(await Promise.all([this.client.auth.authKeys.set(F0,{responseTopic:N,publicKey:T}),this.client.auth.pairingTopics.set(N,{topic:N,pairingTopic:R})]),await this.client.core.relayer.subscribe(N,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${R}`),y.length>0){const{namespace:k}=Qo(a[0]);let M=Ste(k,"request",y);M0(S)&&(M=Ite(M,S.pop())),S.push(M)}const U=E&&E>cr.wc_sessionAuthenticate.req.ttl?E:cr.wc_sessionAuthenticate.req.ttl,q={authPayload:{type:f??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:h,nbf:m,resources:S},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Pn(U)},H={eip155:{chains:a,methods:[...new Set(["personal_sign",...y])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:H,relays:[{protocol:"irn"}],pairingTopic:R,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Pn(cr.wc_sessionPropose.req.ttl),id:Wi()},{done:$,resolve:W,reject:z}=zc(U,"Request expired"),_=Wi(),p=Ut("session_connect",P.id),g=Ut("session_request",_),b=async({error:k,session:M})=>{this.events.off(g,x),k?z(k):M&&W({session:M})},x=async k=>{var M,B,w;if(await this.deletePendingAuthRequest(_,{message:"fulfilled",code:0}),k.error){const ae=Jt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===ae.code?void 0:(this.events.off(p,b),z(k.error.message))}await this.deleteProposal(P.id),this.events.off(p,b);const{cacaos:v,responder:D}=k.result,F=[],Z=[];for(const ae of v){await Ex({cacao:ae,projectId:this.client.core.projectId})||(this.client.logger.error(ae,"Signature verification failed"),z(Jt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Oe}=ae,Qe=M0(Oe.resources),G=[OE(Oe.iss)],J=Lg(Oe.iss);if(Qe){const ne=vx(Qe),ce=Cx(Qe);F.push(...ne),G.push(...ce)}for(const ne of G)Z.push(`${ne}:${J}`)}const ee=await this.client.core.crypto.generateSharedKey(T,D.publicKey);let de;F.length>0&&(de={topic:ee,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:D,controller:D.publicKey,expiry:Pn(sl),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:R,namespaces:Gx([...new Set(F)],[...new Set(Z)]),transportType:o},await this.client.core.relayer.subscribe(ee,{transportType:o}),await this.client.session.set(ee,de),R&&await this.client.core.pairing.updateMetadata({topic:R,metadata:D.metadata}),de=this.client.session.get(ee)),(M=this.client.metadata.redirect)!=null&&M.linkMode&&(B=D.metadata.redirect)!=null&&B.linkMode&&(w=D.metadata.redirect)!=null&&w.universal&&r&&(this.client.core.addLinkModeSupportedApp(D.metadata.redirect.universal),this.client.session.update(ee,{transportType:Gt.link_mode})),W({auths:v,session:de})};this.events.once(p,b),this.events.once(g,x);let O;try{if(i){const k=yi("wc_sessionAuthenticate",q,_);this.client.core.history.set(R,k);const M=await this.client.core.crypto.encode("",k,{type:wp,encoding:Ga});O=d0(r,R,M)}else await Promise.all([this.sendRequest({topic:R,method:"wc_sessionAuthenticate",params:q,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:_}),this.sendRequest({topic:R,method:"wc_sessionPropose",params:P,expiry:cr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(k){throw this.events.off(p,b),this.events.off(g,x),k}return await this.setProposal(P.id,P),await this.setAuthRequest(_,{request:ur(Pt({},q),{verifyContext:{}}),pairingTopic:R,transportType:o}),{uri:O??C,response:$}}),ge(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Bc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(E){throw i.setError($d.no_internet_connection),E}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError($d.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Gt.relay;a===Gt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=$0(c),d={type:ea,receiverPublicKey:c,senderPublicKey:u},f=[],h=[];for(const E of s){if(!await Ex({cacao:E,projectId:this.client.core.projectId})){i.setError($d.invalid_cacao);const N=Jt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:N,encodeOpts:d}),new Error(N.message)}i.addTrace(Bc.cacaos_verified);const{p:S}=E,R=M0(S.resources),C=[OE(S.iss)],T=Lg(S.iss);if(R){const N=vx(R),U=Cx(R);f.push(...N),C.push(...U)}for(const N of C)h.push(`${N}:${T}`)}const m=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Bc.create_authenticated_session_topic);let y;if(f?.length>0){y={topic:m,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Pn(sl),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Gx([...new Set(f)],[...new Set(h)]),transportType:a},i.addTrace(Bc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(m,{transportType:a})}catch(E){throw i.setError($d.subscribe_authenticated_session_topic_failure),E}i.addTrace(Bc.subscribe_authenticated_session_topic_success),await this.client.session.set(m,y),i.addTrace(Bc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Bc.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(E){throw i.setError($d.authenticated_session_approve_publish_failure),E}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:y}}),ge(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Gt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=$0(o),u={type:ea,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:u,rpcOpts:cr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),ge(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return TO(r,s)}),ge(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ge(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ge(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Jt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(PI).catch(u=>this.client.logger.warn(u)),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Fi.idle),await Promise.all(this.getPendingSessionRequests().filter(u=>u.topic===s).map(u=>this.deletePendingSessionRequest(u.id,Jt("USER_DISCONNECTED")))),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),ge(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(kc.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Jt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ge(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Fi.idle,this.client.events.emit("session_request_expire",{id:n}))}),ge(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),ge(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ge(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Pn(cr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ge(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Gt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),ge(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Pn(cr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),ge(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d,publishOpts:f={}}=n,h=yi(s,i,c);let m;const y=!!l;try{const R=y?Ga:ds;m=await this.client.core.crypto.encode(r,h,{encoding:R})}catch(R){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),R}let E;if(vce.includes(s)){const R=Ks(JSON.stringify(h)),C=Ks(m);E=await this.client.core.verify.register({id:C,decryptedId:R})}const S=Pt(Pt({},cr[s].req),f);if(S.attestation=E,o&&(S.ttl=o),a&&(S.id=a),this.client.core.history.set(r,h),y){const R=d0(l,r,m);await global.Linking.openURL(R,this.client.name)}else S.tvf=ur(Pt({},d),{correlationId:h.id}),u?(S.internal=ur(Pt({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,m,S)):this.client.core.relayer.publish(r,m,S).catch(R=>this.client.logger.error(R));return h.id}),ge(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:s}=n,i=yi("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,i);const o=await this.client.core.crypto.encode(r.pairingTopic,i,{encoding:ds}),a=Ks(JSON.stringify(i)),c=Ks(o),u=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:ur(Pt({},s),{publishMethod:"wc_proposeSession",attestation:u})})}),ge(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=n,c=Dh(i.id,s),u=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:ds}),l=yi("wc_sessionSettle",o,a?.id),d=await this.client.core.crypto.encode(r,l,{encoding:ds});this.client.core.history.set(r,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:i.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:d},opts:ur(Pt({},a),{publishMethod:"wc_approveSession"})})}),ge(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,u=Dh(r,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const m=d?Ga:ds;l=await this.client.core.crypto.encode(s,u,ur(Pt({},a||{}),{encoding:m}))}catch(m){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),m}let f,h;try{f=await this.client.core.history.get(s,r);const m=f.request;try{h=this.getTVFParams(r,m.params,i)}catch(y){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${y?.message}`)}}catch(m){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),m}if(d){const m=d0(c,s,l);await global.Linking.openURL(m,this.client.name)}else{const m=f.request.method,y=cr[m].res;y.tvf=ur(Pt({},h),{correlationId:r}),o?(y.internal=ur(Pt({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,y)):this.client.core.relayer.publish(s,l,y).catch(E=>this.client.logger.error(E))}await this.client.core.history.resolve(u)}),ge(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,u=sy(r,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const h=d?Ga:ds;l=await this.client.core.crypto.encode(s,u,ur(Pt({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),h}let f;try{f=await this.client.core.history.get(s,r)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),h}if(d){const h=d0(c,s,l);await global.Linking.openURL(h,this.client.name)}else{const h=f.request.method,m=a||cr[h].res;this.client.core.relayer.publish(s,l,m)}await this.client.core.history.resolve(u)}),ge(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Zi(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Zi(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),ge(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ge(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ge(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Fi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Fi.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Fi.idle}),ge(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ge(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ge(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Ie("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ge(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ge(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u?.setError(Bo.proposal_listener_not_found)),this.isValidConnect(Pt({},s.params));const l=a.expiryTimestamp||Pn(cr.wc_sessionPropose.req.ttl),d=Pt({id:c,pairingTopic:r,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:Ks(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u?.addTrace(zi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(u){await this.sendError({id:c,topic:r,error:u,rpcOpts:cr.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),ge(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Vi(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Gs(r)){await this.deleteProposal(i);const o=Ut("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),ge(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:h}=r.params,m=[...this.pendingSessions.values()].find(S=>S.sessionTopic===n);if(!m)return this.client.logger.error(`Pending session not found for topic ${n}`);const y=this.client.proposal.get(m.proposalId),E=ur(Pt(Pt(Pt({topic:n,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:m.pairingTopic,requiredNamespaces:y.requiredNamespaces,optionalNamespaces:y.optionalNamespaces,controller:a.publicKey,self:{publicKey:m.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:Gt.relay,authentication:h?.authentication,walletPayResult:h?.walletPay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:m.pairingTopic,metadata:E.peer.metadata}),this.pendingSessions.delete(m.proposalId),this.deleteProposal(m.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:r.id,topic:n,throwOnFailedPublish:!0,result:!0}),this.client.events.emit("session_connect",{session:E}),this.events.emit(Ut("session_connect",m.proposalId),{session:E})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ge(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Vi(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Ut("session_approve",s),{})):Gs(r)&&(await this.client.session.delete(n,Jt("USER_DISCONNECTED")),this.events.emit(Ut("session_approve",s),{error:r.error}))}),ge(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Ud.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Jt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Pt({topic:n},s));try{Ud.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw Ud.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),ge(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ge(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Ut("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vi(r)?this.events.emit(Ut("session_update",s),{}):Gs(r)&&this.events.emit(Ut("session_update",s),{error:r.error})}),ge(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Pn(sl)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ge(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Ut("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vi(r)?this.events.emit(Ut("session_extend",s),{}):Gs(r)&&this.events.emit(Ut("session_extend",s),{error:r.error})}),ge(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ge(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Ut("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Vi(r)?this.events.emit(Ut("session_ping",s),{}):Gs(r)&&this.events.emit(Ut("session_ping",s),{error:r.error})},500)}),ge(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{await this.isValidDisconnect({topic:n,reason:r.params}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Jt("USER_DISCONNECTED")}),await this.deleteSession({topic:n,id:s})}catch(i){this.client.logger.error(i)}}),ge(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=n,{id:d,params:f}=a;try{await this.isValidRequest(Pt({topic:o},f));const h=this.client.session.get(o),m=await this.getVerifyContext({attestationId:c,hash:Ks(JSON.stringify(yi("wc_sessionRequest",f,d))),encryptedId:u,metadata:h.peer.metadata,transportType:l}),y={id:d,topic:o,params:f,verifyContext:m};await this.setPendingSessionRequest(y),l===Gt.link_mode&&(r=h.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=h.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(y):(this.addSessionRequestToSessionRequestQueue(y),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:o,error:h}),this.client.logger.error(h)}}),ge(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Ut("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vi(r)?this.events.emit(Ut("session_request",s),{result:r.result}):Gs(r)&&this.events.emit(Ut("session_request",s),{error:r.error})}),ge(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Ud.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Pt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Ud.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ge(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Vi(r)?this.events.emit(Ut("session_request",s),{result:r.result}):Gs(r)&&this.events.emit(Ut("session_request",s),{error:r.error})}),ge(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:Ks(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),h={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:h,pairingTopic:s,transportType:c}),c===Gt.link_mode&&(r=u.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),h={type:ea,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:h,rpcOpts:cr.wc_sessionAuthenticate.autoReject,appLink:f})}}),ge(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ge(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Fi.idle,this.processSessionRequestQueue()},Ae.toMiliseconds(this.requestQueueDelay))}),ge(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{this.events.emit(Ut("session_request",i.request.id),{error:r})})}),ge(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Fi.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ge(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Fi.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),ge(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:yi("wc_sessionPropose",ur(Pt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),ge(this,"isValidConnect",async n=>{if(!is(n)){const{message:u}=Ie("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(u)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Qn(r)||await this.isValidPairingTopic(r),!Mre(c)){const{message:u}=Ie("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(s&&!Qn(s)&&ao(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(i&&!Qn(i)&&ao(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),o&&!Qn(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Qn(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),ge(this,"validateNamespaces",(n,r)=>{const s=Ure(n,"connect()",r);if(s)throw new Error(s.message)}),ge(this,"isValidApprove",async n=>{if(!is(n))throw new Error(Ie("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),u=Cb(s,"approve()");if(u)throw new Error(u.message);const l=Jx(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!Mn(i,!0)){const{message:d}=Ie("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(o&&!Qn(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Qn(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),ge(this,"isValidReject",async n=>{if(!is(n)){const{message:i}=Ie("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Lre(s)){const{message:i}=Ie("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),ge(this,"isValidSessionSettleRequest",n=>{if(!is(n)){const{message:u}=Ie("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(u)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!hP(r)){const{message:u}=Ie("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=Rre(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Cb(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Zi(o)){const{message:u}=Ie("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),ge(this,"isValidUpdate",async n=>{if(!is(n)){const{message:c}=Ie("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=Cb(s,"update()");if(o)throw new Error(o.message);const a=Jx(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),ge(this,"isValidExtend",async n=>{if(!is(n)){const{message:s}=Ie("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ge(this,"isValidRequest",async n=>{if(!is(n)){const{message:c}=Ie("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Zx(a,i)){const{message:c}=Ie("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!Fre(s)){const{message:c}=Ie("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!zre(a,i,s.method)){const{message:c}=Ie("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}this.validateRequestExpiry(o)}),ge(this,"isValidRespond",async n=>{var r;if(!is(n)){const{message:a}=Ie("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(a)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(a){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),a}if(!jre(i)){const{message:a}=Ie("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}const o=this.client.pendingRequest.get(i.id);if(o.topic!==s){const{message:a}=Ie("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${i.id}, expected topic: ${o.topic}, received topic: ${s}`);throw new Error(a)}}),ge(this,"isValidPing",async n=>{if(!is(n)){const{message:s}=Ie("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ge(this,"isValidEmit",async n=>{if(!is(n)){const{message:a}=Ie("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Zx(o,i)){const{message:a}=Ie("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!qre(s)){const{message:a}=Ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Hre(o,i,s.name)){const{message:a}=Ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),ge(this,"isValidDisconnect",async n=>{if(!is(n)){const{message:s}=Ie("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ge(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Mn(s,!1))throw new Error("uri is required parameter");if(!Mn(i,!1))throw new Error("domain is required parameter");if(!Mn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Qo(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Qo(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ge(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||_f,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Gt.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ge(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Ie("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),ge(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ge(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),ge(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Ie("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),ge(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,u,l,d,f;return!n||r!==Gt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=n?.redirect)==null?void 0:l.universal)!==void 0&&((d=n?.redirect)==null?void 0:d.universal)!==""&&((f=n?.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ge(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n?.redirect)==null?void 0:s.universal:void 0}),ge(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=cx(n,"topic")||"",s=decodeURIComponent(cx(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Gt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),ge(this,"registerLinkModeListeners",async()=>{var n;if(qC()||Ac()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ge(this,"getTVFApproveParams",n=>{try{const r=dP(n.namespaces),s=yre(n.namespaces),i=wre(n.namespaces),o=n.sessionProperties,a=n.scopedProperties;return{approvedChains:r,approvedMethods:s,approvedEvents:i,sessionProperties:o,scopedProperties:a}}catch(r){return this.client.logger.warn(r,"Error getting TVF approve params"),{}}}),ge(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const u=this.extractTxHashesFromResult(r.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn(u,"Error getting TVF params")}return c}),ge(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=n?.data||((r=n?.[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),ge(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=bce[i];if(i==="sui_signTransaction")return[ote(r.transactionBytes)];if(i==="near_signTransaction")return[mx(r)];if(i==="near_signTransactions")return r.map(c=>mx(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[cse({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return ta(r)?r.map(c=>yx(c)):[yx(r)];if(i==="cosmos_signDirect")return[cte(r)];if(i==="wallet_sendCalls")return ute(r);if(typeof r=="string")return[r];const a=r[o.key];if(ta(a))return i==="solana_signAllTransactions"?a.map(c=>ite(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn(i,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=Ie("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Dn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(F0)?this.client.auth.authKeys.get(F0):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Gt.link_mode?Ga:ds});t_(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Ks(r)})):iy(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):(this.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(a)}`),await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i})),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${r}`),this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Hs.expired,async e=>{const{topic:n,id:r}=fO(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ie("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ie("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Wc.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Wc.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Mn(e,!1)){const{message:n}=Ie("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Zi(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ie("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Mn(e,!1)){const{message:n}=Ie("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ie("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Zi(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ie("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ie("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Mn(e,!1)){const{message:n}=Ie("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ie("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!$re(e)){const{message:n}=Ie("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ie("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Zi(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ie("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}validateRequestExpiry(e){if(e&&!Kre(e,Tb)){const{message:n}=Ie("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${Tb.min} and ${Tb.max}`);throw new Error(n)}}}class kce extends Lu{constructor(e,n){super(e,n,mce,r_),this.core=e,this.logger=n}}let Bce=class extends Lu{constructor(e,n){super(e,n,yce,r_),this.core=e,this.logger=n}};class Dce extends Lu{constructor(e,n){super(e,n,Ece,r_,r=>r.id),this.core=e,this.logger=n}}class Uce extends Lu{constructor(e,n){super(e,n,Ace,ay,()=>F0),this.core=e,this.logger=n}}class Mce extends Lu{constructor(e,n){super(e,n,Sce,ay),this.core=e,this.logger=n}}class $ce extends Lu{constructor(e,n){super(e,n,xce,ay,r=>r.id),this.core=e,this.logger=n}}var Lce=Object.defineProperty,Fce=(t,e,n)=>e in t?Lce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rb=(t,e,n)=>Fce(t,typeof e!="symbol"?e+"":e,n);class jce{constructor(e,n){this.core=e,this.logger=n,Rb(this,"authKeys"),Rb(this,"pairingTopics"),Rb(this,"requests"),this.authKeys=new Uce(this.core,this.logger),this.pairingTopics=new Mce(this.core,this.logger),this.requests=new $ce(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var qce=Object.defineProperty,zce=(t,e,n)=>e in t?qce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,At=(t,e,n)=>zce(t,typeof e!="symbol"?e+"":e,n);class s_ extends HW{constructor(e){super(e),At(this,"protocol",UP),At(this,"version",MP),At(this,"name",Nb.name),At(this,"metadata"),At(this,"core"),At(this,"logger"),At(this,"events",new oi.EventEmitter),At(this,"engine"),At(this,"session"),At(this,"proposal"),At(this,"pendingRequest"),At(this,"auth"),At(this,"signConfig"),At(this,"on",(r,s)=>this.events.on(r,s)),At(this,"once",(r,s)=>this.events.once(r,s)),At(this,"off",(r,s)=>this.events.off(r,s)),At(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),At(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),At(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),At(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),At(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),At(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||Nb.name,this.metadata=XQ(e?.metadata),this.signConfig=e?.signConfig;const n=QC({logger:e?.logger||Nb.logger,name:this.name});this.logger=n,this.core=e?.core||new gce(e),this.session=new Bce(this.core,this.logger),this.proposal=new kce(this.core,this.logger),this.pendingRequest=new Dce(this.core,this.logger),this.engine=new Pce(this),this.auth=new jce(this.core,this.logger)}static async init(e){const n=new s_(e);return await n.initialize(),n}get context(){return vs(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const Hce=s_;var f0={exports:{}},DI;function Wce(){return DI||(DI=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Yi<"u"&&Yi,r=(function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i})();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Yi<"u"&&Yi||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(g){return g&&DataView.prototype.isPrototypeOf(g)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(g){return g&&l.indexOf(Object.prototype.toString.call(g))>-1};function f(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(g)||g==="")throw new TypeError('Invalid character in header field name: "'+g+'"');return g.toLowerCase()}function h(g){return typeof g!="string"&&(g=String(g)),g}function m(g){var b={next:function(){var x=g.shift();return{done:x===void 0,value:x}}};return c.iterable&&(b[Symbol.iterator]=function(){return b}),b}function y(g){this.map={},g instanceof y?g.forEach(function(b,x){this.append(x,b)},this):Array.isArray(g)?g.forEach(function(b){if(b.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+b.length);this.append(b[0],b[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(b){this.append(b,g[b])},this)}y.prototype.append=function(g,b){g=f(g),b=h(b);var x=this.map[g];this.map[g]=x?x+", "+b:b},y.prototype.delete=function(g){delete this.map[f(g)]},y.prototype.get=function(g){return g=f(g),this.has(g)?this.map[g]:null},y.prototype.has=function(g){return this.map.hasOwnProperty(f(g))},y.prototype.set=function(g,b){this.map[f(g)]=h(b)},y.prototype.forEach=function(g,b){for(var x in this.map)this.map.hasOwnProperty(x)&&g.call(b,this.map[x],x,this)},y.prototype.keys=function(){var g=[];return this.forEach(function(b,x){g.push(x)}),m(g)},y.prototype.values=function(){var g=[];return this.forEach(function(b){g.push(b)}),m(g)},y.prototype.entries=function(){var g=[];return this.forEach(function(b,x){g.push([x,b])}),m(g)},c.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function E(g){if(!g._noBody){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}}function S(g){return new Promise(function(b,x){g.onload=function(){b(g.result)},g.onerror=function(){x(g.error)}})}function R(g){var b=new FileReader,x=S(b);return b.readAsArrayBuffer(g),x}function C(g){var b=new FileReader,x=S(b),O=/charset=([A-Za-z0-9_-]+)/.exec(g.type),k=O?O[1]:"utf-8";return b.readAsText(g,k),x}function T(g){for(var b=new Uint8Array(g),x=new Array(b.length),O=0;O<b.length;O++)x[O]=String.fromCharCode(b[O]);return x.join("")}function N(g){if(g.slice)return g.slice(0);var b=new Uint8Array(g.byteLength);return b.set(new Uint8Array(g)),b.buffer}function U(){return this.bodyUsed=!1,this._initBody=function(g){this.bodyUsed=this.bodyUsed,this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:c.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:c.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():c.arrayBuffer&&c.blob&&u(g)?(this._bodyArrayBuffer=N(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||d(g))?this._bodyArrayBuffer=N(g):this._bodyText=g=Object.prototype.toString.call(g):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var g=E(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var g=E(this);return g||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(R);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var g=E(this);if(g)return g;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then($)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function H(g){var b=g.toUpperCase();return q.indexOf(b)>-1?b:g}function P(g,b){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');b=b||{};var x=b.body;if(g instanceof P){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,b.headers||(this.headers=new y(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!x&&g._bodyInit!=null&&(x=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=b.credentials||this.credentials||"same-origin",(b.headers||!this.headers)&&(this.headers=new y(b.headers)),this.method=H(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal||(function(){if("AbortController"in a){var M=new AbortController;return M.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(x),(this.method==="GET"||this.method==="HEAD")&&(b.cache==="no-store"||b.cache==="no-cache")){var O=/([?&])_=[^&]*/;if(O.test(this.url))this.url=this.url.replace(O,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function $(g){var b=new FormData;return g.trim().split("&").forEach(function(x){if(x){var O=x.split("="),k=O.shift().replace(/\+/g," "),M=O.join("=").replace(/\+/g," ");b.append(decodeURIComponent(k),decodeURIComponent(M))}}),b}function W(g){var b=new y,x=g.replace(/\r?\n[\t ]+/g," ");return x.split("\r").map(function(O){return O.indexOf(`
`)===0?O.substr(1,O.length):O}).forEach(function(O){var k=O.split(":"),M=k.shift().trim();if(M){var B=k.join(":").trim();try{b.append(M,B)}catch(w){console.warn("Response "+w.message)}}}),b}U.call(P.prototype);function z(g,b){if(!(this instanceof z))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(b||(b={}),this.type="default",this.status=b.status===void 0?200:b.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText===void 0?"":""+b.statusText,this.headers=new y(b.headers),this.url=b.url||"",this._initBody(g)}U.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},z.error=function(){var g=new z(null,{status:200,statusText:""});return g.ok=!1,g.status=0,g.type="error",g};var _=[301,302,303,307,308];z.redirect=function(g,b){if(_.indexOf(b)===-1)throw new RangeError("Invalid status code");return new z(null,{status:b,headers:{location:g}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(b,x){this.message=b,this.name=x;var O=Error(b);this.stack=O.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function p(g,b){return new Promise(function(x,O){var k=new P(g,b);if(k.signal&&k.signal.aborted)return O(new o.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function B(){M.abort()}M.onload=function(){var D={statusText:M.statusText,headers:W(M.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(M.status<200||M.status>599)?D.status=200:D.status=M.status,D.url="responseURL"in M?M.responseURL:D.headers.get("X-Request-URL");var F="response"in M?M.response:M.responseText;setTimeout(function(){x(new z(F,D))},0)},M.onerror=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},M.ontimeout=function(){setTimeout(function(){O(new TypeError("Network request timed out"))},0)},M.onabort=function(){setTimeout(function(){O(new o.DOMException("Aborted","AbortError"))},0)};function w(D){try{return D===""&&a.location.href?a.location.href:D}catch{return D}}if(M.open(k.method,w(k.url),!0),k.credentials==="include"?M.withCredentials=!0:k.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&(c.blob?M.responseType="blob":c.arrayBuffer&&(M.responseType="arraybuffer")),b&&typeof b.headers=="object"&&!(b.headers instanceof y||a.Headers&&b.headers instanceof a.Headers)){var v=[];Object.getOwnPropertyNames(b.headers).forEach(function(D){v.push(f(D)),M.setRequestHeader(D,h(b.headers[D]))}),k.headers.forEach(function(D,F){v.indexOf(F)===-1&&M.setRequestHeader(F,D)})}else k.headers.forEach(function(D,F){M.setRequestHeader(F,D)});k.signal&&(k.signal.addEventListener("abort",B),M.onreadystatechange=function(){M.readyState===4&&k.signal.removeEventListener("abort",B)}),M.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return p.polyfill=!0,a.fetch||(a.fetch=p,a.Headers=y,a.Request=P,a.Response=z),o.Headers=y,o.Request=P,o.Response=z,o.fetch=p,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(f0,f0.exports)),f0.exports}var Vce=Wce();const UI=fd(Vce);var Kce=Object.defineProperty,Gce=Object.defineProperties,Yce=Object.getOwnPropertyDescriptors,MI=Object.getOwnPropertySymbols,Zce=Object.prototype.hasOwnProperty,Jce=Object.prototype.propertyIsEnumerable,$I=(t,e,n)=>e in t?Kce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LI=(t,e)=>{for(var n in e||(e={}))Zce.call(e,n)&&$I(t,n,e[n]);if(MI)for(var n of MI(e))Jce.call(e,n)&&$I(t,n,e[n]);return t},FI=(t,e)=>Gce(t,Yce(e));const Xce={Accept:"application/json","Content-Type":"application/json"},Qce="POST",jI={headers:Xce,method:Qce},qI=10;let LP=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new oi.EventEmitter,this.isAvailable=!1,this.registering=!1,!sI(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=_u(e),r=await(await UI(this.url,FI(LI({},jI),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!sI(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=_u({id:1,jsonrpc:"2.0",method:"test",params:[]});await UI(e,FI(LI({},jI),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Cu(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=sy(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return mP(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>qI&&this.events.setMaxListeners(qI)}};function i_(t){return t==null||typeof t!="object"&&typeof t!="function"}function FP(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function jP(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const eue="[object RegExp]",qP="[object String]",zP="[object Number]",HP="[object Boolean]",WP="[object Arguments]",tue="[object Symbol]",nue="[object Date]",rue="[object Map]",sue="[object Set]",iue="[object Array]",oue="[object ArrayBuffer]",aue="[object Object]",cue="[object DataView]",uue="[object Uint8Array]",lue="[object Uint8ClampedArray]",due="[object Uint16Array]",fue="[object Uint32Array]",hue="[object Int8Array]",pue="[object Int16Array]",gue="[object Int32Array]",mue="[object Float32Array]",yue="[object Float64Array]";function o_(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function wue(t,e){return ml(t,void 0,t,new Map,e)}function ml(t,e,n,r=new Map,s=void 0){const i=s?.(t,e,n,r);if(i!=null)return i;if(i_(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=ml(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,ml(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(ml(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(o_(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=ml(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Vc(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Vc(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Vc(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Vc(o,t,n,r,s),o}if(typeof t=="object"&&bue(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Vc(o,t,n,r,s),o}return t}function Vc(t,e,n=t,r,s){const i=[...Object.keys(e),...FP(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=ml(e[a],a,n,r,s))}}function bue(t){switch(jP(t)){case WP:case iue:case oue:case cue:case HP:case nue:case mue:case yue:case hue:case pue:case gue:case rue:case zP:case aue:case eue:case sue:case qP:case tue:case uue:case lue:case due:case fue:return!0;default:return!1}}function Eue(t,e){return wue(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case zP:case qP:case HP:{const o=new t.constructor(t?.valueOf());return Vc(o,t),o}case WP:{const o={};return Vc(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function zI(t){return Eue(t)}function HI(t){return t!==null&&typeof t=="object"&&jP(t)==="[object Arguments]"}function WI(t){return typeof t=="object"&&t!==null}function vue(){}function Cue(t){return o_(t)}function _ue(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Aue(t){if(i_(t))return t;if(Array.isArray(t)||o_(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Sue(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=tv(s,o,r,new Map)}return s}function tv(t,e,n,r){if(i_(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Aue(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...FP(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(HI(a)&&(a={...a}),HI(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=zI(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const h=d[f];l[h]=c[h]}c=l}else c=[];const u=n(c,a,o,t,e,r);u!=null?t[o]=u:Array.isArray(a)||WI(c)&&WI(a)?t[o]=tv(c,a,n,r):c==null&&_ue(a)?t[o]=tv({},a,n,r):c==null&&Cue(a)?t[o]=zI(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function xue(t,...e){return Sue(t,...e,vue)}const VI="error",Iue="wss://relay.walletconnect.org",Nue="wc",VP="universal_provider",h0=`${Nue}@2:${VP}:`,KP="https://rpc.walletconnect.org/v1/",GP="generic",Tue=`${KP}bundler`,Bl="call_status",Rue=86400,a_={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Oue=Object.defineProperty,Pue=Object.defineProperties,kue=Object.getOwnPropertyDescriptors,KI=Object.getOwnPropertySymbols,Bue=Object.prototype.hasOwnProperty,Due=Object.prototype.propertyIsEnumerable,GI=(t,e,n)=>e in t?Oue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p0=(t,e)=>{for(var n in e||(e={}))Bue.call(e,n)&&GI(t,n,e[n]);if(KI)for(var n of KI(e))Due.call(e,n)&&GI(t,n,e[n]);return t},Uue=(t,e)=>Pue(t,kue(e));function YP(t,e,n){var r;const s=Qo(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${KP}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Mue(t){return t.includes(":")?t.split(":")[1]:t}function ZP(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function $ue(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function YI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n?.chains)==null?void 0:r.length)&&((s=n?.chains)==null?void 0:s.length)>0}))}function g0(t={},e={}){const n=YI(ZI(t)),r=YI(ZI(e));return xue(n,r)}function ZI(t){var e,n,r,s,i;const o={};if(!ao(t))return o;for(const[a,c]of Object.entries(t)){const u=ry(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],f=c.rpcMap||{},h=gl(a);o[h]=Uue(p0(p0({},o[h]),c),{chains:oo(u,(e=o[h])==null?void 0:e.chains),methods:oo(l,(n=o[h])==null?void 0:n.methods),events:oo(d,(r=o[h])==null?void 0:r.events)}),(ao(f)||ao(((s=o[h])==null?void 0:s.rpcMap)||{}))&&(o[h].rpcMap=p0(p0({},f),(i=o[h])==null?void 0:i.rpcMap))}return o}function JI(t){return t.includes(":")?t.split(":")[2]:t}function XI(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=ry(n)?[n]:r.chains?r.chains:ZP(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Ob(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function Lue(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const JP={},Dl=t=>JP[t],Pb=(t,e)=>{JP[t]=e};var Fue=Object.defineProperty,QI=Object.getOwnPropertySymbols,jue=Object.prototype.hasOwnProperty,que=Object.prototype.propertyIsEnumerable,e6=(t,e,n)=>e in t?Fue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,t6=(t,e)=>{for(var n in e||(e={}))jue.call(e,n)&&e6(t,n,e[n]);if(QI)for(var n of QI(e))que.call(e,n)&&e6(t,n,e[n]);return t};const n6="eip155",zue=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Hue=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,kb=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,r6=t=>Object.keys(t).filter(e=>zue.includes(e)).reduce((e,n)=>(e[n]=Wue(t[n]),e),{}),Wue=t=>typeof t=="string"&&Lue(t)?JSON.parse(t):t,Vue=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!ao(s)&&!ao(r))return;const o=r6(r);for(const a of n){const c=Hue(a);if(!c)continue;i[kb(c)]=o;const u=s?.[`${n6}:${c}`];if(u){const l=u?.[`${n6}:${c}:${e}`];i[kb(c)]=t6(t6({},i[kb(c)]),r6(l||u))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var Kue=Object.defineProperty,Gue=(t,e,n)=>e in t?Kue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yue=(t,e,n)=>Gue(t,e+"",n);let Bb;class c_{constructor(e){Yue(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,n){return await this.storage.setItem(e,n)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return Bb||(Bb=new c_(e)),Bb}}var Zue=Object.defineProperty,Jue=Object.defineProperties,Xue=Object.getOwnPropertyDescriptors,s6=Object.getOwnPropertySymbols,Que=Object.prototype.hasOwnProperty,ele=Object.prototype.propertyIsEnumerable,i6=(t,e,n)=>e in t?Zue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tle=(t,e)=>{for(var n in e||(e={}))Que.call(e,n)&&i6(t,n,e[n]);if(s6)for(var n of s6(e))ele.call(e,n)&&i6(t,n,e[n]);return t},nle=(t,e)=>Jue(t,Xue(e));async function rle(t,e){const n=Qo(t.result.capabilities.caip345.caip2),r=t.result.capabilities.caip345.transactionHashes,s=await Promise.allSettled(r.map(d=>sle(n.reference,d,e))),i=s.filter(d=>d.status==="fulfilled").map(d=>d.value).filter(d=>d);s.filter(d=>d.status==="rejected").forEach(d=>console.warn("Failed to fetch transaction receipt:",d.reason));const o=!i.length||i.some(d=>!d),a=i.every(d=>d?.status==="0x1"),c=i.every(d=>d?.status==="0x0"),u=i.some(d=>d?.status==="0x0");let l;return o?l=100:a?l=200:c?l=500:u&&(l=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:i,status:l}}async function sle(t,e,n){return await n(parseInt(t)).request(yi("eth_getTransactionReceipt",[e]))}async function ile({sendCalls:t,storage:e}){const n=await e.getItem(Bl);await e.setItem(Bl,nle(tle({},n),{[t.result.id]:{request:t.request,result:t.result,expiry:Pn(Rue)}}))}async function ole({resultId:t,storage:e}){const n=await e.getItem(Bl);if(n){delete n[t],await e.setItem(Bl,n);for(const r in n)Zi(n[r].expiry)&&delete n[r];await e.setItem(Bl,n)}}async function ale({resultId:t,storage:e}){const n=await e.getItem(Bl),r=n?.[t];if(r&&!Zi(r.expiry))return r;await ole({resultId:t,storage:e})}var cle=Object.defineProperty,ule=Object.defineProperties,lle=Object.getOwnPropertyDescriptors,o6=Object.getOwnPropertySymbols,dle=Object.prototype.hasOwnProperty,fle=Object.prototype.propertyIsEnumerable,nv=(t,e,n)=>e in t?cle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Db=(t,e)=>{for(var n in e||(e={}))dle.call(e,n)&&nv(t,n,e[n]);if(o6)for(var n of o6(e))fle.call(e,n)&&nv(t,n,e[n]);return t},Ub=(t,e)=>ule(t,lle(e)),Dc=(t,e,n)=>nv(t,typeof e!="symbol"?e+"":e,n);class hle{constructor(e){Dc(this,"name","eip155"),Dc(this,"client"),Dc(this,"chainId"),Dc(this,"namespace"),Dc(this,"httpProviders"),Dc(this,"events"),Dc(this,"storage"),this.namespace=e.namespace,this.events=Dl("events"),this.client=Dl("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=c_.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n);const r=this.chainId;this.chainId=parseInt(e),this.events.emit(a_.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||YP(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new n_(new LP(r,Dl("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Mue(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(e){const n=e||this.chainId;return this.httpProviders[n]||(this.httpProviders=Ub(Db({},this.httpProviders),{[n]:this.createHttpProvider(n)}),this.httpProviders[n])}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),l=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=l?.[d];if(f)return f;let h;try{h=Vue(u,a,c)}catch(y){console.warn("Failed to extract capabilities from session",y)}if(h)return h;const m=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Ub(Db({},u.sessionProperties||{}),{capabilities:Ub(Db({},l||{}),{[d]:m})})})}catch(y){console.warn("Failed to update session with capabilities",y)}return m}async getCallStatus(e){var n,r,s;const i=this.client.session.get(e.topic),o=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(o){const u=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(u,e)}catch(l){console.warn("Failed to fetch call status from bundler",l,u)}}const a=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,a)}const c=await ale({resultId:(s=e.request.params)==null?void 0:s[0],storage:this.storage});if(c)try{return await rle(c,this.getHttpProvider.bind(this))}catch(u){console.warn("Failed to fetch call status from stored send calls",u,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(yi("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${Tue}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}async sendCalls(e){var n,r,s;const i=await this.client.request(e),o=(n=e.request.params)==null?void 0:n[0],a=i?.id,c=i?.capabilities||{},u=(r=c?.caip345)==null?void 0:r.caip2,l=(s=c?.caip345)==null?void 0:s.transactionHashes;return!a||!u||!(l!=null&&l.length)||await ile({sendCalls:{request:o,result:i},storage:this.storage}),i}}var ple=Object.defineProperty,gle=(t,e,n)=>e in t?ple(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,il=(t,e,n)=>gle(t,typeof e!="symbol"?e+"":e,n);class mle{constructor(e){il(this,"name",GP),il(this,"client"),il(this,"httpProviders"),il(this,"events"),il(this,"namespace"),il(this,"chainId"),this.namespace=e.namespace,this.events=Dl("events"),this.client=Dl("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n);const r=this.chainId;this.chainId=e,this.events.emit(a_.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Qo(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{var i,o;const a=Qo(s),c=(o=(i=this.namespace)==null?void 0:i.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];r[a.reference]=this.createHttpProvider(s,c)}),r}getHttpProvider(e){const n=Qo(e).reference,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||YP(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new n_(new LP(r,Dl("disableProviderPing")))}}var yle=Object.defineProperty,wle=Object.defineProperties,ble=Object.getOwnPropertyDescriptors,a6=Object.getOwnPropertySymbols,Ele=Object.prototype.hasOwnProperty,vle=Object.prototype.propertyIsEnumerable,rv=(t,e,n)=>e in t?yle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jd=(t,e)=>{for(var n in e||(e={}))Ele.call(e,n)&&rv(t,n,e[n]);if(a6)for(var n of a6(e))vle.call(e,n)&&rv(t,n,e[n]);return t},m0=(t,e)=>wle(t,ble(e)),Ss=(t,e,n)=>rv(t,typeof e!="symbol"?e+"":e,n);let Cle=class XP{constructor(e){Ss(this,"client"),Ss(this,"namespaces"),Ss(this,"optionalNamespaces"),Ss(this,"sessionProperties"),Ss(this,"scopedProperties"),Ss(this,"events",new mC),Ss(this,"rpcProviders",{}),Ss(this,"session"),Ss(this,"providerOpts"),Ss(this,"logger"),Ss(this,"uri"),Ss(this,"disableProviderPing",!1),Ss(this,"connectParams");var n,r;this.providerOpts=e,this.logger=QC({logger:(n=e.logger)!=null?n:VI,name:(r=this.providerOpts.name)!=null?r:VP}),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new XP(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:jd({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,Dh(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Jt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.connectParams=e,this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=XI(this.session.namespaces);this.namespaces=g0(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){var n,r;const{uri:s,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties,authentication:(n=this.connectParams)==null?void 0:n.authentication,walletPay:(r=this.connectParams)==null?void 0:r.walletPay});s&&(this.uri=s,this.events.emit("display_uri",s));const o=await i();this.session=o;const a=XI(o.namespaces);return this.namespaces=g0(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!ta(n))return;for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn(n,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Hce.init({core:this.providerOpts.core,logger:this.providerOpts.logger||VI,relayUrl:this.providerOpts.relayUrl||Iue,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>gl(n)))];Pb("client",this.client),Pb("events",this.events),Pb("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=$ue(n,this.session);if(r?.length===0)return;const s=ZP(r),i=g0(this.namespaces,this.optionalNamespaces),o=m0(jd({},i[n]),{accounts:r,chains:s});n==="eip155"?this.rpcProviders[n]=new hle({namespace:o}):this.rpcProviders[n]=new mle({namespace:o})})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&ta(o)&&this.events.emit("accountsChanged",o.map(JI))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=gl(o),u=Ob(o)!==Ob(a)?`${c}:${Ob(a)}`:o;this.onChainChanged({currentCaipChainId:u})}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=m0(jd({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",m0(jd({},Jt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(a_.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(m0(jd({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[GP]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=g0(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>gl(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=gl(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:n,internal:r=!1}){if(!this.namespaces)return;const[s,i]=this.validateChain(e);i&&(this.updateNamespaceChain(s,i),r?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:s,currentCaipChainId:e,previousCaipChainId:n})):this.getProvider(s).setDefaultChain(i),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:n,previousCaipChainId:r}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(JI);if(!ta(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.connectParams=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${h0}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${h0}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${h0}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(h0)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn(n,"Failed to cleanup storage")}}};const c6=2147483648,_le={convertEVMChainIdToCoinType(t){if(t>=c6)throw new Error("Invalid chainId");return(c6|t)>>>0}},js=qt({suggestions:[],loading:!1}),Ale={state:js,subscribe(t){return ir(js,()=>t(js))},subscribeKey(t,e){return Vn(js,t,e)},async resolveName(t){try{return await rt.lookupEnsName(t)}catch(e){const n=e;throw new Error(n?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await rt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{js.loading=!0,js.suggestions=[];const e=await rt.getEnsNameSuggestions(t);return js.suggestions=e.suggestions||[],js.suggestions}catch(e){const n=Sf.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{js.loading=!1}},async getNamesForAddress(t){try{if(!V.state.activeCaipNetwork)return[];const n=fe.getEnsFromCacheForAddress(t);if(n)return n;const r=await rt.reverseLookupEnsName({address:t});return fe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=Sf.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=V.state.activeCaipNetwork,n=V.getAccountData(e?.chainNamespace)?.address,r=me.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");js.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Xe.pushTransactionStack({onCancel(){Xe.replace("RegisterAccountName")}});const i=await _e.signMessage(s);js.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=_le.convertEVMChainIdToCoinType(Number(o));await rt.registerEnsName({coinType:a,address:n,signature:i,message:s}),V.setAccountProp("profileName",t,e.chainNamespace),fe.updateEnsCache({address:n,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),Xe.replace("RegisterAccountNameSuccess")}catch(s){const i=Sf.parseEnsApiError(s,`Error registering name ${t}`);throw Xe.replace("RegisterAccountName"),new Error(i)}finally{js.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},Sf=ii(Ale);function sv(t){try{return new URL(t)}catch{return null}}function Sle(t){const e=t.split("/"),n=e.length>0&&e[0]!==void 0?e[0]:"",r=n.lastIndexOf(":");return r===-1?{host:n}:{host:n.slice(0,r),port:n.slice(r+1)}}function xle(t){const e=t.indexOf("://");if(e===-1)return null;const n=t.slice(0,e),r=e+3;let s=t.indexOf("/",r);s===-1&&(s=t.length);const i=t.slice(r,s),o=i.lastIndexOf(":");return o===-1?{scheme:n,host:i}:{scheme:n,host:i.slice(0,o),port:i.slice(o+1)}}function Ile(t,e){if(e.includes("://")){const o=sv(e);return o?o.origin===t:!1}const{host:n,port:r}=Sle(e),s=t.indexOf("://");if(s!==-1){const o=s+3;let a=t.indexOf("/",o);a===-1&&(a=t.length);const c=t.slice(o,a);if(r!==void 0)return`${n}:${r}`===c;const u=c.split(":")[0];return n===u}const i=sv(t);return i?r!==void 0?n===i.hostname&&r===(i.port||void 0):n===i.hostname:!1}function Nle(t,e,n){let r=n,s;const i=r.indexOf("://");i!==-1&&(s=r.slice(0,i),r=r.slice(i+3));const o=r.indexOf("/");o!==-1&&(r=r.slice(0,o));let a=r,c;const u=a.lastIndexOf(":");u!==-1&&(c=a.slice(u+1),a=a.slice(0,u));const l=a.split(".");for(const y of l)if(y.includes("*")&&y!=="*")return!1;const d=t.protocol.replace(/:$/u,"");if(s&&s!==d||c!==void 0&&c!=="*"&&c!==t.port)return!1;const f=xle(e),m=(f?f.host:t.hostname).split(".");if(l.length!==m.length)return!1;for(let y=l.length-1;y>=0;y-=1){const E=l[y],S=m[y];if(E!=="*"&&E!==S)return!1}return!0}const Tle={ton:["ton_sendMessage","ton_signData"],solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},ei={RPC_ERROR_CODE:{USER_REJECTED:5e3,USER_REJECTED_METHODS:5002},getMethodsByChainNamespace(t){return Tle[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=r[o];switch(l.chains.push(u),u){case"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":l.chains.push("solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ");break;case"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":l.chains.push("solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K");break}return l?.rpcMap&&c&&(l.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{const e=await Sf.resolveName(t);return(e?.addresses?Object.values(e.addresses):[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isUserRejectedRequestError(t){try{if(typeof t=="object"&&t!==null){const e=t,n=typeof e.code=="number",r=n&&e.code===ei.RPC_ERROR_CODE.USER_REJECTED_METHODS,s=n&&e.code===ei.RPC_ERROR_CODE.USER_REJECTED;return r||s}return!1}catch{return!1}},isOriginAllowed(t,e,n){const r=[...e,...n];if(e.length===0)return!0;const s=sv(t);if(!s)return r.some(i=>!i.includes("*")&&i===t);if(s.hostname==="localhost"||s.hostname==="127.0.0.1")return!0;for(const i of r)if(i.includes("*")){if(Nle(s,t,i))return!0}else if(Ile(t,i))return!0;return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=ei.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("accountsChanged",a=>{try{const c=t.session?.namespaces?.[e]?.accounts||[],u=t.rpcProviders?.[e]?.getDefaultChain(),l=a.map(d=>{const f=c.find(y=>y.includes(`${e}:${u}:${d}`));if(!f)return;const{chainId:h,chainNamespace:m}=$n.parseCaipAddress(f);return{address:d,chainId:h,chainNamespace:m}}).filter(d=>d!==void 0);l.length>0&&s(l)}catch(c){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,c)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){const n=new Set,r=t?.session?.namespaces?.[e]?.accounts?.map(s=>$n.parseCaipAddress(s)).filter(({address:s})=>n.has(s.toLowerCase())?!1:(n.add(s.toLowerCase()),!0));return r&&r.length>0?r:[]}},Rle=[X.CONNECTOR_ID.AUTH,X.CONNECTOR_ID.WALLET_CONNECT];class u_{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>V.getCaipNetworks(n),this.getConnectorId=n=>me.getConnectorId(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===n?.toString());e&&r&&this.addConnection({connectorId:X.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:X.CONNECTOR_ID.AUTH,type:"AUTH",name:X.CONNECTOR_NAMES.AUTH,provider:e,imageId:void 0,chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>n.connectorId.toLowerCase()!==e.toLowerCase()),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){V.setAccountProp("status",e,n)}on(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){try{return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}catch(n){throw ei.isUserRejectedRequestError(n)?new Xa(n):n}}async switchNetwork(e){const{caipNetwork:n}=e,r=Lt.getProviderId(n.chainNamespace),s=Lt.getProvider(n.chainNamespace);if(!s)throw new Error("Provider not found");if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(r==="AUTH"){const i=me.getAuthConnector()?.provider;if(!i)throw new Error("Auth provider not found");const o=Dr(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n.id==="walletConnect");if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=xe.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===s?.toString()),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=xe.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){if(e.length>0){const{address:s}=xe.getAccount(e[0]),i=this.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});s&&this.getConnectorId(X.CHAIN.EVM)?.toLowerCase()===n.toLowerCase()&&this.emit("accountChanged",{address:s,chainId:i?.caipNetwork?.id,connector:i?.connector}),this.addConnection({connectorId:n,accounts:e.map(o=>{const{address:a}=xe.getAccount(o);return{address:a}}),caipNetwork:i?.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),this.getConnectorId(X.CHAIN.EVM)?.toLowerCase()===e.toLowerCase()&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){const r=typeof e=="string"&&e.startsWith("0x")?parseInt(e,16).toString():e.toString(),s=this.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),this.getConnectorId(X.CHAIN.EVM)?.toLowerCase()===n.toLowerCase()&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(Rle.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[n]=e.accounts;this.emit("accountChanged",{address:n?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(u=>u.connectorId.toLowerCase()===n.toLowerCase());if(!o)return null;const a=s.find(u=>u.id.toLowerCase()===o.connectorId.toLowerCase()),c=e?o.accounts.find(u=>u.address.toLowerCase()===e.toLowerCase()):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>a.id.toLowerCase()===o.connectorId.toLowerCase()));if(i){const[o]=i.accounts,a=s.find(c=>c.id.toLowerCase()===i.connectorId.toLowerCase());return{...i,account:o,connector:a}}return null}}let Uc=null;const fs={getSIWX(){return oe.state.siwx},async initializeIfEnabled(t=V.getActiveCaipAddress()){const e=oe.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(V.checkIfSupportedNetwork(n,`${n}:${r}`))try{if(oe.state.remoteFeatures?.emailCapture){const o=V.getAccountData(n)?.user;await bt.open({view:"DataCapture",data:{email:o?.email??void 0}});return}if(Uc&&await Uc,(await e.getSessions(`${n}:${r}`,s)).length)return;await bt.open({view:"SIWXSignMessage"})}catch(i){console.error("SIWXUtil:initializeIfEnabled",i),ot.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(i)}),await _e._getClient()?.disconnect().catch(console.error),Xe.reset("Connect"),eo.showError("A problem occurred while trying initialize authentication")}},async isAuthenticated(t=V.getActiveCaipAddress()){if(!oe.state.siwx||!t)return!0;const{chainNamespace:n,chainId:r,address:s}=$n.parseCaipAddress(t),i=`${n}:${r}`;return(await fs.getSessions({address:s,caipNetworkId:i})).length>0},async requestSignMessage(){const t=oe.state.siwx,e=xe.getPlainAddress(V.getActiveCaipAddress()),n=Ko();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");try{const r=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),s=r.toString();let i="";t.signMessage?i=await t.signMessage({message:s,chainId:n.caipNetworkId,accountAddress:e}):(me.getConnectorId(n.chainNamespace)===X.CONNECTOR_ID.AUTH&&Xe.pushTransactionStack({}),i=await _e.signMessage(s)||""),await t.addSession({data:r,message:s,signature:i}),V.setLastConnectedSIWECaipNetwork(n),bt.close(),ot.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(r){(!bt.state.open||Xe.state.view==="ApproveTransaction")&&await bt.open({view:"SIWXSignMessage"}),eo.showError("Error signing message"),ot.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(r)}),console.error("SWIXUtil:requestSignMessage",r)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const n=V.getLastConnectedSIWECaipNetwork();if(n){const r=await t?.getSessions(n?.caipNetworkId,xe.getPlainAddress(V.getActiveCaipAddress())||"");r&&r.length>0?await V.switchActiveNetwork(n):await _e.disconnect()}else await _e.disconnect()}else bt.close();bt.close(),ot.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=V.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await t?.getSessions(r.caipNetworkId,xe.getPlainAddress(V.getActiveCaipAddress())||"");s&&n.push(...s)})),n},async getSessions(t){const e=oe.state.siwx;let n=t?.address;if(!n){const s=V.getActiveCaipAddress();n=xe.getPlainAddress(s)}let r=t?.caipNetworkId;return r||(r=V.getActiveCaipNetwork()?.caipNetworkId),e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=Xe.state.view==="ApproveTransaction",n=Xe.state.view==="SIWXSignMessage";if(e||n)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){const i=fs.getSIWX(),o=Ko();if(!i||!s.includes(X.CHAIN.EVM)||oe.state.remoteFeatures?.emailCapture){const d=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:d.address,chainId:d.chainId,accounts:d.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),u={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},l=await t.connect({chainId:e,socialUri:n,siwxMessage:u,preferredAccountType:r});return u.accountAddress=l.address,u.serializedMessage=l.message||"",l.signature&&l.message&&await fs.addEmbeddedWalletSession(u,l.message,l.signature),V.setLastConnectedSIWECaipNetwork(o),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,n){if(Uc)return Uc;const r=fs.getSIWX();return r?(Uc=r.addSession({data:t,message:e,signature:n}).finally(()=>{Uc=null}),Uc):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){const r=fs.getSIWX(),s=Ko(),i=new Set(e.map(u=>u.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const o=await r.createMessage({chainId:Ko()?.caipNetworkId||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...e.filter(u=>u!==o.chainId)]});eo.showLoading("Authenticating...",{autoClose:!1});const c={...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:a.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"};if(V.setAccountProp("connectedWalletInfo",c,Array.from(i)[0]),a?.auths?.length){const u=a.auths.map(l=>{const d=t.client.formatAuthMessage({request:l.p,iss:l.p.iss});return{data:{...l.p,accountAddress:l.p.iss.split(":").slice(-1).join(""),chainId:l.p.iss.split(":").slice(2,4).join(":"),uri:l.p.aud??"",version:l.p.version||o.version,expirationTime:l.p.exp,issuedAt:l.p.iat,notBefore:l.p.nbf},message:d,signature:l.s.s,cacao:l}});try{await r.setSessions(u),s&&V.setLastConnectedSIWECaipNetwork(s),ot.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:fs.getSIWXEventProperties()})}catch(l){throw console.error("SIWX:universalProviderAuth - failed to set sessions",l),ot.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:fs.getSIWXEventProperties(l)}),await t.disconnect().catch(console.error),l}finally{eo.hide()}}return!0},getSIWXEventProperties(t){const e=V.state.activeChain;if(!e)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:V.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:Dr(e)===hn.ACCOUNT_TYPES.SMART_ACCOUNT,message:t?xe.parseError(t):void 0}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};class l_{constructor({provider:e,namespace:n}){this.id=X.CONNECTOR_ID.WALLET_CONNECT,this.name="WalletConnect",this.type="WALLET_CONNECT",this.imageId="ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",this.getCaipNetworks=V.getCaipNetworks.bind(V),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=oe.state.universalProviderConfigOverride,s=ei.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return fs.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Ole})}}const Ole=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],li=qt({message:"",variant:"info",open:!1}),Ple={state:li,subscribeKey(t,e){return Vn(li,t,e)},open(t,e){const{debug:n}=oe.state,{code:r,displayMessage:s,debugMessage:i}=t;s&&n&&(li.message=s,li.variant=e,li.open=!0)},warn(t,e,n){li.open=!0,li.message=t,li.variant="warning",e&&console.warn(e,n)},close(){li.open=!1,li.message="",li.variant="info"}},tn=ii(Ple),kle={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};class Ble extends Error{}function Dle(){const{sdkType:t,sdkVersion:e,projectId:n}=oe.getSnapshot(),r=new URL("https://rpc.walletconnect.org/v1/json-rpc");return r.searchParams.set("projectId",n),r.searchParams.set("st",t),r.searchParams.set("sv",e),r.searchParams.set("source","fund-wallet"),r.toString()}async function d_(t,e){const n=Dle(),{projectId:r}=oe.getSnapshot(),s={jsonrpc:"2.0",id:1,method:t,params:{...e||{},projectId:r}},o=await(await fetch(n,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).json();if(o.error)throw new Ble(o.error.message);return o}async function pwe(t){return(await d_("reown_getExchanges",t)).result}async function gwe(t){return(await d_("reown_getExchangePayUrl",t)).result}async function mwe(t){return(await d_("reown_getExchangeBuyStatus",t)).result}function ywe(t,e){const{chainNamespace:n,chainId:r}=$n.parseCaipNetworkId(t),s=kle[n];if(!s)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${n}`);let i=s.native.assetNamespace,o=s.native.assetReference;return e!=="native"&&(i=s.defaultTokenNamespace,o=e),`${`${n}:${r}`}/${i}:${o}`}const Ule={network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},Mle={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},QP={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},$le={asset:"0x036CbD53842c5426634e7929541eC2318f3dCF7e"},Lle={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},Fle={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},jle={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},qle={network:"eip155:137",asset:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},zle={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Hle={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Wle={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Vle={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Kle={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Gle={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Yle={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}},Zle={ethereumETH:Ule,baseETH:Mle,baseUSDC:QP,baseSepoliaETH:Lle,ethereumUSDC:Fle,arbitrumUSDC:jle,polygonUSDC:qle,solanaUSDC:zle,ethereumUSDT:Hle,optimismUSDT:Wle,arbitrumUSDT:Vle,polygonUSDT:Kle,solanaUSDT:Gle,solanaSOL:Yle};function wwe(t){return Object.values(Zle).filter(e=>e.network===t)}const qr={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:X.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH",getSDKVersionWarningMessage(t,e){return`
     @@@@@@@           @@@@@@@@@@@@@@@@@@      
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
      @@@@@            @@@@@@@@@@@@@@@@@@  
      
AppKit SDK version ${t} is outdated. Latest version is ${e}. Please update to the latest version for bug fixes and new features.
            
Changelog: https://github.com/reown-com/appkit/releases
NPM Registry: https://www.npmjs.com/package/@reown/appkit`}},Jle={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"}},Zs={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${qr.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=V.state.activeChain;return X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>me.getConnectorId(e)===X.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})},userChainIdToChainNamespace(t){if(typeof t=="number")return X.CHAIN.EVM;const[e]=t.split(":");return e},getOtherAuthNamespaces(t){return t?X.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(r=>r!==t):[]},getConnectorStorageInfo(t,e){const r=fe.getConnections()[e]??[];return{hasDisconnected:fe.isConnectorDisconnected(t,e),hasConnected:r.some(s=>Zs.isLowerCaseMatch(s.connectorId,t))}}},Xle=new AbortController,Yt={EmbeddedWalletAbortController:Xle,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${nf()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com. [PID: ${oe.state.projectId}]`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systems date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(t,e)=>`An error occurred while connecting an inactive namespace ${t}: "${e}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},ek={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:QP.asset,84532:$le.asset}},getTokenSymbolByAddress(t){if(!t)return;const[e]=Object.entries(ek.TOKEN_ADDRESSES_BY_SYMBOL).find(([n,r])=>Object.values(r).includes(t))??[];return e}},Qle={createLogger(t,e="error"){const n=pC({level:e}),{logger:r}=Lm({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},ede="rpc.walletconnect.org";function u6(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const Mb=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Qi={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===ede}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:X.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${X.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){const r=t.rpcUrls?.default?.http?.[0];return Mb.includes(e)?u6(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=t.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(t,i,n),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,u=r?.[i]?.map(f=>f.url)||[],l=[...u,...a?[a]:[]],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Jle.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Qi.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){const r=[];return n?.forEach(s=>{r.push(tf(s.url,s.config))}),Mb.includes(t.caipNetworkId)&&r.push(tf(u6(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(s=>{r.push(tf(s))}),XA(r)},extendWagmiTransports(t,e,n){if(Mb.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return XA([n,tf(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:X.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=fe.getActiveCaipNetworkId(),n=V.getAllRequestedCaipNetworks(),r=Array.from(V.state.chains?.keys()||[]),s=e?.split(":")[0],i=s?r.includes(s):!1,o=n?.find(c=>c.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||n?.[0]}};class fu{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){const{metadata:c,sdkVersion:u,sdkType:l}=oe.getSnapshot();return fu.instance||(fu.instance=new Uz({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!oe.state.remoteFeatures?.emailCapture,metadata:c,sdkVersion:u,sdkType:l})),fu.instance}}const j0=globalThis,f_=j0.ShadowRoot&&(j0.ShadyCSS===void 0||j0.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,h_=Symbol(),l6=new WeakMap;let tk=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==h_)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(f_&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=l6.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&l6.set(n,e))}return e}toString(){return this.cssText}};const gi=t=>new tk(typeof t=="string"?t:t+"",void 0,h_),Ya=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new tk(n,t,h_)},tde=(t,e)=>{if(f_)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=j0.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},d6=f_?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return gi(n)})(t):t;const{is:nde,defineProperty:rde,getOwnPropertyDescriptor:sde,getOwnPropertyNames:ide,getOwnPropertySymbols:ode,getPrototypeOf:ade}=Object,cy=globalThis,f6=cy.trustedTypes,cde=f6?f6.emptyScript:"",ude=cy.reactiveElementPolyfillSupport,xf=(t,e)=>t,iv={toAttribute(t,e){switch(e){case Boolean:t=t?cde:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},nk=(t,e)=>!nde(t,e),h6={attribute:!0,type:String,converter:iv,reflect:!1,useDefault:!1,hasChanged:nk};Symbol.metadata??=Symbol("metadata"),cy.litPropertyMetadata??=new WeakMap;let ll=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=h6){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&rde(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=sde(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s?.call(this);i?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??h6}static _$Ei(){if(this.hasOwnProperty(xf("elementProperties")))return;const e=ade(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(xf("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(xf("properties"))){const n=this.properties,r=[...ide(n),...ode(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(d6(s))}else e!==void 0&&n.push(d6(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return tde(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const i=(r.converter?.toAttribute!==void 0?r.converter:iv).toAttribute(n,r.type);this._$Em=e,i==null?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,n){const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const i=r.getPropertyOptions(s),o=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:iv;this._$Em=s;const a=o.fromAttribute(n,i.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,n,r,s=!1,i){if(e!==void 0){const o=this.constructor;if(s===!1&&(i=this[e]),r??=o.getPropertyOptions(e),!((r.hasChanged??nk)(i,n)||r.useDefault&&r.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,i]of this._$Ep)this[s]=i;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[s,i]of r){const{wrapped:o}=i,a=this[s];o!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,i,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(n=>this._$ET(n,this[n])),this._$EM()}updated(e){}firstUpdated(e){}};ll.elementStyles=[],ll.shadowRootOptions={mode:"open"},ll[xf("elementProperties")]=new Map,ll[xf("finalized")]=new Map,ude?.({ReactiveElement:ll}),(cy.reactiveElementVersions??=[]).push("2.1.2");const p_=globalThis,p6=t=>t,Wg=p_.trustedTypes,g6=Wg?Wg.createPolicy("lit-html",{createHTML:t=>t}):void 0,rk="$lit$",Za=`lit$${Math.random().toFixed(9).slice(2)}$`,sk="?"+Za,lde=`<${sk}>`,Nu=document,Uh=()=>Nu.createComment(""),Mh=t=>t===null||typeof t!="object"&&typeof t!="function",g_=Array.isArray,dde=t=>g_(t)||typeof t?.[Symbol.iterator]=="function",$b=`[ 	
\f\r]`,qd=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,m6=/-->/g,y6=/>/g,Mc=RegExp(`>|${$b}(?:([^\\s"'>=/]+)(${$b}*=${$b}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),w6=/'/g,b6=/"/g,ik=/^(?:script|style|textarea|title)$/i,ok=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),vwe=ok(1),Cwe=ok(2),sd=Symbol.for("lit-noChange"),er=Symbol.for("lit-nothing"),E6=new WeakMap,iu=Nu.createTreeWalker(Nu,129);function ak(t,e){if(!g_(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return g6!==void 0?g6.createHTML(e):e}const fde=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=qd;for(let a=0;a<n;a++){const c=t[a];let u,l,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,l=o.exec(c),l!==null);)f=o.lastIndex,o===qd?l[1]==="!--"?o=m6:l[1]!==void 0?o=y6:l[2]!==void 0?(ik.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=Mc):l[3]!==void 0&&(o=Mc):o===Mc?l[0]===">"?(o=s??qd,d=-1):l[1]===void 0?d=-2:(d=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?Mc:l[3]==='"'?b6:w6):o===b6||o===w6?o=Mc:o===m6||o===y6?o=qd:(o=Mc,s=void 0);const h=o===Mc&&t[a+1].startsWith("/>")?" ":"";i+=o===qd?c+lde:d>=0?(r.push(u),c.slice(0,d)+rk+c.slice(d)+Za+h):c+Za+(d===-2?a:h)}return[ak(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class $h{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=fde(e,n);if(this.el=$h.createElement(u,r),iu.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=iu.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(rk)){const f=l[o++],h=s.getAttribute(d).split(Za),m=/([.?@])?(.*)/.exec(f);c.push({type:1,index:i,name:m[2],strings:h,ctor:m[1]==="."?pde:m[1]==="?"?gde:m[1]==="@"?mde:uy}),s.removeAttribute(d)}else d.startsWith(Za)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(ik.test(s.tagName)){const d=s.textContent.split(Za),f=d.length-1;if(f>0){s.textContent=Wg?Wg.emptyScript:"";for(let h=0;h<f;h++)s.append(d[h],Uh()),iu.nextNode(),c.push({type:2,index:++i});s.append(d[f],Uh())}}}else if(s.nodeType===8)if(s.data===sk)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Za,d+1))!==-1;)c.push({type:7,index:i}),d+=Za.length-1}i++}}static createElement(e,n){const r=Nu.createElement("template");return r.innerHTML=e,r}}function id(t,e,n=t,r){if(e===sd)return e;let s=r!==void 0?n._$Co?.[r]:n._$Cl;const i=Mh(e)?void 0:e._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??=[])[r]=s:n._$Cl=s),s!==void 0&&(e=id(t,s._$AS(t,e.values),s,r)),e}class hde{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=(e?.creationScope??Nu).importNode(n,!0);iu.currentNode=s;let i=iu.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new Ep(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new yde(i,this,e)),this._$AV.push(u),c=r[++a]}o!==c?.index&&(i=iu.nextNode(),o++)}return iu.currentNode=Nu,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Ep{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=er,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=id(this,e,n),Mh(e)?e===er||e==null||e===""?(this._$AH!==er&&this._$AR(),this._$AH=er):e!==this._$AH&&e!==sd&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):dde(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==er&&Mh(this._$AH)?this._$AA.nextSibling.data=e:this.T(Nu.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=$h.createElement(ak(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===s)this._$AH.p(n);else{const i=new hde(s,this),o=i.u(this.options);i.p(n),this.T(o),this._$AH=i}}_$AC(e){let n=E6.get(e.strings);return n===void 0&&E6.set(e.strings,n=new $h(e)),n}k(e){g_(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Ep(this.O(Uh()),this.O(Uh()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const r=p6(e).nextSibling;p6(e).remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class uy{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=er,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=er}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=id(this,e,n,0),o=!Mh(e)||e!==this._$AH&&e!==sd,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=id(this,a[r+c],n,c),u===sd&&(u=this._$AH[c]),o||=!Mh(u)||u!==this._$AH[c],u===er?e=er:e!==er&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===er?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class pde extends uy{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===er?void 0:e}}class gde extends uy{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==er)}}class mde extends uy{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=id(this,e,n,0)??er)===sd)return;const r=this._$AH,s=e===er&&r!==er||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==er&&(r===er||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class yde{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){id(this,e)}}const wde=p_.litHtmlPolyfillSupport;wde?.($h,Ep),(p_.litHtmlVersions??=[]).push("3.3.2");const bde=(t,e,n)=>{const r=n?.renderBefore??e;let s=r._$litPart$;if(s===void 0){const i=n?.renderBefore??null;r._$litPart$=s=new Ep(e.insertBefore(Uh(),i),i,void 0,n??{})}return s._$AI(t),s};const m_=globalThis;let q0=class extends ll{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=bde(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return sd}};q0._$litElement$=!0,q0.finalized=!0,m_.litElementHydrateSupport?.({LitElement:q0});const Ede=m_.litElementPolyfillSupport;Ede?.({LitElement:q0});(m_.litElementVersions??=[]).push("4.2.2");const vde={black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},Vg={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},Cde={1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},_de={0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},Ade={regular:"KHTeka",mono:"KHTekaMono"},Sde={regular:"400",medium:"500"},xde={h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},Ide={"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},Nde={"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"},Tde={xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},ov={colors:vde,fontFamily:Ade,fontWeight:Sde,textSize:xde,typography:Ide,tokens:{core:Vg.core,theme:Vg.dark},borderRadius:Cde,spacing:_de,durations:Tde,easings:Nde},v6="--apkt";function y0(t){if(!t)return{};const e={};return e["font-family"]=t["--apkt-font-family"]??t["--w3m-font-family"]??"KHTeka",e.accent=t["--apkt-accent"]??t["--w3m-accent"]??"#0988F0",e["color-mix"]=t["--apkt-color-mix"]??t["--w3m-color-mix"]??"#000",e["color-mix-strength"]=t["--apkt-color-mix-strength"]??t["--w3m-color-mix-strength"]??0,e["font-size-master"]=t["--apkt-font-size-master"]??t["--w3m-font-size-master"]??"10px",e["border-radius-master"]=t["--apkt-border-radius-master"]??t["--w3m-border-radius-master"]??"4px",t["--apkt-z-index"]!==void 0?e["z-index"]=t["--apkt-z-index"]:t["--w3m-z-index"]!==void 0&&(e["z-index"]=t["--w3m-z-index"]),e}const $o={createCSSVariables(t){const e={},n={};function r(i,o,a=""){for(const[c,u]of Object.entries(i)){const l=a?`${a}-${c}`:c;u&&typeof u=="object"&&Object.keys(u).length?(o[c]={},r(u,o[c],l)):typeof u=="string"&&(o[c]=`${v6}-${l}`)}}function s(i,o){for(const[a,c]of Object.entries(i))c&&typeof c=="object"?(o[a]={},s(c,o[a])):typeof c=="string"&&(o[a]=`var(${c})`)}return r(t,e),s(e,n),{cssVariables:e,cssVariablesVarPrefix:n}},assignCSSVariables(t,e){const n={};function r(s,i,o){for(const[a,c]of Object.entries(s)){const u=o?`${o}-${a}`:a,l=i[a];c&&typeof c=="object"?r(c,l,u):typeof l=="string"&&(n[`${v6}-${u}`]=l)}}return r(t,e),n},createRootStyles(t,e){const n={...ov,tokens:{...ov.tokens,theme:t==="light"?Vg.light:Vg.dark}},{cssVariables:r}=$o.createCSSVariables(n),s=$o.assignCSSVariables(r,n),i=$o.generateW3MVariables(e),o=$o.generateW3MOverrides(e),a=$o.generateScaledVariables(e),c=$o.generateBaseVariables(s),u={...s,...c,...i,...o,...a},l=$o.applyColorMixToVariables(e,u),d={...u,...l};return`:root {${Object.entries(d).map(([h,m])=>`${h}:${m.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(t){if(!t)return{};const e=y0(t),n={};return n["--w3m-font-family"]=e["font-family"],n["--w3m-accent"]=e.accent,n["--w3m-color-mix"]=e["color-mix"],n["--w3m-color-mix-strength"]=`${e["color-mix-strength"]}%`,n["--w3m-font-size-master"]=e["font-size-master"],n["--w3m-border-radius-master"]=e["border-radius-master"],n},generateW3MOverrides(t){if(!t)return{};const e=y0(t),n={};if(t["--apkt-accent"]||t["--w3m-accent"]){const r=e.accent;n["--apkt-tokens-core-iconAccentPrimary"]=r,n["--apkt-tokens-core-borderAccentPrimary"]=r,n["--apkt-tokens-core-textAccentPrimary"]=r,n["--apkt-tokens-core-backgroundAccentPrimary"]=r}return(t["--apkt-font-family"]||t["--w3m-font-family"])&&(n["--apkt-fontFamily-regular"]=e["font-family"]),e["z-index"]!==void 0&&(n["--apkt-tokens-core-zIndex"]=`${e["z-index"]}`),n},generateScaledVariables(t){if(!t)return{};const e=y0(t),n={};if(t["--apkt-font-size-master"]||t["--w3m-font-size-master"]){const r=parseFloat(e["font-size-master"].replace("px",""));n["--apkt-textSize-h1"]=`${Number(r)*5}px`,n["--apkt-textSize-h2"]=`${Number(r)*4.4}px`,n["--apkt-textSize-h3"]=`${Number(r)*3.8}px`,n["--apkt-textSize-h4"]=`${Number(r)*3.2}px`,n["--apkt-textSize-h5"]=`${Number(r)*2.6}px`,n["--apkt-textSize-h6"]=`${Number(r)*2}px`,n["--apkt-textSize-large"]=`${Number(r)*1.6}px`,n["--apkt-textSize-medium"]=`${Number(r)*1.4}px`,n["--apkt-textSize-small"]=`${Number(r)*1.2}px`}if(t["--apkt-border-radius-master"]||t["--w3m-border-radius-master"]){const r=parseFloat(e["border-radius-master"].replace("px",""));n["--apkt-borderRadius-1"]=`${Number(r)}px`,n["--apkt-borderRadius-2"]=`${Number(r)*2}px`,n["--apkt-borderRadius-3"]=`${Number(r)*3}px`,n["--apkt-borderRadius-4"]=`${Number(r)*4}px`,n["--apkt-borderRadius-5"]=`${Number(r)*5}px`,n["--apkt-borderRadius-6"]=`${Number(r)*6}px`,n["--apkt-borderRadius-8"]=`${Number(r)*8}px`,n["--apkt-borderRadius-16"]=`${Number(r)*16}px`,n["--apkt-borderRadius-20"]=`${Number(r)*20}px`,n["--apkt-borderRadius-32"]=`${Number(r)*32}px`,n["--apkt-borderRadius-64"]=`${Number(r)*64}px`,n["--apkt-borderRadius-128"]=`${Number(r)*128}px`}return n},generateColorMixCSS(t,e){if(!t?.["--w3m-color-mix"]||!t["--w3m-color-mix-strength"])return"";const n=t["--w3m-color-mix"],r=t["--w3m-color-mix-strength"];if(!r||r===0)return"";const s=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return s.length===0?"":` @supports (background: color-mix(in srgb, white 50%, black)) {
      :root {
        ${s.map(o=>{const a=e?.[o]||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?`${o}: color-mix(in srgb, ${n} ${r}%, ${a});`:`${o}: color-mix(in srgb, ${n} ${r}%, var(${o}-base, ${a}));`}).join("")}
      }
    }`},generateBaseVariables(t){const e={},n=t["--apkt-tokens-theme-backgroundPrimary"];n&&(e["--apkt-tokens-theme-backgroundPrimary-base"]=n);const r=t["--apkt-tokens-core-backgroundAccentPrimary"];return r&&(e["--apkt-tokens-core-backgroundAccentPrimary-base"]=r),e},applyColorMixToVariables(t,e){const n={};e?.["--apkt-tokens-theme-backgroundPrimary"]&&(n["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),e?.["--apkt-tokens-core-backgroundAccentPrimary"]&&(n["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)");const r=y0(t),s=r["color-mix"],i=r["color-mix-strength"];if(!i||i===0)return n;const o=Object.keys(e||{}).filter(a=>{const c=a.includes("-tokens-core-background")||a.includes("-tokens-core-text")||a.includes("-tokens-core-border")||a.includes("-tokens-core-foreground")||a.includes("-tokens-core-icon")||a.includes("-tokens-theme-background")||a.includes("-tokens-theme-text")||a.includes("-tokens-theme-border")||a.includes("-tokens-theme-foreground")||a.includes("-tokens-theme-icon")||a.includes("-tokens-theme-overlay"),u=a.includes("-borderRadius-")||a.includes("-spacing-")||a.includes("-textSize-")||a.includes("-fontFamily-")||a.includes("-fontWeight-")||a.includes("-typography-")||a.includes("-duration-")||a.includes("-ease-")||a.includes("-path-")||a.includes("-width-")||a.includes("-height-")||a.includes("-visual-size-")||a.includes("-modal-width")||a.includes("-cover");return c&&!u});return o.length===0||o.forEach(a=>{const c=e?.[a]||"";a.endsWith("-base")||(a==="--apkt-tokens-theme-backgroundPrimary"||a==="--apkt-tokens-core-backgroundAccentPrimary"?n[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base))`:c.includes("color-mix")||c.startsWith("#")||c.startsWith("rgb")?n[a]=`color-mix(in srgb, ${s} ${i}%, ${c})`:n[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base, ${c}))`)}),n}},{cssVariablesVarPrefix:Rde}=$o.createCSSVariables(ov);function Awe(t,...e){return Ya(t,...e.map(n=>gi(typeof n=="function"?n(Rde):n)))}let Kc,ou,no,vi,Kg;const Do={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function Gg(t,e="dark"){Kc&&document.head.removeChild(Kc),Kc=document.createElement("style"),Kc.textContent=$o.createRootStyles(e,t),document.head.appendChild(Kc)}function Swe(t,e="dark"){if(Kg=t,ou=document.createElement("style"),no=document.createElement("style"),vi=document.createElement("style"),ou.textContent=Ul(t).core.cssText,no.textContent=Ul(t).dark.cssText,vi.textContent=Ul(t).light.cssText,document.head.appendChild(ou),document.head.appendChild(no),document.head.appendChild(vi),Gg(t,e),av(e),!(t?.["--apkt-font-family"]||t?.["--w3m-font-family"]))for(const[r,s]of Object.entries(Do)){const i=document.createElement("link");i.rel="preload",i.href=s,i.as="font",i.type=r.includes("woff2")?"font/woff2":"font/woff",i.crossOrigin="anonymous",document.head.appendChild(i)}av(e)}function av(t="dark"){no&&vi&&Kc&&(t==="light"?(Gg(Kg,t),no.removeAttribute("media"),vi.media="enabled"):(Gg(Kg,t),vi.removeAttribute("media"),no.media="enabled"))}function Ode(t){if(Kg=t,ou&&no&&vi){ou.textContent=Ul(t).core.cssText,no.textContent=Ul(t).dark.cssText,vi.textContent=Ul(t).light.cssText;const e=t?.["--apkt-font-family"]||t?.["--w3m-font-family"];e&&(ou.textContent=ou.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),no.textContent=no.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),vi.textContent=vi.textContent?.replace("font-family: KHTeka",`font-family: ${e}`))}if(Kc){const e=vi?.media==="enabled"?"light":"dark";Gg(t,e)}}function Ul(t){const e=!!(t?.["--apkt-font-family"]||t?.["--w3m-font-family"]);return{core:Ya`
      ${e?Ya``:Ya`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${gi(Do["KHTeka-400-woff2"])}) format('woff2'),
                url(${gi(Do["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${gi(Do["KHTeka-300-woff2"])}) format('woff2'),
                url(${gi(Do["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${gi(Do["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${gi(Do["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${gi(Do["KHTeka-400-woff2"])}) format('woff2'),
                url(${gi(Do["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:Ya`
      :root {
      }
    `,light:Ya`
      :root {
      }
    `}}const xwe=Ya`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,Iwe=Ya`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,w0={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};class Pde extends u_{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new l_({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async writeSolanaTransaction(){return Promise.resolve({hash:""})}async getAccounts({namespace:e}){const r=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,i]=s.split(":");return i}).filter((s,i,o)=>o.indexOf(s)===i)||[];return Promise.resolve({accounts:r.map(s=>xe.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&yt.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};const r=V.getAccountData();if(r?.balanceLoading&&e.chainId===V.state.activeCaipNetwork?.id)return{balance:r?.balance||"0.00",symbol:r?.balanceSymbol||""};const i=(await V.fetchTokenBalance()).find(o=>o.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&o.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return V.state.activeCaipNetwork?.chainNamespace===X.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:tr.encode(new TextEncoder().encode(r)),pubkey:s}},V.state.activeCaipNetwork?.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},V.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===X.CHAIN.EVM)try{await r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:Xs(n.id)}]})}catch(s){if(s.code===w0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===w0.ERROR_INVALID_CHAIN_ID||s.code===w0.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===w0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:Xs(n.id),rpcUrls:[n?.rpcUrls.chainDefault?.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[n.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(r=>r.type==="WALLET_CONNECT")?.provider}}const kde=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication","headless"],b0={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?yt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?yt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>yt.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>yt.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>yt.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?yt.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t},headless:{apiFeatureName:"headless",localFeatureName:"headless",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>yt.DEFAULT_REMOTE_FEATURES.headless}},Bde={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=b0[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=b0[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return b0[t].processApi(e)},processFallbackFeature(t,e){return b0[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Me.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?yt.DEFAULT_REMOTE_FEATURES:yt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of kde){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),yt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;tn.open({debugMessage:Yt.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class Dde{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{if(n){const s=V.getCaipNetworks(n)?.find(a=>a.id===r);if(s)return s;const i=V.getNetworkData(n)?.caipNetwork;return i||V.getRequestedCaipNetworks(n).filter(a=>a.chainNamespace===n)?.[0]}return V.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>V.getCaipNetworks(n),this.getActiveChainNamespace=()=>V.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{V.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>V.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>V.state.activeChain===n||!n?V.state.activeCaipAddress:V.state.chains.get(n)?.accountState?.caipAddress,this.setClientId=n=>{rt.setClientId(n)},this.getProvider=n=>Lt.getProvider(n),this.getProviderType=n=>Lt.getProviderId(n),this.getPreferredAccountType=n=>Dr(n),this.setCaipAddress=(n,r,s=!1)=>{V.setAccountProp("caipAddress",n,r,s),V.setAccountProp("address",xe.getPlainAddress(n),r,s)},this.setBalance=(n,r,s)=>{V.setAccountProp("balance",n,s),V.setAccountProp("balanceSymbol",r,s)},this.setProfileName=(n,r)=>{V.setAccountProp("profileName",n,r)},this.setProfileImage=(n,r)=>{V.setAccountProp("profileImage",n,r)},this.setUser=(n,r)=>{V.setAccountProp("user",n,r)},this.resetAccount=n=>{V.resetAccount(n)},this.setCaipNetwork=n=>{V.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{V.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{V.setAccountProp("status",n,r),me.isConnected()?fe.setConnectionStatus("connected"):fe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>V.getAccountData(n)?.address,this.setConnectors=n=>{const r=[...me.state.allConnectors,...n];me.setConnectors(r)},this.setConnections=(n,r)=>{fe.setConnections(n,r),_e.setConnections(n,r)},this.fetchIdentity=n=>rt.fetchIdentity(n),this.getReownName=n=>Sf.getNamesForAddress(n),this.getConnectors=()=>me.getConnectors(),this.getConnectorImage=n=>vg.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?Cg.getConnectionsData(n).connections:(tn.open(X.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?Cg.getConnectionsData(n).recentConnections:(tn.open(X.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){tn.open(X.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await _e.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){tn.open(X.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}fe.deleteAddressFromConnection(n),_e.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=Lt.getProviderId(r),i=n?{...n,type:s}:void 0;V.setAccountProp("connectedWalletInfo",i,r)},this.getIsConnectedState=()=>!!V.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{const i=V.getAccountData(s)?.addressLabels||{};V.setAccountProp("addressLabels",{...i,[n]:r},s)},this.removeAddressLabel=(n,r)=>{const s=V.getAccountData(r)?.addressLabels||{};V.setAccountProp("addressLabels",{...s,[n]:void 0},r)},this.getAddress=n=>{const r=n||V.state.activeChain;return V.getAccountData(r)?.address},this.resetNetwork=n=>{V.resetNetwork(n)},this.addConnector=n=>{me.addConnector(n)},this.resetWcConnection=()=>{_e.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{V.setAccountProp("addressExplorerUrl",n,r)},this.setSmartAccountDeployed=(n,r)=>{V.setAccountProp("smartAccountDeployed",n,r)},this.setPreferredAccountType=(n,r)=>{V.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{oe.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e?.map(i=>i.namespace).filter(i=>!!i);if(r?.length)return[...new Set(r)];const s=n?.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),e.features?.headless&&!jr.hasInjectedConnectors()&&Me.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1,fetchRecommendedWallets:!0}),oe.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),!e.basic&&!e.manualWCControl&&(this.remoteFeatures=await Bde.fetchRemoteFeatures(e)),await Me.fetchUsage(),oe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&sE.setOnrampProviders(this.remoteFeatures.onramp),(oe.state.remoteFeatures?.email||Array.isArray(oe.state.remoteFeatures?.socials)&&oe.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins(),oe.state.features?.reownAuthentication||oe.state.remoteFeatures?.reownAuthentication){const{ReownAuthentication:n}=await kn(async()=>{const{ReownAuthentication:s}=await import("./features-DATbkWmk.js");return{ReownAuthentication:s}},[]),r=oe.state.siwx;r instanceof n||(r&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),oe.setSIWX(new n))}}async openSend(e){const n=e.namespace||V.state.activeChain,r=this.getCaipAddress(n),s=this.getCaipNetwork(n)?.id;if(!r)throw new Error("openSend: caipAddress not found");if(s?.toString()!==e.chainId.toString()){const i=V.getCaipNetworkById(e.chainId,n);if(!i)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);await this.switchNetwork(i,{throwOnFailure:!0})}try{const i=ek.getTokenSymbolByAddress(e.assetAddress);i&&await Me.fetchTokenImages([i])}catch{}return await bt.open({view:"WalletSend",data:{send:e}}),new Promise((i,o)=>{const a=ht.subscribeKey("hash",l=>{l&&(u(),i({hash:l}))}),c=bt.subscribe(l=>{l.open||(u(),o(new Error("Modal closed")))}),u=this.createCleanupHandler([a,c])})}toModalOptions(){function e(r){return r?.view==="Swap"}function n(r){return r?.view==="WalletSend"}return{isSwap:e,isSend:n}}async checkAllowedOrigins(){try{const e=await Me.fetchAllowedOrigins();if(!xe.isClient())return;const n=window.location.origin;ei.isOriginAllowed(n,e,X.DEFAULT_ALLOWED_ANCESTORS)||tn.open(Yt.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":tn.open(Yt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;tn.open({displayMessage:Yt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:Yt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}}}}createCleanupHandler(e){return()=>{e.forEach(n=>{try{n()}catch{}})}}sendInitializeEvent(e){const{...n}=e;delete n.adapters,delete n.universalProvider,ot.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(r=>r.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initAdapterController(){n8.initialize(this.chainAdapters)}initializeThemeController(e){e.themeMode&&os.setThemeMode(e.themeMode),e.themeVariables&&os.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");V.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});const n=this.getDefaultNetwork();n&&V.setActiveCaipNetwork(n)}initializeConnectionController(e){_e.initialize(e.adapters??[]),_e.setWcBasic(e.basic??!1)}initializeConnectorController(){me.initialize(this.chainNamespaces)}initializeProjectSettings(e){oe.setProjectId(e.projectId),oe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){oe.setDebug(e.debug!==!1),oe.setEnableWalletGuide(e.enableWalletGuide!==!1),oe.setEnableWallets(e.enableWallets!==!1),oe.setEIP6963Enabled(e.enableEIP6963!==!1),oe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),oe.setEnableReconnect(e.enableReconnect!==!1),oe.setEnableMobileFullScreen(e.enableMobileFullScreen===!0),oe.setCoinbasePreference(e.coinbasePreference),oe.setEnableAuthLogger(e.enableAuthLogger!==!1),oe.setCustomRpcUrls(e.customRpcUrls),oe.setEnableEmbedded(e.enableEmbedded),oe.setAllWallets(e.allWallets),oe.setIncludeWalletIds(e.includeWalletIds),oe.setExcludeWalletIds(e.excludeWalletIds),oe.setFeaturedWalletIds(e.featuredWalletIds),oe.setTokens(e.tokens),oe.setTermsConditionsUrl(e.termsConditionsUrl),oe.setPrivacyPolicyUrl(e.privacyPolicyUrl),oe.setCustomWallets(e.customWallets),oe.setFeatures(e.features),oe.setAllowUnsupportedChain(e.allowUnsupportedChain),oe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),oe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),oe.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),oe.setMetadata(e.metadata),oe.setDisableAppend(e.disableAppend),oe.setEnableEmbedded(e.enableEmbedded),oe.setSIWX(e.siwx),this.features=oe.state.features??{},!e.projectId){tn.open(Yt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===X.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");oe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return xe.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Qi.getUnsupportedNetwork(`${n}:${e}`);V.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Qi.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Qi.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Qi.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>s.id===e.defaultNetwork?.id);return n?Qi.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectConnector(e,n){try{this.setLoading(!0,e);let r={connections:[]};const s=this.getAdapter(e);return(V.state.chains.get(e)?.accountState?.caipAddress||!oe.state.enableReconnect)&&s?.disconnect&&(r=await s.disconnect({id:n})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=V.state.activeChain,n=this.getAdapter(e),r=this.getCaipNetwork(e)?.id,s=_e.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId(a?.clientId||null),fe.setConnectedNamespaces([...V.state.chains.keys()]),await this.syncWalletConnectAccount(),await fs.initializeIfEnabled()},connectExternal:async e=>{const n=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,n),n?{address:n.address}:void 0},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{const i=V.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:n,type:r,provider:s,chainId:this.getCaipNetwork()?.id}),fe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnectConnector:async e=>{await this.disconnectConnector(e.namespace,e.id)},disconnect:async e=>{const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||V.state.activeChain,o=me.getConnectorId(i),a=n===X.CONNECTOR_ID.AUTH||o===X.CONNECTOR_ID.AUTH,c=n===X.CONNECTOR_ID.WALLET_CONNECT||o===X.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(V.state.chains.keys());let l=r?[r]:u;(c||a)&&(l=u);const d=l.map(async m=>{const y=me.getConnectorId(m),E=n||y,S=await this.disconnectConnector(m,E);S&&(a&&fe.deleteConnectedSocialProvider(),S.connections.forEach(R=>{fe.addDisconnectedConnectorId(R.connectorId,m)})),s&&this.onDisconnectNamespace({chainNamespace:m,closeModal:!1})}),f=await Promise.allSettled(d);ht.resetSend(),_e.resetWcConnection(),fs.getSIWX()?.signOutOnDisconnect&&await fs.clearSessions(),me.setFilterByNamespace(void 0),_e.syncStorageConnections();const h=f.filter(m=>m.status==="rejected");if(h.length>0)throw new Error(h.map(m=>m.reason.message).join(", "));ot.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(n=>!!window.ethereum?.[String(n)]):!!window.ethereum,signMessage:async e=>{const n=V.state.activeChain,r=this.getAdapter(V.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=this.getAddress(n);if(!s)throw new Error("signMessage: address not found");return(await r?.signMessage({message:e,address:s,provider:Lt.getProvider(n)}))?.signature||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(yt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=Lt.getProvider(n);return(await r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===X.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=Lt.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await r?.estimateGas({...e,provider:s,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=V.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");const n=this.getAddress(e);if(!n)throw new Error("getEnsAvatar: address not found");return await this.syncIdentity({address:n,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),V.getAccountData()?.profileImage||!1},getEnsAddress:async e=>await ei.resolveReownName(e),writeContract:async e=>{const n=V.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=Lt.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await r?.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}))?.hash},writeSolanaTransaction:async e=>{const n=V.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=Lt.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await r?.writeSolanaTransaction({...e,caipNetwork:s,provider:o,caipAddress:i}))?.hash},parseUnits:(e,n)=>{const r=this.getAdapter(V.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return r?.parseUnits({value:e,decimals:n})??0n},formatUnits:(e,n)=>{const r=this.getAdapter(V.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return r?.formatUnits({value:e,decimals:n})??"0"},getCapabilities:async e=>{const n=this.getAdapter(V.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await n?.getCapabilities(e)},grantPermissions:async e=>{const n=this.getAdapter(V.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await n?.grantPermissions(e)},revokePermissions:async e=>{const n=this.getAdapter(V.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n?.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(V.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await n?.walletGetAssets(e)??{}},updateBalance:e=>{const n=this.getAddress(e),r=this.getCaipNetwork(e);!r||!n||this.updateNativeBalance(n,r?.id,e)}},_e.setClient(this.connectionControllerClient)}async onConnectExternal(e){const n=V.state.activeChain,r=e.chain||n,s=this.getAdapter(r);let i=!0;if(e.type===qr.CONNECTOR_TYPE_AUTH&&X.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(d=>me.getConnectorId(d)===X.CONNECTOR_ID.AUTH)&&e.chain!==n&&(i=!1),e.chain&&e.chain!==n&&!e.caipNetwork){const u=this.getCaipNetworks().find(l=>l.chainNamespace===e.chain);u&&i&&this.setCaipNetwork(u)}if(!r)throw new Error("connectExternal: namespace not found");if(!s)throw new Error("connectExternal: adapter not found");const o=this.getCaipNetwork(r),a=e.caipNetwork||o,c=await s.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:e.caipNetwork?.id||o?.id,rpcUrl:e.caipNetwork?.rpcUrls?.default?.http?.[0]||o?.rpcUrls?.default?.http?.[0]});if(c)return fe.addConnectedNamespace(r),this.syncProvider({...c,chainNamespace:r}),this.setStatus("connected",r),this.syncConnectedWalletInfo(r),fe.removeDisconnectedConnectorId(e.id,r),{address:c.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,n){const r=e.type===qr.CONNECTOR_TYPE_AUTH,s=Zs.getOtherAuthNamespaces(n?.connectedCaipNetwork?.chainNamespace),i=V.state.activeCaipNetwork,o=this.getAdapter(i?.chainNamespace);r&&(await Promise.all(s.map(async a=>{try{const c=Lt.getProvider(a),u=this.getCaipNetwork(a);await this.getAdapter(a)?.connect({...e,provider:c,socialUri:void 0,chainId:u?.id,rpcUrl:u?.rpcUrls?.default?.http?.[0]})&&(fe.addConnectedNamespace(a),fe.removeDisconnectedConnectorId(e.id,a),this.setStatus("connected",a),this.syncConnectedWalletInfo(a))}catch(c){tn.warn(Yt.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,Yt.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(a,c instanceof Error?c.message:void 0),Yt.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),i&&await o?.switchNetwork({caipNetwork:i}))}getApprovedCaipNetworksData(){if(Lt.getProviderId(V.state.activeChain)===qr.CONNECTOR_TYPE_WALLET_CONNECT){const n=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(n)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Lt.getProviderId(n);if(e.chainNamespace===V.state.activeChain)await this.getAdapter(n)?.switchNetwork({caipNetwork:e});else if(this.setCaipNetwork(e),s===qr.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const i=this.getAddressByChainNamespace(n);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=$n.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{const s=e?.find(i=>i.namespace===r);return s?(s.construct({namespace:r,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:i})=>i===r)}),n[r]=s):n[r]=new Pde({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e);const n=this.getAdapter(e);if(!n)throw new Error("adapter not found");await n.syncConnectors(),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)})),this.initAdapterController()}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=fe.getConnectionStatus();oe.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(fe.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id.toString()===i.toString()||u.caipNetworkId.toString()===i.toString()),a=V.state.activeChain===e,c=V.state.chains.get(e)?.accountState?.address;if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(_e.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=this.getAddress(e),i=V.state.activeCaipNetwork;!s||!i?.id||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{this.handlePreviousConnectorConnection(o);const a=V.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o?.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const c=V.getNetworkData(e)?.caipNetwork?.id,u=i||c;a&&u?this.syncAccount({address:s,chainId:u,chainNamespace:e}):!a&&u?(this.syncAccountInfo(s,u,e),this.syncBalance({address:s,chainId:u,chainNamespace:e})):this.syncAccountInfo(s,i,e),fe.addConnectedNamespace(e)})}async handlePreviousConnectorConnection(e){const n=e?.chain,r=e?.id,s=me.getConnectorId(n),i=oe.state.remoteFeatures?.multiWallet,a=n&&r&&s&&s!==r&&!i;try{a&&await _e.disconnect({id:s,namespace:n})}catch(c){console.warn("Error disconnecting previous connector",c)}}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>_e.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();this.getCaipAddress()||fe.deleteRecentWallet();const n=fe.getRecentWallet();ot.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:xe.isMobile()?"mobile":"qrcode",name:n?.name||"Unknown",reconnect:!0,view:Xe.state.view,walletRank:n?.order}})}async syncNamespaceConnection(e){try{e===X.CHAIN.EVM&&xe.isSafeApp()&&me.setConnectorId(X.CONNECTOR_ID.SAFE,e);const n=me.getConnectorId(e);switch(this.setStatus("connecting",e),n){case X.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case X.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};V.resetAccount(n),V.resetNetwork(n),fe.removeConnectedNamespace(n);const s=Array.from(V.state.chains.keys());(n?[n]:s).forEach(o=>fe.addDisconnectedConnectorId(me.getConnectorId(o)||"",o)),me.removeConnectorId(n),Lt.resetChain(n),this.setUser(null,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(null,n),r!==!1&&bt.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getAdapter(e),r=this.getCaipAddress(e),s=this.getCaipNetwork(e);return n?.syncConnections({connectToFirstConnector:!r,caipNetwork:s})}))}async syncAdapterConnection(e){const n=this.getAdapter(e),r=this.getCaipNetwork(e),s=me.getConnectorId(e),o=me.getConnectors(e).find(a=>a.id===s);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!r?.id)throw new Error("CaipNetwork not found");const a=await n?.syncConnection({namespace:e,id:o.id,chainId:r.id,rpcUrl:r?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e),ot.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:a.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0,view:Xe.state.view,walletRank:o?.explorerWallet?.order}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),n=this.chainNamespaces.map(async r=>{const s=this.getAdapter(r);if(!s)return;const i=this.universalProvider?.session?.namespaces?.[r]?.accounts||[],o=V.state.activeCaipNetwork?.id,a=i.find(u=>{const{chainId:l}=$n.parseCaipAddress(u);return l===o?.toString()})||i[0];if(a){const u=$n.validateCaipAddress(a),{chainId:l,address:d}=$n.parseCaipAddress(u);if(Lt.setProviderId(r,qr.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&V.state.activeCaipNetwork&&s.namespace!==X.CHAIN.EVM){const f=s.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:V.state.activeCaipNetwork});Lt.setProvider(r,f)}else Lt.setProvider(r,this.universalProvider);me.setConnectorId(X.CONNECTOR_ID.WALLET_CONNECT,r),fe.addConnectedNamespace(r),await this.syncAccount({address:d,chainId:l,chainNamespace:r})}else e.includes(r)&&this.setStatus("disconnected",r);const c=this.getApprovedCaipNetworksData();this.syncConnectedWalletInfo(r),V.setApprovedCaipNetworksData(r,{approvedCaipNetworkIds:c.approvedCaipNetworkIds,supportsAllNetworks:c.supportsAllNetworks})});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Lt.setProviderId(s,e),Lt.setProvider(s,n),me.setConnectorId(r,s)}async syncAccount(e){const n=e.chainNamespace===V.state.activeChain,r=V.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=fe.getActiveNetworkProps(),c=r?.id||a,u=V.state.activeCaipNetwork?.name===X.UNSUPPORTED_NETWORK_NAME,l=V.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let d=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),f=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!l&&!d&&!f){const y=this.getApprovedCaipNetworkIds()||[],E=y.find(R=>$n.parseCaipNetworkId(R)?.chainId===c.toString()),S=y.find(R=>$n.parseCaipNetworkId(R)?.chainNamespace===o);d=this.getCaipNetworks().find(R=>R.caipNetworkId===E),f=this.getCaipNetworks().find(R=>R.caipNetworkId===S||"deprecatedCaipNetworkId"in R&&R.deprecatedCaipNetworkId===S)}const h=d||f;h?.chainNamespace===V.state.activeChain?oe.state.enableNetworkSwitch&&!oe.state.allowUnsupportedChain&&V.state.activeCaipNetwork?.name===X.UNSUPPORTED_NETWORK_NAME?V.showUnsupportedChainUI():this.setCaipNetwork(h):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o);const m=this.getAddress(o);Zs.isLowerCaseMatch(s,m)||this.syncAccountInfo(s,h?.id,o),n?await this.syncBalance({address:s,chainId:h?.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r?.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||s?.split(":")[1];if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r,!0),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){const n=me.getConnectorId(e),r=Lt.getProviderId(e);if(r===qr.CONNECTOR_TYPE_ANNOUNCED||r===qr.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>{const a=o.id===n,c=o.info?.rdns===n,u=o.connectors?.some(l=>l.id===n||l.info?.rdns===n);return a||c||!!u});if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(r===qr.CONNECTOR_TYPE_WALLET_CONNECT){const s=Lt.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(n&&(n===X.CONNECTOR_ID.COINBASE_SDK||n===X.CONNECTOR_ID.COINBASE)){const s=this.getConnectors().find(c=>c.id===n),i=s?.name||"Coinbase Wallet",o=s?.imageUrl||this.getConnectorImage(s),a=s?.info;this.setConnectedWalletInfo({...a,name:i,icon:o},e)}}async syncBalance(e){!fh.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>r.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=V.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){const e=Qle.createLogger((s,...i)=>{s&&this.handleAlertError(s),console.error(...i)}),n={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};oe.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await Cle.init(n);const r=this.universalProvider.disconnect.bind(this.universalProvider);this.universalProvider.disconnect=async()=>{try{return await r()}catch(s){if(s instanceof Error&&s.message.includes("Missing or invalid. Record was recently deleted"))return;throw s}},oe.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{ei.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{_e.setUri(n)},onConnect:n=>{const{address:r}=xe.getAccount(n[0]);for(const s of this.chainNamespaces)fe.removeDisconnectedConnectorId(X.CONNECTOR_ID.WALLET_CONNECT,s);_e.finalizeWcConnection(r)},onDisconnect:()=>{V.state.noAdapters&&this.resetAccount(e),_e.resetWcConnection()},onChainChanged:n=>{const r=V.state.activeChain,s=r&&me.state.activeConnectorIds[r]===X.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(V.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}o?.id.toString()!==i?.id.toString()&&o?.chainNamespace===i?.chainNamespace&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=V.state.activeChain,s=r&&me.state.activeConnectorIds[r]===X.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(V.state.noAdapters||s)){const i=n?.[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&xe.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){ot.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}getDisabledCaipNetworks(){const e=V.getAllApprovedCaipNetworkIds(),n=V.getAllRequestedCaipNetworks();return xe.sortRequestedNetworks(e,n).filter(s=>V.isCaipNetworkDisabled(s))}handleAlertError(e){const n=Object.entries(Yt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Yt.ALERT_ERRORS[o];a&&(tn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:s})=>s===n)}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){await this.injectModalUi(),e?.uri&&_e.setUri(e.uri);const{isSwap:n,isSend:r}=this.toModalOptions();return n(e)?bt.open({...e,data:{swap:e.arguments}}):r(e)&&e.arguments?this.openSend(e.arguments):bt.open(e)}async close(){await this.injectModalUi(),bt.close()}setLoading(e,n){bt.setLoading(e,n)}async disconnect(e){await _e.disconnect({namespace:e})}getSIWX(){return oe.state.siwx}getError(){return""}getChainId(){return V.state.activeCaipNetwork?.id}async switchNetwork(e,{throwOnFailure:n=!1}={}){const r=this.getCaipNetworks().find(s=>s.id===e.id);if(!r){tn.open(Yt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await V.switchActiveNetwork(r,{throwOnFailure:n})}getWalletProvider(){return V.state.activeChain?Lt.state.providers[V.state.activeChain]:null}getWalletProviderType(){return Lt.getProviderId(V.state.activeChain)}subscribeProviders(e){return Lt.subscribeProviders(e)}getThemeMode(){return os.state.themeMode}getThemeVariables(){return os.state.themeVariables}setThemeMode(e){os.setThemeMode(e),av(os.state.themeMode)}setTermsConditionsUrl(e){oe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){oe.setPrivacyPolicyUrl(e)}setThemeVariables(e){os.setThemeVariables(e),Ode(os.state.themeVariables)}subscribeTheme(e){return os.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?_e.subscribe(e):(tn.open(X.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?V.state.chains.get(e)?.accountState?.connectedWalletInfo:V.getAccountData()?.connectedWalletInfo}getAccount(e){const n=e||V.state.activeChain,r=me.getAuthConnector(n),s=V.getAccountData(n),i=fe.getConnectedConnectorId(V.state.activeChain),o=_e.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:u,type:l,publicKey:d})=>xe.createAccount(n,u,l||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:xe.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===X.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:fe.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Dr(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?V.subscribeChainProp("accountState",r,n):V.subscribe(r),me.subscribe(r)}subscribeNetwork(e){return V.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n?.id,caipNetworkId:n?.caipNetworkId})})}subscribeWalletInfo(e,n){return n?V.subscribeChainProp("accountState",r=>e(r?.connectedWalletInfo),n):V.subscribeChainProp("accountState",r=>e(r?.connectedWalletInfo))}subscribeShouldUpdateToAddress(e){V.subscribeChainProp("accountState",n=>e(n?.shouldUpdateToAddress))}subscribeCaipNetworkChange(e){V.subscribeKey("activeCaipNetwork",e)}getState(){return Ds.state}getRemoteFeatures(){return oe.state.remoteFeatures}subscribeState(e){return Ds.subscribe(e)}subscribeRemoteFeatures(e){return oe.subscribeKey("remoteFeatures",e)}showErrorMessage(e){eo.showError(e)}showSuccessMessage(e){eo.showSuccess(e)}getEvent(){return{...ot.state}}subscribeEvents(e){return ot.subscribe(e)}replace(e){Xe.replace(e)}redirect(e){Xe.push(e)}popTransactionStack(e){Xe.popTransactionStack(e)}isOpen(){return bt.state.open}isTransactionStackEmpty(){return Xe.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){oe.setFeatures(e)}updateRemoteFeatures(e){oe.setRemoteFeatures(e)}updateOptions(e){const r={...oe.state||{},...e};oe.setOptions(r)}setConnectMethodsOrder(e){oe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){oe.setWalletFeaturesOrder(e)}setCollapseWallets(e){oe.setCollapseWallets(e)}setSocialsOrder(e){oe.setSocialsOrder(e)}getConnectMethodsOrder(){return ec.getConnectOrderMethod(oe.state.features,me.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||V.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&V.removeNetwork(e,n)}}let C6=!1;class Ude extends Dde{async onAuthProviderConnected(e){const n=Zs.userChainIdToChainNamespace(e?.chainId);if(e.message&&e.signature&&e.siwxMessage&&await fs.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature),!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===X.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=oe.state.defaultAccountTypes[n],i=Dr(n),o=e.preferredAccountType||i||s;this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:u,...l}=e,d=V.getAccountData(n);this.setUser({...d?.user||{},...l},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),await Promise.all([this.syncAuthConnectorTheme(this.authProvider),this.syncAccount({address:e.address,chainId:e.chainId,chainNamespace:n})]),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{ks.checkIfRequestExists(n)?ks.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(hn.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(hn.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=ks.checkIfRequestIsSafe(r),i=this.getAddress(),o=V.state.activeCaipNetwork;s||(i&&o?.id&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=V.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");me.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setCaipAddress(null,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=V.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=os.getSnapshot();await e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:hh(n.themeVariables,n.themeMode)})}async syncAuthConnector(e,n){const r=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===V.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername(),c=V.getAccountData(n)?.user||{};this.setUser({...c,username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:u}=await e.isConnected();if(n&&r&&s)if(u&&this.connectionControllerClient?.connectExternal){await e.init(),await this.syncAuthConnectorTheme(e),await this.connectionControllerClient?.connectExternal({id:X.CONNECTOR_ID.AUTH,info:{name:X.CONNECTOR_ID.AUTH},type:qr.CONNECTOR_TYPE_AUTH,provider:e,chainId:V.getNetworkData(n)?.caipNetwork?.id,chain:n}),this.setStatus("connected",n);const l=fe.getConnectedSocialProvider();l?ot.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:this.getAddress(),properties:{provider:l,reconnect:!0}}):ot.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:this.getAddress(),properties:{method:"email",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0,view:Xe.state.view,walletRank:void 0}})}else me.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),fe.removeConnectedNamespace(n));this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){try{if(!xe.isTelegram())return;const n=fe.getTelegramSocialProvider();if(!n||!xe.isClient())return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;n&&V.setAccountProp("socialProvider",n,e),await this.authProvider?.init();const i=me.getAuthConnector();n&&i&&(this.setLoading(!0,e),await _e.connectExternal({id:i.id,type:i.type,socialUri:s},i.chain),fe.setConnectedSocialProvider(n),fe.removeTelegramSocialProvider(),ot.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){if(!X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Zs.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&i&&(this.authProvider=fu.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:Yt.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?tn.open(Yt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?tn.open(Yt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&tn.open(Yt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:u=>Ko(u),getCaipNetworks:u=>V.getCaipNetworks(u)}),Ds.subscribeOpen(u=>{!u&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const c=e===V.state.activeChain&&oe.state.enableReconnect;oe.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Me.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const n=V.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&V.getAccountData(r)?.caipAddress)await this.getAdapter(r)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e);else{const a=Lt.getProviderId(n)===qr.CONNECTOR_TYPE_AUTH,c=Lt.getProviderId(r),u=c===qr.CONNECTOR_TYPE_AUTH,l=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((a&&c===void 0||u)&&l)try{V.state.activeChain=e.chainNamespace,s?await this.getAdapter(r)?.switchNetwork({caipNetwork:e}):await this.connectionControllerClient?.connectExternal?.({id:X.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:qr.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(r)?.switchNetwork({caipNetwork:e})}else c===qr.CONNECTOR_TYPE_WALLET_CONNECT?(V.state.noAdapters||await this.getAdapter(r)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(n=>{this.createAuthProviderForAdapter(n)}),await this.injectModalUi(),Ds.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){const s=`${r}:${n}`;if(this.caipNetworks?.find(a=>a.caipNetworkId===s)?.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}const o=me.getConnectorId(r)===X.CONNECTOR_ID.AUTH;try{const{name:a,avatar:c}=await this.fetchIdentity({address:e});!a&&o?await this.syncReownName(e,r):(this.setProfileName(a,r),this.setProfileImage(c,r))}catch{n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Lt.getProviderId(e);if(n===qr.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=fe.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(xe.isClient()&&!C6)try{const e={...yt.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),xe.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!oe.state.disableAppend&&!oe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}C6=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!xe.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(kn(()=>import("./embedded-wallet-DJUUY3fv.js"),__vite__mapDeps([6,7,8,9,10,11,12,13,14,15,16,17,18,19]))),n.email&&r.push(kn(()=>import("./email-Dt0aT1Eu.js"),__vite__mapDeps([20,7,21,18,11,17,9,10,16,22,14]))),n.socials&&r.push(kn(()=>import("./socials-OZEIDFSs.js"),__vite__mapDeps([23,7,9,24,10,25,17,13,16,11,26,8,27]))),n.swaps&&n.swaps.length>0&&r.push(kn(()=>import("./swaps-CLNxzuWf.js"),__vite__mapDeps([28,7,16,11,17,9,29,30,27,31,8,32,14,10]))),e.send&&r.push(kn(()=>import("./send-DkkSrWsl.js"),__vite__mapDeps([33,7,16,11,17,9,34,10,35,18,31,8,27,30,14,36,37]))),e.receive&&r.push(kn(()=>import("./receive-KCI3LA5R.js"),__vite__mapDeps([38,7,9,8,26]))),n.onramp&&n.onramp.length>0&&r.push(kn(()=>import("./onramp-CoBkscPl.js"),__vite__mapDeps([39,7,9,40,11,24,10,8,41,42,18,16,17,14]))),n.payWithExchange&&r.push(kn(()=>import("./pay-with-exchange-DlPSyTvy.js"),__vite__mapDeps([43,7,9,8,15,40,11,27,16,35,10,18,44,17,14,36,34]))),n.activity&&r.push(kn(()=>import("./transactions-Dyi52T6C.js"),__vite__mapDeps([45,7,46,17,9,18,8,27]))),(e.pay||n.payments)&&r.push(kn(()=>import("./index-k6beBoOo.js"),__vite__mapDeps([47,48,7,9,16,11,15,8,40,49,17,34,27,32]))),n.emailCapture&&r.push(kn(()=>import("./data-capture-Cpptzb6x.js"),__vite__mapDeps([50,7,21,18,11,51]))),await Promise.all([...r,kn(()=>import("./index-CJ8nv7yA.js"),__vite__mapDeps([52,7,9,8,11,37,17,53,42,18,12,13,49,15,40,16,44,46,27,36,29,32,34,10,14,22,24,25,26,19,41])),kn(()=>import("./w3m-modal-mcIlkXMg.js"),__vite__mapDeps([54,7,9,48,16,11,15,8,40,49,17,34,27,32,12,13,29,53,42,18,30]))])}}const Mde="1.8.16";let Lb;function $de(t){return Lb||(Lb=new Ude({...t,sdkVersion:xe.generateSdkVersion(t.adapters??[],"html",Mde)})),Lb}const Lde={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},Fde={block:H9({format(t){return{transactions:t.transactions?.map(n=>{if(typeof n=="string")return n;const r=Qh(n);return r.typeHex==="0x7e"&&(r.isSystemTx=n.isSystemTx,r.mint=n.mint?wi(n.mint):void 0,r.sourceHash=n.sourceHash,r.type="deposit"),r}),stateRoot:t.stateRoot}}}),transaction:q9({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?wi(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:DL({format(t){return{l1GasPrice:t.l1GasPrice?wi(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?wi(t.l1GasUsed):null,l1Fee:t.l1Fee?wi(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function jde(t,e){return Hde(t)?zde(t):_L(t,e)}const qde={transaction:jde};function zde(t){Wde(t);const{sourceHash:e,data:n,from:r,gas:s,isSystemTx:i,mint:o,to:a,value:c}=t,u=[e,r,a??"0x",o?Xs(o):"0x",c?Xs(c):"0x",s?Xs(s):"0x",i?"0x1":"0x",n??"0x"];return fa(["0x7e",pc(u)])}function Hde(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function Wde(t){const{from:e,to:n}=t;if(e&&!mr(e))throw new bs({address:e});if(n&&!mr(n))throw new bs({address:n})}const vc={blockTime:2e3,contracts:Lde,formatters:Fde,serializers:qde},_6=Mr({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:250,rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),A6=Mr({id:421614,name:"Arbitrum Sepolia",blockTime:250,nativeCurrency:{name:"Arbitrum Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia-rollup.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://sepolia.arbiscan.io",apiUrl:"https://api-sepolia.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:81930}},testnet:!0}),S6=Mr({id:43114,name:"Avalanche",blockTime:1700,nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://snowtrace.io",apiUrl:"https://api.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}}),x6=Mr({id:43113,name:"Avalanche Fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://testnet.snowtrace.io",apiUrl:"https://api-testnet.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7096959}},testnet:!0}),zd=1,cv=Mr({...vc,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...vc.contracts,disputeGameFactory:{[zd]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[zd]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[zd]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[zd]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:zd}),Nwe=Mr({...cv,experimental_preconfirmationTime:200,rpcUrls:{default:{http:["https://mainnet-preconf.base.org"]}}}),Hd=11155111,uv=Mr({...vc,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...vc.contracts,disputeGameFactory:{[Hd]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[Hd]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[Hd]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[Hd]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:Hd}),Twe=Mr({...uv,experimental_preconfirmationTime:200,rpcUrls:{default:{http:["https://sepolia-preconf.base.org"]}}}),I6=Mr({id:56,name:"BNB Smart Chain",blockTime:750,nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),N6=Mr({id:97,name:"BNB Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0}),T6=Mr({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),Wd=1,R6=Mr({...vc,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...vc.contracts,disputeGameFactory:{[Wd]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[Wd]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[Wd]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[Wd]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:Wd}),Vd=11155111,O6=Mr({...vc,id:11155420,name:"OP Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.optimism.io"]}},blockExplorers:{default:{name:"Blockscout",url:"https://optimism-sepolia.blockscout.com",apiUrl:"https://optimism-sepolia.blockscout.com/api"}},contracts:{...vc.contracts,disputeGameFactory:{[Vd]:{address:"0x05F9613aDB30026FFd634f38e5C4dFd30a197Fa1"}},l2OutputOracle:{[Vd]:{address:"0x90E9c4f8a994a250F6aEfd61CAFb4F2e895D458F"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1620204},portal:{[Vd]:{address:"0x16Fc5058F25648194471939df75CF27A2fdC48BC"}},l1StandardBridge:{[Vd]:{address:"0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1"}}},testnet:!0,sourceId:Vd}),P6=Mr({id:137,name:"Polygon",blockTime:2e3,nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.etherscan.io/v2/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),k6=Mr({id:80002,name:"Polygon Amoy",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://amoy.polygonscan.com",apiUrl:"https://api.etherscan.io/v2/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3127388}},testnet:!0}),B6=Mr({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://11155111.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0});function Vde(t){let e=[],n,r;function s(a){const c=V.getCaipNetworks(X.CHAIN.EVM);let u=Number(fh.parseEvmChainId(a));if(!c.some(l=>String(l.id)===String(a))){const l=V.getActiveCaipNetwork(X.CHAIN.EVM)?.id||c[0]?.id;l&&Number.isInteger(Number(l))&&(u=Number(l))}if(!u)throw new Error("ChainId not found in networks");return u}function i(){return n||(n=fu.getInstance({projectId:t.options.projectId,chainId:Ko()?.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:a=>{a==="iframe_load_failed"?tn.open(Yt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):a==="iframe_request_timeout"?tn.open(Yt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):a==="unverified_domain"&&tn.open(Yt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Yt.EmbeddedWalletAbortController,getActiveCaipNetwork:a=>Ko(a),getCaipNetworks:a=>V.getCaipNetworks(a)})),n}async function o(a={}){const c=i();let u=a.chainId;if(a.isReconnecting){const y=fh.parseEvmChainId(c.getLastUsedChainId()||""),E=t.chains?.[0].id;if(u=y||E,!u)throw new Error("ChainId not found in provider")}const l=Dr("eip155"),{address:d,chainId:f,accounts:h}=await fs.authConnectorAuthenticate({authConnector:c,chainId:u,preferredAccountType:l,socialUri:a.socialUri,chainNamespace:X.CHAIN.EVM});e=h?.map(y=>y.address)||[d];const m=s(f);return{accounts:e,account:d,chainId:m,chain:{id:m,unsupported:!1}}}return a=>({id:X.CONNECTOR_ID.AUTH,name:X.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:X.CHAIN.EVM,async connect(c={}){if(r){const l=await r;return{accounts:c.withCapabilities?l.accounts.map(d=>({address:d,capabilities:{}})):l.accounts,chainId:l.chainId}}r||(r=new Promise(l=>{l(o(c))}));const u=await r;return r=void 0,{accounts:c.withCapabilities?u.accounts.map(l=>({address:l,capabilities:{}})):u.accounts,chainId:u.chainId}},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e?.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=fu.getInstance({projectId:t.options.projectId,chainId:Ko()?.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Yt.EmbeddedWalletAbortController,onTimeout:c=>{c==="iframe_load_failed"?tn.open(Yt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?tn.open(Yt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&tn.open(Yt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:c=>Ko(c),getCaipNetworks:c=>V.getCaipNetworks(c)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:u}=await c.getChainId();return s(u)},async isAuthorized(){const u=V.state.activeChain===X.CHAIN.EVM;if(X.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(f=>me.getConnectorId(f)===X.CONNECTOR_ID.AUTH)&&!u)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){try{const u=a.chains.find(h=>h.id===c);if(!u)throw new lo(new Error("chain not found on connector."));const l=await this.getProvider(),d=Dr("eip155"),f=await l.connect({chainId:c,preferredAccountType:d});return e=f?.accounts?.map(h=>h.address)||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new lo(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Gc)})},onChainChanged(c){const u=Number(c);a.emitter.emit("change",{chainId:u})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}y_.type="walletConnect";function y_(t){const e=t.isNewChainsStale??!0;let n,r,s,i,o,a,c;return u=>({id:"walletConnect",name:"WalletConnect",type:y_.type,provider:t.universalProvider,async setup(){const l=await this.getProvider().catch(()=>null);l&&(i||(i=this.onConnect.bind(this),l.on("connect",i)),a||(a=this.onSessionDelete.bind(this),l.on("session_delete",a)))},async connect({...l}={}){try{const d=V.getCaipNetworks(),f=await this.getProvider();if(!f)throw new Fa;o||(o=this.onDisplayUri,f.on("display_uri",o));const h=await this.isChainsStale();f.session&&h&&await f.disconnect();const m=oe.state.universalProviderConfigOverride;if(!f.session||h){const N=ei.createNamespaces(d,m);await f.connect({optionalNamespaces:N,..."pairingTopic"in l?{pairingTopic:l.pairingTopic}:{}}),this.setRequestedChainsIds(d.map(U=>Number(U.id)))}const y=await this.getAccounts(),E=await this.getChainId(),S=f.session?.namespaces?.eip155?.chains,R=S?.some(N=>Number(N.split(":")[1])===E);let C=1;R?C=E:S?.[0]&&(C=Number(S[0].split(":")[1])),o&&(f.removeListener("display_uri",o),o=void 0),i&&(f.removeListener("connect",i),i=void 0),r||(r=this.onAccountsChanged.bind(this),f.on("accountsChanged",r)),s||(s=this.onChainChanged.bind(this),f.on("chainChanged",s)),c||(c=this.onDisconnect.bind(this),f.on("disconnect",c)),a||(a=this.onSessionDelete.bind(this),f.on("session_delete",a));const T=m?.defaultChain;return f.setDefaultChain(T??`eip155:${C}`),{accounts:y,chainId:C}}catch(d){throw/(user rejected|connection request reset)/i.test(d?.message)?new zn(d):d}},async disconnect(){const l=await this.getProvider();try{await l?.disconnect()}catch(d){if(!/No matching key/i.test(d.message))throw d}finally{s&&(l?.removeListener("chainChanged",s),s=void 0),c&&(l?.removeListener("disconnect",c),c=void 0),i||(i=this.onConnect.bind(this),l?.on("connect",i)),r&&(l?.removeListener("accountsChanged",r),r=void 0),a&&(l?.removeListener("session_delete",a),a=void 0),this.setRequestedChainsIds([])}},async getAccounts(){const l=await this.getProvider();if(!l?.session?.namespaces)return[];const f=l?.session?.namespaces[X.CHAIN.EVM]?.accounts?.map(y=>y.split(":")[2])??[],h=new Set;return f.filter(y=>{const E=y?.toLowerCase();return h.has(E)?!1:(h.add(E),!0)})},async getProvider({chainId:l}={}){n||(n=t.universalProvider,n?.events.setMaxListeners(Number.POSITIVE_INFINITY));const d=fe.getActiveNamespace(),f=V.getActiveCaipNetwork()?.id;if(l&&f!==l&&d){const h=fe.getStoredActiveCaipNetworkId(),y=(d?V.getCaipNetworks(d):[])?.find(E=>E.id===h);y&&y.chainNamespace===X.CHAIN.EVM&&await this.switchChain?.({chainId:Number(y.id)})}return n},async getChainId(){const l=V.getActiveCaipNetwork(X.CHAIN.EVM)?.id;if(l)return l;const f=(await this.getProvider()).session?.namespaces[X.CHAIN.EVM]?.chains?.[0];return V.getCaipNetworks().find(m=>m.id===f)?.id},async isAuthorized(){try{const[l,d]=await Promise.all([this.getAccounts(),this.getProvider()]);return l.length?await this.isChainsStale()&&d.session?(await d.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:d}){const f=await this.getProvider();if(!f)throw new Fa;const h=V.getCaipNetworks().find(m=>m.id===d);if(!h)throw new lo(new ch);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(d)}]}),h?.caipNetworkId&&f.setDefaultChain(h?.caipNetworkId),u.emitter.emit("change",{chainId:Number(d)});const m=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...m,d]),{...h,id:h.id}}catch(m){const y=m;if(/(?:user rejected)/iu.test(y.message))throw new zn(y);try{let E;l?.blockExplorerUrls?E=l.blockExplorerUrls:E=h.blockExplorers?.default.url?[h.blockExplorers?.default.url]:[];const S=h.rpcUrls?.chainDefault?.http||[],R={blockExplorerUrls:E,chainId:Ue(d),chainName:h.name,iconUrls:l?.iconUrls,nativeCurrency:h.nativeCurrency,rpcUrls:S};await f.request({method:"wallet_addEthereumChain",params:[R]});const C=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...C,d]),{...h,id:h.id}}catch(E){throw new zn(E)}}},onAccountsChanged(l){l.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:l.map(d=>Gc(d))})},onChainChanged(l){const d=Number(l);u.emitter.emit("change",{chainId:d})},onConnect(l){this.setRequestedChainsIds(V.getCaipNetworks().map(d=>Number(d.id)))},async onDisconnect(l){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const d=await this.getProvider();r&&(d.removeListener("accountsChanged",r),r=void 0),s&&(d.removeListener("chainChanged",s),s=void 0),c&&(d.removeListener("disconnect",c),c=void 0),a&&(d.removeListener("session_delete",a),a=void 0),i||(i=this.onConnect.bind(this),d.on("connect",i))},onDisplayUri(l){u.emitter.emit("message",{type:"display_uri",data:l})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){return n?.session?.namespaces?n?.session?.namespaces[X.CHAIN.EVM]?.accounts?.map(f=>Number.parseInt(f.split(":")[1]??""))??[]:[]},async getRequestedChainsIds(){const l=await u.storage?.getItem(this.requestedChainsStorageKey)??[];return[...new Set(l)]},async isChainsStale(){if(!e)return!1;const l=u.chains.map(h=>h.id),d=this.getNamespaceChainsIds();if(d.length&&!d.some(h=>l.includes(h)))return!1;const f=await this.getRequestedChainsIds();return!l.every(h=>f.includes(Number(h)))},async setRequestedChainsIds(l){await u.storage?.setItem(this.requestedChainsStorageKey,l)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Kd=qt({pendingTransactions:0}),D6={state:Kd,subscribeKey(t,e){return Vn(Kd,t,e)},increase(t){Kd[t]+=1},decrease(t){Kd[t]-=1},reset(t){Kd[t]=0}};async function Kde(t){if(xe.isSafeApp()){const{safe:e}=await kn(async()=>{const{safe:n}=await import("./index-DskH0nJz.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Gde(t){try{const{baseAccount:e}=await kn(async()=>{const{baseAccount:n}=await import("./index-DskH0nJz.js");return{baseAccount:n}},[]);if(e&&!t.some(n=>n.id==="baseAccount"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Yde={enable:!1,pollingInterval:3e4};class Zde extends u_{constructor(e){const n=Qi.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=X.CHAIN.EVM,this.adapterType=X.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Yde,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===X.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!i?.user)return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>xe.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Il(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>xe.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Il(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===X.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{const i=e.transports?.[s.id],o=Qi.getCaipNetworkId(s);i?n[s.id]=Qi.extendWagmiTransports(s,e.projectId,i):n[s.id]=Qi.getViemTransport(s,e.projectId,e.customRpcUrls?.[o])}),this.wagmiConfig=DF({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=gF(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),D6.increase("pendingTransactions")}});const e=D6.subscribeKey("pendingTransactions",n=>{n>=X.LIMITS.PENDING_TRANSACTIONS&&(this.unwatchPendingTransactions?.(),e())})}setupWatchers(){hF(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===X.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:this.toChecksummedAddress(i)})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:fe.getConnectedSocialProvider(),username:fe.getConnectedSocialUsername()}:void 0}}))}}),P3(this.wagmiConfig,{onChange:(e,n)=>{if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e?.chainId&&e?.chainId!==n?.chainId&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const r=e.address!==n?.address,s=e.connector.id!==n.connector?.id,i=n.status!=="connected";(r||s||i)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}})}async addThirdPartyConnectors(){const e=[],{enableCoinbase:n}=oe.state||{};if(n!==!1){const s=await Gde(this.wagmiConfig.connectors);s&&e.push(s)}const r=await Kde(this.wagmiConfig.connectors);r&&e.push(r),await Promise.all(e.map(s=>{const i=this.configureInternalConnector(s);return this.addWagmiConnector(i)}))}addWagmiConnectors(){const e=[];oe.state.enableInjected!==!1&&e.push(km({shimDisconnect:!0}));const{features:n,remoteFeatures:r,projectId:s,enableAuthLogger:i}=oe.state,o=r?.email??n?.email??!0,a=r?.socials??n?.socials,c=Array.isArray(a)&&a?.length>0;(o||c)&&e.push(Vde({chains:this.wagmiChains,options:{projectId:s,enableAuthLogger:i}})),e.forEach(u=>{this.configureInternalConnector(u)})}configureInternalConnector(e){const n=this.wagmiConfig._internal.connectors.setup(e);return this.wagmiConfig._internal.connectors.setState(r=>[...r,n]),n}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:this.toChecksummedAddress(e),chainId:n,connector:{id:r.id,name:Bn.ConnectorNamesMap[r.id]??r.name,imageId:Bn.ConnectorImageIds[r.id],type:Bn.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===X.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async writeSolanaTransaction(){return Promise.resolve({hash:""})}async signMessage(e){try{return{signature:await uF(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Il(this.wagmiConfig),s=this.wagmiChains?.find(a=>a.id===n),i={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chain:s,type:"legacy",parameters:["nonce"]};await aF(this.wagmiConfig,i);const o=await cF(this.wagmiConfig,i);return await dF(this.wagmiConfig,{hash:o,timeout:25e3}),{hash:o}}async writeContract(e){const{caipNetwork:n,...r}=e,s=Number(fh.caipNetworkIdToNumber(n.caipNetworkId)),i=this.wagmiChains?.find(a=>a.id===s);return{hash:await mF(this.wagmiConfig,{chain:i,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await sF(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return FL(e.value,e.decimals)}formatUnits(e){return Yh(e.value,e.decimals)}async addWagmiConnector(e){if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");const{enableEIP6963:n}=oe.state||{};if(e.type===X.CONNECTOR_ID.INJECTED&&n===!1||e.id===X.CONNECTOR_ID.AUTH||e.id===X.CONNECTOR_ID.WALLET_CONNECT)return;let r;e.id!==X.CONNECTOR_ID.BASE_ACCOUNT&&(r=await e.getProvider().catch(()=>{}));const s=cs.state.connectorImages;this.addConnector({id:e.id,explorerId:Bn.ConnectorExplorerIds[e.id]??Bn.ConnectorExplorerIds[e.name],imageUrl:s?.[e.id]??e.icon,name:Bn.ConnectorNamesMap[e.id]??e.name,imageId:Bn.ConnectorImageIds[e.id],type:Bn.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===X.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(){pF(this.wagmiConfig,{onChange:e=>{e.forEach(n=>this.addWagmiConnector(n))}}),this.addWagmiConnectors(),await Promise.all(this.wagmiConfig.connectors.map(e=>this.addWagmiConnector(e))),await this.addThirdPartyConnectors()}async syncConnections(){const e=this.connectors.filter(n=>{const{hasDisconnected:r,hasConnected:s}=Zs.getConnectorStorageInfo(n.id,this.namespace);return!r&&s}).map(n=>this.getWagmiConnector(n.id)).filter(Boolean);await T0(this.wagmiConfig,{connectors:e})}async syncConnection(e){const{id:n,chainId:r}=e,i=Po(this.wagmiConfig).find(u=>u.connector.id===n),a=await this.getWagmiConnector(n)?.getProvider();if(xe.isSafeApp()&&n===X.CONNECTOR_ID.SAFE&&!i?.accounts.length){const u=this.getWagmiConnector("safe");if(u){const l=await dw(this.wagmiConfig,{connector:u,chainId:Number(r)}),d=await u.getProvider();return{chainId:Number(r),address:this.toChecksummedAddress(l.accounts[0]),provider:d,type:i?.connector.type?.toUpperCase(),id:i?.connector.id}}}return{chainId:Number(i?.chainId),address:this.toChecksummedAddress(i?.accounts[0]),provider:a,type:i?.connector.type?.toUpperCase(),id:i?.connector.id}}async connectWalletConnect(e){try{const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await dw(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await e2(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}catch(n){throw n instanceof zn?new Xa(n):Ei.isUserRejectedRequestError(n)?new Xa(n):n}}async connect(e){try{const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,u=this.getWagmiConnector(n);if(!u)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&u.id===X.CONNECTOR_ID.EIP6963&&u.setEip6963Wallet?.({provider:s,info:o});const l=this.wagmiConfig.state?.connections?.get(u.uid);if(l){await this.wagmiConfig.storage?.setItem("recentConnectorId",u.id);const h=[...l.accounts].sort((m,y)=>Zs.isLowerCaseMatch(m,r)?-1:Zs.isLowerCaseMatch(y,r)?1:0);return this.wagmiConfig?.setState(m=>({...m,connections:new Map(m.connections).set(u.uid,{accounts:h,chainId:l.chainId,connector:l.connector}),current:u.uid,status:"connected"})),{address:this.toChecksummedAddress(h[0]),chainId:l.chainId,provider:s,type:i,id:n}}const d=await dw(this.wagmiConfig,{connector:u,chainId:a?Number(a):void 0,socialUri:c}),f=s??await u.getProvider();return{address:this.toChecksummedAddress(d.accounts[0]),chainId:d.chainId,provider:f,type:i,id:n}}catch(n){throw n instanceof zn?new Xa(n):Ei.isUserRejectedRequestError(n)?new Xa(n):n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:this.toChecksummedAddress(n)})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await T0(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=fe.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{try{const c=Number(e.chainId),u=await iF(this.wagmiConfig,{address:e.address,chainId:c,token:e.tokens?.[r.caipNetworkId]?.address});fe.updateNativeBalanceCache({caipAddress:s,balance:u.formatted,symbol:u.symbol,timestamp:Date.now()}),a({balance:u.formatted,symbol:u.symbol})}catch(c){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",c),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){return this.getWagmiConnector("walletConnect")?.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Po(this.wagmiConfig).find(i=>Zs.isLowerCaseMatch(i.connector.id,e.id));return await QA(this.wagmiConfig,{connector:n}),oe.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:this.toChecksummedAddress(i)})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Po(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await QA(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:this.toChecksummedAddress(s)})),connectorId:r.connector.id}))}}async switchNetwork(e){const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(h=>h.id.toString()===n.id.toString());if(!r)throw new Error("connectionControllerClient:switchNetwork - wagmiChain is undefined");const{name:s,nativeCurrency:i,rpcUrls:o,blockExplorers:a,id:c}=r,u=n.rpcUrls?.chainDefault?.http?.[0]??o.default.http[0]??"",l=a?.default.url??n.blockExplorers?.default?.url??"",d=i??n.nativeCurrency,f=s??n.name;await e2(this.wagmiConfig,{chainId:c,addEthereumChainParameter:{chainName:f,nativeCurrency:d,rpcUrls:[u],blockExplorerUrls:[l]}}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Po(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Po(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Po(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Po(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:X.CONNECTOR_ID.AUTH,type:"AUTH",name:X.CONNECTOR_NAMES.AUTH,provider:e,imageId:Bn.ConnectorImageIds[X.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){e.on("connect",()=>{const r=Po(this.wagmiConfig),s=this.getWagmiConnector("walletConnect");if(s&&!r.find(i=>i.connector.id===s.id)){if(V.state.activeChain==="eip155")return;T0(this.wagmiConfig,{connectors:[s]})}});const n=y_({universalProvider:e});return this.configureInternalConnector(n),this.addConnector(new l_({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}toChecksummedAddress(e){return Gh(e.toLowerCase())}}const Oa=BigInt(0),Zn=BigInt(1),Fb=BigInt(2),Jde=BigInt(8);function Xde(t,e,n,r){const s=t.sqr(n),i=t.sqr(r),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function Qde(t,e={}){const n=HR("edwards",t,e,e.FpFnLE),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o}=i;fp(e,{},{uvRatio:"function"});const a=Fb<<BigInt(s.BYTES*8)-Zn,c=E=>r.create(E),u=e.uvRatio||((E,S)=>{try{return{isValid:!0,value:r.sqrt(r.div(E,S))}}catch{return{isValid:!1,value:Oa}}});if(!Xde(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function l(E,S,R=!1){const C=R?Zn:Oa;return CE("coordinate "+E,S,C,a),S}function d(E){if(!(E instanceof m))throw new Error("ExtendedPoint expected")}const f=Og((E,S)=>{const{X:R,Y:C,Z:T}=E,N=E.is0();S==null&&(S=N?Jde:r.inv(T));const U=c(R*S),q=c(C*S),H=r.mul(T,S);if(N)return{x:Oa,y:Zn};if(H!==Zn)throw new Error("invZ was invalid");return{x:U,y:q}}),h=Og(E=>{const{a:S,d:R}=i;if(E.is0())throw new Error("bad point: ZERO");const{X:C,Y:T,Z:N,T:U}=E,q=c(C*C),H=c(T*T),P=c(N*N),$=c(P*P),W=c(q*S),z=c(P*c(W+H)),_=c($+c(R*c(q*H)));if(z!==_)throw new Error("bad point: equation left != right (1)");const p=c(C*T),g=c(N*U);if(p!==g)throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(S,R,C,T){this.X=l("x",S),this.Y=l("y",R),this.Z=l("z",C,!0),this.T=l("t",T),Object.freeze(this)}static CURVE(){return i}static fromAffine(S){if(S instanceof m)throw new Error("extended point not allowed");const{x:R,y:C}=S||{};return l("x",R),l("y",C),new m(R,C,Zn,c(R*C))}static fromBytes(S,R=!1){const C=r.BYTES,{a:T,d:N}=i;S=LS(_i(S,C,"point")),Su(R,"zip215");const U=LS(S),q=S[C-1];U[C-1]=q&-129;const H=Oh(U),P=R?a:r.ORDER;CE("point.y",H,Oa,P);const $=c(H*H),W=c($-Zn),z=c(N*$-T);let{isValid:_,value:p}=u(W,z);if(!_)throw new Error("bad point: invalid y coordinate");const g=(p&Zn)===Zn,b=(q&128)!==0;if(!R&&p===Oa&&b)throw new Error("bad point: x=0 and x_0=1");return b!==g&&(p=c(-p)),m.fromAffine({x:p,y:H})}static fromHex(S,R=!1){return m.fromBytes(ln("point",S),R)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(S=8,R=!0){return y.createCache(this,S),R||this.multiply(Fb),this}assertValidity(){h(this)}equals(S){d(S);const{X:R,Y:C,Z:T}=this,{X:N,Y:U,Z:q}=S,H=c(R*q),P=c(N*T),$=c(C*q),W=c(U*T);return H===P&&$===W}is0(){return this.equals(m.ZERO)}negate(){return new m(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:S}=i,{X:R,Y:C,Z:T}=this,N=c(R*R),U=c(C*C),q=c(Fb*c(T*T)),H=c(S*N),P=R+C,$=c(c(P*P)-N-U),W=H+U,z=W-q,_=H-U,p=c($*z),g=c(W*_),b=c($*_),x=c(z*W);return new m(p,g,x,b)}add(S){d(S);const{a:R,d:C}=i,{X:T,Y:N,Z:U,T:q}=this,{X:H,Y:P,Z:$,T:W}=S,z=c(T*H),_=c(N*P),p=c(q*C*W),g=c(U*$),b=c((T+N)*(H+P)-z-_),x=g-p,O=g+p,k=c(_-R*z),M=c(b*x),B=c(O*k),w=c(b*k),v=c(x*O);return new m(M,B,v,w)}subtract(S){return this.add(S.negate())}multiply(S){if(!s.isValidNot0(S))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:R,f:C}=y.cached(this,S,T=>eu(m,T));return eu(m,[R,C])[0]}multiplyUnsafe(S,R=m.ZERO){if(!s.isValid(S))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return S===Oa?m.ZERO:this.is0()||S===Zn?this:y.unsafe(this,S,C=>eu(m,C),R)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return y.unsafe(this,i.n).is0()}toAffine(S){return f(this,S)}clearCofactor(){return o===Zn?this:this.multiplyUnsafe(o)}toBytes(){const{x:S,y:R}=this.toAffine(),C=r.toBytes(R);return C[C.length-1]|=S&Zn?128:0,C}toHex(){return du(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(S){return eu(m,S)}static msm(S,R){return zR(m,s,S,R)}_setWindowSize(S){this.precompute(S)}toRawBytes(){return this.toBytes()}}m.BASE=new m(i.Gx,i.Gy,Zn,c(i.Gx*i.Gy)),m.ZERO=new m(Oa,Zn,Zn,Oa),m.Fp=r,m.Fn=s;const y=new qR(m,s.BITS);return m.BASE.precompute(8),m}function efe(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');fp(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:s,Fp:i,Fn:o}=t,a=n.randomBytes||BC,c=n.adjustScalarBytes||(P=>P),u=n.domain||((P,$,W)=>{if(Su(W,"phflag"),$.length||W)throw new Error("Contexts/pre-hash are not supported");return P});function l(P){return o.create(Oh(P))}function d(P){const $=C.secretKey;P=ln("private key",P,$);const W=ln("hashed private key",e(P),2*$),z=c(W.slice(0,$)),_=W.slice($,2*$),p=l(z);return{head:z,prefix:_,scalar:p}}function f(P){const{head:$,prefix:W,scalar:z}=d(P),_=s.multiply(z),p=_.toBytes();return{head:$,prefix:W,scalar:z,point:_,pointBytes:p}}function h(P){return f(P).pointBytes}function m(P=Uint8Array.of(),...$){const W=Xi(...$);return l(e(u(W,ln("context",P),!!r)))}function y(P,$,W={}){P=ln("message",P),r&&(P=r(P));const{prefix:z,scalar:_,pointBytes:p}=f($),g=m(W.context,z,P),b=s.multiply(g).toBytes(),x=m(W.context,b,p,P),O=o.create(g+x*_);if(!o.isValid(O))throw new Error("sign failed: invalid s");const k=Xi(b,o.toBytes(O));return _i(k,C.signature,"result")}const E={zip215:!0};function S(P,$,W,z=E){const{context:_,zip215:p}=z,g=C.signature;P=ln("signature",P,g),$=ln("message",$),W=ln("publicKey",W,C.publicKey),p!==void 0&&Su(p,"zip215"),r&&($=r($));const b=g/2,x=P.subarray(0,b),O=Oh(P.subarray(b,g));let k,M,B;try{k=t.fromBytes(W,p),M=t.fromBytes(x,p),B=s.multiplyUnsafe(O)}catch{return!1}if(!p&&k.isSmallOrder())return!1;const w=m(_,M.toBytes(),k.toBytes(),$);return M.add(k.multiplyUnsafe(w)).subtract(B).clearCofactor().is0()}const R=i.BYTES,C={secretKey:R,publicKey:R,signature:2*R,seed:R};function T(P=a(C.seed)){return _i(P,C.seed,"seed")}function N(P){const $=H.randomSecretKey(P);return{secretKey:$,publicKey:h($)}}function U(P){return lp(P)&&P.length===o.BYTES}function q(P,$){try{return!!t.fromBytes(P,$)}catch{return!1}}const H={getExtendedPublicKey:f,randomSecretKey:T,isValidSecretKey:U,isValidPublicKey:q,toMontgomery(P){const{y:$}=t.fromBytes(P),W=C.publicKey,z=W===32;if(!z&&W!==57)throw new Error("only defined for 25519 and 448");const _=z?i.div(Zn+$,Zn-$):i.div($-Zn,$+Zn);return i.toBytes(_)},toMontgomerySecret(P){const $=C.secretKey;_i(P,$);const W=e(P.subarray(0,$));return c(W).subarray(0,$)},randomPrivateKey:T,precompute(P=8,$=t.BASE){return $.precompute(P,!1)}};return Object.freeze({keygen:N,getPublicKey:h,sign:y,verify:S,utils:H,Point:t,lengths:C})}function tfe(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Mu(e.n,t.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function nfe(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function rfe(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:s}=tfe(t),i=Qde(e,n),o=efe(i,r,s);return nfe(t,o)}const sfe=BigInt(1),U6=BigInt(2);BigInt(3);const ife=BigInt(5),ofe=BigInt(8),w_=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),ck={p:w_,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ofe,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function afe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=w_,a=t*t%i*t%i,c=un(a,U6,i)*a%i,u=un(c,sfe,i)*t%i,l=un(u,ife,i)*u%i,d=un(l,e,i)*l%i,f=un(d,n,i)*d%i,h=un(f,r,i)*f%i,m=un(h,s,i)*h%i,y=un(m,s,i)*h%i,E=un(y,e,i)*l%i;return{pow_p_5_8:un(E,U6,i)*t%i,b2:a}}function cfe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const M6=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function ufe(t,e){const n=w_,r=Un(e*e*e,n),s=Un(r*r*e,n),i=afe(t*s).pow_p_5_8;let o=Un(t*r*i,n);const a=Un(e*o*o,n),c=o,u=Un(o*M6,n),l=a===t,d=a===Un(-t,n),f=a===Un(-t*M6,n);return l&&(o=c),(d||f)&&(o=u),sJ(o,n)&&(o=Un(-o,n)),{isValid:l||d,value:o}}const lfe=Mu(ck.p,{isLE:!0}),dfe={...ck,Fp:lfe,hash:xJ,adjustScalarBytes:cfe,uvRatio:ufe},vp=rfe(dfe);var z0={exports:{}};const ffe={},hfe=Object.freeze(Object.defineProperty({__proto__:null,default:ffe},Symbol.toStringTag,{value:"Module"})),pfe=Bm(hfe);var gfe=z0.exports,$6;function uk(){return $6||($6=1,(function(t){(function(e,n){function r(_,p){if(!_)throw new Error(p||"Assertion failed")}function s(_,p){_.super_=p;var g=function(){};g.prototype=p.prototype,_.prototype=new g,_.prototype.constructor=_}function i(_,p,g){if(i.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((p==="le"||p==="be")&&(g=p,p=10),this._init(_||0,p||10,g||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=pfe.Buffer}catch{}i.isBN=function(p){return p instanceof i?!0:p!==null&&typeof p=="object"&&p.constructor.wordSize===i.wordSize&&Array.isArray(p.words)},i.max=function(p,g){return p.cmp(g)>0?p:g},i.min=function(p,g){return p.cmp(g)<0?p:g},i.prototype._init=function(p,g,b){if(typeof p=="number")return this._initNumber(p,g,b);if(typeof p=="object")return this._initArray(p,g,b);g==="hex"&&(g=16),r(g===(g|0)&&g>=2&&g<=36),p=p.toString().replace(/\s+/g,"");var x=0;p[0]==="-"&&(x++,this.negative=1),x<p.length&&(g===16?this._parseHex(p,x,b):(this._parseBase(p,g,x),b==="le"&&this._initArray(this.toArray(),g,b)))},i.prototype._initNumber=function(p,g,b){p<0&&(this.negative=1,p=-p),p<67108864?(this.words=[p&67108863],this.length=1):p<4503599627370496?(this.words=[p&67108863,p/67108864&67108863],this.length=2):(r(p<9007199254740992),this.words=[p&67108863,p/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),g,b)},i.prototype._initArray=function(p,g,b){if(r(typeof p.length=="number"),p.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(p.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var O,k,M=0;if(b==="be")for(x=p.length-1,O=0;x>=0;x-=3)k=p[x]|p[x-1]<<8|p[x-2]<<16,this.words[O]|=k<<M&67108863,this.words[O+1]=k>>>26-M&67108863,M+=24,M>=26&&(M-=26,O++);else if(b==="le")for(x=0,O=0;x<p.length;x+=3)k=p[x]|p[x+1]<<8|p[x+2]<<16,this.words[O]|=k<<M&67108863,this.words[O+1]=k>>>26-M&67108863,M+=24,M>=26&&(M-=26,O++);return this._strip()};function a(_,p){var g=_.charCodeAt(p);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;r(!1,"Invalid character in "+_)}function c(_,p,g){var b=a(_,g);return g-1>=p&&(b|=a(_,g-1)<<4),b}i.prototype._parseHex=function(p,g,b){this.length=Math.ceil((p.length-g)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var O=0,k=0,M;if(b==="be")for(x=p.length-1;x>=g;x-=2)M=c(p,g,x)<<O,this.words[k]|=M&67108863,O>=18?(O-=18,k+=1,this.words[k]|=M>>>26):O+=8;else{var B=p.length-g;for(x=B%2===0?g+1:g;x<p.length;x+=2)M=c(p,g,x)<<O,this.words[k]|=M&67108863,O>=18?(O-=18,k+=1,this.words[k]|=M>>>26):O+=8}this._strip()};function u(_,p,g,b){for(var x=0,O=0,k=Math.min(_.length,g),M=p;M<k;M++){var B=_.charCodeAt(M)-48;x*=b,B>=49?O=B-49+10:B>=17?O=B-17+10:O=B,r(B>=0&&O<b,"Invalid character"),x+=O}return x}i.prototype._parseBase=function(p,g,b){this.words=[0],this.length=1;for(var x=0,O=1;O<=67108863;O*=g)x++;x--,O=O/g|0;for(var k=p.length-b,M=k%x,B=Math.min(k,k-M)+b,w=0,v=b;v<B;v+=x)w=u(p,v,v+x,g),this.imuln(O),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w);if(M!==0){var D=1;for(w=u(p,v,p.length,g),v=0;v<M;v++)D*=g;this.imuln(D),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w)}this._strip()},i.prototype.copy=function(p){p.words=new Array(this.length);for(var g=0;g<this.length;g++)p.words[g]=this.words[g];p.length=this.length,p.negative=this.negative,p.red=this.red};function l(_,p){_.words=p.words,_.length=p.length,_.negative=p.negative,_.red=p.red}if(i.prototype._move=function(p){l(p,this)},i.prototype.clone=function(){var p=new i(null);return this.copy(p),p},i.prototype._expand=function(p){for(;this.length<p;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(p,g){p=p||10,g=g|0||1;var b;if(p===16||p==="hex"){b="";for(var x=0,O=0,k=0;k<this.length;k++){var M=this.words[k],B=((M<<x|O)&16777215).toString(16);O=M>>>24-x&16777215,x+=2,x>=26&&(x-=26,k--),O!==0||k!==this.length-1?b=f[6-B.length]+B+b:b=B+b}for(O!==0&&(b=O.toString(16)+b);b.length%g!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(p===(p|0)&&p>=2&&p<=36){var w=h[p],v=m[p];b="";var D=this.clone();for(D.negative=0;!D.isZero();){var F=D.modrn(v).toString(p);D=D.idivn(v),D.isZero()?b=F+b:b=f[w-F.length]+F+b}for(this.isZero()&&(b="0"+b);b.length%g!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var p=this.words[0];return this.length===2?p+=this.words[1]*67108864:this.length===3&&this.words[2]===1?p+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-p:p},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(p,g){return this.toArrayLike(o,p,g)}),i.prototype.toArray=function(p,g){return this.toArrayLike(Array,p,g)};var y=function(p,g){return p.allocUnsafe?p.allocUnsafe(g):new p(g)};i.prototype.toArrayLike=function(p,g,b){this._strip();var x=this.byteLength(),O=b||Math.max(1,x);r(x<=O,"byte array longer than desired length"),r(O>0,"Requested array length <= 0");var k=y(p,O),M=g==="le"?"LE":"BE";return this["_toArrayLike"+M](k,x),k},i.prototype._toArrayLikeLE=function(p,g){for(var b=0,x=0,O=0,k=0;O<this.length;O++){var M=this.words[O]<<k|x;p[b++]=M&255,b<p.length&&(p[b++]=M>>8&255),b<p.length&&(p[b++]=M>>16&255),k===6?(b<p.length&&(p[b++]=M>>24&255),x=0,k=0):(x=M>>>24,k+=2)}if(b<p.length)for(p[b++]=x;b<p.length;)p[b++]=0},i.prototype._toArrayLikeBE=function(p,g){for(var b=p.length-1,x=0,O=0,k=0;O<this.length;O++){var M=this.words[O]<<k|x;p[b--]=M&255,b>=0&&(p[b--]=M>>8&255),b>=0&&(p[b--]=M>>16&255),k===6?(b>=0&&(p[b--]=M>>24&255),x=0,k=0):(x=M>>>24,k+=2)}if(b>=0)for(p[b--]=x;b>=0;)p[b--]=0},Math.clz32?i.prototype._countBits=function(p){return 32-Math.clz32(p)}:i.prototype._countBits=function(p){var g=p,b=0;return g>=4096&&(b+=13,g>>>=13),g>=64&&(b+=7,g>>>=7),g>=8&&(b+=4,g>>>=4),g>=2&&(b+=2,g>>>=2),b+g},i.prototype._zeroBits=function(p){if(p===0)return 26;var g=p,b=0;return(g&8191)===0&&(b+=13,g>>>=13),(g&127)===0&&(b+=7,g>>>=7),(g&15)===0&&(b+=4,g>>>=4),(g&3)===0&&(b+=2,g>>>=2),(g&1)===0&&b++,b},i.prototype.bitLength=function(){var p=this.words[this.length-1],g=this._countBits(p);return(this.length-1)*26+g};function E(_){for(var p=new Array(_.bitLength()),g=0;g<p.length;g++){var b=g/26|0,x=g%26;p[g]=_.words[b]>>>x&1}return p}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var p=0,g=0;g<this.length;g++){var b=this._zeroBits(this.words[g]);if(p+=b,b!==26)break}return p},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(p){return this.negative!==0?this.abs().inotn(p).iaddn(1):this.clone()},i.prototype.fromTwos=function(p){return this.testn(p-1)?this.notn(p).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(p){for(;this.length<p.length;)this.words[this.length++]=0;for(var g=0;g<p.length;g++)this.words[g]=this.words[g]|p.words[g];return this._strip()},i.prototype.ior=function(p){return r((this.negative|p.negative)===0),this.iuor(p)},i.prototype.or=function(p){return this.length>p.length?this.clone().ior(p):p.clone().ior(this)},i.prototype.uor=function(p){return this.length>p.length?this.clone().iuor(p):p.clone().iuor(this)},i.prototype.iuand=function(p){var g;this.length>p.length?g=p:g=this;for(var b=0;b<g.length;b++)this.words[b]=this.words[b]&p.words[b];return this.length=g.length,this._strip()},i.prototype.iand=function(p){return r((this.negative|p.negative)===0),this.iuand(p)},i.prototype.and=function(p){return this.length>p.length?this.clone().iand(p):p.clone().iand(this)},i.prototype.uand=function(p){return this.length>p.length?this.clone().iuand(p):p.clone().iuand(this)},i.prototype.iuxor=function(p){var g,b;this.length>p.length?(g=this,b=p):(g=p,b=this);for(var x=0;x<b.length;x++)this.words[x]=g.words[x]^b.words[x];if(this!==g)for(;x<g.length;x++)this.words[x]=g.words[x];return this.length=g.length,this._strip()},i.prototype.ixor=function(p){return r((this.negative|p.negative)===0),this.iuxor(p)},i.prototype.xor=function(p){return this.length>p.length?this.clone().ixor(p):p.clone().ixor(this)},i.prototype.uxor=function(p){return this.length>p.length?this.clone().iuxor(p):p.clone().iuxor(this)},i.prototype.inotn=function(p){r(typeof p=="number"&&p>=0);var g=Math.ceil(p/26)|0,b=p%26;this._expand(g),b>0&&g--;for(var x=0;x<g;x++)this.words[x]=~this.words[x]&67108863;return b>0&&(this.words[x]=~this.words[x]&67108863>>26-b),this._strip()},i.prototype.notn=function(p){return this.clone().inotn(p)},i.prototype.setn=function(p,g){r(typeof p=="number"&&p>=0);var b=p/26|0,x=p%26;return this._expand(b+1),g?this.words[b]=this.words[b]|1<<x:this.words[b]=this.words[b]&~(1<<x),this._strip()},i.prototype.iadd=function(p){var g;if(this.negative!==0&&p.negative===0)return this.negative=0,g=this.isub(p),this.negative^=1,this._normSign();if(this.negative===0&&p.negative!==0)return p.negative=0,g=this.isub(p),p.negative=1,g._normSign();var b,x;this.length>p.length?(b=this,x=p):(b=p,x=this);for(var O=0,k=0;k<x.length;k++)g=(b.words[k]|0)+(x.words[k]|0)+O,this.words[k]=g&67108863,O=g>>>26;for(;O!==0&&k<b.length;k++)g=(b.words[k]|0)+O,this.words[k]=g&67108863,O=g>>>26;if(this.length=b.length,O!==0)this.words[this.length]=O,this.length++;else if(b!==this)for(;k<b.length;k++)this.words[k]=b.words[k];return this},i.prototype.add=function(p){var g;return p.negative!==0&&this.negative===0?(p.negative=0,g=this.sub(p),p.negative^=1,g):p.negative===0&&this.negative!==0?(this.negative=0,g=p.sub(this),this.negative=1,g):this.length>p.length?this.clone().iadd(p):p.clone().iadd(this)},i.prototype.isub=function(p){if(p.negative!==0){p.negative=0;var g=this.iadd(p);return p.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(p),this.negative=1,this._normSign();var b=this.cmp(p);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,O;b>0?(x=this,O=p):(x=p,O=this);for(var k=0,M=0;M<O.length;M++)g=(x.words[M]|0)-(O.words[M]|0)+k,k=g>>26,this.words[M]=g&67108863;for(;k!==0&&M<x.length;M++)g=(x.words[M]|0)+k,k=g>>26,this.words[M]=g&67108863;if(k===0&&M<x.length&&x!==this)for(;M<x.length;M++)this.words[M]=x.words[M];return this.length=Math.max(this.length,M),x!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(p){return this.clone().isub(p)};function S(_,p,g){g.negative=p.negative^_.negative;var b=_.length+p.length|0;g.length=b,b=b-1|0;var x=_.words[0]|0,O=p.words[0]|0,k=x*O,M=k&67108863,B=k/67108864|0;g.words[0]=M;for(var w=1;w<b;w++){for(var v=B>>>26,D=B&67108863,F=Math.min(w,p.length-1),Z=Math.max(0,w-_.length+1);Z<=F;Z++){var ee=w-Z|0;x=_.words[ee]|0,O=p.words[Z]|0,k=x*O+D,v+=k/67108864|0,D=k&67108863}g.words[w]=D|0,B=v|0}return B!==0?g.words[w]=B|0:g.length--,g._strip()}var R=function(p,g,b){var x=p.words,O=g.words,k=b.words,M=0,B,w,v,D=x[0]|0,F=D&8191,Z=D>>>13,ee=x[1]|0,de=ee&8191,ae=ee>>>13,Oe=x[2]|0,Qe=Oe&8191,G=Oe>>>13,J=x[3]|0,ne=J&8191,ce=J>>>13,he=x[4]|0,le=he&8191,be=he>>>13,Ce=x[5]|0,pe=Ce&8191,ue=Ce>>>13,je=x[6]|0,Ee=je&8191,Ne=je>>>13,Ve=x[7]|0,Ke=Ve&8191,L=Ve>>>13,A=x[8]|0,I=A&8191,K=A>>>13,Q=x[9]|0,te=Q&8191,ie=Q>>>13,ct=O[0]|0,Ze=ct&8191,Je=ct>>>13,$t=O[1]|0,nt=$t&8191,pn=$t>>>13,O_=O[2]|0,gn=O_&8191,mn=O_>>>13,P_=O[3]|0,yn=P_&8191,wn=P_>>>13,k_=O[4]|0,bn=k_&8191,En=k_>>>13,B_=O[5]|0,vn=B_&8191,Cn=B_>>>13,D_=O[6]|0,_n=D_&8191,An=D_>>>13,U_=O[7]|0,Sn=U_&8191,xn=U_>>>13,M_=O[8]|0,In=M_&8191,Nn=M_>>>13,$_=O[9]|0,Tn=$_&8191,Rn=$_>>>13;b.negative=p.negative^g.negative,b.length=19,B=Math.imul(F,Ze),w=Math.imul(F,Je),w=w+Math.imul(Z,Ze)|0,v=Math.imul(Z,Je);var vy=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(vy>>>26)|0,vy&=67108863,B=Math.imul(de,Ze),w=Math.imul(de,Je),w=w+Math.imul(ae,Ze)|0,v=Math.imul(ae,Je),B=B+Math.imul(F,nt)|0,w=w+Math.imul(F,pn)|0,w=w+Math.imul(Z,nt)|0,v=v+Math.imul(Z,pn)|0;var Cy=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Cy>>>26)|0,Cy&=67108863,B=Math.imul(Qe,Ze),w=Math.imul(Qe,Je),w=w+Math.imul(G,Ze)|0,v=Math.imul(G,Je),B=B+Math.imul(de,nt)|0,w=w+Math.imul(de,pn)|0,w=w+Math.imul(ae,nt)|0,v=v+Math.imul(ae,pn)|0,B=B+Math.imul(F,gn)|0,w=w+Math.imul(F,mn)|0,w=w+Math.imul(Z,gn)|0,v=v+Math.imul(Z,mn)|0;var _y=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(_y>>>26)|0,_y&=67108863,B=Math.imul(ne,Ze),w=Math.imul(ne,Je),w=w+Math.imul(ce,Ze)|0,v=Math.imul(ce,Je),B=B+Math.imul(Qe,nt)|0,w=w+Math.imul(Qe,pn)|0,w=w+Math.imul(G,nt)|0,v=v+Math.imul(G,pn)|0,B=B+Math.imul(de,gn)|0,w=w+Math.imul(de,mn)|0,w=w+Math.imul(ae,gn)|0,v=v+Math.imul(ae,mn)|0,B=B+Math.imul(F,yn)|0,w=w+Math.imul(F,wn)|0,w=w+Math.imul(Z,yn)|0,v=v+Math.imul(Z,wn)|0;var Ay=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Ay>>>26)|0,Ay&=67108863,B=Math.imul(le,Ze),w=Math.imul(le,Je),w=w+Math.imul(be,Ze)|0,v=Math.imul(be,Je),B=B+Math.imul(ne,nt)|0,w=w+Math.imul(ne,pn)|0,w=w+Math.imul(ce,nt)|0,v=v+Math.imul(ce,pn)|0,B=B+Math.imul(Qe,gn)|0,w=w+Math.imul(Qe,mn)|0,w=w+Math.imul(G,gn)|0,v=v+Math.imul(G,mn)|0,B=B+Math.imul(de,yn)|0,w=w+Math.imul(de,wn)|0,w=w+Math.imul(ae,yn)|0,v=v+Math.imul(ae,wn)|0,B=B+Math.imul(F,bn)|0,w=w+Math.imul(F,En)|0,w=w+Math.imul(Z,bn)|0,v=v+Math.imul(Z,En)|0;var Sy=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Sy>>>26)|0,Sy&=67108863,B=Math.imul(pe,Ze),w=Math.imul(pe,Je),w=w+Math.imul(ue,Ze)|0,v=Math.imul(ue,Je),B=B+Math.imul(le,nt)|0,w=w+Math.imul(le,pn)|0,w=w+Math.imul(be,nt)|0,v=v+Math.imul(be,pn)|0,B=B+Math.imul(ne,gn)|0,w=w+Math.imul(ne,mn)|0,w=w+Math.imul(ce,gn)|0,v=v+Math.imul(ce,mn)|0,B=B+Math.imul(Qe,yn)|0,w=w+Math.imul(Qe,wn)|0,w=w+Math.imul(G,yn)|0,v=v+Math.imul(G,wn)|0,B=B+Math.imul(de,bn)|0,w=w+Math.imul(de,En)|0,w=w+Math.imul(ae,bn)|0,v=v+Math.imul(ae,En)|0,B=B+Math.imul(F,vn)|0,w=w+Math.imul(F,Cn)|0,w=w+Math.imul(Z,vn)|0,v=v+Math.imul(Z,Cn)|0;var xy=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(xy>>>26)|0,xy&=67108863,B=Math.imul(Ee,Ze),w=Math.imul(Ee,Je),w=w+Math.imul(Ne,Ze)|0,v=Math.imul(Ne,Je),B=B+Math.imul(pe,nt)|0,w=w+Math.imul(pe,pn)|0,w=w+Math.imul(ue,nt)|0,v=v+Math.imul(ue,pn)|0,B=B+Math.imul(le,gn)|0,w=w+Math.imul(le,mn)|0,w=w+Math.imul(be,gn)|0,v=v+Math.imul(be,mn)|0,B=B+Math.imul(ne,yn)|0,w=w+Math.imul(ne,wn)|0,w=w+Math.imul(ce,yn)|0,v=v+Math.imul(ce,wn)|0,B=B+Math.imul(Qe,bn)|0,w=w+Math.imul(Qe,En)|0,w=w+Math.imul(G,bn)|0,v=v+Math.imul(G,En)|0,B=B+Math.imul(de,vn)|0,w=w+Math.imul(de,Cn)|0,w=w+Math.imul(ae,vn)|0,v=v+Math.imul(ae,Cn)|0,B=B+Math.imul(F,_n)|0,w=w+Math.imul(F,An)|0,w=w+Math.imul(Z,_n)|0,v=v+Math.imul(Z,An)|0;var Iy=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Iy>>>26)|0,Iy&=67108863,B=Math.imul(Ke,Ze),w=Math.imul(Ke,Je),w=w+Math.imul(L,Ze)|0,v=Math.imul(L,Je),B=B+Math.imul(Ee,nt)|0,w=w+Math.imul(Ee,pn)|0,w=w+Math.imul(Ne,nt)|0,v=v+Math.imul(Ne,pn)|0,B=B+Math.imul(pe,gn)|0,w=w+Math.imul(pe,mn)|0,w=w+Math.imul(ue,gn)|0,v=v+Math.imul(ue,mn)|0,B=B+Math.imul(le,yn)|0,w=w+Math.imul(le,wn)|0,w=w+Math.imul(be,yn)|0,v=v+Math.imul(be,wn)|0,B=B+Math.imul(ne,bn)|0,w=w+Math.imul(ne,En)|0,w=w+Math.imul(ce,bn)|0,v=v+Math.imul(ce,En)|0,B=B+Math.imul(Qe,vn)|0,w=w+Math.imul(Qe,Cn)|0,w=w+Math.imul(G,vn)|0,v=v+Math.imul(G,Cn)|0,B=B+Math.imul(de,_n)|0,w=w+Math.imul(de,An)|0,w=w+Math.imul(ae,_n)|0,v=v+Math.imul(ae,An)|0,B=B+Math.imul(F,Sn)|0,w=w+Math.imul(F,xn)|0,w=w+Math.imul(Z,Sn)|0,v=v+Math.imul(Z,xn)|0;var Ny=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Ny>>>26)|0,Ny&=67108863,B=Math.imul(I,Ze),w=Math.imul(I,Je),w=w+Math.imul(K,Ze)|0,v=Math.imul(K,Je),B=B+Math.imul(Ke,nt)|0,w=w+Math.imul(Ke,pn)|0,w=w+Math.imul(L,nt)|0,v=v+Math.imul(L,pn)|0,B=B+Math.imul(Ee,gn)|0,w=w+Math.imul(Ee,mn)|0,w=w+Math.imul(Ne,gn)|0,v=v+Math.imul(Ne,mn)|0,B=B+Math.imul(pe,yn)|0,w=w+Math.imul(pe,wn)|0,w=w+Math.imul(ue,yn)|0,v=v+Math.imul(ue,wn)|0,B=B+Math.imul(le,bn)|0,w=w+Math.imul(le,En)|0,w=w+Math.imul(be,bn)|0,v=v+Math.imul(be,En)|0,B=B+Math.imul(ne,vn)|0,w=w+Math.imul(ne,Cn)|0,w=w+Math.imul(ce,vn)|0,v=v+Math.imul(ce,Cn)|0,B=B+Math.imul(Qe,_n)|0,w=w+Math.imul(Qe,An)|0,w=w+Math.imul(G,_n)|0,v=v+Math.imul(G,An)|0,B=B+Math.imul(de,Sn)|0,w=w+Math.imul(de,xn)|0,w=w+Math.imul(ae,Sn)|0,v=v+Math.imul(ae,xn)|0,B=B+Math.imul(F,In)|0,w=w+Math.imul(F,Nn)|0,w=w+Math.imul(Z,In)|0,v=v+Math.imul(Z,Nn)|0;var Ty=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Ty>>>26)|0,Ty&=67108863,B=Math.imul(te,Ze),w=Math.imul(te,Je),w=w+Math.imul(ie,Ze)|0,v=Math.imul(ie,Je),B=B+Math.imul(I,nt)|0,w=w+Math.imul(I,pn)|0,w=w+Math.imul(K,nt)|0,v=v+Math.imul(K,pn)|0,B=B+Math.imul(Ke,gn)|0,w=w+Math.imul(Ke,mn)|0,w=w+Math.imul(L,gn)|0,v=v+Math.imul(L,mn)|0,B=B+Math.imul(Ee,yn)|0,w=w+Math.imul(Ee,wn)|0,w=w+Math.imul(Ne,yn)|0,v=v+Math.imul(Ne,wn)|0,B=B+Math.imul(pe,bn)|0,w=w+Math.imul(pe,En)|0,w=w+Math.imul(ue,bn)|0,v=v+Math.imul(ue,En)|0,B=B+Math.imul(le,vn)|0,w=w+Math.imul(le,Cn)|0,w=w+Math.imul(be,vn)|0,v=v+Math.imul(be,Cn)|0,B=B+Math.imul(ne,_n)|0,w=w+Math.imul(ne,An)|0,w=w+Math.imul(ce,_n)|0,v=v+Math.imul(ce,An)|0,B=B+Math.imul(Qe,Sn)|0,w=w+Math.imul(Qe,xn)|0,w=w+Math.imul(G,Sn)|0,v=v+Math.imul(G,xn)|0,B=B+Math.imul(de,In)|0,w=w+Math.imul(de,Nn)|0,w=w+Math.imul(ae,In)|0,v=v+Math.imul(ae,Nn)|0,B=B+Math.imul(F,Tn)|0,w=w+Math.imul(F,Rn)|0,w=w+Math.imul(Z,Tn)|0,v=v+Math.imul(Z,Rn)|0;var Ry=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Ry>>>26)|0,Ry&=67108863,B=Math.imul(te,nt),w=Math.imul(te,pn),w=w+Math.imul(ie,nt)|0,v=Math.imul(ie,pn),B=B+Math.imul(I,gn)|0,w=w+Math.imul(I,mn)|0,w=w+Math.imul(K,gn)|0,v=v+Math.imul(K,mn)|0,B=B+Math.imul(Ke,yn)|0,w=w+Math.imul(Ke,wn)|0,w=w+Math.imul(L,yn)|0,v=v+Math.imul(L,wn)|0,B=B+Math.imul(Ee,bn)|0,w=w+Math.imul(Ee,En)|0,w=w+Math.imul(Ne,bn)|0,v=v+Math.imul(Ne,En)|0,B=B+Math.imul(pe,vn)|0,w=w+Math.imul(pe,Cn)|0,w=w+Math.imul(ue,vn)|0,v=v+Math.imul(ue,Cn)|0,B=B+Math.imul(le,_n)|0,w=w+Math.imul(le,An)|0,w=w+Math.imul(be,_n)|0,v=v+Math.imul(be,An)|0,B=B+Math.imul(ne,Sn)|0,w=w+Math.imul(ne,xn)|0,w=w+Math.imul(ce,Sn)|0,v=v+Math.imul(ce,xn)|0,B=B+Math.imul(Qe,In)|0,w=w+Math.imul(Qe,Nn)|0,w=w+Math.imul(G,In)|0,v=v+Math.imul(G,Nn)|0,B=B+Math.imul(de,Tn)|0,w=w+Math.imul(de,Rn)|0,w=w+Math.imul(ae,Tn)|0,v=v+Math.imul(ae,Rn)|0;var Oy=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Oy>>>26)|0,Oy&=67108863,B=Math.imul(te,gn),w=Math.imul(te,mn),w=w+Math.imul(ie,gn)|0,v=Math.imul(ie,mn),B=B+Math.imul(I,yn)|0,w=w+Math.imul(I,wn)|0,w=w+Math.imul(K,yn)|0,v=v+Math.imul(K,wn)|0,B=B+Math.imul(Ke,bn)|0,w=w+Math.imul(Ke,En)|0,w=w+Math.imul(L,bn)|0,v=v+Math.imul(L,En)|0,B=B+Math.imul(Ee,vn)|0,w=w+Math.imul(Ee,Cn)|0,w=w+Math.imul(Ne,vn)|0,v=v+Math.imul(Ne,Cn)|0,B=B+Math.imul(pe,_n)|0,w=w+Math.imul(pe,An)|0,w=w+Math.imul(ue,_n)|0,v=v+Math.imul(ue,An)|0,B=B+Math.imul(le,Sn)|0,w=w+Math.imul(le,xn)|0,w=w+Math.imul(be,Sn)|0,v=v+Math.imul(be,xn)|0,B=B+Math.imul(ne,In)|0,w=w+Math.imul(ne,Nn)|0,w=w+Math.imul(ce,In)|0,v=v+Math.imul(ce,Nn)|0,B=B+Math.imul(Qe,Tn)|0,w=w+Math.imul(Qe,Rn)|0,w=w+Math.imul(G,Tn)|0,v=v+Math.imul(G,Rn)|0;var Py=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Py>>>26)|0,Py&=67108863,B=Math.imul(te,yn),w=Math.imul(te,wn),w=w+Math.imul(ie,yn)|0,v=Math.imul(ie,wn),B=B+Math.imul(I,bn)|0,w=w+Math.imul(I,En)|0,w=w+Math.imul(K,bn)|0,v=v+Math.imul(K,En)|0,B=B+Math.imul(Ke,vn)|0,w=w+Math.imul(Ke,Cn)|0,w=w+Math.imul(L,vn)|0,v=v+Math.imul(L,Cn)|0,B=B+Math.imul(Ee,_n)|0,w=w+Math.imul(Ee,An)|0,w=w+Math.imul(Ne,_n)|0,v=v+Math.imul(Ne,An)|0,B=B+Math.imul(pe,Sn)|0,w=w+Math.imul(pe,xn)|0,w=w+Math.imul(ue,Sn)|0,v=v+Math.imul(ue,xn)|0,B=B+Math.imul(le,In)|0,w=w+Math.imul(le,Nn)|0,w=w+Math.imul(be,In)|0,v=v+Math.imul(be,Nn)|0,B=B+Math.imul(ne,Tn)|0,w=w+Math.imul(ne,Rn)|0,w=w+Math.imul(ce,Tn)|0,v=v+Math.imul(ce,Rn)|0;var ky=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(ky>>>26)|0,ky&=67108863,B=Math.imul(te,bn),w=Math.imul(te,En),w=w+Math.imul(ie,bn)|0,v=Math.imul(ie,En),B=B+Math.imul(I,vn)|0,w=w+Math.imul(I,Cn)|0,w=w+Math.imul(K,vn)|0,v=v+Math.imul(K,Cn)|0,B=B+Math.imul(Ke,_n)|0,w=w+Math.imul(Ke,An)|0,w=w+Math.imul(L,_n)|0,v=v+Math.imul(L,An)|0,B=B+Math.imul(Ee,Sn)|0,w=w+Math.imul(Ee,xn)|0,w=w+Math.imul(Ne,Sn)|0,v=v+Math.imul(Ne,xn)|0,B=B+Math.imul(pe,In)|0,w=w+Math.imul(pe,Nn)|0,w=w+Math.imul(ue,In)|0,v=v+Math.imul(ue,Nn)|0,B=B+Math.imul(le,Tn)|0,w=w+Math.imul(le,Rn)|0,w=w+Math.imul(be,Tn)|0,v=v+Math.imul(be,Rn)|0;var By=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(By>>>26)|0,By&=67108863,B=Math.imul(te,vn),w=Math.imul(te,Cn),w=w+Math.imul(ie,vn)|0,v=Math.imul(ie,Cn),B=B+Math.imul(I,_n)|0,w=w+Math.imul(I,An)|0,w=w+Math.imul(K,_n)|0,v=v+Math.imul(K,An)|0,B=B+Math.imul(Ke,Sn)|0,w=w+Math.imul(Ke,xn)|0,w=w+Math.imul(L,Sn)|0,v=v+Math.imul(L,xn)|0,B=B+Math.imul(Ee,In)|0,w=w+Math.imul(Ee,Nn)|0,w=w+Math.imul(Ne,In)|0,v=v+Math.imul(Ne,Nn)|0,B=B+Math.imul(pe,Tn)|0,w=w+Math.imul(pe,Rn)|0,w=w+Math.imul(ue,Tn)|0,v=v+Math.imul(ue,Rn)|0;var Dy=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Dy>>>26)|0,Dy&=67108863,B=Math.imul(te,_n),w=Math.imul(te,An),w=w+Math.imul(ie,_n)|0,v=Math.imul(ie,An),B=B+Math.imul(I,Sn)|0,w=w+Math.imul(I,xn)|0,w=w+Math.imul(K,Sn)|0,v=v+Math.imul(K,xn)|0,B=B+Math.imul(Ke,In)|0,w=w+Math.imul(Ke,Nn)|0,w=w+Math.imul(L,In)|0,v=v+Math.imul(L,Nn)|0,B=B+Math.imul(Ee,Tn)|0,w=w+Math.imul(Ee,Rn)|0,w=w+Math.imul(Ne,Tn)|0,v=v+Math.imul(Ne,Rn)|0;var Uy=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(Uy>>>26)|0,Uy&=67108863,B=Math.imul(te,Sn),w=Math.imul(te,xn),w=w+Math.imul(ie,Sn)|0,v=Math.imul(ie,xn),B=B+Math.imul(I,In)|0,w=w+Math.imul(I,Nn)|0,w=w+Math.imul(K,In)|0,v=v+Math.imul(K,Nn)|0,B=B+Math.imul(Ke,Tn)|0,w=w+Math.imul(Ke,Rn)|0,w=w+Math.imul(L,Tn)|0,v=v+Math.imul(L,Rn)|0;var My=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+(My>>>26)|0,My&=67108863,B=Math.imul(te,In),w=Math.imul(te,Nn),w=w+Math.imul(ie,In)|0,v=Math.imul(ie,Nn),B=B+Math.imul(I,Tn)|0,w=w+Math.imul(I,Rn)|0,w=w+Math.imul(K,Tn)|0,v=v+Math.imul(K,Rn)|0;var $y=(M+B|0)+((w&8191)<<13)|0;M=(v+(w>>>13)|0)+($y>>>26)|0,$y&=67108863,B=Math.imul(te,Tn),w=Math.imul(te,Rn),w=w+Math.imul(ie,Tn)|0,v=Math.imul(ie,Rn);var Ly=(M+B|0)+((w&8191)<<13)|0;return M=(v+(w>>>13)|0)+(Ly>>>26)|0,Ly&=67108863,k[0]=vy,k[1]=Cy,k[2]=_y,k[3]=Ay,k[4]=Sy,k[5]=xy,k[6]=Iy,k[7]=Ny,k[8]=Ty,k[9]=Ry,k[10]=Oy,k[11]=Py,k[12]=ky,k[13]=By,k[14]=Dy,k[15]=Uy,k[16]=My,k[17]=$y,k[18]=Ly,M!==0&&(k[19]=M,b.length++),b};Math.imul||(R=S);function C(_,p,g){g.negative=p.negative^_.negative,g.length=_.length+p.length;for(var b=0,x=0,O=0;O<g.length-1;O++){var k=x;x=0;for(var M=b&67108863,B=Math.min(O,p.length-1),w=Math.max(0,O-_.length+1);w<=B;w++){var v=O-w,D=_.words[v]|0,F=p.words[w]|0,Z=D*F,ee=Z&67108863;k=k+(Z/67108864|0)|0,ee=ee+M|0,M=ee&67108863,k=k+(ee>>>26)|0,x+=k>>>26,k&=67108863}g.words[O]=M,b=k,k=x}return b!==0?g.words[O]=b:g.length--,g._strip()}function T(_,p,g){return C(_,p,g)}i.prototype.mulTo=function(p,g){var b,x=this.length+p.length;return this.length===10&&p.length===10?b=R(this,p,g):x<63?b=S(this,p,g):x<1024?b=C(this,p,g):b=T(this,p,g),b},i.prototype.mul=function(p){var g=new i(null);return g.words=new Array(this.length+p.length),this.mulTo(p,g)},i.prototype.mulf=function(p){var g=new i(null);return g.words=new Array(this.length+p.length),T(this,p,g)},i.prototype.imul=function(p){return this.clone().mulTo(p,this)},i.prototype.imuln=function(p){var g=p<0;g&&(p=-p),r(typeof p=="number"),r(p<67108864);for(var b=0,x=0;x<this.length;x++){var O=(this.words[x]|0)*p,k=(O&67108863)+(b&67108863);b>>=26,b+=O/67108864|0,b+=k>>>26,this.words[x]=k&67108863}return b!==0&&(this.words[x]=b,this.length++),this.length=p===0?1:this.length,g?this.ineg():this},i.prototype.muln=function(p){return this.clone().imuln(p)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(p){var g=E(p);if(g.length===0)return new i(1);for(var b=this,x=0;x<g.length&&g[x]===0;x++,b=b.sqr());if(++x<g.length)for(var O=b.sqr();x<g.length;x++,O=O.sqr())g[x]!==0&&(b=b.mul(O));return b},i.prototype.iushln=function(p){r(typeof p=="number"&&p>=0);var g=p%26,b=(p-g)/26,x=67108863>>>26-g<<26-g,O;if(g!==0){var k=0;for(O=0;O<this.length;O++){var M=this.words[O]&x,B=(this.words[O]|0)-M<<g;this.words[O]=B|k,k=M>>>26-g}k&&(this.words[O]=k,this.length++)}if(b!==0){for(O=this.length-1;O>=0;O--)this.words[O+b]=this.words[O];for(O=0;O<b;O++)this.words[O]=0;this.length+=b}return this._strip()},i.prototype.ishln=function(p){return r(this.negative===0),this.iushln(p)},i.prototype.iushrn=function(p,g,b){r(typeof p=="number"&&p>=0);var x;g?x=(g-g%26)/26:x=0;var O=p%26,k=Math.min((p-O)/26,this.length),M=67108863^67108863>>>O<<O,B=b;if(x-=k,x=Math.max(0,x),B){for(var w=0;w<k;w++)B.words[w]=this.words[w];B.length=k}if(k!==0)if(this.length>k)for(this.length-=k,w=0;w<this.length;w++)this.words[w]=this.words[w+k];else this.words[0]=0,this.length=1;var v=0;for(w=this.length-1;w>=0&&(v!==0||w>=x);w--){var D=this.words[w]|0;this.words[w]=v<<26-O|D>>>O,v=D&M}return B&&v!==0&&(B.words[B.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(p,g,b){return r(this.negative===0),this.iushrn(p,g,b)},i.prototype.shln=function(p){return this.clone().ishln(p)},i.prototype.ushln=function(p){return this.clone().iushln(p)},i.prototype.shrn=function(p){return this.clone().ishrn(p)},i.prototype.ushrn=function(p){return this.clone().iushrn(p)},i.prototype.testn=function(p){r(typeof p=="number"&&p>=0);var g=p%26,b=(p-g)/26,x=1<<g;if(this.length<=b)return!1;var O=this.words[b];return!!(O&x)},i.prototype.imaskn=function(p){r(typeof p=="number"&&p>=0);var g=p%26,b=(p-g)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(g!==0&&b++,this.length=Math.min(b,this.length),g!==0){var x=67108863^67108863>>>g<<g;this.words[this.length-1]&=x}return this._strip()},i.prototype.maskn=function(p){return this.clone().imaskn(p)},i.prototype.iaddn=function(p){return r(typeof p=="number"),r(p<67108864),p<0?this.isubn(-p):this.negative!==0?this.length===1&&(this.words[0]|0)<=p?(this.words[0]=p-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(p),this.negative=1,this):this._iaddn(p)},i.prototype._iaddn=function(p){this.words[0]+=p;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},i.prototype.isubn=function(p){if(r(typeof p=="number"),r(p<67108864),p<0)return this.iaddn(-p);if(this.negative!==0)return this.negative=0,this.iaddn(p),this.negative=1,this;if(this.words[0]-=p,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},i.prototype.addn=function(p){return this.clone().iaddn(p)},i.prototype.subn=function(p){return this.clone().isubn(p)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(p,g,b){var x=p.length+b,O;this._expand(x);var k,M=0;for(O=0;O<p.length;O++){k=(this.words[O+b]|0)+M;var B=(p.words[O]|0)*g;k-=B&67108863,M=(k>>26)-(B/67108864|0),this.words[O+b]=k&67108863}for(;O<this.length-b;O++)k=(this.words[O+b]|0)+M,M=k>>26,this.words[O+b]=k&67108863;if(M===0)return this._strip();for(r(M===-1),M=0,O=0;O<this.length;O++)k=-(this.words[O]|0)+M,M=k>>26,this.words[O]=k&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(p,g){var b=this.length-p.length,x=this.clone(),O=p,k=O.words[O.length-1]|0,M=this._countBits(k);b=26-M,b!==0&&(O=O.ushln(b),x.iushln(b),k=O.words[O.length-1]|0);var B=x.length-O.length,w;if(g!=="mod"){w=new i(null),w.length=B+1,w.words=new Array(w.length);for(var v=0;v<w.length;v++)w.words[v]=0}var D=x.clone()._ishlnsubmul(O,1,B);D.negative===0&&(x=D,w&&(w.words[B]=1));for(var F=B-1;F>=0;F--){var Z=(x.words[O.length+F]|0)*67108864+(x.words[O.length+F-1]|0);for(Z=Math.min(Z/k|0,67108863),x._ishlnsubmul(O,Z,F);x.negative!==0;)Z--,x.negative=0,x._ishlnsubmul(O,1,F),x.isZero()||(x.negative^=1);w&&(w.words[F]=Z)}return w&&w._strip(),x._strip(),g!=="div"&&b!==0&&x.iushrn(b),{div:w||null,mod:x}},i.prototype.divmod=function(p,g,b){if(r(!p.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var x,O,k;return this.negative!==0&&p.negative===0?(k=this.neg().divmod(p,g),g!=="mod"&&(x=k.div.neg()),g!=="div"&&(O=k.mod.neg(),b&&O.negative!==0&&O.iadd(p)),{div:x,mod:O}):this.negative===0&&p.negative!==0?(k=this.divmod(p.neg(),g),g!=="mod"&&(x=k.div.neg()),{div:x,mod:k.mod}):(this.negative&p.negative)!==0?(k=this.neg().divmod(p.neg(),g),g!=="div"&&(O=k.mod.neg(),b&&O.negative!==0&&O.isub(p)),{div:k.div,mod:O}):p.length>this.length||this.cmp(p)<0?{div:new i(0),mod:this}:p.length===1?g==="div"?{div:this.divn(p.words[0]),mod:null}:g==="mod"?{div:null,mod:new i(this.modrn(p.words[0]))}:{div:this.divn(p.words[0]),mod:new i(this.modrn(p.words[0]))}:this._wordDiv(p,g)},i.prototype.div=function(p){return this.divmod(p,"div",!1).div},i.prototype.mod=function(p){return this.divmod(p,"mod",!1).mod},i.prototype.umod=function(p){return this.divmod(p,"mod",!0).mod},i.prototype.divRound=function(p){var g=this.divmod(p);if(g.mod.isZero())return g.div;var b=g.div.negative!==0?g.mod.isub(p):g.mod,x=p.ushrn(1),O=p.andln(1),k=b.cmp(x);return k<0||O===1&&k===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},i.prototype.modrn=function(p){var g=p<0;g&&(p=-p),r(p<=67108863);for(var b=(1<<26)%p,x=0,O=this.length-1;O>=0;O--)x=(b*x+(this.words[O]|0))%p;return g?-x:x},i.prototype.modn=function(p){return this.modrn(p)},i.prototype.idivn=function(p){var g=p<0;g&&(p=-p),r(p<=67108863);for(var b=0,x=this.length-1;x>=0;x--){var O=(this.words[x]|0)+b*67108864;this.words[x]=O/p|0,b=O%p}return this._strip(),g?this.ineg():this},i.prototype.divn=function(p){return this.clone().idivn(p)},i.prototype.egcd=function(p){r(p.negative===0),r(!p.isZero());var g=this,b=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var x=new i(1),O=new i(0),k=new i(0),M=new i(1),B=0;g.isEven()&&b.isEven();)g.iushrn(1),b.iushrn(1),++B;for(var w=b.clone(),v=g.clone();!g.isZero();){for(var D=0,F=1;(g.words[0]&F)===0&&D<26;++D,F<<=1);if(D>0)for(g.iushrn(D);D-- >0;)(x.isOdd()||O.isOdd())&&(x.iadd(w),O.isub(v)),x.iushrn(1),O.iushrn(1);for(var Z=0,ee=1;(b.words[0]&ee)===0&&Z<26;++Z,ee<<=1);if(Z>0)for(b.iushrn(Z);Z-- >0;)(k.isOdd()||M.isOdd())&&(k.iadd(w),M.isub(v)),k.iushrn(1),M.iushrn(1);g.cmp(b)>=0?(g.isub(b),x.isub(k),O.isub(M)):(b.isub(g),k.isub(x),M.isub(O))}return{a:k,b:M,gcd:b.iushln(B)}},i.prototype._invmp=function(p){r(p.negative===0),r(!p.isZero());var g=this,b=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var x=new i(1),O=new i(0),k=b.clone();g.cmpn(1)>0&&b.cmpn(1)>0;){for(var M=0,B=1;(g.words[0]&B)===0&&M<26;++M,B<<=1);if(M>0)for(g.iushrn(M);M-- >0;)x.isOdd()&&x.iadd(k),x.iushrn(1);for(var w=0,v=1;(b.words[0]&v)===0&&w<26;++w,v<<=1);if(w>0)for(b.iushrn(w);w-- >0;)O.isOdd()&&O.iadd(k),O.iushrn(1);g.cmp(b)>=0?(g.isub(b),x.isub(O)):(b.isub(g),O.isub(x))}var D;return g.cmpn(1)===0?D=x:D=O,D.cmpn(0)<0&&D.iadd(p),D},i.prototype.gcd=function(p){if(this.isZero())return p.abs();if(p.isZero())return this.abs();var g=this.clone(),b=p.clone();g.negative=0,b.negative=0;for(var x=0;g.isEven()&&b.isEven();x++)g.iushrn(1),b.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;b.isEven();)b.iushrn(1);var O=g.cmp(b);if(O<0){var k=g;g=b,b=k}else if(O===0||b.cmpn(1)===0)break;g.isub(b)}while(!0);return b.iushln(x)},i.prototype.invm=function(p){return this.egcd(p).a.umod(p)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(p){return this.words[0]&p},i.prototype.bincn=function(p){r(typeof p=="number");var g=p%26,b=(p-g)/26,x=1<<g;if(this.length<=b)return this._expand(b+1),this.words[b]|=x,this;for(var O=x,k=b;O!==0&&k<this.length;k++){var M=this.words[k]|0;M+=O,O=M>>>26,M&=67108863,this.words[k]=M}return O!==0&&(this.words[k]=O,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(p){var g=p<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var b;if(this.length>1)b=1;else{g&&(p=-p),r(p<=67108863,"Number is too big");var x=this.words[0]|0;b=x===p?0:x<p?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(p){if(this.negative!==0&&p.negative===0)return-1;if(this.negative===0&&p.negative!==0)return 1;var g=this.ucmp(p);return this.negative!==0?-g|0:g},i.prototype.ucmp=function(p){if(this.length>p.length)return 1;if(this.length<p.length)return-1;for(var g=0,b=this.length-1;b>=0;b--){var x=this.words[b]|0,O=p.words[b]|0;if(x!==O){x<O?g=-1:x>O&&(g=1);break}}return g},i.prototype.gtn=function(p){return this.cmpn(p)===1},i.prototype.gt=function(p){return this.cmp(p)===1},i.prototype.gten=function(p){return this.cmpn(p)>=0},i.prototype.gte=function(p){return this.cmp(p)>=0},i.prototype.ltn=function(p){return this.cmpn(p)===-1},i.prototype.lt=function(p){return this.cmp(p)===-1},i.prototype.lten=function(p){return this.cmpn(p)<=0},i.prototype.lte=function(p){return this.cmp(p)<=0},i.prototype.eqn=function(p){return this.cmpn(p)===0},i.prototype.eq=function(p){return this.cmp(p)===0},i.red=function(p){return new W(p)},i.prototype.toRed=function(p){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),p.convertTo(this)._forceRed(p)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(p){return this.red=p,this},i.prototype.forceRed=function(p){return r(!this.red,"Already a number in reduction context"),this._forceRed(p)},i.prototype.redAdd=function(p){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,p)},i.prototype.redIAdd=function(p){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,p)},i.prototype.redSub=function(p){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,p)},i.prototype.redISub=function(p){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,p)},i.prototype.redShl=function(p){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,p)},i.prototype.redMul=function(p){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.mul(this,p)},i.prototype.redIMul=function(p){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.imul(this,p)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(p){return r(this.red&&!p.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,p)};var N={k256:null,p224:null,p192:null,p25519:null};function U(_,p){this.name=_,this.p=new i(p,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var p=new i(null);return p.words=new Array(Math.ceil(this.n/13)),p},U.prototype.ireduce=function(p){var g=p,b;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),b=g.bitLength();while(b>this.n);var x=b<this.n?-1:g.ucmp(this.p);return x===0?(g.words[0]=0,g.length=1):x>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},U.prototype.split=function(p,g){p.iushrn(this.n,0,g)},U.prototype.imulK=function(p){return p.imul(this.k)};function q(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(q,U),q.prototype.split=function(p,g){for(var b=4194303,x=Math.min(p.length,9),O=0;O<x;O++)g.words[O]=p.words[O];if(g.length=x,p.length<=9){p.words[0]=0,p.length=1;return}var k=p.words[9];for(g.words[g.length++]=k&b,O=10;O<p.length;O++){var M=p.words[O]|0;p.words[O-10]=(M&b)<<4|k>>>22,k=M}k>>>=22,p.words[O-10]=k,k===0&&p.length>10?p.length-=10:p.length-=9},q.prototype.imulK=function(p){p.words[p.length]=0,p.words[p.length+1]=0,p.length+=2;for(var g=0,b=0;b<p.length;b++){var x=p.words[b]|0;g+=x*977,p.words[b]=g&67108863,g=x*64+(g/67108864|0)}return p.words[p.length-1]===0&&(p.length--,p.words[p.length-1]===0&&p.length--),p};function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(H,U);function P(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(P,U);function $(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s($,U),$.prototype.imulK=function(p){for(var g=0,b=0;b<p.length;b++){var x=(p.words[b]|0)*19+g,O=x&67108863;x>>>=26,p.words[b]=O,g=x}return g!==0&&(p.words[p.length++]=g),p},i._prime=function(p){if(N[p])return N[p];var g;if(p==="k256")g=new q;else if(p==="p224")g=new H;else if(p==="p192")g=new P;else if(p==="p25519")g=new $;else throw new Error("Unknown prime "+p);return N[p]=g,g};function W(_){if(typeof _=="string"){var p=i._prime(_);this.m=p.p,this.prime=p}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}W.prototype._verify1=function(p){r(p.negative===0,"red works only with positives"),r(p.red,"red works only with red numbers")},W.prototype._verify2=function(p,g){r((p.negative|g.negative)===0,"red works only with positives"),r(p.red&&p.red===g.red,"red works only with red numbers")},W.prototype.imod=function(p){return this.prime?this.prime.ireduce(p)._forceRed(this):(l(p,p.umod(this.m)._forceRed(this)),p)},W.prototype.neg=function(p){return p.isZero()?p.clone():this.m.sub(p)._forceRed(this)},W.prototype.add=function(p,g){this._verify2(p,g);var b=p.add(g);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},W.prototype.iadd=function(p,g){this._verify2(p,g);var b=p.iadd(g);return b.cmp(this.m)>=0&&b.isub(this.m),b},W.prototype.sub=function(p,g){this._verify2(p,g);var b=p.sub(g);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},W.prototype.isub=function(p,g){this._verify2(p,g);var b=p.isub(g);return b.cmpn(0)<0&&b.iadd(this.m),b},W.prototype.shl=function(p,g){return this._verify1(p),this.imod(p.ushln(g))},W.prototype.imul=function(p,g){return this._verify2(p,g),this.imod(p.imul(g))},W.prototype.mul=function(p,g){return this._verify2(p,g),this.imod(p.mul(g))},W.prototype.isqr=function(p){return this.imul(p,p.clone())},W.prototype.sqr=function(p){return this.mul(p,p)},W.prototype.sqrt=function(p){if(p.isZero())return p.clone();var g=this.m.andln(3);if(r(g%2===1),g===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(p,b)}for(var x=this.m.subn(1),O=0;!x.isZero()&&x.andln(1)===0;)O++,x.iushrn(1);r(!x.isZero());var k=new i(1).toRed(this),M=k.redNeg(),B=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new i(2*w*w).toRed(this);this.pow(w,B).cmp(M)!==0;)w.redIAdd(M);for(var v=this.pow(w,x),D=this.pow(p,x.addn(1).iushrn(1)),F=this.pow(p,x),Z=O;F.cmp(k)!==0;){for(var ee=F,de=0;ee.cmp(k)!==0;de++)ee=ee.redSqr();r(de<Z);var ae=this.pow(v,new i(1).iushln(Z-de-1));D=D.redMul(ae),v=ae.redSqr(),F=F.redMul(v),Z=de}return D},W.prototype.invm=function(p){var g=p._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},W.prototype.pow=function(p,g){if(g.isZero())return new i(1).toRed(this);if(g.cmpn(1)===0)return p.clone();var b=4,x=new Array(1<<b);x[0]=new i(1).toRed(this),x[1]=p;for(var O=2;O<x.length;O++)x[O]=this.mul(x[O-1],p);var k=x[0],M=0,B=0,w=g.bitLength()%26;for(w===0&&(w=26),O=g.length-1;O>=0;O--){for(var v=g.words[O],D=w-1;D>=0;D--){var F=v>>D&1;if(k!==x[0]&&(k=this.sqr(k)),F===0&&M===0){B=0;continue}M<<=1,M|=F,B++,!(B!==b&&(O!==0||D!==0))&&(k=this.mul(k,x[M]),B=0,M=0)}w=26}return k},W.prototype.convertTo=function(p){var g=p.umod(this.m);return g===p?g.clone():g},W.prototype.convertFrom=function(p){var g=p.clone();return g.red=null,g},i.mont=function(p){return new z(p)};function z(_){W.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(z,W),z.prototype.convertTo=function(p){return this.imod(p.ushln(this.shift))},z.prototype.convertFrom=function(p){var g=this.imod(p.mul(this.rinv));return g.red=null,g},z.prototype.imul=function(p,g){if(p.isZero()||g.isZero())return p.words[0]=0,p.length=1,p;var b=p.imul(g),x=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=b.isub(x).iushrn(this.shift),k=O;return O.cmp(this.m)>=0?k=O.isub(this.m):O.cmpn(0)<0&&(k=O.iadd(this.m)),k._forceRed(this)},z.prototype.mul=function(p,g){if(p.isZero()||g.isZero())return new i(0)._forceRed(this);var b=p.mul(g),x=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=b.isub(x).iushrn(this.shift),k=O;return O.cmp(this.m)>=0?k=O.isub(this.m):O.cmpn(0)<0&&(k=O.iadd(this.m)),k._forceRed(this)},z.prototype.invm=function(p){var g=this.imod(p._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,gfe)})(z0)),z0.exports}var mfe=uk();const L6=fd(mfe);var E0={exports:{}};var F6;function lk(){return F6||(F6=1,(function(t,e){var n=lC(),r=n.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(o,a,c){return r(o,a,c)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof c=="string"?u.fill(a,c):u.fill(a):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(E0,E0.exports)),E0.exports}var jb,j6;function yfe(){if(j6)return jb;j6=1;var t=lk().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var c=n.length,u=n.charAt(0),l=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function f(y){if((Array.isArray(y)||y instanceof Uint8Array)&&(y=t.from(y)),!t.isBuffer(y))throw new TypeError("Expected Buffer");if(y.length===0)return"";for(var E=0,S=0,R=0,C=y.length;R!==C&&y[R]===0;)R++,E++;for(var T=(C-R)*d+1>>>0,N=new Uint8Array(T);R!==C;){for(var U=y[R],q=0,H=T-1;(U!==0||q<S)&&H!==-1;H--,q++)U+=256*N[H]>>>0,N[H]=U%c>>>0,U=U/c>>>0;if(U!==0)throw new Error("Non-zero carry");S=q,R++}for(var P=T-S;P!==T&&N[P]===0;)P++;for(var $=u.repeat(E);P<T;++P)$+=n.charAt(N[P]);return $}function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return t.alloc(0);for(var E=0,S=0,R=0;y[E]===u;)S++,E++;for(var C=(y.length-E)*l+1>>>0,T=new Uint8Array(C);E<y.length;){var N=y.charCodeAt(E);if(N>255)return;var U=r[N];if(U===255)return;for(var q=0,H=C-1;(U!==0||q<R)&&H!==-1;H--,q++)U+=c*T[H]>>>0,T[H]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");R=q,E++}for(var P=C-R;P!==C&&T[P]===0;)P++;var $=t.allocUnsafe(S+(C-P));$.fill(0,0,S);for(var W=S;P!==C;)$[W++]=T[P++];return $}function m(y){var E=h(y);if(E)return E;throw new Error("Non-base"+c+" character")}return{encode:f,decodeUnsafe:h,decode:m}}return jb=e,jb}var qb,q6;function wfe(){if(q6)return qb;q6=1;var t=yfe(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return qb=t(e),qb}var bfe=wfe();const hr=fd(bfe);function Efe(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function dk(t,...e){if(!Efe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function z6(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vfe(t,e){dk(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const zb=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ji=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Cfe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function fk(t){return typeof t=="string"&&(t=Cfe(t)),dk(t),t}class _fe{clone(){return this._cloneInto()}}function Afe(t){const e=r=>t().update(fk(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Sfe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}const xfe=(t,e,n)=>t&e^~t&n,Ife=(t,e,n)=>t&e^t&n^e&n;class Nfe extends _fe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=zb(this.buffer)}update(e){z6(this);const{view:n,buffer:r,blockLen:s}=this;e=fk(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=zb(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){z6(this),vfe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Sfe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=zb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const Tfe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ka=new Uint32Array(64);class Rfe extends Nfe{constructor(){super(64,32,8,!1),this.A=Pa[0]|0,this.B=Pa[1]|0,this.C=Pa[2]|0,this.D=Pa[3]|0,this.E=Pa[4]|0,this.F=Pa[5]|0,this.G=Pa[6]|0,this.H=Pa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ka[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=ka[d-15],h=ka[d-2],m=ji(f,7)^ji(f,18)^f>>>3,y=ji(h,17)^ji(h,19)^h>>>10;ka[d]=y+ka[d-7]+m+ka[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=ji(a,6)^ji(a,11)^ji(a,25),h=l+f+xfe(a,c,u)+Tfe[d]+ka[d]|0,y=(ji(r,2)^ji(r,13)^ji(r,22))+Ife(r,s,i)|0;l=u,u=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+y|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){ka.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const H6=Afe(()=>new Rfe);var Dt={},Hb,W6;function Ofe(){if(W6)return Hb;W6=1;var t=lk().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var c=n.length,u=n.charAt(0),l=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function f(y){if((Array.isArray(y)||y instanceof Uint8Array)&&(y=t.from(y)),!t.isBuffer(y))throw new TypeError("Expected Buffer");if(y.length===0)return"";for(var E=0,S=0,R=0,C=y.length;R!==C&&y[R]===0;)R++,E++;for(var T=(C-R)*d+1>>>0,N=new Uint8Array(T);R!==C;){for(var U=y[R],q=0,H=T-1;(U!==0||q<S)&&H!==-1;H--,q++)U+=256*N[H]>>>0,N[H]=U%c>>>0,U=U/c>>>0;if(U!==0)throw new Error("Non-zero carry");S=q,R++}for(var P=T-S;P!==T&&N[P]===0;)P++;for(var $=u.repeat(E);P<T;++P)$+=n.charAt(N[P]);return $}function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return t.alloc(0);for(var E=0,S=0,R=0;y[E]===u;)S++,E++;for(var C=(y.length-E)*l+1>>>0,T=new Uint8Array(C);E<y.length;){var N=y.charCodeAt(E);if(N>255)return;var U=r[N];if(U===255)return;for(var q=0,H=C-1;(U!==0||q<R)&&H!==-1;H--,q++)U+=c*T[H]>>>0,T[H]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");R=q,E++}for(var P=C-R;P!==C&&T[P]===0;)P++;var $=t.allocUnsafe(S+(C-P));$.fill(0,0,S);for(var W=S;P!==C;)$[W++]=T[P++];return $}function m(y){var E=h(y);if(E)return E;throw new Error("Non-base"+c+" character")}return{encode:f,decodeUnsafe:h,decode:m}}return Hb=e,Hb}var Wb,V6;function Pfe(){if(V6)return Wb;V6=1;var t=Ofe(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Wb=t(e),Wb}function Wo(t,e,n){return e<=t&&t<=n}function ly(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function kfe(t){for(var e=String(t),n=e.length,r=0,s=[];r<n;){var i=e.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===n-1)s.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),r+=1}else s.push(65533)}r+=1}return s}function Bfe(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Yg=-1;function b_(t){this.tokens=[].slice.call(t)}b_.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Yg},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var od=-1;function Vb(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Zg="utf-8";function Jg(t,e){if(!(this instanceof Jg))return new Jg(t,e);if(t=t!==void 0?String(t).toLowerCase():Zg,t!==Zg)throw new Error("Encoding not supported. Only utf-8 is supported");e=ly(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Jg.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=ly(n),this._streaming||(this._decoder=new Dfe({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var s=new b_(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==od);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===od)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Bfe(i)}};function Xg(t,e){if(!(this instanceof Xg))return new Xg(t,e);if(t=t!==void 0?String(t).toLowerCase():Zg,t!==Zg)throw new Error("Encoding not supported. Only utf-8 is supported");e=ly(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Xg.prototype={encode:function(e,n){e=e?String(e):"",n=ly(n),this._streaming||(this._encoder=new Ufe(this._options)),this._streaming=!!n.stream;for(var r=[],s=new b_(kfe(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==od);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==od;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Dfe(t){var e=t.fatal,n=0,r=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===Yg&&s!==0)return s=0,Vb(e);if(c===Yg)return od;if(s===0){if(Wo(c,0,127))return c;if(Wo(c,194,223))s=1,n=c-192;else if(Wo(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,n=c-224;else if(Wo(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,n=c-240;else return Vb(e);return n=n<<6*s,null}if(!Wo(c,i,o))return n=s=r=0,i=128,o=191,a.prepend(c),Vb(e);if(i=128,o=191,r+=1,n+=c-128<<6*(s-r),r!==s)return null;var u=n;return n=s=r=0,u}}function Ufe(t){t.fatal,this.handler=function(e,n){if(n===Yg)return od;if(Wo(n,0,127))return n;var r,s;Wo(n,128,2047)?(r=1,s=192):Wo(n,2048,65535)?(r=2,s=224):Wo(n,65536,1114111)&&(r=3,s=240);for(var i=[(n>>6*r)+s];r>0;){var o=n>>6*(r-1);i.push(128|o&63),r-=1}return i}}const Mfe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Jg,TextEncoder:Xg},Symbol.toStringTag,{value:"Module"})),$fe=Bm(Mfe);var K6;function Lfe(){if(K6)return Dt;K6=1;var t=Dt&&Dt.__createBinding||(Object.create?(function(P,$,W,z){z===void 0&&(z=W),Object.defineProperty(P,z,{enumerable:!0,get:function(){return $[W]}})}):(function(P,$,W,z){z===void 0&&(z=W),P[z]=$[W]})),e=Dt&&Dt.__setModuleDefault||(Object.create?(function(P,$){Object.defineProperty(P,"default",{enumerable:!0,value:$})}):function(P,$){P.default=$}),n=Dt&&Dt.__decorate||function(P,$,W,z){var _=arguments.length,p=_<3?$:z===null?z=Object.getOwnPropertyDescriptor($,W):z,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(P,$,W,z);else for(var b=P.length-1;b>=0;b--)(g=P[b])&&(p=(_<3?g(p):_>3?g($,W,p):g($,W))||p);return _>3&&p&&Object.defineProperty($,W,p),p},r=Dt&&Dt.__importStar||function(P){if(P&&P.__esModule)return P;var $={};if(P!=null)for(var W in P)W!=="default"&&Object.hasOwnProperty.call(P,W)&&t($,P,W);return e($,P),$},s=Dt&&Dt.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.deserializeUnchecked=Dt.deserialize=Dt.serialize=Dt.BinaryReader=Dt.BinaryWriter=Dt.BorshError=Dt.baseDecode=Dt.baseEncode=void 0;const i=s(uk()),o=s(Pfe()),a=r($fe),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,u=new c("utf-8",{fatal:!0});function l(P){return typeof P=="string"&&(P=Buffer.from(P,"utf8")),o.default.encode(Buffer.from(P))}Dt.baseEncode=l;function d(P){return Buffer.from(o.default.decode(P))}Dt.baseDecode=d;const f=1024;class h extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Dt.BorshError=h;class m{constructor(){this.buf=Buffer.alloc(f),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(f)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default($).toArray("le",64)))}writeBuffer($){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),$,Buffer.alloc(f)]),this.length+=$.length}writeString($){this.maybeResize();const W=Buffer.from($,"utf8");this.writeU32(W.length),this.writeBuffer(W)}writeFixedArray($){this.writeBuffer(Buffer.from($))}writeArray($,W){this.maybeResize(),this.writeU32($.length);for(const z of $)this.maybeResize(),W(z)}toArray(){return this.buf.subarray(0,this.length)}}Dt.BinaryWriter=m;function y(P,$,W){const z=W.value;W.value=function(..._){try{return z.apply(this,_)}catch(p){if(p instanceof RangeError){const g=p.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(g)>=0)throw new h("Reached the end of buffer when deserializing")}throw p}}}class E{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new i.default($,"le")}readU128(){const $=this.readBuffer(16);return new i.default($,"le")}readU256(){const $=this.readBuffer(32);return new i.default($,"le")}readU512(){const $=this.readBuffer(64);return new i.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new h(`Expected buffer length ${$} isn't within bounds`);const W=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,W}readString(){const $=this.readU32(),W=this.readBuffer($);try{return u.decode(W)}catch(z){throw new h(`Error decoding UTF-8 string: ${z}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const W=this.readU32(),z=Array();for(let _=0;_<W;++_)z.push($());return z}}n([y],E.prototype,"readU8",null),n([y],E.prototype,"readU16",null),n([y],E.prototype,"readU32",null),n([y],E.prototype,"readU64",null),n([y],E.prototype,"readU128",null),n([y],E.prototype,"readU256",null),n([y],E.prototype,"readU512",null),n([y],E.prototype,"readString",null),n([y],E.prototype,"readFixedArray",null),n([y],E.prototype,"readArray",null),Dt.BinaryReader=E;function S(P){return P.charAt(0).toUpperCase()+P.slice(1)}function R(P,$,W,z,_){try{if(typeof z=="string")_[`write${S(z)}`](W);else if(z instanceof Array)if(typeof z[0]=="number"){if(W.length!==z[0])throw new h(`Expecting byte array of length ${z[0]}, but got ${W.length} bytes`);_.writeFixedArray(W)}else if(z.length===2&&typeof z[1]=="number"){if(W.length!==z[1])throw new h(`Expecting byte array of length ${z[1]}, but got ${W.length} bytes`);for(let p=0;p<z[1];p++)R(P,null,W[p],z[0],_)}else _.writeArray(W,p=>{R(P,$,p,z[0],_)});else if(z.kind!==void 0)switch(z.kind){case"option":{W==null?_.writeU8(0):(_.writeU8(1),R(P,$,W,z.type,_));break}case"map":{_.writeU32(W.size),W.forEach((p,g)=>{R(P,$,g,z.key,_),R(P,$,p,z.value,_)});break}default:throw new h(`FieldType ${z} unrecognized`)}else C(P,W,_)}catch(p){throw p instanceof h&&p.addToFieldPath($),p}}function C(P,$,W){if(typeof $.borshSerialize=="function"){$.borshSerialize(W);return}const z=P.get($.constructor);if(!z)throw new h(`Class ${$.constructor.name} is missing in schema`);if(z.kind==="struct")z.fields.map(([_,p])=>{R(P,_,$[_],p,W)});else if(z.kind==="enum"){const _=$[z.field];for(let p=0;p<z.values.length;++p){const[g,b]=z.values[p];if(g===_){W.writeU8(p),R(P,g,$[g],b,W);break}}}else throw new h(`Unexpected schema kind: ${z.kind} for ${$.constructor.name}`)}function T(P,$,W=m){const z=new W;return C(P,$,z),z.toArray()}Dt.serialize=T;function N(P,$,W,z){try{if(typeof W=="string")return z[`read${S(W)}`]();if(W instanceof Array){if(typeof W[0]=="number")return z.readFixedArray(W[0]);if(typeof W[1]=="number"){const _=[];for(let p=0;p<W[1];p++)_.push(N(P,null,W[0],z));return _}else return z.readArray(()=>N(P,$,W[0],z))}if(W.kind==="option")return z.readU8()?N(P,$,W.type,z):void 0;if(W.kind==="map"){let _=new Map;const p=z.readU32();for(let g=0;g<p;g++){const b=N(P,$,W.key,z),x=N(P,$,W.value,z);_.set(b,x)}return _}return U(P,W,z)}catch(_){throw _ instanceof h&&_.addToFieldPath($),_}}function U(P,$,W){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(W);const z=P.get($);if(!z)throw new h(`Class ${$.name} is missing in schema`);if(z.kind==="struct"){const _={};for(const[p,g]of P.get($).fields)_[p]=N(P,p,g,W);return new $(_)}if(z.kind==="enum"){const _=W.readU8();if(_>=z.values.length)throw new h(`Enum index: ${_} is out of range`);const[p,g]=z.values[_],b=N(P,p,g,W);return new $({[p]:b})}throw new h(`Unexpected schema kind: ${z.kind} for ${$.constructor.name}`)}function q(P,$,W,z=E){const _=new z(W),p=U(P,$,_);if(_.offset<W.length)throw new h(`Unexpected ${W.length-_.offset} bytes after deserialized data`);return p}Dt.deserialize=q;function H(P,$,W,z=E){const _=new z(W);return U(P,$,_)}return Dt.deserializeUnchecked=H,Dt}var Kb=Lfe(),se={},G6;function Ffe(){if(G6)return se;G6=1,Object.defineProperty(se,"__esModule",{value:!0}),se.s16=se.s8=se.nu64be=se.u48be=se.u40be=se.u32be=se.u24be=se.u16be=se.nu64=se.u48=se.u40=se.u32=se.u24=se.u16=se.u8=se.offset=se.greedy=se.Constant=se.UTF8=se.CString=se.Blob=se.Boolean=se.BitField=se.BitStructure=se.VariantLayout=se.Union=se.UnionLayoutDiscriminator=se.UnionDiscriminator=se.Structure=se.Sequence=se.DoubleBE=se.Double=se.FloatBE=se.Float=se.NearInt64BE=se.NearInt64=se.NearUInt64BE=se.NearUInt64=se.IntBE=se.Int=se.UIntBE=se.UInt=se.OffsetLayout=se.GreedyCount=se.ExternalLayout=se.bindConstructorLayout=se.nameWithProperty=se.Layout=se.uint8ArrayToBuffer=se.checkUint8Array=void 0,se.constant=se.utf8=se.cstr=se.blob=se.unionLayoutDiscriminator=se.union=se.seq=se.bits=se.struct=se.f64be=se.f64=se.f32be=se.f32=se.ns64be=se.s48be=se.s40be=se.s32be=se.s24be=se.s16be=se.ns64=se.s48=se.s40=se.s32=se.s24=void 0;const t=lC();function e(w){if(!(w instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}se.checkUint8Array=e;function n(w){return e(w),t.Buffer.from(w.buffer,w.byteOffset,w.length)}se.uint8ArrayToBuffer=n;let r=class{constructor(v,D){if(!Number.isInteger(v))throw new TypeError("span must be an integer");this.span=v,this.property=D}makeDestinationObject(){return{}}getSpan(v,D){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(v){const D=Object.create(this.constructor.prototype);return Object.assign(D,this),D.property=v,D}fromArray(v){}};se.Layout=r;function s(w,v){return v.property?w+"["+v.property+"]":w}se.nameWithProperty=s;function i(w,v){if(typeof w!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(w,"layout_"))throw new Error("Class is already bound to a layout");if(!(v&&v instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(v,"boundConstructor_"))throw new Error("layout is already bound to a constructor");w.layout_=v,v.boundConstructor_=w,v.makeDestinationObject=(()=>new w),Object.defineProperty(w.prototype,"encode",{value(D,F){return v.encode(this,D,F)},writable:!0}),Object.defineProperty(w,"decode",{value(D,F){return v.decode(D,F)},writable:!0})}se.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}se.ExternalLayout=o;class a extends o{constructor(v=1,D){if(!Number.isInteger(v)||0>=v)throw new TypeError("elementSpan must be a (positive) integer");super(-1,D),this.elementSpan=v}isCount(){return!0}decode(v,D=0){e(v);const F=v.length-D;return Math.floor(F/this.elementSpan)}encode(v,D,F){return 0}}se.GreedyCount=a;class c extends o{constructor(v,D=0,F){if(!(v instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(D))throw new TypeError("offset must be integer or undefined");super(v.span,F||v.property),this.layout=v,this.offset=D}isCount(){return this.layout instanceof u||this.layout instanceof l}decode(v,D=0){return this.layout.decode(v,D+this.offset)}encode(v,D,F=0){return this.layout.encode(v,D,F+this.offset)}}se.OffsetLayout=c;class u extends r{constructor(v,D){if(super(v,D),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(v,D=0){return n(v).readUIntLE(D,this.span)}encode(v,D,F=0){return n(D).writeUIntLE(v,F,this.span),this.span}}se.UInt=u;class l extends r{constructor(v,D){if(super(v,D),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(v,D=0){return n(v).readUIntBE(D,this.span)}encode(v,D,F=0){return n(D).writeUIntBE(v,F,this.span),this.span}}se.UIntBE=l;class d extends r{constructor(v,D){if(super(v,D),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(v,D=0){return n(v).readIntLE(D,this.span)}encode(v,D,F=0){return n(D).writeIntLE(v,F,this.span),this.span}}se.Int=d;class f extends r{constructor(v,D){if(super(v,D),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(v,D=0){return n(v).readIntBE(D,this.span)}encode(v,D,F=0){return n(D).writeIntBE(v,F,this.span),this.span}}se.IntBE=f;const h=Math.pow(2,32);function m(w){const v=Math.floor(w/h),D=w-v*h;return{hi32:v,lo32:D}}function y(w,v){return w*h+v}class E extends r{constructor(v){super(8,v)}decode(v,D=0){const F=n(v),Z=F.readUInt32LE(D),ee=F.readUInt32LE(D+4);return y(ee,Z)}encode(v,D,F=0){const Z=m(v),ee=n(D);return ee.writeUInt32LE(Z.lo32,F),ee.writeUInt32LE(Z.hi32,F+4),8}}se.NearUInt64=E;class S extends r{constructor(v){super(8,v)}decode(v,D=0){const F=n(v),Z=F.readUInt32BE(D),ee=F.readUInt32BE(D+4);return y(Z,ee)}encode(v,D,F=0){const Z=m(v),ee=n(D);return ee.writeUInt32BE(Z.hi32,F),ee.writeUInt32BE(Z.lo32,F+4),8}}se.NearUInt64BE=S;class R extends r{constructor(v){super(8,v)}decode(v,D=0){const F=n(v),Z=F.readUInt32LE(D),ee=F.readInt32LE(D+4);return y(ee,Z)}encode(v,D,F=0){const Z=m(v),ee=n(D);return ee.writeUInt32LE(Z.lo32,F),ee.writeInt32LE(Z.hi32,F+4),8}}se.NearInt64=R;class C extends r{constructor(v){super(8,v)}decode(v,D=0){const F=n(v),Z=F.readInt32BE(D),ee=F.readUInt32BE(D+4);return y(Z,ee)}encode(v,D,F=0){const Z=m(v),ee=n(D);return ee.writeInt32BE(Z.hi32,F),ee.writeUInt32BE(Z.lo32,F+4),8}}se.NearInt64BE=C;class T extends r{constructor(v){super(4,v)}decode(v,D=0){return n(v).readFloatLE(D)}encode(v,D,F=0){return n(D).writeFloatLE(v,F),4}}se.Float=T;class N extends r{constructor(v){super(4,v)}decode(v,D=0){return n(v).readFloatBE(D)}encode(v,D,F=0){return n(D).writeFloatBE(v,F),4}}se.FloatBE=N;class U extends r{constructor(v){super(8,v)}decode(v,D=0){return n(v).readDoubleLE(D)}encode(v,D,F=0){return n(D).writeDoubleLE(v,F),8}}se.Double=U;class q extends r{constructor(v){super(8,v)}decode(v,D=0){return n(v).readDoubleBE(D)}encode(v,D,F=0){return n(D).writeDoubleBE(v,F),8}}se.DoubleBE=q;class H extends r{constructor(v,D,F){if(!(v instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(D instanceof o&&D.isCount()||Number.isInteger(D)&&0<=D))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let Z=-1;!(D instanceof o)&&0<v.span&&(Z=D*v.span),super(Z,F),this.elementLayout=v,this.count=D}getSpan(v,D=0){if(0<=this.span)return this.span;let F=0,Z=this.count;if(Z instanceof o&&(Z=Z.decode(v,D)),0<this.elementLayout.span)F=Z*this.elementLayout.span;else{let ee=0;for(;ee<Z;)F+=this.elementLayout.getSpan(v,D+F),++ee}return F}decode(v,D=0){const F=[];let Z=0,ee=this.count;for(ee instanceof o&&(ee=ee.decode(v,D));Z<ee;)F.push(this.elementLayout.decode(v,D)),D+=this.elementLayout.getSpan(v,D),Z+=1;return F}encode(v,D,F=0){const Z=this.elementLayout,ee=v.reduce((de,ae)=>de+Z.encode(ae,D,F+de),0);return this.count instanceof o&&this.count.encode(v.length,D,F),ee}}se.Sequence=H;class P extends r{constructor(v,D,F){if(!(Array.isArray(v)&&v.reduce((ee,de)=>ee&&de instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof D=="boolean"&&F===void 0&&(F=D,D=void 0);for(const ee of v)if(0>ee.span&&ee.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let Z=-1;try{Z=v.reduce((ee,de)=>ee+de.getSpan(),0)}catch{}super(Z,D),this.fields=v,this.decodePrefixes=!!F}getSpan(v,D=0){if(0<=this.span)return this.span;let F=0;try{F=this.fields.reduce((Z,ee)=>{const de=ee.getSpan(v,D);return D+=de,Z+de},0)}catch{throw new RangeError("indeterminate span")}return F}decode(v,D=0){e(v);const F=this.makeDestinationObject();for(const Z of this.fields)if(Z.property!==void 0&&(F[Z.property]=Z.decode(v,D)),D+=Z.getSpan(v,D),this.decodePrefixes&&v.length===D)break;return F}encode(v,D,F=0){const Z=F;let ee=0,de=0;for(const ae of this.fields){let Oe=ae.span;if(de=0<Oe?Oe:0,ae.property!==void 0){const Qe=v[ae.property];Qe!==void 0&&(de=ae.encode(Qe,D,F),0>Oe&&(Oe=ae.getSpan(D,F)))}ee=F,F+=Oe}return ee+de-Z}fromArray(v){const D=this.makeDestinationObject();for(const F of this.fields)F.property!==void 0&&0<v.length&&(D[F.property]=v.shift());return D}layoutFor(v){if(typeof v!="string")throw new TypeError("property must be string");for(const D of this.fields)if(D.property===v)return D}offsetOf(v){if(typeof v!="string")throw new TypeError("property must be string");let D=0;for(const F of this.fields){if(F.property===v)return D;0>F.span?D=-1:0<=D&&(D+=F.span)}}}se.Structure=P;class ${constructor(v){this.property=v}decode(v,D){throw new Error("UnionDiscriminator is abstract")}encode(v,D,F){throw new Error("UnionDiscriminator is abstract")}}se.UnionDiscriminator=$;class W extends ${constructor(v,D){if(!(v instanceof o&&v.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(D||v.property||"variant"),this.layout=v}decode(v,D){return this.layout.decode(v,D)}encode(v,D,F){return this.layout.encode(v,D,F)}}se.UnionLayoutDiscriminator=W;class z extends r{constructor(v,D,F){let Z;if(v instanceof u||v instanceof l)Z=new W(new c(v));else if(v instanceof o&&v.isCount())Z=new W(v);else if(v instanceof $)Z=v;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(D===void 0&&(D=null),!(D===null||D instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(D!==null){if(0>D.span)throw new Error("defaultLayout must have constant span");D.property===void 0&&(D=D.replicate("content"))}let ee=-1;D&&(ee=D.span,0<=ee&&(v instanceof u||v instanceof l)&&(ee+=Z.layout.span)),super(ee,F),this.discriminator=Z,this.usesPrefixDiscriminator=v instanceof u||v instanceof l,this.defaultLayout=D,this.registry={};let de=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ae){return de(ae)},this.configGetSourceVariant=function(ae){de=ae.bind(this)}}getSpan(v,D=0){if(0<=this.span)return this.span;const F=this.getVariant(v,D);if(!F)throw new Error("unable to determine span for unrecognized variant");return F.getSpan(v,D)}defaultGetSourceVariant(v){if(Object.prototype.hasOwnProperty.call(v,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(v,this.defaultLayout.property))return;const D=this.registry[v[this.discriminator.property]];if(D&&(!D.layout||D.property&&Object.prototype.hasOwnProperty.call(v,D.property)))return D}else for(const D in this.registry){const F=this.registry[D];if(F.property&&Object.prototype.hasOwnProperty.call(v,F.property))return F}throw new Error("unable to infer src variant")}decode(v,D=0){let F;const Z=this.discriminator,ee=Z.decode(v,D),de=this.registry[ee];if(de===void 0){const ae=this.defaultLayout;let Oe=0;this.usesPrefixDiscriminator&&(Oe=Z.layout.span),F=this.makeDestinationObject(),F[Z.property]=ee,F[ae.property]=ae.decode(v,D+Oe)}else F=de.decode(v,D);return F}encode(v,D,F=0){const Z=this.getSourceVariant(v);if(Z===void 0){const ee=this.discriminator,de=this.defaultLayout;let ae=0;return this.usesPrefixDiscriminator&&(ae=ee.layout.span),ee.encode(v[ee.property],D,F),ae+de.encode(v[de.property],D,F+ae)}return Z.encode(v,D,F)}addVariant(v,D,F){const Z=new _(this,v,D,F);return this.registry[v]=Z,Z}getVariant(v,D=0){let F;return v instanceof Uint8Array?F=this.discriminator.decode(v,D):F=v,this.registry[F]}}se.Union=z;class _ extends r{constructor(v,D,F,Z){if(!(v instanceof z))throw new TypeError("union must be a Union");if(!Number.isInteger(D)||0>D)throw new TypeError("variant must be a (non-negative) integer");if(typeof F=="string"&&Z===void 0&&(Z=F,F=null),F){if(!(F instanceof r))throw new TypeError("layout must be a Layout");if(v.defaultLayout!==null&&0<=F.span&&F.span>v.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof Z!="string")throw new TypeError("variant must have a String property")}let ee=v.span;0>v.span&&(ee=F?F.span:0,0<=ee&&v.usesPrefixDiscriminator&&(ee+=v.discriminator.layout.span)),super(ee,Z),this.union=v,this.variant=D,this.layout=F||null}getSpan(v,D=0){if(0<=this.span)return this.span;let F=0;this.union.usesPrefixDiscriminator&&(F=this.union.discriminator.layout.span);let Z=0;return this.layout&&(Z=this.layout.getSpan(v,D+F)),F+Z}decode(v,D=0){const F=this.makeDestinationObject();if(this!==this.union.getVariant(v,D))throw new Error("variant mismatch");let Z=0;return this.union.usesPrefixDiscriminator&&(Z=this.union.discriminator.layout.span),this.layout?F[this.property]=this.layout.decode(v,D+Z):this.property?F[this.property]=!0:this.union.usesPrefixDiscriminator&&(F[this.union.discriminator.property]=this.variant),F}encode(v,D,F=0){let Z=0;if(this.union.usesPrefixDiscriminator&&(Z=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(v,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,D,F);let ee=Z;if(this.layout&&(this.layout.encode(v[this.property],D,F+Z),ee+=this.layout.getSpan(D,F+Z),0<=this.union.span&&ee>this.union.span))throw new Error("encoded variant overruns containing union");return ee}fromArray(v){if(this.layout)return this.layout.fromArray(v)}}se.VariantLayout=_;function p(w){return 0>w&&(w+=4294967296),w}class g extends r{constructor(v,D,F){if(!(v instanceof u||v instanceof l))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof D=="string"&&F===void 0&&(F=D,D=!1),4<v.span)throw new RangeError("word cannot exceed 32 bits");super(v.span,F),this.word=v,this.msb=!!D,this.fields=[];let Z=0;this._packedSetValue=function(ee){return Z=p(ee),this},this._packedGetValue=function(){return Z}}decode(v,D=0){const F=this.makeDestinationObject(),Z=this.word.decode(v,D);this._packedSetValue(Z);for(const ee of this.fields)ee.property!==void 0&&(F[ee.property]=ee.decode(v));return F}encode(v,D,F=0){const Z=this.word.decode(D,F);this._packedSetValue(Z);for(const ee of this.fields)if(ee.property!==void 0){const de=v[ee.property];de!==void 0&&ee.encode(de)}return this.word.encode(this._packedGetValue(),D,F)}addField(v,D){const F=new b(this,v,D);return this.fields.push(F),F}addBoolean(v){const D=new x(this,v);return this.fields.push(D),D}fieldFor(v){if(typeof v!="string")throw new TypeError("property must be string");for(const D of this.fields)if(D.property===v)return D}}se.BitStructure=g;class b{constructor(v,D,F){if(!(v instanceof g))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(D)||0>=D)throw new TypeError("bits must be positive integer");const Z=8*v.span,ee=v.fields.reduce((de,ae)=>de+ae.bits,0);if(D+ee>Z)throw new Error("bits too long for span remainder ("+(Z-ee)+" of "+Z+" remain)");this.container=v,this.bits=D,this.valueMask=(1<<D)-1,D===32&&(this.valueMask=4294967295),this.start=ee,this.container.msb&&(this.start=Z-ee-D),this.wordMask=p(this.valueMask<<this.start),this.property=F}decode(v,D){const F=this.container._packedGetValue();return p(F&this.wordMask)>>>this.start}encode(v){if(typeof v!="number"||!Number.isInteger(v)||v!==p(v&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const D=this.container._packedGetValue(),F=p(v<<this.start);this.container._packedSetValue(p(D&~this.wordMask)|F)}}se.BitField=b;class x extends b{constructor(v,D){super(v,1,D)}decode(v,D){return!!super.decode(v,D)}encode(v){typeof v=="boolean"&&(v=+v),super.encode(v)}}se.Boolean=x;class O extends r{constructor(v,D){if(!(v instanceof o&&v.isCount()||Number.isInteger(v)&&0<=v))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let F=-1;v instanceof o||(F=v),super(F,D),this.length=v}getSpan(v,D){let F=this.span;return 0>F&&(F=this.length.decode(v,D)),F}decode(v,D=0){let F=this.span;return 0>F&&(F=this.length.decode(v,D)),n(v).slice(D,D+F)}encode(v,D,F){let Z=this.length;if(this.length instanceof o&&(Z=v.length),!(v instanceof Uint8Array&&Z===v.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+Z+") Uint8Array as src");if(F+Z>D.length)throw new RangeError("encoding overruns Uint8Array");const ee=n(v);return n(D).write(ee.toString("hex"),F,Z,"hex"),this.length instanceof o&&this.length.encode(Z,D,F),Z}}se.Blob=O;class k extends r{constructor(v){super(-1,v)}getSpan(v,D=0){e(v);let F=D;for(;F<v.length&&v[F]!==0;)F+=1;return 1+F-D}decode(v,D=0){const F=this.getSpan(v,D);return n(v).slice(D,D+F-1).toString("utf-8")}encode(v,D,F=0){typeof v!="string"&&(v=String(v));const Z=t.Buffer.from(v,"utf8"),ee=Z.length;if(F+ee>D.length)throw new RangeError("encoding overruns Buffer");const de=n(D);return Z.copy(de,F),de[F+ee]=0,ee+1}}se.CString=k;class M extends r{constructor(v,D){if(typeof v=="string"&&D===void 0&&(D=v,v=void 0),v===void 0)v=-1;else if(!Number.isInteger(v))throw new TypeError("maxSpan must be an integer");super(-1,D),this.maxSpan=v}getSpan(v,D=0){return e(v),v.length-D}decode(v,D=0){const F=this.getSpan(v,D);if(0<=this.maxSpan&&this.maxSpan<F)throw new RangeError("text length exceeds maxSpan");return n(v).slice(D,D+F).toString("utf-8")}encode(v,D,F=0){typeof v!="string"&&(v=String(v));const Z=t.Buffer.from(v,"utf8"),ee=Z.length;if(0<=this.maxSpan&&this.maxSpan<ee)throw new RangeError("text length exceeds maxSpan");if(F+ee>D.length)throw new RangeError("encoding overruns Buffer");return Z.copy(n(D),F),ee}}se.UTF8=M;class B extends r{constructor(v,D){super(0,D),this.value=v}decode(v,D){return this.value}encode(v,D,F){return 0}}return se.Constant=B,se.greedy=((w,v)=>new a(w,v)),se.offset=((w,v,D)=>new c(w,v,D)),se.u8=(w=>new u(1,w)),se.u16=(w=>new u(2,w)),se.u24=(w=>new u(3,w)),se.u32=(w=>new u(4,w)),se.u40=(w=>new u(5,w)),se.u48=(w=>new u(6,w)),se.nu64=(w=>new E(w)),se.u16be=(w=>new l(2,w)),se.u24be=(w=>new l(3,w)),se.u32be=(w=>new l(4,w)),se.u40be=(w=>new l(5,w)),se.u48be=(w=>new l(6,w)),se.nu64be=(w=>new S(w)),se.s8=(w=>new d(1,w)),se.s16=(w=>new d(2,w)),se.s24=(w=>new d(3,w)),se.s32=(w=>new d(4,w)),se.s40=(w=>new d(5,w)),se.s48=(w=>new d(6,w)),se.ns64=(w=>new R(w)),se.s16be=(w=>new f(2,w)),se.s24be=(w=>new f(3,w)),se.s32be=(w=>new f(4,w)),se.s40be=(w=>new f(5,w)),se.s48be=(w=>new f(6,w)),se.ns64be=(w=>new C(w)),se.f32=(w=>new T(w)),se.f32be=(w=>new N(w)),se.f64=(w=>new U(w)),se.f64be=(w=>new q(w)),se.struct=((w,v,D)=>new P(w,v,D)),se.bits=((w,v,D)=>new g(w,v,D)),se.seq=((w,v,D)=>new H(w,v,D)),se.union=((w,v,D)=>new z(w,v,D)),se.unionLayoutDiscriminator=((w,v)=>new W(w,v)),se.blob=((w,v)=>new O(w,v)),se.cstr=(w=>new k(w)),se.utf8=((w,v)=>new M(w,v)),se.constant=((w,v)=>new B(w,v)),se}var Y=Ffe(),jfe=8078e3,qfe=8078001,zfe=8078004,Hfe=8078005,Wfe=8078006,Vfe=8078011;function hk(t){return Array.isArray(t)?"%5B"+t.map(hk).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Kfe([t,e]){return`${t}=${hk(e)}`}function Gfe(t){const e=Object.entries(t).map(Kfe).join("&");return btoa(e)}function Yfe(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${Gfe(e)}'`),`${n}\``}}var Ml=class extends Error{cause=this.cause;context;constructor(...[t,e]){let n,r;if(e){const{cause:i,...o}=e;i&&(r={cause:i}),Object.keys(o).length>0&&(n=o)}const s=Yfe(t,n);super(s,r),this.context={__code:t,...n},this.name="SolanaError"}};function Zfe(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Jfe(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(Zfe(e,t));return t.write(e,n,0),n}})}function Xfe(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function ol(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Qfe(t,e){if(ol(t)!==ol(e))throw new Ml(zfe);if(ol(t)&&ol(e)&&t.fixedSize!==e.fixedSize)throw new Ml(Hfe,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!ol(t)&&!ol(e)&&t.maxSize!==e.maxSize)throw new Ml(Wfe,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function ehe(t,e,n=0){if(e.length-n<=0)throw new Ml(jfe,{codecDescription:t})}function the(t,e,n,r=0){const s=n.length-r;if(s<e)throw new Ml(qfe,{bytesLength:s,codecDescription:t,expected:e})}function nhe(t,e,n,r){if(r<e||r>n)throw new Ml(Vfe,{codecDescription:t,max:n,min:e,value:r})}function pk(t){return t?.endian!==1}function rhe(t){return Jfe({fixedSize:t.size,write(e,n,r){t.range&&nhe(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,pk(t.config)),n.set(new Uint8Array(s),r),r+t.size}})}function she(t){return Xfe({fixedSize:t.size,read(e,n=0){ehe(t.name,e,n),the(t.name,t.size,e,n);const r=new DataView(ihe(e,n,t.size));return[t.get(r,pk(t.config)),n+t.size]}})}function ihe(t,e,n){const r=t.byteOffset+(e??0),s=n??t.byteLength;return t.buffer.slice(r,r+s)}var ohe=(t={})=>rhe({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),ahe=(t={})=>she({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),che=(t={})=>Qfe(ohe(t),ahe(t));class uhe extends TypeError{constructor(e,n){let r;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function lhe(t){return Cp(t)&&typeof t[Symbol.iterator]=="function"}function Cp(t){return typeof t=="object"&&t!=null}function Qg(t){return Cp(t)&&!Array.isArray(t)}function Oi(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function dhe(t){const{done:e,value:n}=t.next();return e?void 0:n}function fhe(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Oi(r)}\``}=t;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...t,message:c}}function*Y6(t,e,n,r){lhe(t)||(t=[t]);for(const s of t){const i=fhe(s,e,n,r);i&&(yield i)}}function*E_(t,e,n={}){const{path:r=[],branch:s=[t],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s,mask:o};i&&(t=e.coercer(t,a));let c="valid";for(const u of e.validator(t,a))u.explanation=n.message,c="not_valid",yield[u,void 0];for(let[u,l,d]of e.entries(t,a)){const f=E_(l,d,{path:u===void 0?r:[...r,u],branch:u===void 0?s:[...s,l],coerce:i,mask:o,message:n.message});for(const h of f)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):i&&(l=h[1],u===void 0?t=l:t instanceof Map?t.set(u,l):t instanceof Set?t.add(l):Cp(t)&&(l!==void 0||u in t)&&(t[u]=l))}if(c!=="not_valid")for(const u of e.refiner(t,a))u.explanation=n.message,c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,t])}let yo=class{constructor(e){const{type:n,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,u)=>{const l=s(c,u);return Y6(l,u,this,c)}:this.validator=()=>[],i?this.refiner=(c,u)=>{const l=i(c,u);return Y6(l,u,this,c)}:this.refiner=()=>[]}assert(e,n){return hhe(e,this,n)}create(e,n){return Te(e,this,n)}is(e){return gk(e,this)}mask(e,n){return phe(e,this,n)}validate(e,n={}){return _p(e,this,n)}};function hhe(t,e,n){const r=_p(t,e,{message:n});if(r[0])throw r[0]}function Te(t,e,n){const r=_p(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function phe(t,e,n){const r=_p(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function gk(t,e){return!_p(t,e)[0]}function _p(t,e,n={}){const r=E_(t,e,n),s=dhe(r);return s[0]?[new uhe(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Fu(t,e){return new yo({type:t,schema:null,validator:e})}function ghe(){return Fu("any",()=>!0)}function Pe(t){return new yo({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Oi(e)}`}})}function go(){return Fu("boolean",t=>typeof t=="boolean")}function v_(t){return Fu("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Oi(e)}`)}function rn(t){const e=Oi(t),n=typeof t;return new yo({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Oi(r)}`}})}function mhe(){return Fu("never",()=>!1)}function ke(t){return new yo({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function re(){return Fu("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Oi(t)}`)}function et(t){return new yo({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function mk(t,e){return new yo({type:"record",schema:null,*entries(n){if(Cp(n))for(const r in n){const s=n[r];yield[r,r,t],yield[r,s,e]}},validator(n){return Qg(n)||`Expected an object, but received: ${Oi(n)}`},coercer(n){return Qg(n)?{...n}:n}})}function Se(){return Fu("string",t=>typeof t=="string"||`Expected a string, but received: ${Oi(t)}`)}function C_(t){const e=mhe();return new yo({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],t[s]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Oi(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function ye(t){const e=Object.keys(t);return new yo({type:"type",schema:t,*entries(n){if(Cp(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return Qg(n)||`Expected an object, but received: ${Oi(n)}`},coercer(n){return Qg(n)?{...n}:n}})}function Qr(t){const e=t.map(n=>n.type).join(" | ");return new yo({type:"union",schema:null,coercer(n,r){for(const s of t){const[i,o]=s.validate(n,{coerce:!0,mask:r.mask});if(!i)return o}return n},validator(n,r){const s=[];for(const i of t){const[...o]=E_(n,i,r),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Oi(n)}`,...s]}})}function md(){return Fu("unknown",()=>!0)}function Ap(t,e,n){return new yo({...t,coercer:(r,s)=>gk(r,e)?t.coercer(n(r,s),s):t.coercer(r,s)})}var v0,yhe=new Uint8Array(16);function yk(){if(!v0&&(v0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!v0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v0(yhe)}const whe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function dy(t){return typeof t=="string"&&whe.test(t)}var lr=[];for(var Gb=0;Gb<256;++Gb)lr.push((Gb+256).toString(16).substr(1));function fy(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(lr[t[e+0]]+lr[t[e+1]]+lr[t[e+2]]+lr[t[e+3]]+"-"+lr[t[e+4]]+lr[t[e+5]]+"-"+lr[t[e+6]]+lr[t[e+7]]+"-"+lr[t[e+8]]+lr[t[e+9]]+"-"+lr[t[e+10]]+lr[t[e+11]]+lr[t[e+12]]+lr[t[e+13]]+lr[t[e+14]]+lr[t[e+15]]).toLowerCase();if(!dy(n))throw TypeError("Stringified UUID is invalid");return n}var Z6,Yb,Zb=0,Jb=0;function bhe(t,e,n){var r=e&&n||0,s=e||new Array(16);t=t||{};var i=t.node||Z6,o=t.clockseq!==void 0?t.clockseq:Yb;if(i==null||o==null){var a=t.random||(t.rng||yk)();i==null&&(i=Z6=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Yb=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:Jb+1,l=c-Zb+(u-Jb)/1e4;if(l<0&&t.clockseq===void 0&&(o=o+1&16383),(l<0||c>Zb)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Zb=c,Jb=u,Yb=o,c+=122192928e5;var d=((c&268435455)*1e4+u)%4294967296;s[r++]=d>>>24&255,s[r++]=d>>>16&255,s[r++]=d>>>8&255,s[r++]=d&255;var f=c/4294967296*1e4&268435455;s[r++]=f>>>8&255,s[r++]=f&255,s[r++]=f>>>24&15|16,s[r++]=f>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var h=0;h<6;++h)s[r+h]=i[h];return e||fy(s)}function wk(t){if(!dy(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function Ehe(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var vhe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Che="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function bk(t,e,n){function r(s,i,o,a){if(typeof s=="string"&&(s=Ehe(s)),typeof i=="string"&&(i=wk(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=c[u];return o}return fy(c)}try{r.name=t}catch{}return r.DNS=vhe,r.URL=Che,r}function _he(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return Ahe(She(xhe(t),t.length*8))}function Ahe(t){for(var e=[],n=t.length*32,r="0123456789abcdef",s=0;s<n;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);e.push(o)}return e}function Ek(t){return(t+64>>>9<<4)+14+1}function She(t,e){t[e>>5]|=128<<e%32,t[Ek(e)-1]=e;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=n,c=r,u=s,l=i;n=xr(n,r,s,i,t[o],7,-680876936),i=xr(i,n,r,s,t[o+1],12,-389564586),s=xr(s,i,n,r,t[o+2],17,606105819),r=xr(r,s,i,n,t[o+3],22,-1044525330),n=xr(n,r,s,i,t[o+4],7,-176418897),i=xr(i,n,r,s,t[o+5],12,1200080426),s=xr(s,i,n,r,t[o+6],17,-1473231341),r=xr(r,s,i,n,t[o+7],22,-45705983),n=xr(n,r,s,i,t[o+8],7,1770035416),i=xr(i,n,r,s,t[o+9],12,-1958414417),s=xr(s,i,n,r,t[o+10],17,-42063),r=xr(r,s,i,n,t[o+11],22,-1990404162),n=xr(n,r,s,i,t[o+12],7,1804603682),i=xr(i,n,r,s,t[o+13],12,-40341101),s=xr(s,i,n,r,t[o+14],17,-1502002290),r=xr(r,s,i,n,t[o+15],22,1236535329),n=Ir(n,r,s,i,t[o+1],5,-165796510),i=Ir(i,n,r,s,t[o+6],9,-1069501632),s=Ir(s,i,n,r,t[o+11],14,643717713),r=Ir(r,s,i,n,t[o],20,-373897302),n=Ir(n,r,s,i,t[o+5],5,-701558691),i=Ir(i,n,r,s,t[o+10],9,38016083),s=Ir(s,i,n,r,t[o+15],14,-660478335),r=Ir(r,s,i,n,t[o+4],20,-405537848),n=Ir(n,r,s,i,t[o+9],5,568446438),i=Ir(i,n,r,s,t[o+14],9,-1019803690),s=Ir(s,i,n,r,t[o+3],14,-187363961),r=Ir(r,s,i,n,t[o+8],20,1163531501),n=Ir(n,r,s,i,t[o+13],5,-1444681467),i=Ir(i,n,r,s,t[o+2],9,-51403784),s=Ir(s,i,n,r,t[o+7],14,1735328473),r=Ir(r,s,i,n,t[o+12],20,-1926607734),n=Nr(n,r,s,i,t[o+5],4,-378558),i=Nr(i,n,r,s,t[o+8],11,-2022574463),s=Nr(s,i,n,r,t[o+11],16,1839030562),r=Nr(r,s,i,n,t[o+14],23,-35309556),n=Nr(n,r,s,i,t[o+1],4,-1530992060),i=Nr(i,n,r,s,t[o+4],11,1272893353),s=Nr(s,i,n,r,t[o+7],16,-155497632),r=Nr(r,s,i,n,t[o+10],23,-1094730640),n=Nr(n,r,s,i,t[o+13],4,681279174),i=Nr(i,n,r,s,t[o],11,-358537222),s=Nr(s,i,n,r,t[o+3],16,-722521979),r=Nr(r,s,i,n,t[o+6],23,76029189),n=Nr(n,r,s,i,t[o+9],4,-640364487),i=Nr(i,n,r,s,t[o+12],11,-421815835),s=Nr(s,i,n,r,t[o+15],16,530742520),r=Nr(r,s,i,n,t[o+2],23,-995338651),n=Tr(n,r,s,i,t[o],6,-198630844),i=Tr(i,n,r,s,t[o+7],10,1126891415),s=Tr(s,i,n,r,t[o+14],15,-1416354905),r=Tr(r,s,i,n,t[o+5],21,-57434055),n=Tr(n,r,s,i,t[o+12],6,1700485571),i=Tr(i,n,r,s,t[o+3],10,-1894986606),s=Tr(s,i,n,r,t[o+10],15,-1051523),r=Tr(r,s,i,n,t[o+1],21,-2054922799),n=Tr(n,r,s,i,t[o+8],6,1873313359),i=Tr(i,n,r,s,t[o+15],10,-30611744),s=Tr(s,i,n,r,t[o+6],15,-1560198380),r=Tr(r,s,i,n,t[o+13],21,1309151649),n=Tr(n,r,s,i,t[o+4],6,-145523070),i=Tr(i,n,r,s,t[o+11],10,-1120210379),s=Tr(s,i,n,r,t[o+2],15,718787259),r=Tr(r,s,i,n,t[o+9],21,-343485551),n=nc(n,a),r=nc(r,c),s=nc(s,u),i=nc(i,l)}return[n,r,s,i]}function xhe(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(Ek(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function nc(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function Ihe(t,e){return t<<e|t>>>32-e}function hy(t,e,n,r,s,i){return nc(Ihe(nc(nc(e,t),nc(r,i)),s),n)}function xr(t,e,n,r,s,i,o){return hy(e&n|~e&r,t,e,s,i,o)}function Ir(t,e,n,r,s,i,o){return hy(e&r|n&~r,t,e,s,i,o)}function Nr(t,e,n,r,s,i,o){return hy(e^n^r,t,e,s,i,o)}function Tr(t,e,n,r,s,i,o){return hy(n^(e|~r),t,e,s,i,o)}var Nhe=bk("v3",48,_he);function The(t,e,n){t=t||{};var r=t.random||(t.rng||yk)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return fy(r)}function Rhe(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function Xb(t,e){return t<<e|t>>>32-e}function Ohe(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var s=0;s<r.length;++s)t.push(r.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=t[c*64+l*4]<<24|t[c*64+l*4+1]<<16|t[c*64+l*4+2]<<8|t[c*64+l*4+3];a[c]=u}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var f=new Uint32Array(80),h=0;h<16;++h)f[h]=a[d][h];for(var m=16;m<80;++m)f[m]=Xb(f[m-3]^f[m-8]^f[m-14]^f[m-16],1);for(var y=n[0],E=n[1],S=n[2],R=n[3],C=n[4],T=0;T<80;++T){var N=Math.floor(T/20),U=Xb(y,5)+Rhe(N,E,S,R)+C+e[N]+f[T]>>>0;C=R,R=S,S=Xb(E,30)>>>0,E=y,y=U}n[0]=n[0]+y>>>0,n[1]=n[1]+E>>>0,n[2]=n[2]+S>>>0,n[3]=n[3]+R>>>0,n[4]=n[4]+C>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var Phe=bk("v5",80,Ohe);const khe="00000000-0000-0000-0000-000000000000";function Bhe(t){if(!dy(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Dhe=Object.freeze(Object.defineProperty({__proto__:null,NIL:khe,parse:wk,stringify:fy,v1:bhe,v3:Nhe,v4:The,v5:Phe,validate:dy,version:Bhe},Symbol.toStringTag,{value:"Module"})),vk=Bm(Dhe);var Qb,J6;function Uhe(){if(J6)return Qb;J6=1;const t=vk.v4;return Qb=function(n,r,s,i){if(typeof n!="string")throw new TypeError(n+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:n};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof s>"u"){const c=typeof i.generator=="function"?i.generator:function(){return t()};a.id=c(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},Qb}var e1,X6;function Mhe(){if(X6)return e1;X6=1;const t=vk.v4,e=Uhe(),n=function(r,s){if(!(this instanceof n))return new n(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return t()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return e1=n,n.prototype.request=function(r,s,i,o){const a=this;let c=null;const u=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&r&&typeof r=="object"&&typeof s=="function")o=s,c=r;else{typeof i=="function"&&(o=i,i=void 0);const f=typeof o=="function";try{c=e(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(f){o(h);return}throw h}if(!f)return c}let d;try{d=JSON.stringify(c,this.options.replacer)}catch(f){o(f);return}return this.callServer(d,function(f,h){a._parseResponse(f,h,o)}),c},n.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s){i();return}let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){i(a);return}if(i.length===3)if(Array.isArray(o)){const a=function(u){return typeof u.error<"u"},c=function(u){return!a(u)};i(null,o.filter(a),o.filter(c));return}else{i(null,o.error,o.result);return}i(null,o)},e1}var $he=Mhe();const Lhe=fd($he);var Fhe=class extends cC{socket;constructor(t,e){super(),this.socket=new window.WebSocket(t,e.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(t,e,n){const r=n||e;try{this.socket.send(t),r()}catch(s){r(s)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function jhe(t,e){return new Fhe(t,e)}var qhe=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},zhe=class extends cC{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},a,c){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new qhe,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,r){return!r&&typeof n=="object"&&(r=n,n=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(t,e),a={jsonrpc:"2.0",method:t,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),r,c=>{if(c)return i(c);this.queue[o]={promise:[s,i]},n&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket&&this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=gt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const r=[n.notification];if(n.params.constructor===Object)r.push(n.params);else for(let s=0;s<n.params.length;s++)r.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n?.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",n,r),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",n,r),1))})}};vp.utils.randomPrivateKey;vp.getPublicKey;function Q6(t){try{return vp.ExtendedPoint.fromHex(t),!0}catch{return!1}}const Ck=(t,e)=>vp.sign(t,e.slice(0,32)),Hhe=vp.verify,dr=t=>gt.Buffer.isBuffer(t)?t:t instanceof Uint8Array?gt.Buffer.from(t.buffer,t.byteOffset,t.byteLength):gt.Buffer.from(t);class Whe{constructor(e){Object.assign(this,e)}encode(){return gt.Buffer.from(Kb.serialize(H0,this))}static decode(e){return Kb.deserialize(H0,this,e)}static decodeUnchecked(e){return Kb.deserializeUnchecked(H0,this,e)}}const H0=new Map;var _k;const Vhe=32,cc=32;function Khe(t){return t._bn!==void 0}let e5=1;class De extends Whe{constructor(e){if(super({}),this._bn=void 0,Khe(e))this._bn=e._bn;else{if(typeof e=="string"){const n=hr.decode(e);if(n.length!=cc)throw new Error("Invalid public key input");this._bn=new L6(n)}else this._bn=new L6(e);if(this._bn.byteLength()>cc)throw new Error("Invalid public key input")}}static unique(){const e=new De(e5);return e5+=1,new De(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return hr.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(gt.Buffer);if(e.length===cc)return e;const n=gt.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const s=gt.Buffer.concat([e.toBuffer(),gt.Buffer.from(n),r.toBuffer()]),i=H6(s);return new De(i)}static createProgramAddressSync(e,n){let r=gt.Buffer.alloc(0);e.forEach(function(i){if(i.length>Vhe)throw new TypeError("Max seed length exceeded");r=gt.Buffer.concat([r,dr(i)])}),r=gt.Buffer.concat([r,n.toBuffer(),gt.Buffer.from("ProgramDerivedAddress")]);const s=H6(r);if(Q6(s))throw new Error("Invalid seeds, address must fall off the curve");return new De(s)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,s;for(;r!=0;){try{const i=e.concat(gt.Buffer.from([r]));s=this.createProgramAddressSync(i,n)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new De(e);return Q6(n.toBytes())}}_k=De;De.default=new _k("11111111111111111111111111111111");H0.set(De,{kind:"struct",fields:[["_bn","u256"]]});new De("BPFLoader1111111111111111111111111111111111");const $l=1232,__=127,em=64;class Ak extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ak.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Sk extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Sk.prototype,"name",{value:"TransactionExpiredTimeoutError"});class af extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(af.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class tm{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Ct=(t="publicKey")=>Y.blob(32,t),Ghe=(t="signature")=>Y.blob(64,t),yl=(t="string")=>{const e=Y.struct([Y.u32("length"),Y.u32("lengthPadding"),Y.blob(Y.offset(Y.u32(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(i,o)=>n(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:gt.Buffer.from(i,"utf8")};return r(c,o,a)},s.alloc=i=>Y.u32().span+Y.u32().span+gt.Buffer.from(i,"utf8").length,s},Yhe=(t="authorized")=>Y.struct([Ct("staker"),Ct("withdrawer")],t),Zhe=(t="lockup")=>Y.struct([Y.ns64("unixTimestamp"),Y.ns64("epoch"),Ct("custodian")],t),Jhe=(t="voteInit")=>Y.struct([Ct("nodePubkey"),Ct("authorizedVoter"),Ct("authorizedWithdrawer"),Y.u8("commission")],t),Xhe=(t="voteAuthorizeWithSeedArgs")=>Y.struct([Y.u32("voteAuthorizationType"),Ct("currentAuthorityDerivedKeyOwnerPubkey"),yl("currentAuthorityDerivedKeySeed"),Ct("newAuthorized")],t);function xk(t,e){const n=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*n(s.elementLayout)}else if("fields"in s)return xk({layout:s},e[s.property]);return 0};let r=0;return t.layout.fields.forEach(s=>{r+=n(s)}),r}function Rs(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,(r&128)===0)break}return e}function Os(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Xt(t,e){if(!t)throw new Error(e||"Assertion failed")}class py{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,s=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},i=s(n);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new py(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Xt(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Xt(n.length>0,"Expected at least one writable signer key");const[c]=n[0];Xt(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([c])=>new De(c)),...r.map(([c])=>new De(c)),...s.map(([c])=>new De(c)),...i.map(([c])=>new De(c))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,n){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(n(o)){const a=new De(i),c=e.findIndex(u=>u.equals(a));c>=0&&(Xt(c<256,"Max lookup table index exceeded"),r.push(c),s.push(a),this.keyMetaMap.delete(i))}return[r,s]}}const Ik="Reached end of buffer unexpectedly";function Vo(t){if(t.length===0)throw new Error(Ik);return t.shift()}function Ps(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(Ik);return t.splice(...e)}class ua{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new De(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:hr.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new tm(this.staticAccountKeys)}static compile(e){const n=py.compile(e.instructions,e.payerKey),[r,s]=n.getMessageComponents(),o=new tm(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:hr.encode(a.data)}));return new ua({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,i=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Os(n,e);const r=this.instructions.map(d=>{const{accounts:f,programIdIndex:h}=d,m=Array.from(hr.decode(d.data));let y=[];Os(y,f.length);let E=[];return Os(E,m.length),{programIdIndex:h,keyIndicesCount:gt.Buffer.from(y),keyIndices:f,dataLength:gt.Buffer.from(E),data:m}});let s=[];Os(s,r.length);let i=gt.Buffer.alloc($l);gt.Buffer.from(s).copy(i);let o=s.length;r.forEach(d=>{const h=Y.struct([Y.u8("programIdIndex"),Y.blob(d.keyIndicesCount.length,"keyIndicesCount"),Y.seq(Y.u8("keyIndex"),d.keyIndices.length,"keyIndices"),Y.blob(d.dataLength.length,"dataLength"),Y.seq(Y.u8("userdatum"),d.data.length,"data")]).encode(d,i,o);o+=h}),i=i.slice(0,o);const a=Y.struct([Y.blob(1,"numRequiredSignatures"),Y.blob(1,"numReadonlySignedAccounts"),Y.blob(1,"numReadonlyUnsignedAccounts"),Y.blob(n.length,"keyCount"),Y.seq(Ct("key"),e,"keys"),Ct("recentBlockhash")]),c={numRequiredSignatures:gt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:gt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:gt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:gt.Buffer.from(n),keys:this.accountKeys.map(d=>dr(d.toBytes())),recentBlockhash:hr.decode(this.recentBlockhash)};let u=gt.Buffer.alloc(2048);const l=a.encode(c,u);return i.copy(u,l),u.slice(0,l+i.length)}static from(e){let n=[...e];const r=Vo(n);if(r!==(r&__))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Vo(n),i=Vo(n),o=Rs(n);let a=[];for(let f=0;f<o;f++){const h=Ps(n,0,cc);a.push(new De(gt.Buffer.from(h)))}const c=Ps(n,0,cc),u=Rs(n);let l=[];for(let f=0;f<u;f++){const h=Vo(n),m=Rs(n),y=Ps(n,0,m),E=Rs(n),S=Ps(n,0,E),R=hr.encode(gt.Buffer.from(S));l.push({programIdIndex:h,accounts:y,data:R})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:hr.encode(gt.Buffer.from(c)),accountKeys:a,instructions:l};return new ua(d)}}class Lh{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new tm(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=n-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)n.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)n.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=py.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const l of i){const d=n.extractTableLookup(l);if(d!==void 0){const[f,{writable:h,readonly:m}]=d;r.push(f),s.writable.push(...h),s.readonly.push(...m)}}const[o,a]=n.getMessageComponents(),u=new tm(a,s).compileInstructions(e.instructions);return new Lh({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:r})}serialize(){const e=Array();Os(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Os(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Os(i,this.addressTableLookups.length);const o=Y.struct([Y.u8("prefix"),Y.struct([Y.u8("numRequiredSignatures"),Y.u8("numReadonlySignedAccounts"),Y.u8("numReadonlyUnsignedAccounts")],"header"),Y.blob(e.length,"staticAccountKeysLength"),Y.seq(Ct(),this.staticAccountKeys.length,"staticAccountKeys"),Ct("recentBlockhash"),Y.blob(r.length,"instructionsLength"),Y.blob(n.length,"serializedInstructions"),Y.blob(i.length,"addressTableLookupsLength"),Y.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array($l),u=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(l=>l.toBytes()),recentBlockhash:hr.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,u)}serializeInstructions(){let e=0;const n=new Uint8Array($l);for(const r of this.compiledInstructions){const s=Array();Os(s,r.accountKeyIndexes.length);const i=Array();Os(i,r.data.length);const o=Y.struct([Y.u8("programIdIndex"),Y.blob(s.length,"encodedAccountKeyIndexesLength"),Y.seq(Y.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),Y.blob(i.length,"encodedDataLength"),Y.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array($l);for(const r of this.addressTableLookups){const s=Array();Os(s,r.writableIndexes.length);const i=Array();Os(i,r.readonlyIndexes.length);const o=Y.struct([Ct("accountKey"),Y.blob(s.length,"encodedWritableIndexesLength"),Y.seq(Y.u8(),r.writableIndexes.length,"writableIndexes"),Y.blob(i.length,"encodedReadonlyIndexesLength"),Y.seq(Y.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=Vo(n),s=r&__;Xt(r!==s,"Expected versioned message but received legacy message");const i=s;Xt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Vo(n),numReadonlySignedAccounts:Vo(n),numReadonlyUnsignedAccounts:Vo(n)},a=[],c=Rs(n);for(let m=0;m<c;m++)a.push(new De(Ps(n,0,cc)));const u=hr.encode(Ps(n,0,cc)),l=Rs(n),d=[];for(let m=0;m<l;m++){const y=Vo(n),E=Rs(n),S=Ps(n,0,E),R=Rs(n),C=new Uint8Array(Ps(n,0,R));d.push({programIdIndex:y,accountKeyIndexes:S,data:C})}const f=Rs(n),h=[];for(let m=0;m<f;m++){const y=new De(Ps(n,0,cc)),E=Rs(n),S=Ps(n,0,E),R=Rs(n),C=Ps(n,0,R);h.push({accountKey:y,writableIndexes:S,readonlyIndexes:C})}return new Lh({header:o,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:d,addressTableLookups:h})}}const Nk={deserializeMessageVersion(t){const e=t[0],n=e&__;return n===e?"legacy":n},deserialize:t=>{const e=Nk.deserializeMessageVersion(t);if(e==="legacy")return ua.from(t);if(e===0)return Lh.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ba=(function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t})({});const Qhe=gt.Buffer.alloc(em).fill(0);class Xn{constructor(e){this.keys=void 0,this.programId=void 0,this.data=gt.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class nr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Xn(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let y=0;y<n.length;y++)if(n[y].programId===void 0)throw new Error(`Transaction instruction index ${y} has undefined program id`);const s=[],i=[];n.forEach(y=>{y.keys.forEach(S=>{i.push({...S})});const E=y.programId.toString();s.includes(E)||s.push(E)}),s.forEach(y=>{i.push({pubkey:new De(y),isSigner:!1,isWritable:!1})});const o=[];i.forEach(y=>{const E=y.pubkey.toString(),S=o.findIndex(R=>R.pubkey.toString()===E);S>-1?(o[S].isWritable=o[S].isWritable||y.isWritable,o[S].isSigner=o[S].isSigner||y.isSigner):o.push(y)}),o.sort(function(y,E){if(y.isSigner!==E.isSigner)return y.isSigner?-1:1;if(y.isWritable!==E.isWritable)return y.isWritable?-1:1;const S={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return y.pubkey.toBase58().localeCompare(E.pubkey.toBase58(),"en",S)});const a=o.findIndex(y=>y.pubkey.equals(r));if(a>-1){const[y]=o.splice(a,1);y.isSigner=!0,y.isWritable=!0,o.unshift(y)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const y of this.signatures){const E=o.findIndex(S=>S.pubkey.equals(y.publicKey));if(E>-1)o[E].isSigner||(o[E].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${y.publicKey.toString()}`)}let c=0,u=0,l=0;const d=[],f=[];o.forEach(({pubkey:y,isSigner:E,isWritable:S})=>{E?(d.push(y.toString()),c+=1,S||(u+=1)):(f.push(y.toString()),S||(l+=1))});const h=d.concat(f),m=n.map(y=>{const{data:E,programId:S}=y;return{programIdIndex:h.indexOf(S.toString()),accounts:y.keys.map(R=>h.indexOf(R.pubkey.toString())),data:hr.encode(E)}});return m.forEach(y=>{Xt(y.programIdIndex>=0),y.accounts.forEach(E=>Xt(E>=0))}),new ua({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:h,recentBlockhash:e,instructions:m})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((s,i)=>n[i].equals(s.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const s=r.toString();return n.has(s)?!1:(n.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(s=>{const i=Ck(r,s.secretKey);this._addSignature(s.publicKey,dr(i))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Xt(n.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=gt.Buffer.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?n&&(r.missing||=[]).push(i):Hhe(s,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,n);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:n}=this,r=[];Os(r,n.length);const s=r.length+n.length*64+e.length,i=gt.Buffer.alloc(s);return Xt(n.length<256),gt.Buffer.from(r).copy(i,0),n.forEach(({signature:o},a)=>{o!==null&&(Xt(o.length===64,"signature has invalid length"),gt.Buffer.from(o).copy(i,r.length+a*64))}),e.copy(i,r.length+n.length*64),Xt(i.length<=$l,`Transaction too large: ${i.length} > ${$l}`),i}get keys(){return Xt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Xt(this.instructions.length===1),this.instructions[0].programId}get data(){return Xt(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Rs(n);let s=[];for(let i=0;i<r;i++){const o=Ps(n,0,em);s.push(hr.encode(gt.Buffer.from(o)))}return nr.populate(ua.from(n),s)}static populate(e,n=[]){const r=new nr;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((s,i)=>{const o={signature:s==hr.encode(Qhe)?null:hr.decode(s),publicKey:e.accountKeys[i]};r.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Xn({keys:i,programId:e.accountKeys[s.programIdIndex],data:hr.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}}class Cc{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)Xt(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(em));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),n=Array();Os(n,this.signatures.length);const r=Y.struct([Y.blob(n.length,"encodedSignaturesLength"),Y.seq(Ghe(),this.signatures.length,"signatures"),Y.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let n=[...e];const r=[],s=Rs(n);for(let o=0;o<s;o++)r.push(new Uint8Array(Ps(n,0,em)));const i=Nk.deserialize(new Uint8Array(n));return new Cc(i,r)}sign(e){const n=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=r.findIndex(o=>o.equals(s.publicKey));Xt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Ck(n,s.secretKey)}}addSignature(e,n){Xt(n.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Xt(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=n}}const epe=160,tpe=64,npe=epe/tpe,rpe=1e3/npe;new De("SysvarC1ock11111111111111111111111111111111");new De("SysvarEpochSchedu1e111111111111111111111111");new De("Sysvar1nstructions1111111111111111111111111");const t1=new De("SysvarRecentB1ockHashes11111111111111111111"),t5=new De("SysvarRent111111111111111111111111111111111");new De("SysvarRewards111111111111111111111111111111");new De("SysvarS1otHashes111111111111111111111111111");new De("SysvarS1otHistory11111111111111111111111111");new De("SysvarStakeHistory1111111111111111111111111");class nm extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,n(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Ye extends Error{constructor({code:e,message:n,data:r},s){super(s!=null?`${s}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function dl(t){return new Promise(e=>setTimeout(e,t))}function Rr(t,e){const n=t.layout.span>=0?t.layout.span:xk(t,e),r=gt.Buffer.alloc(n),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,r),r}const spe=Y.nu64("lamportsPerSignature"),Tk=Y.struct([Y.u32("version"),Y.u32("state"),Ct("authorizedPubkey"),Ct("nonce"),Y.struct([spe],"feeCalculator")]),n5=Tk.span;class A_{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=Tk.decode(dr(e),0);return new A_({authorizedPubkey:new De(n.authorizedPubkey),nonce:new De(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function ad(t){const e=Y.blob(8,t),n=e.decode.bind(e),r=e.encode.bind(e),s=e,i=che();return s.decode=(o,a)=>{const c=n(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const u=i.encode(o);return r(u,a,c)},s}const qs=Object.freeze({Create:{index:0,layout:Y.struct([Y.u32("instruction"),Y.ns64("lamports"),Y.ns64("space"),Ct("programId")])},Assign:{index:1,layout:Y.struct([Y.u32("instruction"),Ct("programId")])},Transfer:{index:2,layout:Y.struct([Y.u32("instruction"),ad("lamports")])},CreateWithSeed:{index:3,layout:Y.struct([Y.u32("instruction"),Ct("base"),yl("seed"),Y.ns64("lamports"),Y.ns64("space"),Ct("programId")])},AdvanceNonceAccount:{index:4,layout:Y.struct([Y.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:Y.struct([Y.u32("instruction"),Y.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:Y.struct([Y.u32("instruction"),Ct("authorized")])},AuthorizeNonceAccount:{index:7,layout:Y.struct([Y.u32("instruction"),Ct("authorized")])},Allocate:{index:8,layout:Y.struct([Y.u32("instruction"),Y.ns64("space")])},AllocateWithSeed:{index:9,layout:Y.struct([Y.u32("instruction"),Ct("base"),yl("seed"),Y.ns64("space"),Ct("programId")])},AssignWithSeed:{index:10,layout:Y.struct([Y.u32("instruction"),Ct("base"),yl("seed"),Ct("programId")])},TransferWithSeed:{index:11,layout:Y.struct([Y.u32("instruction"),ad("lamports"),yl("seed"),Ct("programId")])},UpgradeNonceAccount:{index:12,layout:Y.struct([Y.u32("instruction")])}});class cd{constructor(){}static createAccount(e){const n=qs.Create,r=Rr(n,{lamports:e.lamports,space:e.space,programId:dr(e.programId.toBuffer())});return new Xn({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const s=qs.TransferWithSeed;n=Rr(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:dr(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=qs.Transfer;n=Rr(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Xn({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const s=qs.AssignWithSeed;n=Rr(s,{base:dr(e.basePubkey.toBuffer()),seed:e.seed,programId:dr(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=qs.Assign;n=Rr(s,{programId:dr(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Xn({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=qs.CreateWithSeed,r=Rr(n,{base:dr(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:dr(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Xn({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){const n=new nr;"basePubkey"in e&&"seed"in e?n.add(cd.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:n5,programId:this.programId})):n.add(cd.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:n5,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=qs.InitializeNonceAccount,r=Rr(n,{authorized:dr(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t1,isSigner:!1,isWritable:!1},{pubkey:t5,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Xn(s)}static nonceAdvance(e){const n=qs.AdvanceNonceAccount,r=Rr(n),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t1,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Xn(s)}static nonceWithdraw(e){const n=qs.WithdrawNonceAccount,r=Rr(n,{lamports:e.lamports});return new Xn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:t1,isSigner:!1,isWritable:!1},{pubkey:t5,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=qs.AuthorizeNonceAccount,r=Rr(n,{authorized:dr(e.newAuthorizedPubkey.toBuffer())});return new Xn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const s=qs.AllocateWithSeed;n=Rr(s,{base:dr(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:dr(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=qs.Allocate;n=Rr(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Xn({keys:r,programId:this.programId,data:n})}}cd.programId=new De("11111111111111111111111111111111");new De("BPFLoader2111111111111111111111111111111111");function ipe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n1,r5;function ope(){if(r5)return n1;r5=1;var t=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function n(r,s){var i,o,a,c,u,l,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),s);if(d=t.call(r),d==="[object Array]"){for(a="[",o=r.length-1,i=0;i<o;i++)a+=n(r[i],!0)+",";return o>-1&&(a+=n(r[i],!0)),a+"]"}else if(d==="[object Object]"){for(c=e(r).sort(),o=c.length,a="",i=0;i<o;)u=c[i],l=n(r[u],!1),l!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),i++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return n1=function(r){var s=n(r,!1);if(s!==void 0)return""+s},n1}var ape=ope(),s5=ipe(ape);const Gd=32;function r1(t){let e=0;for(;t>1;)t/=2,e++;return e}function cpe(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class upe{constructor(e,n,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=r1(cpe(e+Gd+1))-r1(Gd)-1,r=this.getSlotsInEpoch(n),s=e-(r-Gd);return[n,s]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=n%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Gd:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+r1(Gd)):this.slotsPerEpoch}}var lpe=globalThis.fetch;class dpe extends zhe{constructor(e,n,r){const s=i=>{const o=jhe(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,n,r),this.underlyingSocket=void 0}call(...e){const n=this.underlyingSocket?.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){const n=this.underlyingSocket?.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function fpe(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const i5=56;class o5{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=fpe(hpe,e),r=e.length-i5;Xt(r>=0,"lookup table is invalid"),Xt(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=Y.struct([Y.seq(Ct(),s,"addresses")]).decode(e.slice(i5));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new De(n.authority[0]):void 0,addresses:i.map(o=>new De(o))}}}const hpe={index:1,layout:Y.struct([Y.u32("typeIndex"),ad("deactivationSlot"),Y.nu64("lastExtendedSlot"),Y.u8("lastExtendedStartIndex"),Y.u8(),Y.seq(Ct(),Y.offset(Y.u8(),-1),"authority")])},ppe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function gpe(t){const e=t.match(ppe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,s,i]=e,o=t.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${i}`}const on=Ap(v_(De),Se(),t=>new De(t)),Rk=C_([Se(),rn("base64")]),S_=Ap(v_(gt.Buffer),Rk,t=>gt.Buffer.from(t[0],"base64")),mpe=30*1e3;function ype(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Ht(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...s}=t;e=r,n=s}return{commitment:e,config:n}}function a5(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Ok(t){return Qr([ye({jsonrpc:rn("2.0"),id:Se(),result:t}),ye({jsonrpc:rn("2.0"),id:Se(),error:ye({code:md(),message:Se(),data:et(ghe())})})])}const wpe=Ok(md());function pt(t){return Ap(Ok(t),wpe,e=>"error"in e?e:{...e,result:Te(e.result,t)})}function dn(t){return pt(ye({context:ye({slot:re()}),value:t}))}function gy(t){return ye({context:ye({slot:re()}),value:t})}function s1(t,e){return t===0?new Lh({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new De(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:hr.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new ua(e)}const bpe=ye({foundation:re(),foundationTerm:re(),initial:re(),taper:re(),terminal:re()}),Epe=pt(Pe(ke(ye({epoch:re(),effectiveSlot:re(),amount:re(),postBalance:re(),commission:et(ke(re()))})))),vpe=Pe(ye({slot:re(),prioritizationFee:re()})),Cpe=ye({total:re(),validator:re(),foundation:re(),epoch:re()}),_pe=ye({epoch:re(),slotIndex:re(),slotsInEpoch:re(),absoluteSlot:re(),blockHeight:et(re()),transactionCount:et(re())}),Ape=ye({slotsPerEpoch:re(),leaderScheduleSlotOffset:re(),warmup:go(),firstNormalEpoch:re(),firstNormalSlot:re()}),Spe=mk(Se(),Pe(re())),ju=ke(Qr([ye({}),Se()])),xpe=ye({err:ju}),Ipe=rn("receivedSignature"),Npe=ye({"solana-core":Se(),"feature-set":et(re())}),Tpe=ye({program:Se(),programId:on,parsed:md()}),Rpe=ye({programId:on,accounts:Pe(on),data:Se()}),c5=dn(ye({err:ke(Qr([ye({}),Se()])),logs:ke(Pe(Se())),accounts:et(ke(Pe(ke(ye({executable:go(),owner:Se(),lamports:re(),data:Pe(Se()),rentEpoch:et(re())}))))),unitsConsumed:et(re()),returnData:et(ke(ye({programId:Se(),data:C_([Se(),rn("base64")])}))),innerInstructions:et(ke(Pe(ye({index:re(),instructions:Pe(Qr([Tpe,Rpe]))}))))})),Ope=dn(ye({byIdentity:mk(Se(),Pe(re())),range:ye({firstSlot:re(),lastSlot:re()})}));function Ppe(t,e,n,r,s,i){const o=n||lpe;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(l,d)=>{const f=await new Promise((h,m)=>{try{r(l,d,(y,E)=>h([y,E]))}catch(y){m(y)}});return await o(...f)}),new Lhe(async(l,d)=>{const f={method:"POST",body:l,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},P0e)};try{let h=5,m,y=500;for(;c?m=await c(t,f):m=await o(t,f),!(m.status!==429||s===!0||(h-=1,h===0));)console.error(`Server responded with ${m.status} ${m.statusText}.  Retrying after ${y}ms delay...`),await dl(y),y*=2;const E=await m.text();m.ok?d(null,E):d(new Error(`${m.status} ${m.statusText}: ${E}`))}catch(h){h instanceof Error&&d(h)}},{})}function kpe(t){return(e,n)=>new Promise((r,s)=>{t.request(e,n,(i,o)=>{if(i){s(i);return}r(o)})})}function Bpe(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const s=e.map(i=>t.request(i.methodName,i.args));t.request(s,(i,o)=>{if(i){r(i);return}n(o)})})}const Dpe=pt(bpe),Upe=pt(Cpe),Mpe=pt(vpe),$pe=pt(_pe),Lpe=pt(Ape),Fpe=pt(Spe),jpe=pt(re()),qpe=dn(ye({total:re(),circulating:re(),nonCirculating:re(),nonCirculatingAccounts:Pe(on)})),lv=ye({amount:Se(),uiAmount:ke(re()),decimals:re(),uiAmountString:et(Se())}),zpe=dn(Pe(ye({address:on,amount:Se(),uiAmount:ke(re()),decimals:re(),uiAmountString:et(Se())}))),Hpe=dn(Pe(ye({pubkey:on,account:ye({executable:go(),owner:on,lamports:re(),data:S_,rentEpoch:re()})}))),dv=ye({program:Se(),parsed:md(),space:re()}),Wpe=dn(Pe(ye({pubkey:on,account:ye({executable:go(),owner:on,lamports:re(),data:dv,rentEpoch:re()})}))),Vpe=dn(Pe(ye({lamports:re(),address:on}))),Fh=ye({executable:go(),owner:on,lamports:re(),data:S_,rentEpoch:re()}),Kpe=ye({pubkey:on,account:Fh}),Gpe=Ap(Qr([v_(gt.Buffer),dv]),Qr([Rk,dv]),t=>Array.isArray(t)?Te(t,S_):t),fv=ye({executable:go(),owner:on,lamports:re(),data:Gpe,rentEpoch:re()}),Ype=ye({pubkey:on,account:fv}),Zpe=ye({state:Qr([rn("active"),rn("inactive"),rn("activating"),rn("deactivating")]),active:re(),inactive:re()}),Jpe=pt(Pe(ye({signature:Se(),slot:re(),err:ju,memo:ke(Se()),blockTime:et(ke(re()))}))),Xpe=pt(Pe(ye({signature:Se(),slot:re(),err:ju,memo:ke(Se()),blockTime:et(ke(re()))}))),Qpe=ye({subscription:re(),result:gy(Fh)}),e0e=ye({pubkey:on,account:Fh}),t0e=ye({subscription:re(),result:gy(e0e)}),n0e=ye({parent:re(),slot:re(),root:re()}),r0e=ye({subscription:re(),result:n0e}),s0e=Qr([ye({type:Qr([rn("firstShredReceived"),rn("completed"),rn("optimisticConfirmation"),rn("root")]),slot:re(),timestamp:re()}),ye({type:rn("createdBank"),parent:re(),slot:re(),timestamp:re()}),ye({type:rn("frozen"),slot:re(),timestamp:re(),stats:ye({numTransactionEntries:re(),numSuccessfulTransactions:re(),numFailedTransactions:re(),maxTransactionsPerEntry:re()})}),ye({type:rn("dead"),slot:re(),timestamp:re(),err:Se()})]),i0e=ye({subscription:re(),result:s0e}),o0e=ye({subscription:re(),result:gy(Qr([xpe,Ipe]))}),a0e=ye({subscription:re(),result:re()}),c0e=ye({pubkey:Se(),gossip:ke(Se()),tpu:ke(Se()),rpc:ke(Se()),version:ke(Se())}),u5=ye({votePubkey:Se(),nodePubkey:Se(),activatedStake:re(),epochVoteAccount:go(),epochCredits:Pe(C_([re(),re(),re()])),commission:re(),lastVote:re(),rootSlot:ke(re())}),u0e=pt(ye({current:Pe(u5),delinquent:Pe(u5)})),l0e=Qr([rn("processed"),rn("confirmed"),rn("finalized")]),d0e=ye({slot:re(),confirmations:ke(re()),err:ju,confirmationStatus:et(l0e)}),f0e=dn(Pe(ke(d0e))),h0e=pt(re()),Pk=ye({accountKey:on,writableIndexes:Pe(re()),readonlyIndexes:Pe(re())}),x_=ye({signatures:Pe(Se()),message:ye({accountKeys:Pe(Se()),header:ye({numRequiredSignatures:re(),numReadonlySignedAccounts:re(),numReadonlyUnsignedAccounts:re()}),instructions:Pe(ye({accounts:Pe(re()),data:Se(),programIdIndex:re()})),recentBlockhash:Se(),addressTableLookups:et(Pe(Pk))})}),kk=ye({pubkey:on,signer:go(),writable:go(),source:et(Qr([rn("transaction"),rn("lookupTable")]))}),Bk=ye({accountKeys:Pe(kk),signatures:Pe(Se())}),Dk=ye({parsed:md(),program:Se(),programId:on}),Uk=ye({accounts:Pe(on),data:Se(),programId:on}),p0e=Qr([Uk,Dk]),g0e=Qr([ye({parsed:md(),program:Se(),programId:Se()}),ye({accounts:Pe(Se()),data:Se(),programId:Se()})]),Mk=Ap(p0e,g0e,t=>"accounts"in t?Te(t,Uk):Te(t,Dk)),$k=ye({signatures:Pe(Se()),message:ye({accountKeys:Pe(kk),instructions:Pe(Mk),recentBlockhash:Se(),addressTableLookups:et(ke(Pe(Pk)))})}),rm=ye({accountIndex:re(),mint:Se(),owner:et(Se()),programId:et(Se()),uiTokenAmount:lv}),Lk=ye({writable:Pe(on),readonly:Pe(on)}),my=ye({err:ju,fee:re(),innerInstructions:et(ke(Pe(ye({index:re(),instructions:Pe(ye({accounts:Pe(re()),data:Se(),programIdIndex:re()}))})))),preBalances:Pe(re()),postBalances:Pe(re()),logMessages:et(ke(Pe(Se()))),preTokenBalances:et(ke(Pe(rm))),postTokenBalances:et(ke(Pe(rm))),loadedAddresses:et(Lk),computeUnitsConsumed:et(re()),costUnits:et(re())}),I_=ye({err:ju,fee:re(),innerInstructions:et(ke(Pe(ye({index:re(),instructions:Pe(Mk)})))),preBalances:Pe(re()),postBalances:Pe(re()),logMessages:et(ke(Pe(Se()))),preTokenBalances:et(ke(Pe(rm))),postTokenBalances:et(ke(Pe(rm))),loadedAddresses:et(Lk),computeUnitsConsumed:et(re()),costUnits:et(re())}),yd=Qr([rn(0),rn("legacy")]),qu=ye({pubkey:Se(),lamports:re(),postBalance:ke(re()),rewardType:ke(Se()),commission:et(ke(re()))}),m0e=pt(ke(ye({blockhash:Se(),previousBlockhash:Se(),parentSlot:re(),transactions:Pe(ye({transaction:x_,meta:ke(my),version:et(yd)})),rewards:et(Pe(qu)),blockTime:ke(re()),blockHeight:ke(re())}))),y0e=pt(ke(ye({blockhash:Se(),previousBlockhash:Se(),parentSlot:re(),rewards:et(Pe(qu)),blockTime:ke(re()),blockHeight:ke(re())}))),w0e=pt(ke(ye({blockhash:Se(),previousBlockhash:Se(),parentSlot:re(),transactions:Pe(ye({transaction:Bk,meta:ke(my),version:et(yd)})),rewards:et(Pe(qu)),blockTime:ke(re()),blockHeight:ke(re())}))),b0e=pt(ke(ye({blockhash:Se(),previousBlockhash:Se(),parentSlot:re(),transactions:Pe(ye({transaction:$k,meta:ke(I_),version:et(yd)})),rewards:et(Pe(qu)),blockTime:ke(re()),blockHeight:ke(re())}))),E0e=pt(ke(ye({blockhash:Se(),previousBlockhash:Se(),parentSlot:re(),transactions:Pe(ye({transaction:Bk,meta:ke(I_),version:et(yd)})),rewards:et(Pe(qu)),blockTime:ke(re()),blockHeight:ke(re())}))),v0e=pt(ke(ye({blockhash:Se(),previousBlockhash:Se(),parentSlot:re(),rewards:et(Pe(qu)),blockTime:ke(re()),blockHeight:ke(re())}))),C0e=pt(ke(ye({blockhash:Se(),previousBlockhash:Se(),parentSlot:re(),transactions:Pe(ye({transaction:x_,meta:ke(my)})),rewards:et(Pe(qu)),blockTime:ke(re())}))),l5=pt(ke(ye({blockhash:Se(),previousBlockhash:Se(),parentSlot:re(),signatures:Pe(Se()),blockTime:ke(re())}))),i1=pt(ke(ye({slot:re(),meta:ke(my),blockTime:et(ke(re())),transaction:x_,version:et(yd)}))),C0=pt(ke(ye({slot:re(),transaction:$k,meta:ke(I_),blockTime:et(ke(re())),version:et(yd)}))),_0e=dn(ye({blockhash:Se(),lastValidBlockHeight:re()})),A0e=dn(go()),S0e=ye({slot:re(),numTransactions:re(),numSlots:re(),samplePeriodSecs:re()}),x0e=pt(Pe(S0e)),I0e=dn(ke(ye({feeCalculator:ye({lamportsPerSignature:re()})}))),N0e=pt(Se()),T0e=pt(Se()),R0e=ye({err:ju,logs:Pe(Se()),signature:Se()}),O0e=ye({result:gy(R0e),subscription:re()}),P0e={"solana-client":"js/1.0.0-maintenance"};class Yd{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async l=>{const{commitment:d,config:f}=Ht(l),h=this._buildArgs([],d,void 0,f),m=s5(h);return u[m]=u[m]??(async()=>{try{const y=await this._rpcRequest("getBlockHeight",h),E=Te(y,pt(re()));if("error"in E)throw new Ye(E.error,"failed to get block height information");return E.result}finally{delete u[m]}})(),await u[m]}})();let r,s,i,o,a,c;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,s=n.httpHeaders,i=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,c=n.httpAgent),this._rpcEndpoint=ype(e),this._rpcWsEndpoint=r||gpe(e),this._rpcClient=Ppe(e,s,i,o,a,c),this._rpcRequest=kpe(this._rpcClient),this._rpcBatchRequest=Bpe(this._rpcClient),this._rpcWebSocket=new dpe(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:s}=Ht(n),i=this._buildArgs([e.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),a=Te(o,dn(re()));if("error"in a)throw new Ye(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=Te(n,pt(ke(re())));if("error"in r)throw new Ye(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=Te(e,pt(re()));if("error"in n)throw new Ye(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=Te(e,jpe);if("error"in n)throw new Ye(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),s=Te(r,qpe);if("error"in s)throw new Ye(s.error,"failed to get supply");return s.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenSupply",r),i=Te(s,dn(lv));if("error"in i)throw new Ye(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenAccountBalance",r),i=Te(s,dn(lv));if("error"in i)throw new Ye(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,n,r){const{commitment:s,config:i}=Ht(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=Te(c,Hpe);if("error"in u)throw new Ye(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,n,r){let s=[e.toBase58()];"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Te(o,Wpe);if("error"in a)throw new Ye(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],s=await this._rpcRequest("getLargestAccounts",r),i=Te(s,Vpe);if("error"in i)throw new Ye(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenLargestAccounts",r),i=Te(s,zpe);if("error"in i)throw new Ye(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:s}=Ht(n),i=this._buildArgs([e.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Te(o,dn(ke(Fh)));if("error"in a)throw new Ye(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:s}=Ht(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Te(o,dn(ke(fv)));if("error"in a)throw new Ye(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:s}=Ht(n),i=e.map(u=>u.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Te(a,dn(Pe(ke(fv))));if("error"in c)throw new Ye(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:s}=Ht(n),i=e.map(u=>u.toBase58()),o=this._buildArgs([i],r,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Te(a,dn(Pe(ke(Fh))));if("error"in c)throw new Ye(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:s,config:i}=Ht(n),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),a=await this._rpcRequest("getStakeActivation",o),c=Te(a,pt(Zpe));if("error"in c)throw new Ye(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,n){const{commitment:r,config:s}=Ht(n),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:a5(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),u=Pe(Kpe),l=o.withContext===!0?Te(c,dn(u)):Te(c,pt(u));if("error"in l)throw new Ye(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:s}=Ht(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Te(o,pt(Pe(Ype)));if("error"in a)throw new Ye(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){let r;if(typeof e=="string")r=e;else{const i=e;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=hr.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Xt(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,s,i=!1;const o=new Promise((c,u)=>{try{r=this.onSignature(n,(d,f)=>{r=void 0;const h={context:f,value:d};c({__type:Ba.PROCESSED,response:h})},e);const l=new Promise(d=>{r==null?d():s=this._onSubscriptionStateChange(r,f=>{f==="subscribed"&&d()})});(async()=>{if(await l,i)return;const d=await this.getSignatureStatus(n);if(i||d==null)return;const{context:f,value:h}=d;if(h!=null)if(h?.err)u(h.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(h.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(h.confirmationStatus==="processed"||h.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:Ba.PROCESSED,response:{context:f,value:h}})}})()}catch(l){u(l)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(d=>{const f=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let h=await f();if(!i){for(;h<=r;)if(await dl(1e3),i||(h=await f(),i))return;d({__type:Ba.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),u=this.getCancellationPromise(n);let l;try{const d=await Promise.race([u,c,o]);if(d.__type===Ba.PROCESSED)l=d.response;else throw new Ak(s)}finally{i=!0,a()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(h=>{let m=i,y=null;const E=async()=>{try{const{context:S,value:R}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return y=S.slot,R?.nonce}catch{return m}};(async()=>{if(m=await E(),!a)for(;;){if(i!==m){h({__type:Ba.NONCE_INVALID,slotInWhichNonceDidAdvance:y});return}if(await dl(2e3),a||(m=await E(),a))return}})()}),{abortConfirmation:u,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(n);let f;try{const h=await Promise.race([d,l,c]);if(h.__type===Ba.PROCESSED)f=h.response;else{let m;for(;;){const y=await this.getSignatureStatus(o);if(y==null)break;if(y.context.slot<(h.slotInWhichNonceDidAdvance??r)){await dl(400);continue}m=y;break}if(m?.value){const y=e||"finalized",{confirmationStatus:E}=m.value;switch(y){case"processed":case"recent":if(E!=="processed"&&E!=="confirmed"&&E!=="finalized")throw new af(o);break;case"confirmed":case"single":case"singleGossip":if(E!=="confirmed"&&E!=="finalized")throw new af(o);break;case"finalized":case"max":case"root":if(E!=="finalized")throw new af(o);break;default:}f={context:m.context,value:{err:m.value.err}}}else throw new af(o)}}finally{a=!0,u()}return f}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const s=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:Ba.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const c=await Promise.race([o,s]);if(c.__type===Ba.PROCESSED)a=c.response;else throw new Sk(n,c.timeoutMs/1e3)}finally{clearTimeout(r),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=Te(e,pt(Pe(c0e)));if("error"in n)throw new Ye(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),s=Te(r,u0e);if("error"in s)throw new Ye(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:n,config:r}=Ht(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlot",s),o=Te(i,pt(re()));if("error"in o)throw new Ye(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=Ht(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=Te(i,pt(Se()));if("error"in o)throw new Ye(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],s=await this._rpcRequest("getSlotLeaders",r),i=Te(s,pt(Pe(on)));if("error"in i)throw new Ye(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,n){const{context:r,value:s}=await this.getSignatureStatuses([e],n);Xt(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const s=await this._rpcRequest("getSignatureStatuses",r),i=Te(s,f0e);if("error"in i)throw new Ye(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:n,config:r}=Ht(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=Te(i,pt(re()));if("error"in o)throw new Ye(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),s=Te(r,Dpe);if("error"in s)throw new Ye(s.error,"failed to get inflation");return s.result}async getInflationReward(e,n,r){const{commitment:s,config:i}=Ht(r),o=this._buildArgs([e.map(u=>u.toBase58())],s,void 0,{...i,epoch:n??i?.epoch}),a=await this._rpcRequest("getInflationReward",o),c=Te(a,Epe);if("error"in c)throw new Ye(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=Te(e,Upe);if("error"in n)throw new Ye(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=Ht(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=Te(i,$pe);if("error"in o)throw new Ye(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=Te(e,Lpe);if("error"in n)throw new Ye(n.error,"failed to get epoch schedule");const r=n.result;return new upe(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=Te(e,Fpe);if("error"in n)throw new Ye(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Te(s,h0e);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=Te(n,x0e);if("error"in r)throw new Ye(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Te(s,I0e);if("error"in i)throw new Ye(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=dr(e.serialize()).toString("base64"),s=this._buildArgs([r],n),i=await this._rpcRequest("getFeeForMessage",s),o=Te(i,dn(ke(re())));if("error"in o)throw new Ye(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const n=e?.lockedWritableAccounts?.map(o=>o.toBase58()),r=n?.length?[n]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=Te(s,Mpe);if("error"in i)throw new Ye(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=Ht(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=Te(i,_0e);if("error"in o)throw new Ye(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:s}=Ht(n),i=this._buildArgs([e],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Te(o,A0e);if("error"in a)throw new Ye(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=Te(e,pt(Npe));if("error"in n)throw new Ye(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=Te(e,pt(Se()));if("error"in n)throw new Ye(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:s}=Ht(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=Te(o,w0e);if("error"in a)throw a.error;return a.result}case"none":{const a=Te(o,y0e);if("error"in a)throw a.error;return a.result}default:{const a=Te(o,m0e);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:l,version:d})=>({meta:l,transaction:{...u,message:s1(d,u.message)},version:d}))}:null}}}catch(a){throw new Ye(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:s}=Ht(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=Te(o,E0e);if("error"in a)throw a.error;return a.result}case"none":{const a=Te(o,v0e);if("error"in a)throw a.error;return a.result}default:{const a=Te(o,b0e);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Ye(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,n=c}const s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getBlockProduction",s),o=Te(i,Ope);if("error"in o)throw new Ye(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:s}=Ht(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Te(o,i1);if("error"in a)throw new Ye(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:s1(c.version,c.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:s}=Ht(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Te(o,C0);if("error"in a)throw new Ye(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:s}=Ht(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=Te(c,C0);if("error"in u)throw new Ye(u.error,"failed to get transactions");return u.result})}async getTransactions(e,n){const{commitment:r,config:s}=Ht(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=Te(c,i1);if("error"in u)throw new Ye(u.error,"failed to get transactions");const l=u.result;return l&&{...l,transaction:{...l.transaction,message:s1(l.version,l.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getBlock",r),i=Te(s,C0e);if("error"in i)throw new Ye(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:u})=>{const l=new ua(c.message);return{meta:u,transaction:{...c,message:l}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:nr.populate(c.message,c.signatures)}))}}async getBlocks(e,n,r){const s=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),i=await this._rpcRequest("getBlocks",s),o=Te(i,pt(Pe(re())));if("error"in o)throw new Ye(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Te(s,l5);if("error"in i)throw new Ye(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Te(s,l5);if("error"in i)throw new Ye(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getTransaction",r),i=Te(s,i1);if("error"in i)throw new Ye(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new ua(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:nr.populate(a,c)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=Te(s,C0);if("error"in i)throw new Ye(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=Te(o,C0);if("error"in a)throw new Ye(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(n--,!(n<=0||n<i));)try{const c=await this.getConfirmedBlockSignatures(n,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Te(i,Jpe);if("error"in o)throw new Ye(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getSignaturesForAddress",s),o=Te(i,Xpe);if("error"in o)throw new Ye(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=new o5({key:e,state:o5.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=A_.fromAccountData(s.data)),{context:r,value:i}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),s=Te(r,N0e);if("error"in s)throw new Ye(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await dl(100);const r=Date.now()-this._blockhashInfo.lastFetch>=mpe;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await dl(rpe/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=Ht(e),s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Te(i,dn(re()));if("error"in o)throw new Ye(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const y=e.serialize(),E=gt.Buffer.from(y).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const S=n||{};S.encoding="base64","commitment"in S||(S.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(S.innerInstructions=n.innerInstructions);const R=[E,S],C=await this._rpcRequest("simulateTransaction",R),T=Te(C,c5);if("error"in T)throw new Error("failed to simulate transaction: "+T.error.message);return T.result}let s;if(e instanceof nr){let m=e;s=new nr,s.feePayer=m.feePayer,s.instructions=e.instructions,s.nonceInfo=m.nonceInfo,s.signatures=m.signatures}else s=nr.populate(e),s._message=s._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(s.nonceInfo&&i)s.sign(...i);else{let m=this._disableBlockhashCaching;for(;;){const y=await this._blockhashWithExpiryBlockHeight(m);if(s.lastValidBlockHeight=y.lastValidBlockHeight,s.recentBlockhash=y.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const E=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(E)&&!this._blockhashInfo.transactionSignatures.includes(E)){this._blockhashInfo.simulatedSignatures.push(E);break}else m=!0}}const o=s._compile(),a=o.serialize(),u=s._serialize(a).toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const m=(Array.isArray(r)?r:o.nonProgramIds()).map(y=>y.toBase58());l.accounts={encoding:"base64",addresses:m}}i&&(l.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(l.innerInstructions=n.innerInstructions);const d=[u,l],f=await this._rpcRequest("simulateTransaction",d),h=Te(f,c5);if("error"in h){let m;if("data"in h.error&&(m=h.error.data.logs,m&&Array.isArray(m))){const y=`
    `,E=y+m.join(y);console.error(h.error.message,E)}throw new nm({action:"simulate",signature:"",transactionMessage:h.error.message,logs:m})}return h.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,n){const r=dr(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},s=n&&n.skipPreflight,i=s===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),c=Te(a,T0e);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new nm({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:u})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(i=>{try{i(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(n),()=>{s.delete(n),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!n())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...n)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=Te(e,Qpe);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,s=s5([e.method,n]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Xt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:s,config:i}=Ht(r),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=Te(e,t0e);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,s){const{commitment:i,config:o}=Ht(r),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:a5(s)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=Te(e,O0e);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=Te(e,r0e);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=Te(e,i0e);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,s){const i=n||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,s){const i=n||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,s)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=Te(e,o0e);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,n,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,u)=>{n(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=Te(e,a0e);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Y.struct([Y.u32("instruction"),ad("recentSlot"),Y.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Y.struct([Y.u32("instruction")])},ExtendLookupTable:{index:2,layout:Y.struct([Y.u32("instruction"),ad(),Y.seq(Ct(),Y.offset(Y.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Y.struct([Y.u32("instruction")])},CloseLookupTable:{index:4,layout:Y.struct([Y.u32("instruction")])}});new De("AddressLookupTab1e1111111111111111111111111");const _0=Object.freeze({RequestUnits:{index:0,layout:Y.struct([Y.u8("instruction"),Y.u32("units"),Y.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Y.struct([Y.u8("instruction"),Y.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Y.struct([Y.u8("instruction"),Y.u32("units")])},SetComputeUnitPrice:{index:3,layout:Y.struct([Y.u8("instruction"),ad("microLamports")])}});class jh{constructor(){}static requestUnits(e){const n=_0.RequestUnits,r=Rr(n,e);return new Xn({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=_0.RequestHeapFrame,r=Rr(n,e);return new Xn({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=_0.SetComputeUnitLimit,r=Rr(n,e);return new Xn({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=_0.SetComputeUnitPrice,r=Rr(n,{microLamports:BigInt(e.microLamports)});return new Xn({keys:[],programId:this.programId,data:r})}}jh.programId=new De("ComputeBudget111111111111111111111111111111");Y.struct([Y.u8("numSignatures"),Y.u8("padding"),Y.u16("signatureOffset"),Y.u16("signatureInstructionIndex"),Y.u16("publicKeyOffset"),Y.u16("publicKeyInstructionIndex"),Y.u16("messageDataOffset"),Y.u16("messageDataSize"),Y.u16("messageInstructionIndex")]);new De("Ed25519SigVerify111111111111111111111111111");zJ.utils.isValidPrivateKey;Y.struct([Y.u8("numSignatures"),Y.u16("signatureOffset"),Y.u8("signatureInstructionIndex"),Y.u16("ethAddressOffset"),Y.u8("ethAddressInstructionIndex"),Y.u16("messageDataOffset"),Y.u16("messageDataSize"),Y.u8("messageInstructionIndex"),Y.blob(20,"ethAddress"),Y.blob(64,"signature"),Y.u8("recoveryId")]);new De("KeccakSecp256k11111111111111111111111111111");var Fk;new De("StakeConfig11111111111111111111111111111111");class jk{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}Fk=jk;jk.default=new Fk(0,0,De.default);Object.freeze({Initialize:{index:0,layout:Y.struct([Y.u32("instruction"),Yhe(),Zhe()])},Authorize:{index:1,layout:Y.struct([Y.u32("instruction"),Ct("newAuthorized"),Y.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:Y.struct([Y.u32("instruction")])},Split:{index:3,layout:Y.struct([Y.u32("instruction"),Y.ns64("lamports")])},Withdraw:{index:4,layout:Y.struct([Y.u32("instruction"),Y.ns64("lamports")])},Deactivate:{index:5,layout:Y.struct([Y.u32("instruction")])},Merge:{index:7,layout:Y.struct([Y.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:Y.struct([Y.u32("instruction"),Ct("newAuthorized"),Y.u32("stakeAuthorizationType"),yl("authoritySeed"),Ct("authorityOwner")])}});new De("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Y.struct([Y.u32("instruction"),Jhe()])},Authorize:{index:1,layout:Y.struct([Y.u32("instruction"),Ct("newAuthorized"),Y.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:Y.struct([Y.u32("instruction"),Y.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:Y.struct([Y.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:Y.struct([Y.u32("instruction"),Xhe()])}});new De("Vote111111111111111111111111111111111111111");new De("Va1idator1nfo111111111111111111111111111111");ye({name:Se(),website:et(Se()),details:et(Se()),iconUrl:et(Se()),keybaseUsername:et(Se())});new De("Vote111111111111111111111111111111111111111");Y.struct([Ct("nodePubkey"),Ct("authorizedWithdrawer"),Y.u8("commission"),Y.nu64(),Y.seq(Y.struct([Y.nu64("slot"),Y.u32("confirmationCount")]),Y.offset(Y.u32(),-8),"votes"),Y.u8("rootSlotValid"),Y.nu64("rootSlot"),Y.nu64(),Y.seq(Y.struct([Y.nu64("epoch"),Ct("authorizedVoter")]),Y.offset(Y.u32(),-8),"authorizedVoters"),Y.struct([Y.seq(Y.struct([Ct("authorizedPubkey"),Y.nu64("epochOfLastAuthorizedSwitch"),Y.nu64("targetEpoch")]),32,"buf"),Y.nu64("idx"),Y.u8("isEmpty")],"priorVoters"),Y.nu64(),Y.seq(Y.struct([Y.nu64("epoch"),Y.nu64("credits"),Y.nu64("prevCredits")]),Y.offset(Y.u32(),-8),"epochCredits"),Y.struct([Y.nu64("slot"),Y.nu64("timestamp")],"lastTimestamp")]);const k0e=1e9,fi={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new De("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new De("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new De("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:X.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${X.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9},o1={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT_TRANSFER_ONLY:3e5,UNIT_LIMIT_WITH_ATA_CREATION:4e5};class yy extends Error{constructor(e,n){super(e),this.error=n}}class B0e extends yy{constructor(){super(...arguments),this.name="WalletAccountError"}}class D0e extends yy{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class d5 extends yy{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class U0e extends yy{constructor(){super(...arguments),this.name="WalletSignMessageError"}}function hu(t){return"version"in t}const qk="solana:signAndSendTransaction",M0e="solana:signMessage",hv="solana:signTransaction",zk="standard:connect",$0e="standard:disconnect",Hk="standard:events";function L0e(t){return zk in t.features&&Hk in t.features&&(qk in t.features||hv in t.features)}function F0e(t){if(typeof t=="string")return`solana:${t}`}class wy{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,n){this.listeners[e].push(n)}removeListener(e,n){this.listeners[e]=this.listeners[e].filter(r=>r!==n)}emit(e,n){this.listeners[e].forEach(r=>r(n))}}class j0e extends wy{constructor(e){super(),this.id=X.CONNECTOR_ID.AUTH,this.name=X.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=X.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){const e=V.state.chains.get(X.CHAIN.SOLANA)?.accountState?.address;return e?new De(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter(n=>e.includes(n.caipNetworkId))}async connect(e={}){const n=e.chainId||this.getActiveChain()?.id,r=Dr("solana");if(await fs.authConnectorAuthenticate({authConnector:this.provider,chainId:F0e(n),socialUri:e.socialUri,preferredAccountType:r,chainNamespace:X.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const n=await this.provider.request({method:"solana_signMessage",params:{message:tr.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return tr.decode(n.signature)}async signTransaction(e){const n=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),r=tr.decode(n.transaction);return hu(e)?Cc.deserialize(r):nr.from(r)}async signAndSendTransaction(e,n){const r=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:r,options:n},chainNamespace:this.chain})).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(r=>this.serializeTransaction(r))},chainNamespace:this.chain})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid solana_signAllTransactions response");const o=tr.decode(r);return hu(i)?Cc.deserialize(o):nr.from(o)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return tr.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}function xc(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const Wk=xc({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),q0e=xc({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),z0e=xc({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});xc({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});xc({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});xc({id:"00000008819873e925422c1ff0f99f7c",caipNetworkId:"bip122:00000008819873e925422c1ff0f99f7c",chainNamespace:"bip122",name:"Bitcoin Signet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});xc({id:"-239",name:"TON",network:"ton-mainnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://tonscan.org"}},testnet:!1,chainNamespace:"ton",caipNetworkId:"ton:-239"});xc({id:"-3",name:"TON Testnet",network:"ton-testnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://testnet.tonscan.org"}},testnet:!0,chainNamespace:"ton",caipNetworkId:"ton:-3"});class H0e extends wy{constructor(e){super(),this.name="Coinbase Wallet",this.id=Bn.ConnectorExplorerIds[X.CONNECTOR_ID.COINBASE_SDK],this.explorerId=Bn.ConnectorExplorerIds[X.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=X.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===Wk.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return Bn.ConnectorImageIds[X.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),new Xa(e)}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,n){return(await this.coinbase.signAndSendTransaction(e,n)).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const n=this.coinbase.publicKey;if(e&&!n)throw new Error("Not connected");return n}}class f5 extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class h5 extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}var W0e=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},pv;class p5 extends l_{constructor({provider:e,chains:n,getActiveChain:r}){super({caipNetworks:n,namespace:"solana",provider:e}),this.eventEmitter=new wy,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),pv.set(this,"1.0.0"),this.getActiveChain=r}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let n=e;return n===fi.CHAIN_IDS.Deprecated_Mainnet?n=fi.CHAIN_IDS.Mainnet:n===fi.CHAIN_IDS.Deprecated_Devnet&&(n=fi.CHAIN_IDS.Devnet),this.caipNetworks.find(r=>r.caipNetworkId===n)}).filter(Boolean)}get icon(){return cs.state.connectorImages[this.id]}get version(){return W0e(this,pv,"f")}get publicKey(){const e=this.getAccount(!1);if(e)return new De(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new De(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const n=await this.internalRequest("solana_signMessage",{message:tr.encode(e),pubkey:this.getAccount(!0).address});return tr.decode(n.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const n=this.serializeTransaction(e),r=await this.internalRequest("solana_signTransaction",{transaction:n,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in r){const i=tr.decode(r.signature);return e.addSignature(new De(this.getAccount(!0).publicKey),Buffer.from(i)),e}const s=Buffer.from(r.transaction,"base64");return hu(e)?Cc.deserialize(new Uint8Array(s)):nr.from(s)}async signAndSendTransaction(e,n){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const r=this.serializeTransaction(e),s=await this.internalRequest("solana_signAndSendTransaction",{transaction:r,pubkey:this.getAccount(!0).address,sendOptions:n});return this.emit("pendingTransaction",void 0),s.signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e),i=await n.sendRawTransaction(s.serialize(),r);return this.emit("pendingTransaction",void 0),i}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(r=>this.serializeTransaction(r))})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid transactions response");const o=Buffer.from(r,"base64");return hu(i)?Cc.deserialize(new Uint8Array(o)):(this.emit("pendingTransaction",void 0),nr.from(o))})}catch(n){if(n instanceof h5){const r=[];for(const s of e)r.push(await this.signTransaction(s));return r}throw n}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){const e=this.session?.namespaces.solana?.accounts||[];return Promise.resolve(e.map(n=>({namespace:this.chain,address:$n.parseCaipAddress(n).address,type:"eoa"})))}setDefaultChain(e){this.provider.setDefaultChain(e)}internalRequest(e,n){let s=this.chains.find(i=>this.getActiveChain()?.id===i.id)?.caipNetworkId;switch(s){case fi.CHAIN_IDS.Mainnet:this.sessionChains.includes(fi.CHAIN_IDS.Mainnet)||(s=fi.CHAIN_IDS.Deprecated_Mainnet);break;case fi.CHAIN_IDS.Devnet:this.sessionChains.includes(fi.CHAIN_IDS.Devnet)||(s=fi.CHAIN_IDS.Deprecated_Devnet);break}return this.provider?.request({method:e,params:n},s)}get sessionChains(){return ei.getChainsFromNamespaces(this.session?.namespaces)}serializeTransaction(e){return Buffer.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){const n=this.session?.namespaces.solana?.accounts[0];if(!n){if(e)throw new Error("Account not found");return}const r=n.split(":")[2];if(!r){if(e)throw new Error("Address not found");return}return{address:r,publicKey:tr.decode(r)}}getRawRPCParams(e){return hu(e)?{}:{feePayer:e.feePayer?.toBase58()??"",instructions:e.instructions.map(n=>({data:tr.encode(new Uint8Array(n.data)),keys:n.keys.map(r=>({isWritable:r.isWritable,isSigner:r.isSigner,pubkey:r.pubkey.toBase58()})),programId:n.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){if(!this.session?.namespaces.solana?.methods.includes(e))throw new h5(e)}}pv=new WeakMap;const Zd=qt({connection:null}),$c={state:Zd,subscribeKey(t,e){return Vn(Zd,t,e)},subscribe(t){return ir(Zd,()=>t(Zd))},setConnection(t){Zd.connection=Gl(t)}},mo=new De("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),g5=new De("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),N_=new De("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new De("So11111111111111111111111111111111111111112");new De("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const T_=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var Lc={},m5;function V0e(){if(m5)return Lc;m5=1,Object.defineProperty(Lc,"__esModule",{value:!0});function t(s){{const i=Buffer.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}Lc.toBigIntLE=t;function e(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}Lc.toBigIntBE=e;function n(s,i){{const o=s.toString(16),a=Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return a.reverse(),a}}Lc.toBufferLE=n;function r(s,i){{const o=s.toString(16);return Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return Lc.toBufferBE=r,Lc}var y5=V0e();const K0e=t=>e=>{const n=Y.blob(t,e),{encode:r,decode:s}=T_(n),i=n;return i.decode=(o,a)=>{const c=s(o,a);return y5.toBigIntLE(Buffer.from(c))},i.encode=(o,a,c)=>{const u=y5.toBufferLE(o,t);return r(u,a,c)},i},If=K0e(8),Vk=t=>{const e=Y.u8(t),{encode:n,decode:r}=T_(e),s=e;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,a)=>{const c=Number(i);return n(c,o,a)},s},fr=t=>{const e=Y.blob(32,t),{encode:n,decode:r}=T_(e),s=e;return s.decode=(i,o)=>{const a=r(i,o);return new De(a)},s.encode=(i,o,a)=>{const c=i.toBuffer();return n(c,o,a)},s};class wd extends Error{constructor(e){super(e)}}class sm extends wd{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class G0e extends wd{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class Kk extends wd{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class Nf extends wd{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class Y0e extends wd{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class Z0e extends wd{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var gv;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",t[t.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",t[t.PausableExtension=44]="PausableExtension"})(gv||(gv={}));var im;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"})(im||(im={}));const Gk=1,J0e=Y.struct([Y.u8("m"),Y.u8("n"),Vk("isInitialized"),fr("signer1"),fr("signer2"),fr("signer3"),fr("signer4"),fr("signer5"),fr("signer6"),fr("signer7"),fr("signer8"),fr("signer9"),fr("signer10"),fr("signer11")]),Yk=J0e.span;var om;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"})(om||(om={}));const Zk=Y.struct([fr("mint"),fr("owner"),If("amount"),Y.u32("delegateOption"),fr("delegate"),Y.u8("state"),Y.u32("isNativeOption"),If("isNative"),If("delegatedAmount"),Y.u32("closeAuthorityOption"),fr("closeAuthority")]),Ja=Zk.span;async function w5(t,e,n,r=mo){const s=await t.getAccountInfo(e,n);return X0e(e,s,r)}function X0e(t,e,n=mo){if(!e)throw new sm;if(!e.owner.equals(n))throw new Kk;if(e.data.length<Ja)throw new Nf;const r=Zk.decode(e.data.slice(0,Ja));let s=Buffer.alloc(0);if(e.data.length>Ja){if(e.data.length===Yk)throw new Nf;if(e.data[Ja]!=im.Account)throw new G0e;s=e.data.slice(Ja+Gk)}return{address:t,mint:r.mint,owner:r.owner,amount:r.amount,delegate:r.delegateOption?r.delegate:null,delegatedAmount:r.delegatedAmount,isInitialized:r.state!==om.Uninitialized,isFrozen:r.state===om.Frozen,isNative:!!r.isNativeOption,rentExemptReserve:r.isNativeOption?r.isNative:null,closeAuthority:r.closeAuthorityOption?r.closeAuthority:null,tlvData:s}}function Q0e(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof De?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const b5=Y.struct([Y.u8("instruction"),If("amount"),Y.u8("decimals")]);function ege(t,e,n,r,s,i,o=[],a=mo){const c=Q0e([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0}],r,o),u=Buffer.alloc(b5.span);return b5.encode({instruction:gv.TransferChecked,amount:BigInt(s),decimals:i},u),new Xn({keys:c,programId:a,data:u})}const Jk=Y.struct([Y.u32("mintAuthorityOption"),fr("mintAuthority"),If("supply"),Y.u8("decimals"),Vk("isInitialized"),Y.u32("freezeAuthorityOption"),fr("freezeAuthority")]),a1=Jk.span;async function tge(t,e,n,r=mo){const s=await t.getAccountInfo(e,n);return nge(e,s,r)}function nge(t,e,n=mo){if(!e)throw new sm;if(!e.owner.equals(n))throw new Kk;if(e.data.length<a1)throw new Nf;const r=Jk.decode(e.data.slice(0,a1));let s=Buffer.alloc(0);if(e.data.length>a1){if(e.data.length<=Ja)throw new Nf;if(e.data.length===Yk)throw new Nf;if(e.data[Ja]!=im.Mint)throw new Y0e;s=e.data.slice(Ja+Gk)}return{address:t,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:s}}function E5(t,e,n=!1,r=mo,s=N_){if(!n&&!De.isOnCurve(e.toBuffer()))throw new Z0e;const[i]=De.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],s);return i}function rge(t,e,n,r,s=mo,i=N_){return sge(t,e,n,r,Buffer.alloc(0),s,i)}function sge(t,e,n,r,s,i=mo,o=N_){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:cd.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new Xn({keys:a,programId:o,data:s})}async function ige(t,e){const n=await t.getAccountInfo(e);if(!n)throw new Error("Mint account not found");if(n.owner.equals(mo))return mo;if(n.owner.equals(g5))return g5;throw new Error("Unknown mint owner program")}async function oge({provider:t,to:e,amount:n,tokenMint:r,connection:s}){if(!t.publicKey)throw new Error("No public key found");if(n<=0)throw new Error("Amount must be greater than 0");try{const i=t.publicKey,o=new De(e),a=new De(r),c=await ige(s,a),l=(await tge(s,a,void 0,c)).decimals;if(l<0)throw new Error("Invalid token decimals");const d=Math.floor(n*10**l),f=E5(a,i,!1,c),h=E5(a,o,!1,c);try{if((await w5(s,f,void 0,c)).amount<BigInt(d))throw new Error("Insufficient token balance")}catch(C){throw C instanceof sm?new Error("Sender does not have a token account for this mint"):C}let m=!1;try{await w5(s,h,void 0,c)}catch(C){if(C instanceof sm)m=!0;else throw C}const y=[],E=m?o1.UNIT_LIMIT_WITH_ATA_CREATION:o1.UNIT_LIMIT_TRANSFER_ONLY;y.push(jh.setComputeUnitPrice({microLamports:o1.UNIT_PRICE_MICRO_LAMPORTS}),jh.setComputeUnitLimit({units:E})),m&&y.push(rge(i,h,o,a,c)),y.push(ege(f,a,h,i,d,l,[],c));const{blockhash:S,lastValidBlockHeight:R}=await s.getLatestBlockhash();return new nr({feePayer:i,blockhash:S,lastValidBlockHeight:R}).add(...y)}catch(i){throw new Error(`Failed to create SPL token transaction: ${i instanceof Error?i.message:"Unknown error"}`)}}const v5={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function C5({provider:t,to:e,value:n,connection:r}){if(!t.publicKey)throw Error("No public key found");const s=new De(e),i=Math.floor(n*k0e),{blockhash:o,lastValidBlockHeight:a}=await r.getLatestBlockhash(),c=[jh.setComputeUnitPrice({microLamports:v5.UNIT_PRICE_MICRO_LAMPORTS}),jh.setComputeUnitLimit({units:v5.UNIT_LIMIT}),cd.transfer({fromPubkey:t.publicKey,toPubkey:s,lamports:i})];return new nr({feePayer:t.publicKey,blockhash:o,lastValidBlockHeight:a}).add(...c)}var age=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},cge=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},W0;let Jd;const by=new Set;function uge(t){Tf=void 0,by.add(t)}function lge(t){Tf=void 0,by.delete(t)}const wl={};function dge(){if(Jd||(Jd=Object.freeze({register:_5,get:fge,on:hge}),typeof window>"u"))return Jd;const t=Object.freeze({register:_5});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new pge(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Jd}function _5(...t){return t=t.filter(e=>!by.has(e)),t.length?(t.forEach(e=>uge(e)),wl.register?.forEach(e=>A5(()=>e(...t))),function(){t.forEach(n=>lge(n)),wl.unregister?.forEach(n=>A5(()=>n(...t)))}):()=>{}}let Tf;function fge(){return Tf||(Tf=[...by]),Tf}function hge(t,e){return wl[t]?.push(e)||(wl[t]=[e]),function(){wl[t]=wl[t]?.filter(r=>e!==r)}}function A5(t){try{t()}catch(e){console.error(e)}}class pge extends Event{get detail(){return age(this,W0,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),W0.set(this,void 0),cge(this,W0,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}W0=new WeakMap;function gge(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const S5={"solana:mainnet":Wk,"solana:testnet":z0e,"solana:devnet":q0e};class mge extends wy{constructor({wallet:e,getActiveChain:n,requestedChains:r}){super(),this.type="ANNOUNCED",this.chain=X.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=n,this.requestedChains=r,this.name=me.getConnectorName(e.name)||e.name,this.id=Bn.ConnectorExplorerIds[this.name]||this.name,this.explorerId=Bn.ConnectorExplorerIds[this.name],this.imageUrl=this.wallet.icon,this.bindEvents()}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(n=>n.id===e||n.id===S5[e]?.id)).filter(Boolean)}get publicKey(){const e=this.getAccount(!1);if(e)return new De(e.publicKey)}async connect(){await this.getWalletFeature(zk).connect().catch(s=>{throw new Xa(s)});const n=this.getAccount(!0),r=new De(n.publicKey);return this.emit("connect",r),n.address}async disconnect(){await this.getWalletFeature($0e).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const n=this.getWalletFeature(M0e),r=this.getAccount(!0),[s]=await n.signMessage({message:e,account:r});if(!s)throw new U0e("Empty result");return s.signature}async signTransaction(e){const n=this.getWalletFeature(hv),r=this.getAccount(!0),s=this.serializeTransaction(e),[i]=await n.signTransaction({account:r,transaction:new Uint8Array(s),chain:this.getActiveChainName()});if(!i)throw new d5("Empty result");return this.emit("pendingTransaction",void 0),hu(e)?Cc.deserialize(i.signedTransaction):nr.from(i.signedTransaction)}async signAndSendTransaction(e,n){const r=this.getWalletFeature(qk),s=this.getAccount(!0),[i]=await r.signAndSendTransaction({account:s,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...n,preflightCommitment:gge(n?.preflightCommitment)},chain:this.getActiveChainName()});if(!i)throw new D0e("Empty result");return this.emit("pendingTransaction",void 0),tr.encode(i.signature)}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){const n=this.getWalletFeature(hv),r=this.getAccount(!0),s=this.getActiveChainName();return(await n.signTransaction(...e.map(o=>({transaction:new Uint8Array(this.serializeTransaction(o)),account:r,chain:s})))).map(({signedTransaction:o},a)=>{const c=e[a];if(!c)throw new d5("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),hu(c)?Cc.deserialize(o):nr.from(o)})}async request(e){return Promise.reject(new f5("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const n=this.wallet.accounts[0];if(e&&!n)throw new B0e;return n}getWalletFeature(e){if(!(e in this.wallet.features))throw new f5(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(S5).find(([,n])=>n.id===this.getActiveChain()?.id);if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(Hk).on("change",n=>{if(n.accounts){const r=n.accounts[0];r&&this.emit("accountsChanged",new De(r.publicKey))}})}}const{get:yge,on:x5}=dge();let Da=[];function wge(t,e,n){const r=[x5("register",(...s)=>{Da=[...Da,...I5(s,t,e)],n(...Da)}),x5("unregister",(...s)=>{Da=Da.filter(i=>s.some(o=>o.name===i.wallet.name)),n(...Da)})];return Da=I5(yge(),t,e),n(...Da),()=>r.forEach(s=>s())}function I5(t,e,n){return t.filter(r=>r.name!=="WalletConnect"&&L0e(r)).map(r=>new mge({wallet:r,requestedChains:e,getActiveChain:n}))}const bge=[X.CONNECTOR_ID.AUTH,X.CONNECTOR_ID.WALLET_CONNECT],N5=[{pattern:/Attempt to debit an account but found no record of a prior credit/iu,message:"Not enough SOL to cover fees or rent"},{pattern:/Insufficient funds for fee/iu,message:"Not enough SOL to cover fees or rent"},{pattern:/Transfer: insufficient lamports/iu,message:"Not enough SOL to cover this transfer"}];class Ege extends u_{constructor(e={}){super({adapterType:X.ADAPTER_TYPES.SOLANA,namespace:X.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){super.construct(e);const n=fe.getActiveCaipNetworkId(),s=(e.networks?.find(i=>i.caipNetworkId===n)||e.networks?.[0])?.rpcUrls.default.http[0];s&&$c.setConnection(new Yd(s,this.connectionSettings))}setAuthProvider(e){this.addConnector(new j0e({w3mFrameProvider:e,getActiveChain:()=>V.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(){oe.state.projectId||tn.open(Yt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const e=()=>V.getActiveCaipNetwork(this.namespace);xe.isClient()&&"coinbaseSolana"in window&&this.addConnector(new H0e({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:e})),wge(this.getCaipNetworks(),e,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async writeSolanaTransaction(e){const n=e.provider,r=$c.state.connection;if(!r||!e.provider)throw new Error("Connection is not set");const{blockhash:s,lastValidBlockHeight:i}=await r.getLatestBlockhash(),o=new nr({feePayer:n.publicKey,blockhash:s,lastValidBlockHeight:i});for(const c of e.instructions)o.add(new Xn({keys:c.keys.map(u=>({pubkey:new De(u.pubkey),isSigner:u.isSigner,isWritable:u.isWritable})),programId:new De(c.programId),data:Buffer.from(c.data,"hex")}));const a=await n.sendTransaction(o,r).catch(c=>{if(c instanceof nm){const u=c?.transactionError?.message??c?.message??"",l=c?.logs?.join(" ")??"",d=`${u} ${l}`;for(const{pattern:f,message:h}of N5)if(f.test(d))throw new Error(h)}throw c});return await new Promise(c=>{const u=setInterval(async()=>{(await r.getSignatureStatus(a))?.value&&(clearInterval(u),c())},1e3)}),{hash:a}}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const n=this.connectors.find(r=>r.id===e.id);return n?{accounts:await n.getAccounts()}:{accounts:[]}}async signMessage(e){const n=e.provider;if(!n)throw new Error("connectionControllerClient:signMessage - provider is undefined");const r=await n.signMessage(new TextEncoder().encode(e.message));return{signature:tr.encode(r)}}async estimateGas(e){const n=$c.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const s=await(await C5({provider:e.provider,connection:n,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(n);return{gas:BigInt(s||0)}}async sendTransaction(e){const n=$c.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const r=e.provider,s=e.tokenMint?await oge({provider:r,connection:n,to:e.to,amount:Number(e.value),tokenMint:e.tokenMint}):await C5({provider:r,connection:n,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),i=await r.sendTransaction(s,n).catch(o=>{if(o instanceof nm){const a=o?.transactionError?.message??o?.message??"",c=o?.logs?.join(" ")??"",u=`${a} ${c}`;for(const{pattern:l,message:d}of N5)if(l.test(u))throw new Error(d)}throw o});return await new Promise(o=>{const a=setInterval(async()=>{(await n.getSignatureStatus(i))?.value&&(clearInterval(a),o())},1e3)}),{hash:i}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){const n=this.connectors.find(u=>u.id===e.id);if(!n)throw new Error("Provider not found");const r={...n,...e.id===X.CONNECTOR_ID.AUTH?{provider:n}:{}},s=e.rpcUrl||this.getCaipNetworks()?.find(u=>u.id===e.chainId)?.rpcUrls.default.http[0];if(!s)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const i=this.getConnection({address:e.address,connectorId:n.id,connections:this.connections,connectors:this.connectors});if(i?.account)return this.emit("accountChanged",{address:i.account.address,chainId:i.caipNetwork?.id,connector:r}),{id:n.id,address:i.account.address,chainId:e.chainId,provider:n,type:n.type};const o=await n.connect({chainId:e.chainId,socialUri:e.socialUri});$c.setConnection(new Yd(s,this.connectionSettings)),this.emit("accountChanged",{address:o,chainId:e.chainId,connector:r});const a=n.id===X.CONNECTOR_ID.AUTH,c=this.getCaipNetworks()?.find(u=>u.id===e.chainId);return this.addConnection({connectorId:n.id,accounts:[{address:o}],caipNetwork:c,auth:a?{name:fe.getConnectedSocialProvider(),username:fe.getConnectedSocialUsername()}:void 0}),n.id!==X.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(n.id,n.provider),{id:n.id,address:o,chainId:e.chainId,provider:n,type:n.type}}async getBalance(e){const n=e.address,r=this.getCaipNetworks()?.find(c=>c.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"SOL"});const s=new Yd(r?.rpcUrls?.default?.http?.[0],this.connectionSettings),i=`${r?.caipNetworkId}:${e.address}`,o=this.balancePromises[i];if(o)return o;const a=fe.getNativeBalanceCacheForCaipAddress(i);return a?{balance:a.balance,symbol:a.symbol}:(this.balancePromises[i]=new Promise(async c=>{try{const l=(await s.getBalance(new De(n))/fi.LAMPORTS_PER_SOL).toString();if(fe.updateNativeBalanceCache({caipAddress:i,balance:l,symbol:e.caipNetwork?.nativeCurrency.symbol||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");c({balance:l,symbol:e.caipNetwork?.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){await super.switchNetwork(e);const{caipNetwork:n}=e;n?.rpcUrls?.default?.http?.[0]&&$c.setConnection(new Yd(n.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,n){if(bge.includes(e))return;const r=i=>{this.onAccountsChanged([i.toBase58()],e,!1)},s=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",s),n.on("accountsChanged",r),n.on("connect",r),this.providerHandlers[e]={provider:n,disconnect:s,accountsChanged:r,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;const n=X.CONNECTOR_ID.WALLET_CONNECT;ei.listenWcProvider({universalProvider:e,namespace:X.CHAIN.SOLANA,onConnect:s=>this.onConnect(s,n),onDisconnect:()=>this.onDisconnect(n),onAccountsChanged:s=>this.onAccountsChanged(s,n,!1)});const r=new p5({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>V.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){const{SolanaWalletConnectStandardWallet:s}=await kn(async()=>{const{SolanaWalletConnectStandardWallet:i}=await import("./wallet-standard-CbnPwuJ0.js");return{SolanaWalletConnectStandardWallet:i}},[]);s.register(e)}return this.addConnector(r),Promise.resolve()}async connectWalletConnect(e){const n=await super.connectWalletConnect(e),r=this.getCaipNetworks()?.find(i=>i.id===e)?.rpcUrls.default.http[0],s=new Yd(r,this.connectionSettings);return $c.setConnection(s),n}async disconnect(e){if(e.id){const n=this.connectors.find(s=>s.id===e.id);if(!n)throw new Error("Provider not found");const r=this.connections.find(s=>Zs.isLowerCaseMatch(s.connectorId,e.id));return await n.provider.disconnect(),this.deleteConnection(n.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:r?[r]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect({...e,type:""})}async syncConnections({connectToFirstConnector:e,caipNetwork:n}){await Promise.all(this.connectors.filter(r=>{const{hasDisconnected:s,hasConnected:i}=Zs.getConnectorStorageInfo(r.id,this.namespace);return!s&&i}).map(async r=>{if(r.id===X.CONNECTOR_ID.WALLET_CONNECT){const s=ei.getWalletConnectAccounts(this.universalProvider,this.namespace);s.length>0&&this.addConnection({connectorId:r.id,accounts:s.map(i=>({address:i.address})),caipNetwork:n})}else{const s=await r.connect({chainId:n?.id});s&&(this.addConnection({connectorId:r.id,accounts:[{address:s}],caipNetwork:n}),this.listenSolanaProviderEvents(r.id,r.provider))}})),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new p5({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>V.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async n=>{const r=this.connectors.find(s=>Zs.isLowerCaseMatch(s.id,n.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),n}))}}}let bl=null,Rf=null;function vge(){const t="a63765bbcc440210bdf7234f95c35529";if(t.trim()==="")throw new Error("Missing VITE_REOWN_PROJECT_ID. Create .env.local based on .env.example");return t}function Cge(){if(bl)return bl;const t=vge(),e=[T6,B6,I6,N6,P6,k6,S6,x6,_6,A6,R6,O6,cv,uv],n=[T6,B6,I6,N6,P6,k6,S6,x6,_6,A6,R6,O6,cv,uv];Rf=new Zde({networks:e,projectId:t,chains:n,transports:Object.fromEntries(n.map(s=>[s.id,tf()])),multiInjectedProviderDiscovery:!0});const r=new Ege({networks:["mainnet-beta","devnet","testnet"],projectId:t});return bl=$de({adapters:[Rf,r],networks:e,projectId:t,metadata:{name:"Web3 Wallet Trial",description:"Vue 3 + AppKit Wallet Integration",url:typeof globalThis<"u"&&"location"in globalThis?globalThis.location.origin:"",icons:[typeof globalThis<"u"&&"location"in globalThis?`${globalThis.location.origin}/vite.svg`:""]},features:{analytics:!0,email:!0,socials:!0,emailShowWallets:!0},showWallets:!0}),Rf.syncConnectors().catch(s=>{}),bl}function Of(){if(!bl)throw new Error("AppKit not initialized. Call initAppKit() before using getAppKit().");return bl}function R_(){if(!Rf)throw new Error("WagmiAdapter not initialized. Call initAppKit() first.");return Rf.wagmiConfig}const bd=xD("walletSession",{state:()=>({source:"appkit",status:"idle",chainType:null,account:null,evmChainId:null,solanaNetwork:null,lastError:null,epoch:0,lastUpdatedAt:null,lastConnectedChainType:null}),actions:{async openConnectModal(){try{this.status="connecting",this.lastError=null,await Of().open(),await new Promise(e=>setTimeout(e,500)),await this.syncFromProviders("connect")}catch(t){this.status="error",this.lastError=t instanceof Error?t.message:"Connection failed"}},async disconnect(){try{await Of().disconnect(),this.resetSession()}catch(t){this.status="error",this.lastError=t instanceof Error?t.message:"Disconnect failed"}},async syncFromProviders(t){try{const e=R_(),r=Of().getState(),i=(r.accounts||[]).find(C=>typeof C=="string"?C.startsWith("0x"):(C.address||"").startsWith("0x")),o=Il(e),a=oF(e);let c=null;i?c=typeof i=="string"?i:i.address||null:o.isConnected&&(c=o.address||null);const u=!!c||o.isConnected&&!!o.address,l=r.accounts?.filter(C=>typeof C=="string"?C:C?.address)||[],d=r.selectedNetworkId||"",f=d.startsWith("solana:")&&l.length>0,h=f?l[0]:null;let m=null;f&&d&&(d.includes("devnet")?m="devnet":d.includes("testnet")?m="testnet":m="mainnet-beta");let y=null;u&&f?y=this.lastConnectedChainType||"evm":u?y="evm":f&&(y="solana");const E=y==="evm"?c:y==="solana"?typeof h=="string"?h:h?.address||null:null,S=this.account!==E&&(this.account!==null||E!==null);(this.chainType!==y||S||this.evmChainId!==a||this.solanaNetwork!==m||this.status!==(y?"connected":"idle"))&&(this.chainType=y,y==="evm"?(this.account=c,this.evmChainId=a,this.solanaNetwork=null,u&&(this.lastConnectedChainType="evm")):y==="solana"?(this.account=typeof h=="string"?h:h?.address||null,this.solanaNetwork=m,this.evmChainId=null,f&&(this.lastConnectedChainType="solana")):(this.account=null,this.evmChainId=null,this.solanaNetwork=null),this.status=y?"connected":"idle",this.lastUpdatedAt=Date.now(),(t!=="init"||this.epoch===0)&&this.bumpEpoch())}catch(e){this.status="error",this.lastError=e instanceof Error?e.message:"Failed to sync state"}},resetSession(){this.status="idle",this.chainType=null,this.account=null,this.evmChainId=null,this.solanaNetwork=null,this.lastError=null,this.lastUpdatedAt=Date.now(),this.bumpEpoch()},bumpEpoch(){this.epoch+=1}}});function _ge(t,e=6){return t?t.length<=e*2?t:`${t.slice(0,e)}...${t.slice(-e)}`:""}function Age(){if(typeof globalThis>"u"||!("navigator"in globalThis))return!1;const t=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(t)}const Sge={class:"flex items-center justify-between"},xge={class:"space-y-4"},Ige={class:"space-y-2 rounded-lg bg-slate-900/50 p-4"},Nge={class:"flex items-center justify-between"},Tge={class:"rounded-full bg-blue-500/20 px-2.5 py-1 text-xs font-medium text-blue-300 uppercase"},Rge={class:"flex items-center justify-between"},Oge={class:"font-mono text-sm font-medium text-blue-400"},Pge={key:0,class:"flex items-center justify-between"},kge={class:"text-sm font-medium text-white"},Bge={class:"flex gap-2"},Dge={key:0,class:"rounded-lg border border-yellow-500/30 bg-yellow-500/10 p-3"},Uge={key:0,class:"rounded-lg border border-blue-500/30 bg-blue-500/10 p-3"},Mge={key:2,class:"rounded-lg border border-red-500/30 bg-red-500/20 p-3"},$ge={class:"mb-2 text-sm text-red-300"},Lge=gm({__name:"WalletConnectCard",setup(t){const e=bd(),n=Age(),r=async()=>{await e.openConnectModal()},s=async()=>{await e.disconnect()},i=async()=>{await e.openConnectModal()},o=async()=>{await e.syncFromProviders("manual")},a=Sl(()=>e.account?_ge(e.account):""),c=Sl(()=>e.chainType==="evm"?`Chain ID: ${e.evmChainId}`:e.chainType==="solana"?`Network: ${e.solanaNetwork}`:""),u=Sl(()=>{switch(e.status){case"connected":return"bg-green-500/20 text-green-300 border-green-500/30";case"connecting":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"error":return"bg-red-500/20 text-red-300 border-red-500/30";default:return"bg-slate-500/20 text-slate-300 border-slate-500/30"}});return(l,d)=>(kr(),Mf(W1,null,{header:Ki(()=>[wt("div",Sge,[d[0]||(d[0]=wt("h2",{class:"text-2xl font-semibold text-white"},"Connect Wallet",-1)),wt("span",{class:qh(["rounded-full border px-2.5 py-1 text-xs font-medium uppercase",u.value])},Fc(Ws(e).status),3)])]),default:Ki(()=>[wt("div",xge,[Ws(e).status==="connected"?(kr(),mi(Hr,{key:0},[wt("div",Ige,[wt("div",Nge,[d[1]||(d[1]=wt("span",{class:"text-sm text-slate-400"},"Chain Type:",-1)),wt("span",Tge,Fc(Ws(e).chainType),1)]),wt("div",Rge,[d[2]||(d[2]=wt("span",{class:"text-sm text-slate-400"},"Address:",-1)),wt("span",Oge,Fc(a.value),1)]),c.value?(kr(),mi("div",Pge,[d[3]||(d[3]=wt("span",{class:"text-sm text-slate-400"},"Network:",-1)),wt("span",kge,Fc(c.value),1)])):ef("",!0)]),wt("div",Bge,[rr($p,{variant:"danger",onClick:s},{default:Ki(()=>[...d[4]||(d[4]=[qi(" Disconnect ",-1)])]),_:1}),rr($p,{variant:"ghost",onClick:o,size:"sm"},{default:Ki(()=>[...d[5]||(d[5]=[qi("  Refresh ",-1)])]),_:1})]),Ws(n)?(kr(),mi("div",Dge,[...d[6]||(d[6]=[wt("p",{class:"text-xs text-yellow-300"},'  Mobile Wallet: Nu i account/network trn MetaMask app, click "Refresh" hoc reload trang  cp nht UI. ',-1)])])):ef("",!0)],64)):(kr(),mi(Hr,{key:1},[rr($p,{onClick:r,disabled:Ws(e).status==="connecting"},{default:Ki(()=>[qi(Fc(Ws(e).status==="connecting"?"Connecting...":"Connect"),1)]),_:1},8,["disabled"]),Ws(n)?(kr(),mi("div",Uge,[...d[7]||(d[7]=[wt("p",{class:"mb-2 text-xs font-medium text-blue-300"},"  Hng dn kt ni trn Mobile: ",-1),wt("ol",{class:"ml-4 list-decimal space-y-1 text-xs text-blue-200/80"},[wt("li",null,'Click "Connect"  Modal s m'),wt("li",null,[wt("strong",null,"Scroll ln trn"),qi("  tm "),wt("strong",null,'"WalletConnect"'),qi(" (c icon QR Code) ")]),wt("li",null,[qi(" Hoc dng "),wt("strong",null,'"Search Wallet"'),qi("  tm WalletConnect ")]),wt("li",null,[qi("Chn WalletConnect  "),wt("strong",null,"QR Code s hin th")]),wt("li",null,"Qut QR Code bng wallet app trn in thoi")],-1),wt("p",{class:"mt-2 text-xs text-yellow-300"},"  QR code ch hin th SAU KHI chn wallet, khng t ng hin! ",-1)])])):ef("",!0)],64)),Ws(e).lastError?(kr(),mi("div",Mge,[wt("p",$ge,Fc(Ws(e).lastError),1),rr($p,{variant:"ghost",size:"sm",onClick:i},{default:Ki(()=>[...d[8]||(d[8]=[qi(" Retry ",-1)])]),_:1})])):ef("",!0)])]),_:1}))}}),Fge={class:"space-y-6"},jge=gm({__name:"WalletDashboard",setup(t){return(e,n)=>(kr(),mi("div",Fge,[rr(Lge),rr(W1,null,{default:Ki(()=>[...n[0]||(n[0]=[wt("h2",{class:"mb-2 text-xl font-semibold text-white"}," EVM Wallet (AppKit later) ",-1),wt("p",{class:"text-slate-300"}," EVM wallet integration will be implemented using AppKit in the next step. ",-1)])]),_:1}),rr(W1,null,{default:Ki(()=>[...n[1]||(n[1]=[wt("h2",{class:"mb-2 text-xl font-semibold text-white"}," Solana Wallet (AppKit later) ",-1),wt("p",{class:"text-slate-300"}," Solana wallet integration will be implemented using AppKit in the next step. ",-1)])]),_:1})]))}}),qge=gm({__name:"App",setup(t){return(e,n)=>(kr(),Mf(zF,null,{default:Ki(()=>[rr(jge)]),_:1}))}});let Xd=null,A0=null,S0=null;function zge(){if(Xd)return Xd;const t=R_(),e=bd();return A0=P3(t,{onChange(n){e.syncFromProviders("event")}}),S0=fF(t,{}),Xd=()=>{A0&&(A0(),A0=null),S0&&(S0(),S0=null),Xd=null},Xd}let as=null,al=null;const El=Nv({account:null,network:null});function T5(){try{const e=Of().getState(),n=e.selectedNetworkId||"";if(!n.startsWith("solana:")){as&&(clearInterval(as),as=null,El.value={account:null,network:null});return}const r=e.accounts||[],s=r.length>0?typeof r[0]=="string"?r[0]:r[0]?.address:null,i=n;(El.value.account!==s||El.value.network!==i)&&(El.value={account:s,network:i},bd().syncFromProviders("event"))}catch{as&&(clearInterval(as),as=null)}}function Hge(){if(al)return al;const t=bd();return al=ff(()=>t.status,e=>{e==="connected"&&t.chainType==="solana"?as||(T5(),as=setInterval(T5,1e3)):as&&(clearInterval(as),as=null,El.value={account:null,network:null})},{immediate:!0}),()=>{al&&(al(),al=null),as&&(clearInterval(as),as=null),El.value={account:null,network:null}}}let R5=!1;async function Wge(){if(R5)return;zge(),Hge();const t=Of(),e=bd();t.subscribeState(o=>{o.connected&&o.accounts&&o.accounts.length>0&&e.syncFromProviders("event")}),t.subscribeAccount(o=>{o&&e.syncFromProviders("event")}),t.subscribeConnections(o=>{e.syncFromProviders("event")});let n=null,r=null;setInterval(()=>{if(e.status==="connected"){const o=t.getState(),a=o.accounts?.[0],c=o.selectedNetworkId||null,u=a&&typeof a=="string"?a:a?.address||null;(u!==n||c!==r)&&(n=u,r=c,e.syncFromProviders("event"))}else n=null,r=null},1e3);const s=()=>{const o=typeof globalThis<"u"&&"document"in globalThis?globalThis.document:null;o&&"hidden"in o&&!o.hidden&&e.status==="connected"&&setTimeout(()=>{e.syncFromProviders("event")},500)},i=()=>{e.status==="connected"&&setTimeout(()=>{e.syncFromProviders("event")},500)};typeof globalThis<"u"&&"window"in globalThis&&"document"in globalThis&&(globalThis.document.addEventListener("visibilitychange",s),globalThis.window.addEventListener("focus",i)),R5=!0}Cge();const Vge=R_(),Kge=new JN({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),Ey=yD(qge),Gge=ED();Ey.use(Gge);Ey.use(iU,{queryClient:Kge});Ey.use($F,{config:Vge});const Yge=bd();Yge.syncFromProviders("init");Wge();Ey.mount("#app");export{we as $,aU as A,Lv as B,ZM as C,cU as D,uU as E,lU as F,ome as G,ame as H,KM as I,nT as J,cme as K,dU as L,fU as M,tg as N,hU as O,ume as P,lme as Q,SA as R,HM as S,gU as T,GM as U,yU as V,mU as W,wU as X,bU as Y,dme as Z,bs as _,VM as a,Jf as a$,a3 as a0,O1 as a1,y$ as a2,w$ as a3,UT as a4,Sm as a5,D$ as a6,U$ as a7,M$ as a8,$$ as a9,MA as aA,oh as aB,ih as aC,sh as aD,Qf as aE,nh as aF,gu as aG,ql as aH,Kf as aI,Wf as aJ,Yf as aK,Hl as aL,Vf as aM,Yc as aN,Hf as aO,Xf as aP,Ms as aQ,Gf as aR,oc as aS,Es as aT,lo as aU,zl as aV,Zf as aW,rh as aX,j$ as aY,th as aZ,eh as a_,L$ as aa,FT as ab,sT as ac,rT as ad,Fv as ae,vU as af,CU as ag,_U as ah,L9 as ai,o3 as aj,Qv as ak,j9 as al,Zc as am,mu as an,P1 as ao,U1 as ap,M1 as aq,$1 as ar,D1 as as,k1 as at,B1 as au,ah as av,L1 as aw,Im as ax,yf as ay,Jv as az,WM as b,Ue as b$,zn as b0,x$ as b1,I$ as b2,T$ as b3,R$ as b4,O$ as b5,P$ as b6,$T as b7,LT as b8,k$ as b9,jl as bA,oM as bB,fa as bC,fc as bD,ud as bE,EU as bF,ic as bG,Ln as bH,qf as bI,wT as bJ,nM as bK,Si as bL,rM as bM,sM as bN,Zo as bO,iM as bP,wi as bQ,wme as bR,hc as bS,AU as bT,NU as bU,uo as bV,TU as bW,oT as bX,_m as bY,iT as bZ,Zr as b_,rF as ba,LL as bb,Am as bc,_$ as bd,YA as be,g$ as bf,bT as bg,XT as bh,DT as bi,Gv as bj,mL as bk,m$ as bl,Gh as bm,Gc as bn,mr as bo,pL as bp,eC as bq,tC as br,f3 as bs,tL as bt,y3 as bu,iL as bv,kL as bw,Mr as bx,uye as by,b$ as bz,zM as c,ii as c$,Cm as c0,Xs as c1,pc as c2,z$ as c3,H9 as c4,u3 as c5,C3 as c6,q9 as c7,Qh as c8,c3 as c9,Yh as cA,FL as cB,qt as cC,mwe as cD,V as cE,ot as cF,xe as cG,eo as cH,gwe as cI,ywe as cJ,pwe as cK,yt as cL,oe as cM,F3 as cN,t8 as cO,rt as cP,wwe as cQ,Vn as cR,ir as cS,er as cT,Awe as cU,xwe as cV,Iwe as cW,q0 as cX,vwe as cY,Rde as cZ,Ya as c_,DL as ca,_3 as cb,rye as cc,Jh as cd,_9 as ce,Vh as cf,eL as cg,kT as ch,Vv as ci,p$ as cj,Kv as ck,dL as cl,ig as cm,A3 as cn,D9 as co,B9 as cp,Qs as cq,Xh as cr,iC as cs,vL as ct,CL as cu,w3 as cv,Om as cw,_L as cx,Yv as cy,ys as cz,JM as d,n8 as d$,Xe as d0,_e as d1,X as d2,Dr as d3,hn as d4,oH as d5,tn as d6,gC as d7,me as d8,lye as d9,cT as dA,bme as dB,jv as dC,jf as dD,rg as dE,Fl as dF,ng as dG,Cme as dH,Eme as dI,X9 as dJ,qr as dK,Me as dL,Uz as dM,Yt as dN,Cwe as dO,hh as dP,qn as dQ,ht as dR,Sf as dS,sE as dT,cs as dU,vu as dV,Ei as dW,fd as dX,k0 as dY,fs as dZ,Swe as d_,ch as da,kn as db,Fa as dc,km as dd,Zv as de,x9 as df,vg as dg,os as dh,dc as di,Qge as dj,v$ as dk,Gl as dl,fe as dm,bt as dn,$n as dp,De as dq,tr as dr,nr as ds,Cc as dt,fi as du,ks as dv,aM as dw,Sme as dx,He as dy,We as dz,ld as e,WL as e$,Lt as e0,b7 as e1,sp as e2,Zs as e3,yye as e4,nk as e5,iv as e6,sd as e7,Kt as e8,rme as e9,kme as eA,Pme as eB,Dme as eC,i9 as eD,GT as eE,qme as eF,h9 as eG,YT as eH,zme as eI,FA as eJ,Vme as eK,f9 as eL,hL as eM,S3 as eN,v9 as eO,y9 as eP,t3 as eQ,Xv as eR,sme as eS,og as eT,x3 as eU,Kl as eV,wL as eW,jL as eX,BL as eY,QT as eZ,xme as e_,eme as ea,nme as eb,tme as ec,ti as ed,Nm as ee,C9 as ef,O9 as eg,v3 as eh,Ame as ei,i3 as ej,Kh as ek,Tme as el,Wl as em,Gme as en,Vl as eo,Fme as ep,Lo as eq,VT as er,Ume as es,Jr as et,WT as eu,Wme as ev,jme as ew,Rme as ex,Bme as ey,Ome as ez,YM as f,zL as f0,HL as f1,VL as f2,sC as f3,aw as f4,W9 as f5,oL as f6,iye as f7,l3 as f8,oye as f9,Twe as fA,I6 as fB,N6 as fC,T6 as fD,R6 as fE,O6 as fF,P6 as fG,k6 as fH,B6 as fI,cC as fJ,Zh as fK,FJ as fL,Mu as fM,SJ as fN,twe as fO,xJ as fP,a8 as fQ,cW as fR,uW as fS,W2 as fT,Bm as fU,fH as fV,fh as fW,Ko as fX,rC as fa,aL as fb,P9 as fc,jr as fd,Cg as fe,ec as ff,Qi as fg,cH as fh,Xme as fi,oC as fj,vc as fk,jde as fl,ep as fm,Lde as fn,Fde as fo,Nme as fp,ZT as fq,Kme as fr,Hme as fs,_6 as ft,A6 as fu,S6 as fv,x6 as fw,cv as fx,Nwe as fy,uv as fz,jM as g,O3 as h,aC as i,eF as j,XA as k,tf as l,Tp as m,ime as n,_A as o,PT as p,b9 as q,E9 as r,tF as s,nye as t,sye as u,Rm as v,A$ as w,S$ as x,AA as y,tT as z};
